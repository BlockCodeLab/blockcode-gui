import{render as b0} from"preact";import{useEffect as n3} from"preact/hooks";import{LocalesProvider as y0,EditorProvider as p0,useLocale as u0} from"@blockcode/core";import{useState as A1} from"preact/hooks";import{useLocale as x0,useEditor as j0} from"@blockcode/core";import{classNames as h0,Spinner as g0} from"@blockcode/ui";import{useReducer as O8} from"preact/hooks";function b1(){const[q,B]=O8(C8,a);return{...q,clearLayout(){B({type:x1})},setLayout($){B({type:j1,payload:$})},selectTab($){B({type:h1,payload:$})},addTabs($){B({type:g1,payload:$})}}}var x1="CLEAR_LAYOUT",j1="SET_LAYOUT",h1="SELECT_TAB",g1="ADD_TABS",a={menus:[],tabs:[],sidebars:[],pane:!1,tutorials:!1,canEditProjectName:!1,selectedTabIndex:-1},C8=(q,B)=>{switch(B.type){case x1:return Object.assign({},a);case j1:return Object.assign({},a,B.payload);case h1:return{...q,selectedTabIndex:B.payload};case g1:return{...q,tabs:[...q.tabs,...B.payload]};default:return q}};import{useReducer as _8} from"preact/hooks";function p1(){const[q,B]=_8(L8,P8);return{...q,setAlert($,J=0){if(!$.id)$.id=Date.now().toString(36);if(B({type:y1,payload:$}),J>0)setTimeout(()=>{B({type:s,payload:$.id})},J)},removeAlert($){B({type:s,payload:$})}}}var y1="SET_ALERT",s="REMOVE_ALERT",P8={alerts:[]},L8=(q,B)=>{switch(B.type){case y1:if(q.alerts.find(($)=>$.id===B.payload.id))return{alerts:q.alerts.map(($)=>{if($.id===B.payload.id)return{...$,...B.payload};return $})};return{alerts:[...q.alerts,B.payload]};case s:return{alerts:q.alerts.filter(($)=>$.id!==B.payload)};default:return q}};import{classNames as k8} from"@blockcode/ui";function M(q){const B=globalThis.document,$=B.createElement("style");$.appendChild(B.createTextNode(q)),B.head.append($)}M(".Q6Ho6a_alerts-wrapper{z-index:var(--z-index-alerts);top:calc(var(--menu-bar-height) + var(--space));pointer-events:none;justify-content:center;width:100%;display:flex;position:absolute}.Q6Ho6a_alert-wrapper{pointer-events:all;border-radius:.5rem;flex-direction:row;justify-content:flex-start;min-width:200px;max-width:548px;min-height:1.5rem;margin-bottom:7px;padding:.875rem 1rem;display:flex;overflow:hidden}.Q6Ho6a_warn{background:#fff0df;border:1px solid #ff8c1a;box-shadow:0 0 0 2px #ff8c1a40}.Q6Ho6a_success{background:var(--extensions-light);border:1px solid var(--extensions-tertiary);-webkit-box-shadow:0 0 0 2px #c3efe2;box-shadow:0px 0px 0px 2px var(--extensions-light)}.Q6Ho6a_icon{min-width:1.25rem;min-height:1.25rem;padding-right:1rem;display:flex}.Q6Ho6a_message{color:#555;justify-content:flex-end;align-items:center;padding-right:.5rem;font-size:.8125rem;font-weight:700;line-height:.875rem;display:flex}.Q6Ho6a_buttons{flex-direction:row;display:flex}");var _={success:"Q6Ho6a_success",icon:"Q6Ho6a_icon",buttons:"Q6Ho6a_buttons",alertWrapper:"Q6Ho6a_alert-wrapper",warn:"Q6Ho6a_warn",message:"Q6Ho6a_message",alertsWrapper:"Q6Ho6a_alerts-wrapper"};import{jsx as m} from"preact/jsx-runtime";function t({warn:q,icon:B,message:$,onOk:J,onCancel:v,onClose:Q}){const K=J||v||Q;return m("div",{className:k8(_.alertWrapper,q?_.warn:_.success),children:[m("div",{className:_.icon,children:B}),m("div",{className:_.message,children:$}),K&&m("div",{className:_.buttons})]})}import{jsx as u1} from"preact/jsx-runtime";function e({items:q}){return u1("div",{className:_.alertsWrapper,children:q.map((B)=>u1(t,{mode:B.mode,icon:B.icon,message:B.message}))})}import{useLocale as t8,supportLanguages as e8} from"@blockcode/core";import{classNames as c,Menu as l1,MenuItem as a1,MenuSection as B0,ComingSoon as q0} from"@blockcode/ui";import{cloneElement as h8} from"preact";import{flatChildren as g8} from"@blockcode/core";import{Menu as b8} from"@blockcode/ui";function T(q){Object.assign(d1,q),S8()}var d1={},B1=document.createElement("div"),m1=document.createElement("style");document.body.insertBefore(m1,document.body.firstChild);var T8=(q)=>{return B1.style="",Object.entries(q).forEach(([B,$])=>B1.style[B]=$),B1.style.cssText},S8=()=>{m1.textContent=Object.entries(d1).map(([q,B])=>`${q}{${T8(B)}}`).join("\n")};import{classNames as x8} from"@blockcode/ui";M("._5fP0_a_menu-bar{box-sizing:border-box;height:var(--menu-bar-height);font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:var(--menu-bar-standard-font-size);background-color:var(--motion-primary);color:var(--ui-white);flex-flow:row;justify-content:space-between;font-weight:700;display:flex}._5fP0_a_menu-bar-item{color:var(--ui-white);user-select:none;white-space:nowrap;height:var(--menu-bar-height);align-self:center;align-items:center;padding:0 .25rem;text-decoration:none;display:flex;position:relative}._5fP0_a_menu-bar-item._5fP0_a_growable{max-width:var(--menu-bar-item-max-width);flex:1}._5fP0_a_main-menu{flex-flow:row;flex-grow:1;justify-content:flex-start;align-items:center;display:flex}._5fP0_a_right-menu{flex-flow:row;justify-content:flex-start;align-items:center;display:flex}._5fP0_a_menu-label{padding:0 .75rem}._5fP0_a_language-label{width:var(--language-selector-width);padding:0 .5rem}input._5fP0_a_menu-label{display:none}input._5fP0_a_menu-label+._5fP0_a_menu-bar-item:hover{cursor:pointer;background:var(--ui-black-transparent)}input._5fP0_a_menu-label:checked+._5fP0_a_menu-bar-item{background:var(--ui-black-transparent)}._5fP0_a_menu{top:var(--menu-bar-height);z-index:var(--z-index-menu-bar);border-radius:0 0 var(--space)var(--space);color:var(--ui-white);background:var(--motion-primary);min-width:186px;display:none}._5fP0_a_menu-item{font-weight:700}._5fP0_a_menu-item:hover{background:var(--ui-black-transparent)}._5fP0_a_language-icon{vertical-align:middle;height:1.5rem}._5fP0_a_language-caret{margin:0 .125rem}._5fP0_a_check-icon{margin-right:calc(var(--space)/2);visibility:hidden;width:14px}._5fP0_a_check-icon._5fP0_a_checked{visibility:visible}._5fP0_a_divider{border-right:1px dashed var(--ui-black-transparent);height:34px;margin:0 .5rem}._5fP0_a_hoverable:hover{cursor:pointer;background:var(--ui-black-transparent)}._5fP0_a_tutorials-icon{margin-right:.35rem}._5fP0_a_title-field{border:1px dashed var(--ui-black-transparent);border-radius:var(--form-radius);-webkit-border-radius:var(--form-radius);-moz-border-radius:var(--form-radius);background-color:var(--ui-white-transparent);color:var(--ui-white);-webkit-background-clip:padding-box;background-clip:padding-box;height:auto;padding:.5rem;font-size:.8rem;font-weight:700}._5fP0_a_title-field::placeholder{color:var(--ui-white);font-size:.8rem;font-style:italic;font-weight:400}._5fP0_a_title-field:hover{background-color:#ffffff80}._5fP0_a_title-field:focus{border:1px solid var(--ui-transparent);-webkit-box-shadow:0 0 0 calc(var(--space)*.5)var(--ui-white-transparent);box-shadow:0 0 0 calc(var(--space)*.5)var(--ui-white-transparent);background-color:var(--ui-white);color:var(--text-primary);outline:none}._5fP0_a_home-icon,._5fP0_a_closeIcon{padding:0 .35rem}");var H={checkIcon:"_5fP0_a_check-icon",checked:"_5fP0_a_checked",menuBarItem:"_5fP0_a_menu-bar-item",mainMenu:"_5fP0_a_main-menu",divider:"_5fP0_a_divider",homeIcon:"_5fP0_a_home-icon",menuLabel:"_5fP0_a_menu-label",menuItem:"_5fP0_a_menu-item",menu:"_5fP0_a_menu",growable:"_5fP0_a_growable",rightMenu:"_5fP0_a_right-menu",languageLabel:"_5fP0_a_language-label",hoverable:"_5fP0_a_hoverable",tutorialsIcon:"_5fP0_a_tutorials-icon",closeIcon:"_5fP0_a_closeIcon",titleField:"_5fP0_a_title-field",menuBar:"_5fP0_a_menu-bar",languageIcon:"_5fP0_a_language-icon",languageCaret:"_5fP0_a_language-caret"};import{jsx as q1,Fragment as j8} from"preact/jsx-runtime";function j({id:q,className:B,checked:$,children:J,name:v}){const Q=({target:U})=>{const Z=()=>{U.checked=!1,document.removeEventListener("click",Z)};document.addEventListener("click",Z)},K=(U)=>{const Z=U.getBoundingClientRect().left;T({[`#${q}-menu-${v}`]:{left:`${Z}px`}})},Y=({target:U})=>{if(U.classList.contains(H.menuLabel))K(U);else K(U.parentElement)};return q1(j8,{children:[q1("input",{checked:$,className:H.menuLabel,id:`${q}-label-${v}`,name:`${q}-menu`,type:"radio",value:v,onChange:Q}),q1("label",{className:x8(H.menuLabel,B),for:`${q}-label-${v}`,onClick:Y,children:J})]})}import{jsx as p8,Fragment as y8} from"preact/jsx-runtime";function $1({id:q,children:B}){const $=g8(B).map((J)=>J&&h8(J,{id:q}));return p8(y8,{children:[$.filter((J)=>J.type===j),$.filter((J)=>J.type===b8).map((J)=>{const v=`${q}-label-${J.props.name}`,Q=`${q}-menu-${J.props.name}`;return T({[`#${v}:checked~#${Q}`]:{display:"block"}}),J})]})}import{classNames as d8,Text as m8} from"@blockcode/ui";var r1="./assets/icon-tutorials-bea30e96ac6d0515.svg";import{jsx as y,Fragment as r8} from"preact/jsx-runtime";function J1(){return y(r8,{children:[y("div",{className:H.divider}),y("div",{className:d8(H.menuBarItem,H.hoverable),children:[y("img",{className:H.tutorialsIcon,src:r1}),y(m8,{id:"gui.menuBar.tutorials",defaultMessage:"Tutorials"})]})]})}import{useLocale as O5,useEditor as c8} from"@blockcode/core";import{BufferedInput as i8} from"@blockcode/ui";import{jsx as r,Fragment as o8} from"preact/jsx-runtime";function v1({placeholder:q,defaultValue:B}){const{name:$,setProjectName:J}=c8(),v=(Q)=>{if(Q!==$)J(Q)};return r(o8,{children:[r("div",{className:H.divider}),r("div",{className:H.menuBarItem,children:r(i8,{className:H.titleField,placeholder:q,value:$||B,onSubmit:v})})]})}var c1="./assets/icon-check-31e1ebb988d531c5.svg";var i1="./assets/icon-language-09e82381f5aa1c83.svg";var o1="./assets/icon-dropdown-caret-468cbda14992445e.svg";var n1="./assets/icon-home-235b93cd14083ab2.svg";import{jsx as F,Fragment as $0} from"preact/jsx-runtime";var s1=(q)=>q&&q.map((B,$)=>Array.isArray(B)?F(B0,{children:s1(B)},$):F(a1,{className:H.menuItem,hotkey:B.hotkey,disabled:B.disabled,onDisable:B.onDisable,onLabel:B.onLabel,onClick:B.onClick,children:B.label},$));function Q1({className:q,menus:B,tutorials:$,showHomeButton:J,canEditProjectName:v,onRequestHome:Q}){const{language:K,setLanguage:Y,getText:U}=t8();return F("div",{className:c(H.menuBar,q),children:[F("div",{className:H.mainMenu,children:[F($1,{id:H.mainMenu,children:[F(j,{className:c(H.menuBarItem,H.languageLabel),name:"language-selector",children:[F("img",{className:H.languageIcon,src:i1}),F("img",{className:H.languageCaret,src:o1})]}),F(l1,{className:H.menu,name:"language-selector",children:Array.from(e8.entries()).map(([Z,W])=>F(a1,{className:H.menuItem,onClick:()=>Y(Z),children:[F("img",{className:c(H.checkIcon,{[H.checked]:Z===K}),src:c1}),W.language]},Z))}),B&&B.map(({label:Z,menuItems:W},f)=>F($0,{children:[F(j,{className:H.menuBarItem,name:f,children:Z},f),W&&W.length&&F(l1,{className:H.menu,name:f,children:s1(W)},f)]}))]}),$&&F(q0,{placement:"bottom",children:F(J1,{tutorials:$})}),v&&F(v1,{placeholder:U("gui.menuBar.projectTitlePlaceholder","Project title here"),defaultValue:U("gui.defaultProject.name","BlockCode Project")})]}),F("div",{className:H.rightMenu,children:J&&F("div",{className:c(H.menuBarItem,H.hoverable),onClick:Q,children:F("img",{className:H.homeIcon,src:n1})})})]})}import{cloneElement as U0} from"preact";import{flatChildren as X0} from"@blockcode/core";import{classNames as K0} from"@blockcode/ui";import{classNames as J0} from"@blockcode/ui";M("._9ZXohG_tabs-wrapper{white-space:nowrap;position:relative}._9ZXohG_tab-label{--line-height:calc(var(--tool-bar-height)*.8 - 2px);--margin-top:calc(var(--tool-bar-height)*.2 + 1px);font-weight:500;font-size:var(--standard-font-size);line-height:var(--line-height);border:1px solid var(--ui-black-transparent);background:var(--ui-tertiary);color:var(--text-primary-transparent);margin-top:var(--margin-top);white-space:nowrap;border-radius:1rem 1rem 0 0;justify-content:center;padding:0 1.25rem;display:inline-flex;position:relative}._9ZXohG_tab-label:nth-of-type(n+2){margin-left:calc(-1*var(--space))}._9ZXohG_tab-label:last-of-type{margin-right:var(--space)}._9ZXohG_tab-label:hover{cursor:pointer;background:var(--ui-primary)}._9ZXohG_tab-label img{filter:grayscale();width:1.375rem}._9ZXohG_tab{display:none}._9ZXohG_tab:checked+._9ZXohG_tab-label{--scale:var(--space)/2;line-height:calc(var(--line-height) + var(--scale));margin-top:calc(var(--margin-top) - var(--scale));color:var(--motion-primary);background:var(--ui-white)}._9ZXohG_tab:checked+._9ZXohG_tab-label img{filter:none}._9ZXohG_tab-panel{top:var(--tool-bar-height);height:calc(100% - var(--tool-bar-height));border:1px solid var(--ui-black-transparent);border-radius:0 var(--space)var(--space)var(--space);flex-direction:column;width:100%;display:none;position:absolute;bottom:0}");var O={tabLabel:"_9ZXohG_tab-label",tab:"_9ZXohG_tab",tabsWrapper:"_9ZXohG_tabs-wrapper",tabPanel:"_9ZXohG_tab-panel"};import{jsx as H1,Fragment as v0} from"preact/jsx-runtime";function p({id:q,className:B,checked:$,children:J,name:v,onSelect:Q}){return H1(v0,{children:[H1("input",{checked:$,className:O.tab,id:`${q}-tab-${v}`,name:`${q}-tab`,type:"radio",value:v}),H1("label",{className:J0(O.tabLabel,B),for:`${q}-tab-${v}`,onClick:Q,children:J})]})}import{classNames as Q0} from"@blockcode/ui";import{jsx as H0} from"preact/jsx-runtime";function u({id:q,className:B,name:$,children:J}){return H0("div",{className:Q0(O.tabPanel,B),id:`${q}-panel-${$}`,children:J})}import{jsx as z0} from"preact/jsx-runtime";function U1({id:q,className:B,children:$}){const J=X0($).filter((v)=>v).map((v)=>U0(v,{id:q}));return T({[`.${O.tab}:checked+.${O.tabLabel}`]:{zIndex:`${J.length+1}`}}),z0("div",{className:K0(O.tabsWrapper,B),children:[J.filter((v)=>v.type===p).map((v,Q,K)=>{return T({[`.${O.tabLabel}:nth-of-type(${Q+1})`]:{zIndex:`${K.length-Q}`}}),v}),J.filter((v)=>v.type===u).map((v)=>{const Q=`${q}-tab-${v.props.name}`,K=`${q}-panel-${v.props.name}`;return T({[`#${Q}:checked~#${K}`]:{display:"flex"}}),v})]})}import{classNames as D0} from"@blockcode/ui";M("._2wx-CG_pane-wrapper{flex-direction:column;display:flex;position:relative}._2wx-CG_pane{display:none}._2wx-CG_pane-header{background:var(--ui-white);padding:calc(var(--space)/2);text-align:center;color:var(--text-primary);cursor:pointer;border:1px solid var(--ui-black-transparent);border-radius:var(--space)var(--space)0 0;flex:1;font-size:.85rem}._2wx-CG_pane-left ._2wx-CG_pane-header{border-top-left-radius:0}._2wx-CG_pane-right ._2wx-CG_pane-header{border-top-right-radius:0}._2wx-CG_pane-content{border-left:1px solid var(--ui-black-transparent);border-right:1px solid var(--ui-black-transparent);min-height:5.5rem;display:none;position:relative}._2wx-CG_pane-left ._2wx-CG_pane-content{border-left:0}._2wx-CG_pane-right ._2wx-CG_pane-content{border-right:0}._2wx-CG_pane:checked~._2wx-CG_pane-content{display:flex}");var S={paneContent:"_2wx-CG_pane-content",pane:"_2wx-CG_pane",paneRight:"_2wx-CG_pane-right",paneWrapper:"_2wx-CG_pane-wrapper",paneHeader:"_2wx-CG_pane-header",paneLeft:"_2wx-CG_pane-left"};import{jsx as i} from"preact/jsx-runtime";function X1({className:q,id:B,title:$,left:J,right:v,children:Q}){return i("div",{className:D0(S.paneWrapper,q,{[S.paneLeft]:J,[S.paneRight]:v}),children:[i("input",{id:`${B}-pane`,type:"checkbox",className:S.pane}),i("label",{className:S.paneHeader,for:`${B}-pane`,children:$}),i("div",{className:S.paneContent,children:Q})]})}import{useEffect as F0,useRef as Z0,useState as G0} from"preact/hooks";import{classNames as t1,Text as K1,BufferedInput as M0,Button as e1,Modal as V0} from"@blockcode/ui";M("._6MC08G_prompt-modal{width:360px}._6MC08G_prompt-wide-modal{width:600px}._6MC08G_prompt-content{background:var(--ui-white);padding:1.5rem 2.25rem}._6MC08G_label{margin:0 0 1.5rem;font-weight:500}._6MC08G_label._6MC08G_input-label{margin-bottom:.75rem}._6MC08G_content{font-size:var(--standard-font-size);color:var(--text-primary);max-height:400px;margin-bottom:1.5rem;overflow:hidden auto}._6MC08G_name-text-input{border:1px solid var(--ui-black-transparent);color:var(--text-primary-transparent);border-radius:5px;width:100%;height:3rem;margin-bottom:1.5rem;padding:0 1rem;font-size:.875rem}._6MC08G_button-row{text-align:right;font-weight:bolder}._6MC08G_button{padding:.75rem 1rem;font-size:.85rem;font-weight:600}._6MC08G_ok-button{background:var(--motion-primary);border:var(--motion-primary);color:var(--ui-white);margin-left:var(--space)}");var A={promptWideModal:"_6MC08G_prompt-wide-modal",buttonRow:"_6MC08G_button-row",button:"_6MC08G_button",okButton:"_6MC08G_ok-button",label:"_6MC08G_label",inputLabel:"_6MC08G_input-label",nameTextInput:"_6MC08G_name-text-input",promptContent:"_6MC08G_prompt-content",promptModal:"_6MC08G_prompt-modal",content:"_6MC08G_content"};import{jsx as E} from"preact/jsx-runtime";function z1({title:q,label:B,content:$,inputMode:J,defaultValue:v,onClose:Q,onSubmit:K}){const Y=Z0(),[U,Z]=G0(v),W=()=>{K(U)},f=(P)=>{if(P.key==="Escape")Q();if(P.key==="Enter")K(Y.current.base.value)};return F0(()=>{if(Y.current)Y.current.base.focus();return window.addEventListener("keydown",f),()=>{window.removeEventListener("keydown",f)}},[Y]),E(V0,{title:q,className:$?A.promptWideModal:A.promptModal,onClose:Q,children:E("div",{className:A.promptContent,children:[B&&E("div",{className:t1(A.label,{[A.inputLabel]:J}),children:B}),J&&E(M0,{autoFocus:!0,forceFocus:!0,ref:Y,className:A.nameTextInput,defaultValue:v,onSubmit:Z}),$&&E("div",{className:A.content,dangerouslySetInnerHTML:{__html:$}}),E("div",{className:A.buttonRow,children:[E(e1,{className:A.button,onClick:Q,children:K?E(K1,{id:"gui.prompt.cancel",defaultMessage:"Cancel"}):E(K1,{id:"gui.prompt.close",defaultMessage:"Close"})}),K&&E(e1,{className:t1(A.button,A.okButton),onClick:W,children:E(K1,{id:"gui.prompt.ok",defaultMessage:"OK"})})]})]})})}import{useState as F8,useEffect as A0} from"preact/hooks";import{useLocale as R0,useEditor as E0} from"@blockcode/core";import{classNames as o,Text as d,ContextMenu as O0,LibraryItem as Z8} from"@blockcode/ui";import{jsx as CB} from"preact/jsx-runtime";import{Text as D1} from"@blockcode/ui";var B8="./assets/micropython-37858e364e56fdb3.png";import{jsx as F1} from"preact/jsx-runtime";var q8={disabled:!0,package:"micropython",image:B8,name:F1(D1,{id:"gui.workspace.micropython.name",defaultMessage:"MicroPython"}),description:F1(D1,{id:"gui.workspace.micropython.description",defaultMessage:"Write magical code that controls everything."}),collaborator:F1(D1,{id:"gui.workspace.micropython.collaborator",defaultMessage:"BlockCode Lab"}),micropythonRequired:!0};import{Text as Z1} from"@blockcode/ui";var $8="./assets/blocks-2e7292fb2e03b834.png";import{jsx as G1} from"preact/jsx-runtime";var J8={disabled:!0,package:"blocks",image:$8,name:G1(Z1,{id:"gui.workspace.blocks.name",defaultMessage:"Blocks"}),description:G1(Z1,{id:"gui.workspace.blocks.description",defaultMessage:"A wonderful world of building blocks."}),collaborator:G1(Z1,{id:"gui.workspace.blocks.collaborator",defaultMessage:"BlockCode Lab"}),blocksRequired:!0};import{Text as M1} from"@blockcode/ui";var v8="./assets/popsicle-77fd7ef38a71f59a.png";import{jsx as V1} from"preact/jsx-runtime";var Q8={disabled:!0,package:"popsicle",image:v8,name:V1(M1,{id:"gui.workspace.popsicle.name",defaultMessage:"Popsicle"}),description:V1(M1,{id:"gui.workspace.popsicle.description",defaultMessage:"The equipment can play with the real world."}),collaborator:V1(M1,{id:"gui.workspace.popsicle.collaborator",defaultMessage:"BlockCode Lab"}),blocksRequired:!0};import{Text as f1} from"@blockcode/ui";var H8="./assets/tankwar-5fe36c5419aed340.png";import{jsx as Y1} from"preact/jsx-runtime";var U8={preview:!0,package:"tankwar",image:H8,name:Y1(f1,{id:"gui.workspace.tankwar.name",defaultMessage:"Tank War"}),description:Y1(f1,{id:"gui.workspace.tankwar.description",defaultMessage:"Program your tank and go to battle!"}),collaborator:Y1(f1,{id:"gui.workspace.tankwar.collaborator",defaultMessage:"Yeqin Gong"}),blocksRequired:!0};import{Text as w1} from"@blockcode/ui";var X8="./assets/picoed-ac53eee4bd9964c7.png";import{jsx as N1} from"preact/jsx-runtime";var K8={disabled:!0,package:"picoed",image:X8,name:N1(w1,{id:"gui.workspace.picoed.name",defaultMessage:"ELECFREAKS Pico:ed V2"}),description:N1(w1,{id:"gui.workspace.picoed.description",defaultMessage:"Small board, endless possibilities."}),collaborator:N1(w1,{id:"gui.workspace.picoed.collaborator",defaultMessage:"Yeqin Gong"}),blocksRequired:!0};var z8=[q8,J8,Q8,U8,K8];M("._9ETYwa_workspace-wrapper{background:var(--ui-secondary);top:var(--menu-bar-height);height:calc(100% - var(--menu-bar-height));z-index:calc(var(--z-index-alerts) - 10);user-select:none;width:100%;position:absolute;overflow:hidden auto}._9ETYwa_getting-started{height:200px;margin-bottom:1.5rem}._9ETYwa_link{cursor:pointer;color:var(--motion-primary)}._9ETYwa_view-all{font-weight:400;font-size:var(--standard-font-size);margin-left:1.5rem}._9ETYwa_delete-menu-item:hover{background:var(--error-primary)}._9ETYwa_footer{color:var(--text-primary);font-size:var(--small-font-size);padding:3.5rem 0 var(--space);text-align:center}._9ETYwa_footer-item{padding:0 var(--space)}._9ETYwa_footer-item:not(:first-child){border-left:1px solid var(--ui-black-transparent)}._9ETYwa_library-scroll-grid{background:var(--ui-secondary);height:calc(100% - var(--library-header-height));flex-wrap:wrap;flex-grow:1;place-content:flex-start;align-items:flex-start;height:auto;padding:.5rem;display:flex;overflow-y:auto}._9ETYwa_library-label{color:var(--text-primary);padding:1.5rem calc(.5rem + var(--space)).5rem;font-weight:500}");var V={gettingStarted:"_9ETYwa_getting-started",workspaceWrapper:"_9ETYwa_workspace-wrapper",footerItem:"_9ETYwa_footer-item",footer:"_9ETYwa_footer",deleteMenuItem:"_9ETYwa_delete-menu-item",viewAll:"_9ETYwa_view-all",link:"_9ETYwa_link",libraryScrollGrid:"_9ETYwa_library-scroll-grid",libraryLabel:"_9ETYwa_library-label"};var D8="0.1.0";import{jsx as D,Fragment as C0} from"preact/jsx-runtime";var G8=7;function I1({onOpenWorkspace:q,onOpenProject:B,onRequestStoreLibrary:$,onRequestPrompt:J}){const[v,Q]=F8([]),[K,Y]=F8(0),{getText:U}=R0(),{listProjects:Z,getProject:W,renameProject:f,duplicateProject:P,deleteProject:w}=E0(),R=async()=>{const X=await Z();Q(X.sort((N,C)=>C.modifiedDate-N.modifiedDate).filter((N,C)=>C<G8).map((N)=>({key:N.key,name:N.name||`${U("gui.defaultProject.shortname","Project")} [${N.key.toUpperCase()}]`,image:N.image}))),Y(X.length)};return A0(R,[]),D("div",{className:V.workspaceWrapper,children:[v.length>0&&D(C0,{children:[D("div",{className:V.libraryLabel,children:[D("span",{children:D(d,{id:"gui.workspace.myprojects",defaultMessage:"My projects"})}),K>G8&&D("span",{className:o(V.viewAll,V.link),onClick:$,children:D(d,{id:"gui.workspace.allprojects",defaultMessage:"View all ({counts})",counts:K})})]}),D("div",{className:V.libraryScrollGrid,children:v.map((X,N)=>D(O0,{menuItems:[[{label:U("gui.projects.contextMenu.rename","rename"),onClick:()=>{J({title:U("gui.projects.contextMenu.rename","rename"),label:U("gui.menuBar.projectTitlePlaceholder","Project title here"),inputMode:!0,defaultValue:X.name,onSubmit:async(C)=>{if(C)await f(X.key,C),R()}})}},{label:U("gui.projects.contextMenu.duplicate","duplicate"),onClick:async()=>{await P(X.key),R()}}],[{label:U("gui.projects.contextMenu.delete","delete"),className:V.deleteMenuItem,onClick:async()=>{await w(X.key),R()}}]],children:D(Z8,{id:N,name:X.name,image:X.image,onSelect:async()=>B(await W(X.key))})},N))})]}),D("div",{className:V.libraryLabel,children:D(d,{id:"gui.workspace.newproject",defaultMessage:"Create new project"})}),D("div",{className:V.libraryScrollGrid,children:z8.map((X,N)=>D(Z8,{featured:!0,id:N,preview:X.preview,disabled:X.disabled,image:X.image,name:X.name,description:X.description,collaborator:X.collaborator,blocksRequired:X.blocksRequired,micropythonRequired:X.micropythonRequired,onSelect:X.disabled?null:()=>q(X.package)},N))}),D("div",{className:V.footer,children:[D("span",{className:o(V.footerItem,V.link),onClick:()=>window.open("https://lab.blockcode.fun/","_blank"),children:"BlockCode Lab"}),D("span",{className:o(V.footerItem,V.link),onClick:()=>{J({title:U("gui.terms","Terms of Use"),content:U("gui.terms.content","Terms of Use")})},children:D(d,{id:"gui.terms",defaultMessage:"Terms of Use"})}),D("span",{className:o(V.footerItem,V.link),onClick:()=>{J({title:U("gui.privacy","Privacy"),content:U("gui.privacy.content","Privacy")})},children:D(d,{id:"gui.privacy",defaultMessage:"Privacy"})}),D("span",{className:V.footerItem,children:["v",D8]})]})]})}import{useEffect as _0,useState as P0} from"preact/hooks";import{useLocale as L0,useEditor as k0} from"@blockcode/core";import{Library as T0} from"@blockcode/ui";M(".xCtYqW_delete-menu-item:hover{background:var(--error-primary)}");var M8={deleteMenuItem:"xCtYqW_delete-menu-item"};import{jsx as S0} from"preact/jsx-runtime";function W1({onRequestPrompt:q,onOpenProject:B,onClose:$}){const[J,v]=P0([]),{getText:Q}=L0(),{listProjects:K,getProject:Y,renameProject:U,duplicateProject:Z,deleteProject:W}=k0(),f=async()=>{const P=await K();v(P.sort((w,R)=>R.modifiedDate-w.modifiedDate).map((w)=>({name:w.name||`${Q("gui.defaultProject.shortname","Project")} [${w.key.toUpperCase()}]`,image:w.image,onSelect:async()=>B(await Y(w.key)),contextMenu:[[{label:Q("gui.projects.contextMenu.rename","rename"),onClick:()=>{q({title:Q("gui.projects.contextMenu.rename","rename"),label:Q("gui.menuBar.projectTitlePlaceholder","Project title here"),inputMode:!0,defaultValue:w.name,onSubmit:async(R)=>{if(R)await U(w.key,R),f()}})}},{label:Q("gui.projects.contextMenu.duplicate","duplicate"),onClick:async()=>{await Z(w.key),f()}}],[{label:Q("gui.projects.contextMenu.delete","delete"),className:M8.deleteMenuItem,onClick:async()=>{await W(w.key),f()}}]]})))};return _0(f,[]),S0(T0,{items:J,emptyText:Q("gui.projects.empty","No project!"),onClose:$})}M(".vaiNuG_gui-wrapper{height:100%}.vaiNuG_alerts-container{z-index:var(--z-index-alerts);margin-top:calc(var(--menu-bar-height) + var(--space));pointer-events:none;justify-content:center;width:100%;display:flex;position:absolute}.vaiNuG_menu-bar-position{z-index:var(--z-index-menu-bar);position:relative}.vaiNuG_body-wrapper{height:calc(100% - var(--menu-bar-height));background:var(--ui-primary)}.vaiNuG_body-wrapper *{box-sizing:border-box}.vaiNuG_workspace-wrapper{flex-direction:row;height:100%;display:flex;overflow-y:hidden}.vaiNuG_sidebar-wrapper{margin:0 var(--space);display:flex;position:relative}.vaiNuG_editor-wrapper{flex-direction:column;flex-grow:1;flex-shrink:0;display:flex;position:relative}.vaiNuG_tabs-wrapper{flex-grow:1;position:relative}.vaiNuG_tab-panel-left{border-bottom-left-radius:0}.vaiNuG_tab-panel-right{border-top-right-radius:0;border-bottom-right-radius:0}.vaiNuG_tab-panel-bottom{border-bottom-right-radius:0;border-bottom-left-radius:0}.vaiNuG_pane-wrapper{margin:var(--space)0 0 0;display:flex;position:relative}");var I={tabsWrapper:"vaiNuG_tabs-wrapper",editorWrapper:"vaiNuG_editor-wrapper",alertsContainer:"vaiNuG_alerts-container",menuBarPosition:"vaiNuG_menu-bar-position",bodyWrapper:"vaiNuG_body-wrapper",tabPanelBottom:"vaiNuG_tab-panel-bottom",tabPanelRight:"vaiNuG_tab-panel-right",paneWrapper:"vaiNuG_pane-wrapper",workspaceWrapper:"vaiNuG_workspace-wrapper",tabPanelLeft:"vaiNuG_tab-panel-left",guiWrapper:"vaiNuG_gui-wrapper",sidebarWrapper:"vaiNuG_sidebar-wrapper"};import{jsx as z,Fragment as V8} from"preact/jsx-runtime";function R1(){const[q,B]=A1(null),[$,J]=A1(!1),[v,Q]=A1(!1),{menus:K,tabs:Y,sidebars:U,pane:Z,tutorials:W,canEditProjectName:f,selectedTabIndex:P,selectTab:w,setLayout:R,clearLayout:X}=b1(),{alerts:N,setAlert:C,removeAlert:E1}=p1(),{addLocaleData:w8,getText:x}=x0(),{editor:h,setEditor:N8,openProject:O1,closeProject:C1,modified:_1}=j0(),P1=()=>J(!0),I8=()=>J(!1);if(!h||!h.package)P1();const L1=()=>Q(!0),k1=()=>Q(!1);let g,b;U.forEach((G)=>{if(G.expand==="right")b=G.Content;else g=G.Content});const l=Z.Content,W8=h0({[I.tabPanelLeft]:!g,[I.tabPanelRight]:!b,[I.tabPanelBottom]:!l}),A8=(...G)=>{q.onSubmit&&q.onSubmit(...G),B(null)},R8=()=>{q.onClose&&q.onClose(),B(null)},T1=(G,L=O1)=>{C({id:G,icon:z(g0,{level:"success"}),message:x("gui.alert.importing","importing...")}),import(`@blockcode/workspace-${G}`).then(({default:k})=>{k({addLocaleData:w8,getText:x,setLayout:R,openStoreLibrary:L1,closeStoreLibrary:k1,setPrompt:B,setAlert:C,removeAlert:E1,openProject:L}),w(0),N8({package:G}),I8(),E1(G)})},S1=(G)=>{const L=()=>{O1(G),k1()};if(!h||!h.package||h.package!==G.editor.package){C1(),T1(G.editor.package,L);return}if(_1)B({title:x("gui.projects.notSaved","Not saved"),label:x("gui.projects.replaceProject","Replace contents of the current project?"),onSubmit:L});else L()},E8=()=>{const G=()=>{X(),C1(),P1()};if(_1)B({title:x("gui.projects.notSaved","Not saved"),label:x("gui.projects.closeProject","Close current project?"),onSubmit:G});else G()};return z(V8,{children:[z(e,{items:N}),z(Q1,{className:I.menuBarPosition,menus:K,tutorials:W,showHomeButton:!$,canEditProjectName:f,onRequestHome:E8}),z("div",{className:I.bodyWrapper,children:[z("div",{className:I.workspaceWrapper,children:[g&&z("div",{className:I.sidebarWrapper,children:z(g,{})}),z("div",{className:I.editorWrapper,children:[z(U1,{id:I.tabsWrapper,className:I.tabsWrapper,children:Y.map(({Content:G,...L},k)=>z(V8,{children:[z(p,{checked:k===P,name:k,onSelect:()=>w(k),children:[z("img",{src:L.icon}),L.label]},k),z(u,{className:W8,name:k,children:z(G,{})},k)]}))}),l&&z(X1,{id:I.paneWrapper,className:I.paneWrapper,title:Z.label,right:!b,left:!g,children:z(l,{})})]}),b&&z("div",{className:I.sidebarWrapper,children:z(b,{})})]}),$&&z(I1,{onRequestPrompt:B,onRequestStoreLibrary:L1,onOpenWorkspace:T1,onOpenProject:S1})]}),v&&z(W1,{onRequestPrompt:B,onOpenProject:S1,onClose:()=>Q(!1)}),q&&z(z1,{title:q.title,label:q.label,content:q.content,inputMode:q.inputMode,defaultValue:q.defaultValue,onClose:R8,onSubmit:q.onSubmit?A8:!1})]})}var f8={"gui.comingSoon":"Coming Soon!","gui.modal.back":"Back","gui.alert.importing":"importing...","gui.library.comingSoon":"Coming Soon","gui.library.preview":"Preview","gui.library.requires":"Requires","gui.library.programming":"Programming","gui.library.collaboration":"Collaboration","gui.menuBar.tutorials":"Tutorials","gui.menuBar.projectTitlePlaceholder":"Project title here","gui.defaultProject.name":"BlockCode Project","gui.defaultProject.shortname":"Project","gui.projects.empty":"No project!","gui.projects.notSaved":"Not saved","gui.projects.replaceProject":"Replace contents of the current project?","gui.projects.closeProject":"Close current project?","gui.projects.contextMenu.rename":"rename","gui.projects.contextMenu.duplicate":"duplicate","gui.projects.contextMenu.delete":"delete","gui.prompt.close":"Close","gui.prompt.cancel":"Cancel","gui.prompt.ok":"OK","gui.workspace.myprojects":"My projects","gui.workspace.allprojects":"View all ({counts})","gui.workspace.newproject":"Create new project","gui.workspace.micropython.name":"MicroPython","gui.workspace.micropython.description":"Write magical code that controls everything.","gui.workspace.micropython.collaborator":"BlockCode Lab","gui.workspace.blocks.name":"Blocks","gui.workspace.blocks.description":"A wonderful world of building blocks.","gui.workspace.blocks.collaborator":"BlockCode Lab","gui.workspace.popsicle.name":"Popsicle","gui.workspace.popsicle.description":"The equipment can play with the real world.","gui.workspace.popsicle.collaborator":"BlockCode Lab","gui.workspace.tankwar.name":"Tank War","gui.workspace.tankwar.description":"Program your tank and go to battle!","gui.workspace.tankwar.collaborator":"Yeqin Gong","gui.workspace.picoed.name":"ELECFREAKS Pico:ed V2","gui.workspace.picoed.description":"Small board, endless possibilities.","gui.workspace.picoed.collaborator":"Yeqin Gong","gui.terms":"Terms of Use","gui.terms.content":"<b>Terms of Use</b>\n","gui.privacy":"Privacy","gui.privacy.content":"<b>Privacy</b>\n"};var Y8={"gui.comingSoon":"\u656C\u8BF7\u671F\u5F85\uFF01","gui.modal.back":"\u8FD4\u56DE","gui.alert.importing":"\u8F7D\u5165\u4E2D\u2026","gui.library.comingSoon":"\u656C\u8BF7\u671F\u5F85","gui.library.preview":"\u9884\u89C8\u7248","gui.library.requires":"\u7CFB\u7EDF\u9700\u6C42","gui.library.programming":"\u7F16\u7A0B\u8BED\u8A00","gui.library.collaboration":"\u5408\u4F5C\u8005","gui.menuBar.tutorials":"\u6559\u7A0B","gui.menuBar.projectTitlePlaceholder":"\u5728\u6B64\u586B\u5199\u4F5C\u54C1\u6807\u9898","gui.defaultProject.name":"BlockCode \u4F5C\u54C1","gui.defaultProject.shortname":"\u4F5C\u54C1","gui.projects.empty":"\u6CA1\u6709\u4F5C\u54C1\uFF01","gui.projects.notSaved":"\u672A\u4FDD\u5B58\u4F5C\u54C1","gui.projects.replaceProject":"\u8981\u521B\u5EFA\u65B0\u4F5C\u54C1\u66FF\u6362\u5F53\u524D\u4F5C\u54C1\u5417\uFF1F","gui.projects.closeProject":"\u8981\u5173\u95ED\u5F53\u524D\u4F5C\u54C1\u5417\uFF1F","gui.projects.contextMenu.rename":"\u91CD\u547D\u540D","gui.projects.contextMenu.duplicate":"\u590D\u5236","gui.projects.contextMenu.delete":"\u5220\u9664","gui.prompt.close":"\u5173\u95ED","gui.prompt.cancel":"\u53D6\u6D88","gui.prompt.ok":"\u786E\u8BA4","gui.workspace.myprojects":"\u6211\u7684\u4F5C\u54C1","gui.workspace.allprojects":"\u67E5\u770B\u5168\u90E8\uFF08{counts}\uFF09","gui.workspace.newproject":"\u5F00\u59CB\u65B0\u4F5C\u54C1","gui.workspace.micropython.name":"MicroPython","gui.workspace.micropython.description":"\u7F16\u5199\u63A7\u5236\u4E07\u7269\u7684\u795E\u5947\u4EE3\u7801\u3002","gui.workspace.micropython.collaborator":"BlockCode Lab","gui.workspace.blocks.name":"Blocks","gui.workspace.blocks.description":"\u79EF\u6728\u642D\u8D77\u7684\u5947\u5999\u7A0B\u5E8F\u4E16\u754C\u3002","gui.workspace.blocks.collaborator":"BlockCode Lab","gui.workspace.popsicle.name":"Popsicle","gui.workspace.popsicle.description":"\u624B\u91CC\u7684\u5C0F\u8BBE\u5907\uFF0C\u73A9\u8F6C\u771F\u5B9E\u7684\u5927\u4E16\u754C\u3002","gui.workspace.popsicle.collaborator":"BlockCode Lab","gui.workspace.tankwar.name":"\u5766\u514B\u5927\u6218","gui.workspace.tankwar.description":"\u4E3A\u4F60\u7684\u5766\u514B\u7F16\u7A0B\uFF0C\u7136\u540E\u53BB\u6218\u6597\uFF01","gui.workspace.tankwar.collaborator":"\u9F9A\u4E1A\u52E4","gui.workspace.picoed.name":"\u6069\u5B5A\u79D1\u6280 Pico:ed V2","gui.workspace.picoed.description":"\u5C0F\u5C0F\u5F00\u53D1\u677F\uFF0C\u521B\u9020\u65E0\u9650\u53EF\u80FD\u3002","gui.workspace.picoed.collaborator":"\u9F9A\u4E1A\u52E4","gui.terms":"\u4F7F\u7528\u6761\u6B3E","gui.terms.content":`<b>\u4F7F\u7528\u6761\u6B3E</b>
`,"gui.privacy":"\u9690\u79C1","gui.privacy.content":`<b>\u9690\u79C1</b>
`};var d0=function(){const{addLocaleData:q,language:B}=u0();return q({en:f8,"zh-Hans":Y8}),document.querySelector("html").lang=B,n(y0,{children:n(p0,{children:n(R1,{})})})};import{jsx as n} from"preact/jsx-runtime";b0(n(d0,{}),document.getElementById("root"));
