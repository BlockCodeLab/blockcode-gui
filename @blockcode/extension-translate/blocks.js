import"@blockcode/aisdks";import{Text as n}from"@blockcode/ui";var l={en:{"extension.translate.name":"Translate","extension.translate.openplatform":"iFLYTEK Open Platform authorization","extension.translate.openplatform.description1":"Please register your own ","extension.translate.openplatform.description2":"iFLYTEK Open Platform (Chinese)","extension.translate.openplatform.description3":" account, the test account we provide does not guarantee that every","extension.translate.translate":"translate [WORDS] to [LANGUAGE]","extension.translate.hello":"hello","extension.translate.english":"English","extension.translate.chinese.simplified":"Chinese (Simplified)","extension.translate.chinese.traditional":"Chinese (Traditional)","extension.translate.japanese":"Japanese","extension.translate.languageOf":"language of [WORDS]","extension.translate.language":"language"},"zh-Hans":{"extension.translate.name":"\u7FFB\u8BD1","extension.translate.openplatform":"\u8BAF\u98DE\u5F00\u653E\u5E73\u53F0\u8BA4\u8BC1\u4FE1\u606F","extension.translate.openplatform.description1":"\u8BF7\u6CE8\u518C\u60A8\u81EA\u5DF1\u7684","extension.translate.openplatform.description2":"\u8BAF\u98DE\u5F00\u653E\u5E73\u53F0","extension.translate.openplatform.description3":"\u8D26\u53F7\uFF0C\u6211\u4EEC\u63D0\u4F9B\u7684\u6D4B\u8BD5\u8D26\u53F7\u4E0D\u4FDD\u8BC1\u6BCF\u6B21\u8BF7\u6C42\u90FD\u6210\u529F\u3002","extension.translate.translate":"\u5C06 [WORDS] \u8BD1\u4E3A [LANGUAGE]","extension.translate.hello":"\u4F60\u597D","extension.translate.english":"\u82F1\u6587","extension.translate.chinese.simplified":"\u7B80\u4F53\u4E2D\u6587","extension.translate.chinese.traditional":"\u7E41\u4F53\u4E2D\u6587","extension.translate.japanese":"\u65E5\u6587","extension.translate.languageOf":"\u8BC6\u522B [WORDS] \u7684\u8BED\u8A00","extension.translate.language":"\u8BBF\u5BA2\u8BED\u8A00"}};var f="./assets/icon-bf4kf31b.png";var g="./assets/translate-zrngtnkd.py";function d(){return this.provideFunction_("translate_language",[`const ${this.FUNCTION_NAME_PLACEHOLDER_} = (i = 0) => {`,"  switch(runtime.language) {","    case 'en': return ['English', '\u82F1\u8BED'][i];","    case 'jp': return ['\u65E5\u672C\u8A9E', '\u65E5\u8BED'][i];","    case 'zh-Hans': return ['\u7B80\u4F53\u4E2D\u6587', '\u7B80\u4F53\u4E2D\u6587'][i];","    default: return ['English', '\u82F1\u8BED'][i];","  }","};"])}function m(){const a=d.call(this);return this.provideFunction_("translate_translate",[`const ${this.FUNCTION_NAME_PLACEHOLDER_} = async (content, language) => {`,"  if (!content) return '';","  let message = await window.ai.askSpark([{","    role: 'user', ",'    content: language ? `\u628A"${content}"\u7FFB\u8BD1\u4E3A${language}\u3002` : `"${content}"\u662F\u4EC0\u4E48\u8BED\u8A00\uFF1F`,',"  }]);","  if (language) {",'    const matches = /("[^"]*"[^"\u201C\u300C]*)?["\u201C\u300C]([^"\u201D\u300D]*)["\u201D\u300D]/.exec(message);',"    if (matches) {","      message = matches[2];","    } else {","      let i = message.lastIndexOf('(');","      i = i === -1 ?? message.lastIndexOf('\uFF08');","      message = i === -1 ? message : message.slice(0, i);","    }","  } else {","    if (message.match(/\u4E0D\u662F[^\u8BED]*[\u8BED\u6587]/)) return '';","    const matches = /\u662F([^\u8BED]*[\u8BED\u6587])/.exec(message);","    if (!matches) return '';","    message = matches[1];","    if (runtime.language !== 'zh-Hans') {",`      language = ${a}(1);`,`      message = await ${this.FUNCTION_NAME_PLACEHOLDER_}(message, language);`,"    }","  }","  return message;","};"])}import{jsx as e,jsxs as u,Fragment as E}from"preact/jsx-runtime";var $={iconURI:f,name:e(n,{id:"extension.translate.name",defaultMessage:"Translate"}),files:[{name:"translate",type:"text/x-python",uri:g}],statusButton:{title:e(n,{id:"extension.translate.openplatform",defaultMessage:"iFLYTEK Open Platform authorization"}),storage:[{id:"sparkai.appid",text:"APPID"},{id:"sparkai.apisecret",text:"APISecret"},{id:"sparkai.apikey",text:"APIKey"}],description:u(E,{children:[e(n,{id:"extension.translate.openplatform.description1",defaultMessage:"Please register your own "}),e("a",{href:"https://xinghuo.xfyun.cn/sparkapi",target:"_blank",children:e(n,{id:"extension.translate.openplatform.description2",defaultMessage:"iFLYTEK Open Platform (Chinese)"})}),e(n,{id:"extension.translate.openplatform.description3",defaultMessage:" account, the test account we provide does not guarantee that every request will be successful."})]})},blocks:[{id:"translate",text:e(n,{id:"extension.translate.translate",defaultMessage:"translate [WORDS] to [LANGUAGE]"}),output:"string",inputs:{WORDS:{type:"string",default:e(n,{id:"extension.translate.hello",defaultMessage:"hello"})},LANGUAGE:{type:"string",default:"\u82F1\u8BED",menu:[[e(n,{id:"extension.translate.english",defaultMessage:"English"}),"\u82F1\u8BED"],[e(n,{id:"extension.translate.chinese.simplified",defaultMessage:"Chinese (Simplified)"}),"\u7B80\u4F53\u4E2D\u6587"],[e(n,{id:"extension.translate.chinese.traditional",defaultMessage:"Chinese (Traditional)"}),"\u7E41\u4F53\u4E2D\u6587"],[e(n,{id:"extension.translate.japanese",defaultMessage:"Japanese"}),"\u65E5\u8BED"]]}},python(a){this.definitions_.translate_translate="from extensions.translate import translate";const s=localStorage.getItem("sparkai.apikey"),t=localStorage.getItem("sparkai.apisecret"),i=s&&t?`, key="${s}", secret="${t}"`:"",r=this.valueToCode(a,"WORDS",this.ORDER_NONE)||'""',o=this.quote_(a.getFieldValue("LANGUAGE")||"\u82F1\u6587");return[`(await translate.translate(str(${r}), ${o} ${i}))`,this.ORDER_FUNCTION_CALL]},vm(a){const s=m.call(this),t=this.valueToCode(a,"WORDS",this.ORDER_NONE)||'""',i=this.quote_(a.getFieldValue("LANGUAGE")||"\u82F1\u6587");return[`(await ${s}(String(${t}), ${i}))`,this.ORDER_FUNCTION_CALL]}},{id:"languageOf",text:e(n,{id:"extension.translate.languageOf",defaultMessage:"language of [WORDS]"}),output:"string",inputs:{WORDS:{type:"string",default:e(n,{id:"extension.translate.hello",defaultMessage:"hello"})}},python(a){this.definitions_.translate_translate="from extensions.translate import translate";const s=localStorage.getItem("sparkai.apikey"),t=localStorage.getItem("sparkai.apisecret"),i=s&&t?`, key="${s}", secret="${t}"`:"";return[`(await translate.translate(str(${this.valueToCode(a,"WORDS",this.ORDER_NONE)||'""'}) ${i}))`,this.ORDER_FUNCTION_CALL]},vm(a){const s=m.call(this),t=this.valueToCode(a,"WORDS",this.ORDER_NONE)||'""';return[`(await ${s}(String(${t})))`,this.ORDER_FUNCTION_CALL]}},{id:"language",text:e(n,{id:"extension.translate.language",defaultMessage:"language"}),output:"string",python(){return this.definitions_.translate_translate="from extensions.translate import translate",["translate.language_name()",this.ORDER_FUNCTION_CALL]},vm(){return[`${d.call(this)}()`,this.ORDER_FUNCTION_CALL]}}],translations:l};export{$ as default};
