var L1=Object.create;var{getPrototypeOf:P1,defineProperty:qt,getOwnPropertyNames:$1}=Object;var V1=Object.prototype.hasOwnProperty;var U1=(t,o,i)=>{i=t!=null?L1(P1(t)):{};const e=o||!t||!t.__esModule?qt(i,"default",{value:t,enumerable:!0}):i;for(let u of $1(t))if(!V1.call(e,u))qt(e,u,{get:()=>t[u],enumerable:!0});return e};var W1=(t,o)=>()=>(o||t((o={exports:{}}).exports,o),o.exports);var xt=W1((Pt)=>{(function(){var t=typeof Pt!="undefined"&&Pt||typeof define!="undefined"&&{}||this||window;if(typeof define!=="undefined")define("save-svg-as-png",[],function(){return t});t.default=t;var o="http://www.w3.org/2000/xmlns/",i="http://www.w3.org/1999/xhtml",e="http://www.w3.org/2000/svg",u='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd" [<!ENTITY nbsp "&#160;">]>',c=/url\(["']?(.+?)["']?\)/,d={woff2:"font/woff2",woff:"font/woff",otf:"application/x-font-opentype",ttf:"application/x-font-ttf",eot:"application/vnd.ms-fontobject",sfnt:"application/font-sfnt",svg:"image/svg+xml"},l=function _(s){return s instanceof HTMLElement||s instanceof SVGElement},E=function _(s){if(!l(s))throw new Error("an HTMLElement or SVGElement is required; got "+s)},A=function _(s){return new Promise(function(a,n){if(l(s))a(s);else n(new Error("an HTMLElement or SVGElement is required; got "+s))})},R=function _(s){return s&&s.lastIndexOf("http",0)===0&&s.lastIndexOf(window.location.host)===-1},$=function _(s){var a=Object.keys(d).filter(function(n){return s.indexOf("."+n)>0}).map(function(n){return d[n]});if(a)return a[0];return console.error("Unknown font format for "+s+". Fonts may not be working correctly."),"application/octet-stream"},C=function _(s){var a="",n=new Uint8Array(s);for(var m=0;m<n.byteLength;m++)a+=String.fromCharCode(n[m]);return window.btoa(a)},N=function _(s,a,n){var m=s.viewBox&&s.viewBox.baseVal&&s.viewBox.baseVal[n]||a.getAttribute(n)!==null&&!a.getAttribute(n).match(/%$/)&&parseInt(a.getAttribute(n))||s.getBoundingClientRect()[n]||parseInt(a.style[n])||parseInt(window.getComputedStyle(s).getPropertyValue(n));return typeof m==="undefined"||m===null||isNaN(parseFloat(m))?0:m},p=function _(s,a,n,m){if(s.tagName==="svg")return{width:n||N(s,a,"width"),height:m||N(s,a,"height")};else if(s.getBBox){var M=s.getBBox(),D=M.x,v=M.y,B=M.width,G=M.height;return{width:D+B,height:v+G}}},h=function _(s){return decodeURIComponent(encodeURIComponent(s).replace(/%([0-9A-F]{2})/g,function(a,n){var m=String.fromCharCode("0x"+n);return m==="%"?"%25":m}))},g=function _(s){var a=window.atob(s.split(",")[1]),n=s.split(",")[0].split(":")[1].split(";")[0],m=new ArrayBuffer(a.length),M=new Uint8Array(m);for(var D=0;D<a.length;D++)M[D]=a.charCodeAt(D);return new Blob([m],{type:n})},S=function _(s,a){if(!a)return;try{return s.querySelector(a)||s.parentNode&&s.parentNode.querySelector(a)}catch(n){console.warn('Invalid CSS selector "'+a+'"',n)}},w=function _(s,a){var n=s.cssText.match(c),m=n&&n[1]||"";if(!m||m.match(/^data:/)||m==="about:blank")return;var M=m.startsWith("../")?a+"/../"+m:m.startsWith("./")?a+"/."+m:m;return{text:s.cssText,format:$(M),url:M}},z=function _(s){return Promise.all(Array.from(s.querySelectorAll("image")).map(function(a){var n=a.getAttributeNS("http://www.w3.org/1999/xlink","href")||a.getAttribute("href");if(!n)return Promise.resolve(null);if(R(n))n+=(n.indexOf("?")===-1?"?":"&")+"t="+new Date().valueOf();return new Promise(function(m,M){var D=document.createElement("canvas"),v=new Image;v.crossOrigin="anonymous",v.src=n,v.onerror=function(){return M(new Error("Could not load "+n))},v.onload=function(){D.width=v.width,D.height=v.height,D.getContext("2d").drawImage(v,0,0),a.setAttributeNS("http://www.w3.org/1999/xlink","href",D.toDataURL("image/png")),m(!0)}})}))},W={},X=function _(s){return Promise.all(s.map(function(a){return new Promise(function(n,m){if(W[a.url])return n(W[a.url]);var M=new XMLHttpRequest;M.addEventListener("load",function(){var D=C(M.response),v=a.text.replace(c,'url("data:'+a.format+";base64,"+D+'")')+"\n";W[a.url]=v,n(v)}),M.addEventListener("error",function(D){console.warn("Failed to load font from: "+a.url,D),W[a.url]=null,n(null)}),M.addEventListener("abort",function(D){console.warn("Aborted loading font from: "+a.url,D),n(null)}),M.open("GET",a.url),M.responseType="arraybuffer",M.send()})})).then(function(a){return a.filter(function(n){return n}).join("")})},rt=null,Ct=function _(){if(rt)return rt;return rt=Array.from(document.styleSheets).map(function(s){try{return{rules:s.cssRules,href:s.href}}catch(a){return console.warn("Stylesheet could not be loaded: "+s.href,a),{}}})},wt=function _(s,a){var n=a||{},m=n.selectorRemap,M=n.modifyStyle,D=n.modifyCss,v=n.fonts,B=n.excludeUnusedCss,G=D||function(L,Q){var V=m?m(L):L,O=M?M(Q):Q;return V+"{"+O+"}\n"},Y=[],Z=typeof v==="undefined",J=v||[];return Ct().forEach(function(L){var{rules:Q,href:V}=L;if(!Q)return;Array.from(Q).forEach(function(O){if(typeof O.style!="undefined"){if(S(s,O.selectorText))Y.push(G(O.selectorText,O.style.cssText));else if(Z&&O.cssText.match(/^@font-face/)){var j=w(O,V);if(j)J.push(j)}else if(!B)Y.push(O.cssText)}})}),X(J).then(function(L){return Y.join("\n")+L})},Dt=function _(){if(!navigator.msSaveOrOpenBlob&&!("download"in document.createElement("a")))return{popup:window.open()}};t.prepareSvg=function(_,s,a){E(_);var n=s||{},m=n.left,M=m===void 0?0:m,D=n.top,v=D===void 0?0:D,B=n.width,G=n.height,Y=n.scale,Z=Y===void 0?1:Y,J=n.responsive,L=J===void 0?!1:J,Q=n.excludeCss,V=Q===void 0?!1:Q;return z(_).then(function(){var O=_.cloneNode(!0);O.style.backgroundColor=(s||{}).backgroundColor||_.style.backgroundColor;var j=p(_,O,B,G),k=j.width,q=j.height;if(_.tagName!=="svg")if(_.getBBox){if(O.getAttribute("transform")!=null)O.setAttribute("transform",O.getAttribute("transform").replace(/translate\(.*?\)/,""));var vt=document.createElementNS("http://www.w3.org/2000/svg","svg");vt.appendChild(O),O=vt}else{console.error("Attempted to render non-SVG element",_);return}if(O.setAttribute("version","1.1"),O.setAttribute("viewBox",[M,v,k,q].join(" ")),!O.getAttribute("xmlns"))O.setAttributeNS(o,"xmlns",e);if(!O.getAttribute("xmlns:xlink"))O.setAttributeNS(o,"xmlns:xlink","http://www.w3.org/1999/xlink");if(L)O.removeAttribute("width"),O.removeAttribute("height"),O.setAttribute("preserveAspectRatio","xMinYMin meet");else O.setAttribute("width",k*Z),O.setAttribute("height",q*Z);if(Array.from(O.querySelectorAll("foreignObject > *")).forEach(function(T){T.setAttributeNS(o,"xmlns",T.tagName==="svg"?e:i)}),V){var bt=document.createElement("div");bt.appendChild(O);var Rt=bt.innerHTML;if(typeof a==="function")a(Rt,k,q);else return{src:Rt,width:k,height:q}}else return wt(_,s).then(function(T){var f=document.createElement("style");f.setAttribute("type","text/css"),f.innerHTML="<![CDATA[\n"+T+"\n]]>";var F=document.createElement("defs");F.appendChild(f),O.insertBefore(F,O.firstChild);var b=document.createElement("div");b.appendChild(O);var ot=b.innerHTML.replace(/NS\d+:href/gi,'xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href');if(typeof a==="function")a(ot,k,q);else return{src:ot,width:k,height:q}})})},t.svgAsDataUri=function(_,s,a){return E(_),t.prepareSvg(_,s).then(function(n){var{src:m,width:M,height:D}=n,v="data:image/svg+xml;base64,"+window.btoa(h(u+m));if(typeof a==="function")a(v,M,D);return v})},t.svgAsPngUri=function(_,s,a){E(_);var n=s||{},m=n.encoderType,M=m===void 0?"image/png":m,D=n.encoderOptions,v=D===void 0?0.8:D,B=n.canvg,G=function Y(Z){var{src:J,width:L,height:Q}=Z,V=document.createElement("canvas"),O=V.getContext("2d"),j=window.devicePixelRatio||1;if(V.width=L*j,V.height=Q*j,V.style.width=V.width+"px",V.style.height=V.height+"px",O.setTransform(j,0,0,j,0,0),B)B(V,J);else O.drawImage(J,0,0);var k=void 0;try{k=V.toDataURL(M,v)}catch(q){if(typeof SecurityError!=="undefined"&&q instanceof SecurityError||q.name==="SecurityError"){console.error("Rendered SVG images cannot be downloaded in this browser.");return}else throw q}if(typeof a==="function")a(k,V.width,V.height);return Promise.resolve(k)};if(B)return t.prepareSvg(_,s).then(G);else return t.svgAsDataUri(_,s).then(function(Y){return new Promise(function(Z,J){var L=new Image;L.onload=function(){return Z(G({src:L,width:L.width,height:L.height}))},L.onerror=function(){J("There was an error loading the data URI as an image on the following SVG\n"+window.atob(Y.slice(26))+"Open the following link to see browser\'s diagnosis\n"+Y)},L.src=Y})})},t.download=function(_,s,a){if(navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(g(s),_);else{var n=document.createElement("a");if("download"in n){n.download=_,n.style.display="none",document.body.appendChild(n);try{var m=g(s),M=URL.createObjectURL(m);n.href=M,n.onclick=function(){return requestAnimationFrame(function(){return URL.revokeObjectURL(M)})}}catch(D){console.error(D),console.warn("Error while getting object URL. Falling back to string URL."),n.href=s}n.click(),document.body.removeChild(n)}else if(a&&a.popup)a.popup.document.title=_,a.popup.location.replace(s)}},t.saveSvg=function(_,s,a){var n=Dt();return A(_).then(function(m){return t.svgAsDataUri(m,a||{})}).then(function(m){return t.download(s,m,n)})},t.saveSvgAsPng=function(_,s,a){var n=Dt();return A(_).then(function(m){return t.svgAsPngUri(m,a||{})}).then(function(m){return t.download(s,m,n)})}})()});import{Text as F1}from"@blockcode/ui";import{Text as Kt}from"@blockcode/ui";var o1=U1(xt(),1);import{Keys as st,useLayout as y1,useEditor as X1}from"@blockcode/core";import{Text as mt,MenuSection as t1,MenuItem as ft}from"@blockcode/ui";import{ScratchBlocks as K1}from"@blockcode/blocks-editor";import{jsx as x,jsxs as Vt,Fragment as Y1}from"preact/jsx-runtime";var $t=/Mac/i.test(navigator.platform||navigator.userAgent);function Ut({itemClassName:t,onNew:o,onOpen:i,onSave:e,children:u}){const{createPrompt:c,setStoreLibrary:d}=y1(),{modified:l,saveNow:E,saveToComputer:A,openFromComputer:R}=X1(),$=(N)=>{if(e)return e(N);return N},C=async()=>{let N,p;const h=K1.getMainWorkspace();if(h){const g=h.getCanvas();if(g)N=await o1.svgAsDataUri(g,{})}return(g)=>{let S=new Set;const w={thumb:N,editor:{},...g,...$(g)};if(w.assetList)w.assetList=w.assetList.filter((z)=>!z.id.startsWith("extensions/"));if(w.fileList)w.fileList=w.fileList.map(({content:z,script:W,extensions:X,...rt})=>{return S=S.union(new Set(X)),rt});return w.editor.extensions=Array.from(S),w}};return Vt(Y1,{children:[Vt(t1,{children:[x(ft,{className:t,label:x(mt,{id:"blocks.menu.file.newProject",defaultMessage:"New"}),hotkey:[$t?st.COMMAND:st.CONTROL,st.N],onClick:()=>{if(l)c({title:x(mt,{id:"gui.projects.notSaved",defaultMessage:"Not saved"}),label:x(mt,{id:"gui.projects.replaceProject",defaultMessage:"Replace contents of the current project?"}),onSubmit:o});else o()}}),x(ft,{className:t,label:x(mt,{id:"blocks.menu.file.openProject",defaultMessage:"Open"}),hotkey:[$t?st.COMMAND:st.CONTROL,st.O],onClick:()=>d(!0)}),x(ft,{className:t,label:x(mt,{id:"blocks.menu.file.saveProject",defaultMessage:"Save"}),hotkey:[$t?st.COMMAND:st.CONTROL,st.S],onClick:async()=>E(await C())})]}),Vt(t1,{children:[x(ft,{className:t,label:x(mt,{id:"blocks.menu.file.uploadProject",defaultMessage:"Load from your computer"}),onClick:()=>R(i)}),x(ft,{className:t,label:x(mt,{id:"blocks.menu.file.downloadProject",defaultMessage:"save to your computer"}),onClick:async()=>A(await C())})]}),u]})}import{useEffect as H1,useState as Wt}from"preact/hooks";import{Keys as dt}from"@blockcode/core";import{Text as i1,MenuSection as Z1,MenuItem as e1}from"@blockcode/ui";import{ScratchBlocks as k1}from"@blockcode/blocks-editor";import{jsx as St,jsxs as a1,Fragment as z1}from"preact/jsx-runtime";var n1=/Mac/i.test(navigator.platform||navigator.userAgent);function yt({itemClassName:t,children:o}){const[i,e]=Wt(!0),[u,c]=Wt(!0),[d,l]=Wt(null),E=k1.getMainWorkspace();if(E){if(d?.id!==E.id)l(E)}return H1(()=>{if(d)d.addChangeListener(()=>{e(d.undoStack_.length===0),c(d.redoStack_.length===0)}),e(d.undoStack_.length===0),c(d.redoStack_.length===0)},[d]),a1(z1,{children:[a1(Z1,{children:[St(e1,{disabled:i,className:t,label:St(i1,{id:"blocks.menu.edit.undo",defaultMessage:"Undo"}),hotkey:[n1?dt.COMMAND:dt.CONTROL,dt.Z],onClick:async(A)=>{if(A instanceof MouseEvent&&d)d.undo(!1)}}),St(e1,{disabled:u,className:t,label:St(i1,{id:"blocks.menu.edit.redo",defaultMessage:"Redo"}),hotkey:n1?[dt.SHIFT,dt.COMMAND,dt.Z]:[dt.CONTROL,dt.Y],onClick:async(A)=>{if(A instanceof MouseEvent&&d)d.undo(!0)}})]}),o]})}import{useLayout as B1,useEditor as G1}from"@blockcode/core";import{Text as ct,Spinner as J1,MenuSection as Q1,MenuItem as j1}from"@blockcode/ui";import{connectDevice as q1,checkDevice as x1,checkFlashFree as to,writeFiles as oo,configDevice as io}from"@blockcode/device-pyboard";var r1=[{usbVendorId:12346},{usbVendorId:11914}];import{jsx as nt,jsxs as no,Fragment as eo}from"preact/jsx-runtime";var lt=null;function Xt({itemClassName:t,deviceName:o,deviceFilters:i,onBeforeDownload:e,children:u}){const{createAlert:c,removeAlert:d,createPrompt:l}=B1(),{key:E,name:A,fileList:R,assetList:$}=G1(),C=(h)=>{if(!lt)lt=`download.${Date.now()}`;if(h<100)c({id:lt,icon:nt(J1,{level:"success"}),message:nt(ct,{id:"blocks.alert.downloading",defaultMessage:"Downloading...{progress}%",progress:h})});else c({id:lt,icon:null,message:nt(ct,{id:"blocks.alert.downloadCompleted",defaultMessage:"Download completed."})}),setTimeout(N,2000)},N=()=>{d(lt),lt=null},p=(h)=>{if(h==="NotFoundError")return;c({message:h==="NotFoundError"?nt(ct,{id:"blocks.alert.connectionCancel",defaultMessage:"Connection cancel."}):nt(ct,{id:"blocks.alert.connectionError",defaultMessage:"Connection error."})},1000)};return no(eo,{children:[nt(Q1,{children:nt(j1,{disabled:lt,className:t,label:nt(ct,{id:"blocks.menu.device.download",defaultMessage:"Download program"}),onClick:async()=>{if(lt)return;let h;try{h=await q1(i||r1)}catch(w){p(w.name)}if(!h)return;const g=x1(h).catch(()=>{p(),N()});let S=e?e(A,R,$):[].concat(R,$);S=S.map((w)=>({...w,id:w.id.startsWith("extensions/")?w.id:`proj${E}/${w.id}`})),C(0);try{if(await to(h,S))await oo(h,S,C),await io(h,{"latest-project":E}),h.hardReset();else l({title:o||nt(ct,{id:"blocks.menu.device.name",defaultMessage:"device"}),label:nt(ct,{id:"blocks.alert.flashOutSpace",defaultMessage:"The flash is running out of space."})}),N()}catch(w){p(w.name),N()}finally{g.cancel()}}})}),u]})}var s1="./assets/icon-file-egaz1kfx.svg";var u1="./assets/icon-edit-jejnm7yb.svg";var d1="./assets/icon-device-3gcajtt2.svg";import{jsx as Tt}from"preact/jsx-runtime";function Yt({deviceName:t,deviceFilters:o,createProject:i,openProject:e,saveProject:u,beforeDownload:c}){return[{icon:s1,label:Tt(Kt,{id:"blocks.menu.file",defaultMessage:"File"}),Menu:({itemClassName:d,children:l})=>Tt(Ut,{itemClassName:d,onNew:i,onOpen:e,onSave:u,children:l})},{icon:u1,label:Tt(Kt,{id:"blocks.menu.edit",defaultMessage:"Edit"}),Menu:({itemClassName:d,children:l})=>Tt(yt,{itemClassName:d,children:l})},{icon:d1,label:Tt(Kt,{id:"blocks.menu.device",defaultMessage:"Device"}),Menu:({itemClassName:d,children:l})=>Tt(Xt,{deviceName:t,itemClassName:d,deviceFilters:o,onBeforeDownload:c,children:l})}]}var l1=`code_${Date.now().toString(36)}`,uo=`
from blocks import *
import ${l1}
start()
`,h1={assetList:[{id:"main",type:"text/x-python",content:uo}],fileList:[{id:l1,type:"text/x-python"}]};import{ScratchBlocks as H}from"@blockcode/blocks-editor";class ut extends H.Generator{ORDER_ATOMIC=0;ORDER_COLLECTION=1;ORDER_STRING_CONVERSION=1;ORDER_MEMBER=2.1;ORDER_FUNCTION_CALL=2.2;ORDER_EXPONENTIATION=3;ORDER_UNARY_SIGN=4;ORDER_BITWISE_NOT=4;ORDER_MULTIPLICATIVE=5;ORDER_ADDITIVE=6;ORDER_BITWISE_SHIFT=7;ORDER_BITWISE_AND=8;ORDER_BITWISE_XOR=9;ORDER_BITWISE_OR=10;ORDER_RELATIONAL=11;ORDER_LOGICAL_NOT=12;ORDER_LOGICAL_AND=13;ORDER_LOGICAL_OR=14;ORDER_CONDITIONAL=15;ORDER_LAMBDA=16;ORDER_NONE=99;constructor(){super("Python");this.addReservedWords("False,None,True,and,as,assert,break,class,continue,def,del,elif,else,except,exec,finally,for,from,global,if,import,in,is,lambda,nonlocal,not,or,pass,print,raise,return,try,while,with,yield,NotImplemented,Ellipsis,__debug__,quit,exit,copyright,license,credits,ArithmeticError,AssertionError,AttributeError,BaseException,BlockingIOError,BrokenPipeError,BufferError,BytesWarning,ChildProcessError,ConnectionAbortedError,ConnectionError,ConnectionRefusedError,ConnectionResetError,DeprecationWarning,EOFError,Ellipsis,EnvironmentError,Exception,FileExistsError,FileNotFoundError,FloatingPointError,FutureWarning,GeneratorExit,IOError,ImportError,ImportWarning,IndentationError,IndexError,InterruptedError,IsADirectoryError,KeyError,KeyboardInterrupt,LookupError,MemoryError,ModuleNotFoundError,NameError,NotADirectoryError,NotImplemented,NotImplementedError,OSError,OverflowError,PendingDeprecationWarning,PermissionError,ProcessLookupError,RecursionError,ReferenceError,ResourceWarning,RuntimeError,RuntimeWarning,StandardError,StopAsyncIteration,StopIteration,SyntaxError,SyntaxWarning,SystemError,SystemExit,TabError,TimeoutError,TypeError,UnboundLocalError,UnicodeDecodeError,UnicodeEncodeError,UnicodeError,UnicodeTranslateError,UnicodeWarning,UserWarning,ValueError,Warning,ZeroDivisionError,_,__build_class__,__debug__,__doc__,__import__,__loader__,__name__,__package__,__spec__,abs,all,any,apply,ascii,basestring,bin,bool,buffer,bytearray,bytes,callable,chr,classmethod,cmp,coerce,compile,complex,copyright,credits,delattr,dict,dir,divmod,enumerate,eval,exec,execfile,exit,file,filter,float,format,frozenset,getattr,globals,hasattr,hash,help,hex,id,input,int,intern,isinstance,issubclass,iter,len,license,list,locals,long,map,max,memoryview,min,next,object,oct,open,ord,pow,print,property,quit,range,raw_input,reduce,reload,repr,reversed,round,set,setattr,slice,sorted,staticmethod,str,sum,super,tuple,type,unichr,unicode,vars,xrange,zip,math,random,Number"),this.ORDER_OVERRIDES=[[this.ORDER_FUNCTION_CALL,this.ORDER_MEMBER],[this.ORDER_FUNCTION_CALL,this.ORDER_FUNCTION_CALL],[this.ORDER_MEMBER,this.ORDER_MEMBER],[this.ORDER_MEMBER,this.ORDER_FUNCTION_CALL],[this.ORDER_LOGICAL_NOT,this.ORDER_LOGICAL_NOT],[this.ORDER_LOGICAL_AND,this.ORDER_LOGICAL_AND],[this.ORDER_LOGICAL_OR,this.ORDER_LOGICAL_OR]];for(let t in ut.prototype)if(typeof ut.prototype[t]==="function")ut.prototype[t]=ut.prototype[t].bind(this)}init(t){if(this.PASS=this.INDENT+"pass\n",this.definitions_=Object.create(null),this.functionNames_=Object.create(null),!this.variableDB_)this.variableDB_=new H.Names(this.RESERVED_WORDS_);else this.variableDB_.reset();this.variableDB_.setVariableMap(t.getVariableMap());const o=[],i=t.getAllVariables();for(let u=0;u<i.length;u++){if(i[u].type===H.BROADCAST_MESSAGE_VARIABLE_TYPE)continue;let c=this.variableDB_.getName(i[u].getId(),H.Variables.NAME_TYPE),d="0";if(i[u].type===H.LIST_VARIABLE_TYPE)c=`${c}_${H.LIST_VARIABLE_TYPE}`,d="[]";o.push(`${c} = ${d}`)}const e=H.Variables.allDeveloperVariables(t);for(let u=0;u<e.length;u++){let c=this.variableDB_.getName(e[u],H.Names.DEVELOPER_VARIABLE_TYPE),d="0";if(i[u].type===H.LIST_VARIABLE_TYPE)c=`${c}_${H.LIST_VARIABLE_TYPE}`,d="[]";o.push(`${c} = ${d}`)}if(o.length)this.definitions_.variables=o.join("\n")}finish(t){const o=[],i=[];for(let u in this.definitions_){const c=this.definitions_[u];if(c.match(/^(from\s+\S+\s+)?import\s+\S+/))o.push(c);else i.push(c)}return delete this.definitions_,delete this.functionNames_,this.variableDB_.reset(),(o.join("\n")+"\n\n"+i.join("\n\n")).replace(/\n\n+/g,"\n\n").replace(/\n*$/,"\n\n\n")+t}scrubNakedValue(t){return t+"\n"}quote_(t){let o='"';if(t.indexOf('"')!==-1)if(t.indexOf("'")===-1)o="'";else t=t.replace(/"/g,'\\"');return o+t+o}scrub_(t,o){let i="";if(!t.outputConnection?.targetConnection){let e=t.getCommentText();if(e=H.utils.wrap(e,this.COMMENT_WRAP-3),e)if(t.getProcedureDef)i+='"""'+e+'\n"""\n';else i+=this.prefixLines(e+"\n","# ");for(let u=0;u<t.inputList.length;u++)if(t.inputList[u].type==H.INPUT_VALUE){const c=t.inputList[u].connection.targetBlock();if(c){const d=this.allNestedComments(c);if(d)i+=this.prefixLines(d,"# ")}}}if(t.startHat_){const e=t.nextConnection&&t.nextConnection.targetBlock();let u=this.blockToCode(e);if(u)u=this.prefixLines(u,this.INDENT),o=o.replace(`\n${this.PASS}`,`\n${u}`);return i+o}if(t.parentBlock_){const e=t.nextConnection&&t.nextConnection.targetBlock(),u=this.blockToCode(e);return i+o+u}}getAdjustedInt(t,o,i,e){let u=i||0;if(t.workspace.options.oneBasedIndex)u--;const c=t.workspace.options.oneBasedIndex?"1":"0",d=u?this.ORDER_ADDITIVE:this.ORDER_NONE;let l=this.valueToCode(t,o,d)||c;if(H.isNumber(l)){if(l=parseInt(l,10)+u,e)l=-l}else{if(u>0)l="int("+l+" + "+u+")";else if(u<0)l="int("+l+" - "+-u+")";else l="int("+l+")";if(e)l="-"+l}return l}functionToCode(t,o){return`async def ${t}(${o.join(",")}):\n  this_func = ${t}\n${this.PASS}\n`}eventToCode(t,...o){const i=this.variableDB_.getName(t,H.Variables.NAME_TYPE);if(!this.functionNames_[i])this.functionNames_[i]=0;this.functionNames_[i]+=1;const e=`${t}_${this.functionNames_[i]}`;return this.functionToCode(e,o)}}var r=ut.prototype;var lo=(t)=>{const o=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(o,(e,u,c,d)=>u+u+c+c+d+d);const i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)}:null};r.colour_picker=function(t){const{r:o,g:i,b:e}=lo(t.getFieldValue("COLOUR"));return[`(${o}, ${i}, ${e})`,this.ORDER_ATOMIC]};var Ot="  await runtime.next_frame()\n";r.control_wait=function(t){let o="";if(this.STATEMENT_PREFIX)o+=this.injectId(this.STATEMENT_PREFIX,t);const i=this.valueToCode(t,"DURATION",this.ORDER_NONE)||0;return o+=`await runtime.wait_for(num(${i}))\n`,o};r.control_repeat=function(t){let o="";if(this.STATEMENT_PREFIX)o+=this.injectId(this.STATEMENT_PREFIX,t);let i=this.statementToCode(t,"SUBSTACK")||this.PASS;if(this.STATEMENT_SUFFIX)i=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,t),this.INDENT)+i;const e=this.valueToCode(t,"TIMES",this.ORDER_NONE)||10;return o+=`for _ in range(num(${e})):\n${i}${Ot}`,o};r.control_forever=function(t){let o="";if(this.STATEMENT_PREFIX)o+=this.injectId(this.STATEMENT_PREFIX,t);let i=this.statementToCode(t,"SUBSTACK")||this.PASS;if(this.STATEMENT_SUFFIX)i=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,t),this.INDENT)+i;return o+=`while True:\n${i}${Ot}`,o};r.control_if=function(t){let o="";if(this.STATEMENT_PREFIX)o+=this.injectId(this.STATEMENT_PREFIX,t);let i=this.statementToCode(t,"SUBSTACK")||this.PASS;if(this.STATEMENT_SUFFIX)i=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,t),this.INDENT)+i;const e=this.valueToCode(t,"CONDITION",this.ORDER_NONE)||"False";if(o+=`if ${e}:\n${i}`,t.getInput("SUBSTACK2")){if(i=this.statementToCode(t,"SUBSTACK2")||this.PASS,this.STATEMENT_SUFFIX)i=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,t),this.INDENT)+i;o+=`else:\n${i}`}return o};r.control_if_else=r.control_if;r.control_wait_until=function(t){let o="";if(this.STATEMENT_PREFIX)o+=this.injectId(this.STATEMENT_PREFIX,t);const i=this.valueToCode(t,"CONDITION",this.ORDER_NONE)||"False";return o+=`while not ${i}:\n${Ot}`,o};r.control_repeat_until=function(t){let o="";if(this.STATEMENT_PREFIX)o+=this.injectId(this.STATEMENT_PREFIX,t);let i=this.statementToCode(t,"SUBSTACK")||this.PASS;if(this.STATEMENT_SUFFIX)i=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,t),this.INDENT)+i;const e=this.valueToCode(t,"CONDITION",this.ORDER_NONE)||"False";return o+=`while not ${e}:\n${i}${Ot}`,o};r.control_while=function(t){let o="";if(this.STATEMENT_PREFIX)o+=this.injectId(this.STATEMENT_PREFIX,t);let i=this.statementToCode(t,"SUBSTACK")||this.PASS;if(this.STATEMENT_SUFFIX)i=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,t),this.INDENT)+i;const e=this.valueToCode(t,"CONDITION",this.ORDER_NONE)||"False";return o+=`while ${e}:\n${i}${Ot}`,o};r.control_stop=function(t){let o="";if(this.STATEMENT_PREFIX)o+=this.injectId(this.STATEMENT_PREFIX,t);switch(t.getFieldValue("STOP_OPTION")){case"all":o+="runtime.stop()\n";break;case"this script":o+="return\n";break;case"other scripts in sprite":o+="runtime.stop_tasks(this_func)\n";break}return o};import{ScratchBlocks as I}from"@blockcode/blocks-editor";r.data_variable=function(t){return[this.variableDB_.getName(t.getFieldValue("VARIABLE"),I.Variables.NAME_TYPE),this.ORDER_ATOMIC]};r.data_setvariableto=function(t){let o="";if(r.STATEMENT_PREFIX)o+=r.injectId(r.STATEMENT_PREFIX,t);const i=this.variableDB_.getName(t.getFieldValue("VARIABLE"),I.Variables.NAME_TYPE),e=this.valueToCode(t,"VALUE",this.ORDER_NONE)||'""';return o+=`${i} = ${e}\n`,o};r.data_changevariableby=function(t){let o="";if(r.STATEMENT_PREFIX)o+=r.injectId(r.STATEMENT_PREFIX,t);const i=this.variableDB_.getName(t.getFieldValue("VARIABLE"),I.Variables.NAME_TYPE),e=this.valueToCode(t,"VALUE",this.ORDER_NONE)||0;return o+=`${i} = num(${i}) + num(${e})\n`,o};r.data_listcontents=function(t){return[this.variableDB_.getName(t.getFieldValue("LIST"),I.Variables.NAME_TYPE)+"_"+I.LIST_VARIABLE_TYPE,this.ORDER_ATOMIC]};r.data_addtolist=function(t){let o="";if(this.STATEMENT_PREFIX)o+=this.injectId(this.STATEMENT_PREFIX,t);const i=this.variableDB_.getName(t.getFieldValue("LIST"),I.Variables.NAME_TYPE)+"_"+I.LIST_VARIABLE_TYPE,e=this.valueToCode(t,"ITEM",this.ORDER_NONE)||'""';return o+=`${i}.append(${e})\n`,o};r.data_deleteoflist=function(t){let o="";if(this.STATEMENT_PREFIX)o+=this.injectId(this.STATEMENT_PREFIX,t);const i=this.variableDB_.getName(t.getFieldValue("LIST"),I.Variables.NAME_TYPE)+"_"+I.LIST_VARIABLE_TYPE,e=this.valueToCode(t,"INDEX",this.ORDER_NONE)||1;return o+=`${i}.remove(runtime.index(${e}, len(${i})))\n`,o};r.data_deletealloflist=function(t){let o="";if(this.STATEMENT_PREFIX)o+=this.injectId(this.STATEMENT_PREFIX,t);const i=this.variableDB_.getName(t.getFieldValue("LIST"),I.Variables.NAME_TYPE)+"_"+I.LIST_VARIABLE_TYPE;return o+=`${i} = []\n`,o};r.data_insertatlist=function(t){let o="";if(this.STATEMENT_PREFIX)o+=this.injectId(this.STATEMENT_PREFIX,t);const i=this.variableDB_.getName(t.getFieldValue("LIST"),I.Variables.NAME_TYPE)+"_"+I.LIST_VARIABLE_TYPE,e=this.valueToCode(t,"INDEX",this.ORDER_NONE)||1,u=this.valueToCode(t,"ITEM",this.ORDER_NONE)||'""';return o+=`${i}.insert(runtime.index(${e}, len(${i})), ${u})\n`,o};r.data_replaceitemoflist=function(t){let o="";if(this.STATEMENT_PREFIX)o+=this.injectId(this.STATEMENT_PREFIX,t);const i=this.variableDB_.getName(t.getFieldValue("LIST"),I.Variables.NAME_TYPE)+"_"+I.LIST_VARIABLE_TYPE,e=this.valueToCode(t,"INDEX",this.ORDER_NONE)||1,u=this.valueToCode(t,"ITEM",this.ORDER_NONE)||'""';return o+=`${i}[runtime.index(${e}, len(${i}))] = ${u}\n`,o};r.data_itemoflist=function(t){const o=this.variableDB_.getName(t.getFieldValue("LIST"),I.Variables.NAME_TYPE)+"_"+I.LIST_VARIABLE_TYPE,i=this.valueToCode(t,"INDEX",this.ORDER_NONE)||1;return[`${o}[runtime.index(${i}, len(${o}))]`,this.ORDER_CONDITIONAL]};r.data_itemnumoflist=function(t){const o=this.variableDB_.getName(t.getFieldValue("LIST"),I.Variables.NAME_TYPE)+"_"+I.LIST_VARIABLE_TYPE,i=this.valueToCode(t,"ITEM",this.ORDER_NONE)||0;return[`(${o}.index(${i}) + 1)`,this.ORDER_NONE]};r.data_lengthoflist=function(t){return[`len(${this.variableDB_.getName(t.getFieldValue("LIST"),I.Variables.NAME_TYPE)+"_"+I.LIST_VARIABLE_TYPE})`,this.ORDER_FUNCTION_CALL]};r.data_listcontainsitem=function(t){const o=this.variableDB_.getName(t.getFieldValue("LIST"),I.Variables.NAME_TYPE)+"_"+I.LIST_VARIABLE_TYPE,i=this.valueToCode(t,"ITEM",this.ORDER_NONE)||0;return[`bool(${o}.count(${i}))`,this.ORDER_FUNCTION_CALL]};import{ScratchBlocks as m1}from"@blockcode/blocks-editor";r.event_whenflagclicked=function(){return`@when_start\n${this.eventToCode("start")}`};r.event_whengreaterthan=function(t){const o=t.getFieldValue("WHENGREATERTHANMENU"),i=this.valueToCode(t,"VALUE",this.ORDER_NONE)||0,e=this.eventToCode("greaterthen");return`@when_greaterthen("${o}", num(${i}))\n${e}`};r.event_whenbroadcastreceived=function(t){const o=this.variableDB_.getName(t.getFieldValue("BROADCAST_OPTION"),m1.Variables.NAME_TYPE),i=this.eventToCode("broadcastreceived");return`@when_broadcastreceived("${o}")\n${i}`};r.event_broadcast_menu=function(t){return[this.variableDB_.getName(t.getFieldValue("BROADCAST_OPTION"),m1.Variables.NAME_TYPE),this.ORDER_ATOMIC]};r.event_broadcast=function(t){return`runtime.broadcast("${this.valueToCode(t,"BROADCAST_INPUT",this.ORDER_NONE)||'"message1"'}")\n`};r.event_broadcastandwait=function(t){return`await runtime.broadcast("${this.valueToCode(t,"BROADCAST_INPUT",this.ORDER_NONE)||'"message1"'}", waiting=True)\n`};r.math_number=function(t){let o=parseFloat(t.getFieldValue("NUM")),i;if(o===1/0)o='float("inf")',i=this.ORDER_FUNCTION_CALL;else if(o===-1/0)o='-float("inf")',i=this.ORDER_UNARY_SIGN;else if(Number.isNaN(o))o='float("nan")',i=this.ORDER_UNARY_SIGN;else i=o<0?this.ORDER_UNARY_SIGN:this.ORDER_ATOMIC;return[o,i]};r.math_integer=function(t){const o=parseInt(t.getFieldValue("NUM")),i=o<0?this.ORDER_UNARY_SIGN:this.ORDER_ATOMIC;return[o,i]};r.math_whole_number=function(t){return[Math.abs(parseInt(t.getFieldValue("NUM"))),this.ORDER_ATOMIC]};r.math_positive_number=function(t){let o=parseFloat(t.getFieldValue("NUM")),i;if(o===1/0)o='float("inf")',i=this.ORDER_FUNCTION_CALL;else if(o===-1/0)o='-float("inf")',i=this.ORDER_FUNCTION_CALL;else if(Number.isNaN(o))o='float("nan")',i=this.ORDER_FUNCTION_CALL;else o=o<0?0:o,i=this.ORDER_ATOMIC;return[o,i]};r.math_angle=function(t){let o=parseFloat(t.getFieldValue("NUM")),i;if(o==1/0)o='float("inf")',i=this.ORDER_FUNCTION_CALL;else if(o==-1/0)o='-float("inf")',i=this.ORDER_UNARY_SIGN;else o=o%360,o=o<0?o+360:o,i=this.ORDER_ATOMIC;return[o,i]};r.operator_add=function(t){const o=this.valueToCode(t,"NUM1",this.ORDER_NONE)||0,i=this.valueToCode(t,"NUM2",this.ORDER_NONE)||0;return[`(num(${o}) + num(${i}))`,this.ORDER_SUBTRACTION]};r.operator_subtract=function(t){const o=this.valueToCode(t,"NUM1",this.ORDER_NONE)||0,i=this.valueToCode(t,"NUM2",this.ORDER_NONE)||0;return[`(num(${o}) - num(${i}))`,this.ORDER_SUBTRACTION]};r.operator_multiply=function(t){const o=this.valueToCode(t,"NUM1",this.ORDER_NONE)||0,i=this.valueToCode(t,"NUM2",this.ORDER_NONE)||0;return[`(num(${o}) * num(${i}))`,this.ORDER_SUBTRACTION]};r.operator_divide=function(t){const o=this.valueToCode(t,"NUM1",this.ORDER_NONE)||0,i=this.valueToCode(t,"NUM2",this.ORDER_NONE)||0;return[`(num(${o}) / num(${i}))`,this.ORDER_SUBTRACTION]};r.operator_random=function(t){const o=this.valueToCode(t,"FROM",this.ORDER_NONE)||0,i=this.valueToCode(t,"TO",this.ORDER_NONE)||0;return[`runtime.random(${o}, ${i})`,this.ORDER_FUNCTION_CALL]};r.operator_gt=function(t){const o=this.valueToCode(t,"OPERAND1",this.ORDER_NONE)||0,i=this.valueToCode(t,"OPERAND2",this.ORDER_NONE)||0;return[`(num(${o}) > num(${i}))`,this.ORDER_RELATIONAL]};r.operator_lt=function(t){const o=this.valueToCode(t,"OPERAND1",this.ORDER_NONE)||0,i=this.valueToCode(t,"OPERAND2",this.ORDER_NONE)||0;return[`(num(${o}) < num(${i}))`,this.ORDER_RELATIONAL]};r.operator_equals=function(t){const o=this.valueToCode(t,"OPERAND1",this.ORDER_NONE)||0,i=this.valueToCode(t,"OPERAND2",this.ORDER_NONE)||0;return[`equals(${o}, ${i})`,this.ORDER_FUNCTION_CALL]};r.operator_and=function(t){const o=this.valueToCode(t,"OPERAND1",this.ORDER_NONE)||"False",i=this.valueToCode(t,"OPERAND2",this.ORDER_NONE)||"False";return[`(${o} and ${i})`,this.ORDER_LOGICAL_AND]};r.operator_or=function(t){const o=this.valueToCode(t,"OPERAND1",this.ORDER_NONE)||"False",i=this.valueToCode(t,"OPERAND2",this.ORDER_NONE)||"False";return[`(${o} or ${i})`,this.ORDER_LOGICAL_OR]};r.operator_not=function(t){return[`(not ${this.valueToCode(t,"OPERAND",this.ORDER_NONE)||"False"})`,this.ORDER_LOGICAL_NOT]};r.operator_join=function(t){const o=this.valueToCode(t,"STRING1",this.ORDER_NONE)||'""',i=this.valueToCode(t,"STRING2",this.ORDER_NONE)||'""';return[`(str(${o}) + str(${i}))`,this.ORDER_ATOMIC]};r.operator_letter_of=function(t){const o=this.valueToCode(t,"LETTER",this.ORDER_NONE)||0;return[`(str(${this.valueToCode(t,"STRING",this.ORDER_NONE)||'""'})[num(${o}) - 1] || "")`,this.ORDER_MEMBER]};r.operator_length=function(t){return[`len(str(${this.valueToCode(t,"STRING",this.ORDER_NONE)||'""'}))`,this.ORDER_FUNCTION_CALL]};r.operator_contains=function(t){const o=this.valueToCode(t,"STRING1",this.ORDER_NONE)||'""',i=this.valueToCode(t,"STRING2",this.ORDER_NONE)||'""';return[`(str(${o}).count(str(${i})) > 0)`,this.ORDER_FUNCTION_CALL]};r.operator_mod=function(t){const o=this.valueToCode(t,"NUM1",this.ORDER_NONE)||0,i=this.valueToCode(t,"NUM2",this.ORDER_NONE)||0;return[`(num(${o}) % num(${i}))`,this.ORDER_MODULUS]};r.operator_round=function(t){return this.definitions_.import_math="import math",[`math.round(num(${this.valueToCode(t,"NUM",this.ORDER_NONE)||0}))`,this.ORDER_FUNCTION_CALL]};r.operator_mathop=function(t){this.definitions_.import_math="import math";const o=this.valueToCode(t,"NUM",this.ORDER_NONE)||0,i=t.getFieldValue("OPERATOR");let e="";if(i==="ceiling")e+=`math.ceil(num(${o}))`;else if(i==="sin"||i==="cos"||i==="tan")e+=`math.${i}(math.radians(num(${o})))`;else if(i==="asin"||i==="acos"||i==="atan")e+=`math.degrees(math.${i}(num(${o})))`;else if(i==="ln")e+=`(math.log(num(${o}))`;else if(i==="log")e+=`(math.log10(num(${o}))`;else if(i==="e ^")e+=`math.exp(num(${o}))`;else if(i==="10 ^")e+=`math.pow(10, num(${o}))`;else e+=`math.${i}(num(${o}))`;return[e,this.ORDER_FUNCTION_CALL]};import{ScratchBlocks as At}from"@blockcode/blocks-editor";r.procedures_definition=function(t){const o=t.childBlocks_[0],i=this.variableDB_.getName(o.getProcCode(),At.Procedures.NAME_TYPE),e=o.childBlocks_.map((u)=>this.variableDB_.getName(u.getFieldValue("VALUE"),At.Variables.NAME_TYPE));return this.functionToCode(i,e)};r.procedures_call=function(t){const o=this.variableDB_.getName(t.getProcCode(),At.Procedures.NAME_TYPE),i=t.argumentIds_.map((e)=>this.valueToCode(t,e,this.ORDER_NONE));return`await ${o}(${i.join(",")})\n`};r.argument_reporter_boolean=function(t){return[this.variableDB_.getName(t.getFieldValue("VALUE"),At.Variables.NAME_TYPE),this.ORDER_ATOMIC]};r.argument_reporter_string_number=function(t){return[this.variableDB_.getName(t.getFieldValue("VALUE"),At.Variables.NAME_TYPE),this.ORDER_ATOMIC]};r.sensing_timer=function(){return["runtime.time",this.ORDER_MEMBER]};r.sensing_resettimer=function(){return"runtime.reset_timer()\n"};r.text=function(t){const o=t.getFieldValue("TEXT");return[o.length===0||isNaN(o)?this.quote_(o):+o,this.ORDER_ATOMIC]};class Ht extends ut{init(t){super.init(t),this.definitions_.import_blocks="from blocks import *"}}import{useEffect as Uo,useState as Mt}from"preact/hooks";import{useLocale as Wo,useLayout as yo,useEditor as M1}from"@blockcode/core";import{classNames as Xo}from"@blockcode/ui";import{BlocksEditor as Ko,ScratchBlocks as y,makeToolboxXML as Yo}from"@blockcode/blocks-editor";import{ScratchBlocks as Zt,blockSeparator as ho}from"@blockcode/blocks-editor";var mo=1,co=2,Eo=3,kt="#0FBD8C",zt="#0DA57A",c1="#0B8E69",at=(t)=>{if(typeof t!=="string")if(Array.isArray(t))t=String(t);else return t;return t.replace(/[<>&'"]/g,(o)=>{switch(o){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case"'":return"&apos;";case'"':return"&quot;"}})},E1={number:"math_number",angle:"math_angle",text:"text",string:"text",color:"colour_picker",matrix:"matrix",note:"note"},_1={number:"NUM",angle:"NUM",text:"TEXT",string:"TEXT",matrix:"MATRIX",note:"NOTE"};function Bt(t,o,i,e,u){const{id:c}=o,d=e(o.name);let l=`<category name="${at(d)}" id="${at(c)}"`;if(l+=` colour="${at(o.themeColor||kt)}"`,l+=` secondaryColour="${at(o.inputColor||zt)}"`,o.connectionConfig)l+=' showStatusButton="true"';if(o.iconURI)l+=` iconURI="${at(o.iconURI)}"`;return l+=">",o.menus=o.menus||{},o.blocks.filter((E)=>!E.hidden).forEach((E)=>{if(E==="---"){l+=`${ho}`;return}if(E.button){l+=`<button text="${e(E.text)}" callbackKey="${E.button}"></button>`;const N=Zt.getMainWorkspace();if(N){const p=N.getFlyout();if(p){const h=p.getWorkspace();if(h)h.registerButtonCallback(E.button,u(E.onClick))}}return}if(i&&E.useStage===!1)return;if(!i&&E.useSprite===!1)return;const A=`${c}_${E.id}`,R={message0:e(E.text),category:c,outputShape:Eo,colour:o.themeColor||kt,colourSecondary:o.inputColor||zt,colourTertiary:o.otherColor||c1};let $=1;if(o.iconURI)R.message0=`%1 %2 ${R.message0}`,R.args0=[{type:"field_image",src:o.iconURI,width:40,height:40},{type:"field_vertical_separator"}],R.extensions=["scratch_extension"],$+=2;if(E.hat)R.nextStatement=null;else if(E.output){if(E.output==="boolean")R.output="Boolean",R.outputShape=mo;else R.output="String",R.outputShape=co;R.checkboxInFlyout=E.monitoring!==!1}else R.previousStatement=null,R.nextStatement=null;let C=`<block type="${at(A)}">`;if(E.inputs)R.checkboxInFlyout=!1,R.args0=[].concat(R.args0||[],Object.entries(E.inputs).map(([N,p])=>{const h={name:N,type:"input_value"};if(p.menu){let g=p.menu,S=p.name||N,w=p.inputMode||!1,z=p.type||"string",W=p.default||"";if(typeof p.menu==="string")S=p.menu,g=o.menus[S];if(!Array.isArray(g))w=g.inputMode||w,z=g.type||z,W=g.default||W,g=g.items;if(w){if(!o.menus[S])o.menus[S]={inputMode:w,type:z,items:g};if(C+=`<value name="${at(N)}">`,C+=`<shadow type="${c}_menu_${S}">`,W)C+=`<field name="${S}">${at(e(W))}</field>`;C+="</shadow></value>"}else if(g)h.type="field_dropdown",h.options=g.map((X)=>{if(Array.isArray(X)){const[rt,Ct]=X;return[e(rt),Ct]}return X=`${X}`,[X,X]})}else if(p.type==="boolean")h.check="Boolean";else{if(C+=`<value name="${at(N)}">`,E1[p.type]){if(C+=`<shadow type="${E1[p.type]}">`,p.default&&_1[p.type])C+=`<field name="${_1[p.type]}">${at(e(p.default))}</field>`;C+="</shadow>"}C+="</value>"}return R.message0=R.message0.replace(`[${N}]`,`%${$++}`),h}));Zt.Blocks[A]={init(){this.jsonInit(R)}};for(let N of t){const p=N.name_.toLowerCase();if(E[p])N[A]=E[p].bind(N);else N[A]=()=>""}C+="</block>",l+=C}),Object.entries(o.menus).forEach(([E,A])=>{if(!A.inputMode)return;const R=`${c}_menu_${E}`,$=A.type==="number"?"output_number":"output_string",C={message0:"%1",args0:[{type:"field_dropdown",name:E,options:A.items.map((N)=>{if(Array.isArray(N)){const[p,h]=N;return[e(p),h]}return N=`${N}`,[N,N]})}],category:c,colour:o.themeColor||kt,colourSecondary:o.inputColor||zt,colourTertiary:o.otherColor||c1,extensions:[$]};Zt.Blocks[R]={init(){this.jsonInit(C)}};for(let N of t)N[R]=(p)=>{return[p.getFieldValue(E),N.ORDER_ATOMIC]}}),l+="</category>",l}import{useRef as _o,useEffect as No,useState as N1}from"preact/hooks";import{classNames as To,Text as pt,Button as T1,Modal as po,BufferedInput as Co}from"@blockcode/ui";function Et(t){const o=globalThis.document,i=o.createElement("style");i.appendChild(o.createTextNode(t)),o.head.append(i)}Et("._5SVWFW_prompt-modal{width:360px}._5SVWFW_prompt-content{background:var(--ui-white);padding:1.5rem 2.25rem}._5SVWFW_prompt-content input[type=checkbox],._5SVWFW_prompt-content input[type=radio]{margin:3px}._5SVWFW_label{margin:0 0 .75rem;font-weight:500}._5SVWFW_variable-name-text-input{border:1px solid var(--ui-black-transparent);color:var(--text-primary-transparent);border-radius:5px;width:100%;height:3rem;margin-bottom:1.5rem;padding:0 1rem;font-size:.875rem}._5SVWFW_info-message{text-align:center;margin-bottom:1.5rem;font-size:.875rem;font-weight:400}._5SVWFW_options{justify-content:space-between;margin-bottom:1.5rem;font-weight:400;display:flex}._5SVWFW_button-row{text-align:right;font-weight:bolder}._5SVWFW_button{padding:.75rem 1rem;font-size:.85rem;font-weight:600}._5SVWFW_ok-button{background:var(--motion-primary);border:var(--motion-primary);color:var(--ui-white);margin-left:var(--space)}");var et={infoMessage:"_5SVWFW_info-message",options:"_5SVWFW_options",label:"_5SVWFW_label",okButton:"_5SVWFW_ok-button",variableNameTextInput:"_5SVWFW_variable-name-text-input",buttonRow:"_5SVWFW_button-row",promptModal:"_5SVWFW_prompt-modal",promptContent:"_5SVWFW_prompt-content",button:"_5SVWFW_button"};import{jsx as K,jsxs as gt}from"preact/jsx-runtime";function Gt({title:t,label:o,defaultValue:i,enableLocalVariable:e,showListMessage:u,showVariableOptions:c,showCloudOption:d,onClose:l,onSubmit:E}){const A=_o(null),[R,$]=N1(i),[C,N]=N1({scope:"global",isCloud:!1}),p=()=>{E(R,C)},h=(g)=>{if(g.key==="Escape")l();if(g.key==="Enter")E(A.current.base.value,C)};return No(()=>{if(A.current)A.current.base.focus(),window.addEventListener("keydown",h);return()=>{window.removeEventListener("keydown",h)}},[A]),K(po,{title:t,className:et.promptModal,onClose:l,children:gt("div",{className:et.promptContent,children:[K("div",{className:et.label,children:o}),K(Co,{autoFocus:!0,forceFocus:!0,ref:A,className:et.variableNameTextInput,defaultValue:R,onSubmit:$}),c&&K("div",{children:e?gt("div",{className:et.options,children:[gt("label",{children:[K("input",{checked:C.scope==="global",name:"variableScopeOption",type:"radio",value:"global",onChange:()=>N({...C,scope:"global"})}),K(pt,{id:"blocks.dataPrompt.forAllTargets",defaultMessage:"For all targets"})]}),gt("label",{children:[K("input",{checked:C.scope==="local",name:"variableScopeOption",type:"radio",value:"local",onChange:()=>N({...C,scope:"local"})}),K(pt,{id:"blocks.dataPrompt.forThisTarget",defaultMessage:"For this target only"})]})]}):K("div",{className:et.infoMessage,children:u?K(pt,{id:"blocks.dataPrompt.listAvailableToAllTargets",defaultMessage:"This list will be available to all targets."}):K(pt,{id:"blocks.dataPrompt.availableToAllTargets",defaultMessage:"This variable will be available to all targets."})})}),gt("div",{className:et.buttonRow,children:[K(T1,{className:et.button,onClick:l,children:K(pt,{id:"blocks.prompt.cancel",defaultMessage:"Cancel"})}),K(T1,{className:To(et.button,et.okButton),onClick:p,children:K(pt,{id:"blocks.prompt.ok",defaultMessage:"OK"})})]})]})})}import{useRef as Ao,useEffect as go,useState as Mo}from"preact/hooks";import{classNames as wo,Text as ht,Button as f1,Modal as Do}from"@blockcode/ui";import{ScratchBlocks as It}from"@blockcode/blocks-editor";Et(".ObKnhW_prompt-modal{width:700px;margin:50px auto}.ObKnhW_body{background:var(--ui-white);padding:1.5rem 2.25rem}.ObKnhW_body input[type=checkbox],.ObKnhW_body input[type=radio]{margin:3px}.ObKnhW_workspace{min-height:200px;position:relative}.ObKnhW_workspace .injectionDiv{position:absolute;inset:0}.ObKnhW_workspace .blocklySvg{background-color:var(--ui-primary)}.ObKnhW_options-row{justify-content:space-between;display:flex}.ObKnhW_option-card{border:2px solid var(--ui-black-transparent);border-radius:var(--space);padding:calc(var(--space)*2);text-align:center;cursor:pointer;background:#fff;flex-grow:1;flex-basis:100px;transition:all .2s}.ObKnhW_option-card:hover{border:2px solid var(--motion-primary);box-shadow:0px 0px 0px 4px var(--motion-transparent)}.ObKnhW_option-card+.ObKnhW_option-card{margin-left:1rem}.ObKnhW_option-icon{max-height:48px;margin-bottom:.5rem}.ObKnhW_option-title{font-weight:700}.ObKnhW_radiobox-row{justify-content:space-between;margin:1rem 6rem 1.5rem;font-weight:400;display:flex}.ObKnhW_button-row{text-align:right;margin-top:1rem;font-weight:bolder}.ObKnhW_button-row button{border:1px solid var(--ui-black-transparent);background:#fff;border-radius:.25rem;padding:.75rem 1rem;font-size:.85rem;font-weight:700}.ObKnhW_button-row button.ObKnhW_ok-button{background:var(--motion-primary);border:var(--motion-primary);color:#fff}.ObKnhW_button-row button+button{margin-left:.5rem}");var P={optionsRow:"ObKnhW_options-row",optionTitle:"ObKnhW_option-title",body:"ObKnhW_body",workspace:"ObKnhW_workspace",optionCard:"ObKnhW_option-card",radioboxRow:"ObKnhW_radiobox-row",buttonRow:"ObKnhW_button-row",okButton:"ObKnhW_ok-button",optionIcon:"ObKnhW_option-icon",promptModal:"ObKnhW_prompt-modal"};var p1="./assets/icon-boolean-input-v045mxhp.svg";var C1="./assets/icon-text-input-3m98080h.svg";var R1="./assets/icon-label-a0d2gknc.svg";import{jsx as U,jsxs as _t}from"preact/jsx-runtime";var vo={zoom:{controls:!1,wheel:!1,startScale:0.9},comments:!1,collapse:!1,scrollbars:!0};function Jt({mutator:t,onClose:o,onSubmit:i}){const e=Ao(null),[u,c]=Mo("command"),d=()=>{},l=()=>{if(e.mutationRoot)e.mutationRoot.addLabelExternal()},E=()=>{if(e.mutationRoot)e.mutationRoot.addBooleanExternal()},A=()=>{if(e.mutationRoot)e.mutationRoot.addStringNumberExternal()},R=()=>{i(e.mutationRoot?.mutationToDom(!0))};return go(()=>{if(e.current){const $=It.Blocks.defaultToolbox;It.Blocks.defaultToolbox=null,e.workspace=It.inject(e.current,Object.assign({},vo,{media:"./assets/blocks-media/"})),It.Blocks.defaultToolbox=$,e.mutationRoot=e.workspace.newBlock("procedures_declaration"),e.mutationRoot.setMovable(!1),e.mutationRoot.setDeletable(!1),e.mutationRoot.contextMenu=!1,e.workspace.addChangeListener(()=>{e.mutationRoot.onChangeFn();const C=e.workspace.getMetrics(),{x:N,y:p}=e.mutationRoot.getRelativeToSurfaceXY(),h=C.viewHeight/2-e.mutationRoot.height/2-p;let g=C.viewWidth/2-e.mutationRoot.width/2-N;if(e.mutationRoot.width>C.viewWidth)g=C.viewWidth-e.mutationRoot.width-N;e.mutationRoot.moveBy(g,h)}),e.mutationRoot.domToMutation(t),e.mutationRoot.initSvg(),e.mutationRoot.render(),setTimeout(()=>{e.mutationRoot.focusLastEditor_()})}return()=>{if(e.workspace)e.workspace.dispose()}},[e]),_t(Do,{title:U(ht,{id:"blocks.myBlockPrompt.title",defaultMessage:"Make a Block"}),className:P.promptModal,onClose:o,children:[U("div",{ref:e,className:P.workspace}),_t("div",{className:P.body,children:[_t("div",{className:P.optionsRow,children:[_t("div",{role:"button",className:P.optionCard,onClick:A,children:[U("img",{className:P.optionIcon,src:C1}),U("div",{className:P.optionTitle,children:U(ht,{id:"blocks.myBlockPrompt.addAnInputNumberText",defaultMessage:"Add an input"})}),U("div",{className:P.optionDescription,children:U(ht,{id:"blocks.myBlockPrompt.numberTextType",defaultMessage:"number or text"})})]}),_t("div",{role:"button",className:P.optionCard,onClick:E,children:[U("img",{className:P.optionIcon,src:p1}),U("div",{className:P.optionTitle,children:U(ht,{id:"blocks.myBlockPrompt.addAnInputBoolean",defaultMessage:"Add an input"})}),U("div",{className:P.optionDescription,children:U(ht,{id:"blocks.myBlockPrompt.booleanType",defaultMessage:"boolean"})})]}),_t("div",{role:"button",className:P.optionCard,onClick:l,children:[U("img",{className:P.optionIcon,src:R1}),U("div",{className:P.optionTitle,children:U(ht,{id:"blocks.myBlockPrompt.addALabel",defaultMessage:"Add a label"})})]})]}),_t("div",{className:P.buttonRow,children:[U(f1,{className:P.button,onClick:o,children:U(ht,{id:"blocks.prompt.cancel",defaultMessage:"Cancel"})}),U(f1,{className:wo(P.button,P.okButton),onClick:R,children:U(ht,{id:"blocks.prompt.ok",defaultMessage:"OK"})})]})]})]})}import{useEffect as bo,useState as A1}from"preact/hooks";import{useLocale as So,useLayout as Io,useEditor as Fo}from"@blockcode/core";import{Library as Lo}from"@blockcode/ui";var O1=["brain","broadcast","color-sensor","light","nes","pen","request","servo","text","time","translate","wedo2"].map(async(t)=>{const{default:o}=await import(`@blockcode/extension-${t}`);return o.id=t,o});import{jsx as $o}from"preact/jsx-runtime";var Po=Promise.all(O1);function Qt({deviceId:t,onSelect:o,onClose:i,onFilter:e}){const[u,c]=A1([]),[d,l]=A1(!1),{language:E,getText:A}=So(),{createAlert:R,removeAlert:$}=Io(),{addAsset:C}=Fo(),N=(p)=>{const h=p.tags||[];let g=["blocks"];if(e)g=e(h);if(Array.isArray(g))return g.some((S)=>{if(Array.isArray(S))return S.every((w)=>w[0]==="!"?!h.includes(w.slice(1)):h.includes(w));return h.includes(S)});return g};return bo(()=>{Po.then((p)=>{c(p.filter(N).map((h)=>Object.assign({...h,featured:!0,disabled:h.disabled||h.preview,onSelect:()=>{o(h.id),i()}},h.translations&&h.translations[E]?{name:h.translations[E].name||h.name,description:h.translations[E].description||h.description,collaborator:h.translations[E].collaborator||h.collaborator}:{}))),l(!1)})},[]),$o(Lo,{filterable:!0,loading:d,items:u,filterPlaceholder:A("gui.library.search","Search"),title:A("blocks.extensions.addExtension","Add Extension"),emptyText:A("blocks.extensions.empty","No extension!"),onClose:i})}Et(".cujmXa_editor-wrapper{border-radius:inherit;width:100%;height:100%;position:relative}.cujmXa_extension-button{z-index:var(--z-index-extension-button);background:var(--motion-primary);border:1px solid var(--motion-primary);box-sizing:content-box;border-bottom-left-radius:inherit;border-top:0;height:3.25rem;position:absolute;bottom:-1px;left:-1px}.cujmXa_extension-button:before{--fade-out-distance:15px;content:\"\";top:calc(calc(-1*var(--fade-out-distance)));height:var(--fade-out-distance);background:linear-gradient(#0000,#00000026);position:absolute;left:0;right:0}.cujmXa_add-button{cursor:pointer;background:0 0;border:none;outline:none;width:100%;height:100%}.cujmXa_add-button img{width:1.75rem;height:1.75rem}.cujmXa_debug-box{z-index:var(--z-index-monitor);border:1px solid var(--ui-tertiary);border-radius:var(--space)var(--space)0 0;opacity:.8;font-size:var(--standard-font-size);background:#fff;border-bottom:0;width:600px;height:300px;position:absolute;bottom:0;left:50vw;overflow:auto;transform:translate(-50%)}.cujmXa_debug-box pre{margin:calc(var(--space)/2)}");var Ft={debugBox:"cujmXa_debug-box",addButton:"cujmXa_add-button",editorWrapper:"cujmXa_editor-wrapper",extensionButton:"cujmXa_extension-button"};var g1="./assets/icon-extension-61vrne2y.svg";import{jsx as Nt,jsxs as w1,Fragment as Zo}from"preact/jsx-runtime";var tt=new Map,D1=(t)=>typeof t!=="string"&&!t.button,Ho=async(t,o,i,e,u)=>{if(o){for(let c of o)if(!tt.has(c)){let{default:d}=await import(`@blockcode/extension-${c}/blocks`);if(typeof d==="function")d=d(t);if(d.id=c,d.files)for(let l of d.files){const E=`extensions/${c}/${l.name}`,A=await fetch(l.uri).then((R)=>R.text());e({...l,id:E,content:A})}if(i(d.translations),u)u({...d,blocks:d.blocks.filter(D1)});tt.set(c,d)}}};function Lt({toolbox:t,messages:o,generators:i,enableMultiTargets:e,enableLocalVariable:u,disableGenerator:c,disableExtension:d,deviceId:l,onChange:E,onExtensionsFilter:A,onLoadExtension:R}){const{addLocaleData:$,getText:C,maybeLocaleText:N}=Wo(),{splash:p,createPrompt:h,createAlert:g,removeAlert:S,setSplash:w}=yo(),{editor:z,fileList:W,selectedFileId:X,openFile:rt,modifyFile:Ct,addAsset:wt,setModified:Dt}=M1(),[_,s]=Mt(),[a,n]=Mt(!1),[m,M]=Mt(!1),[D,v]=Mt(!1),[B,G]=Mt(!1);o={EVENT_WHENPROGRAMSTART:C("blocks.event.programStart","when program start"),CONTROL_STOP_OTHER:C("blocks.control.stopOther","other scripts"),PROCEDURES_ADD_LABEL:C("blocks.myblock.addLabel"," label text"),PROCEDURES_ADD_BOOLEAN:C("blocks.myblock.addBoolean","boolean"),PROCEDURES_ADD_STRING_NUMBER:C("blocks.myblock.addNumbetText","number or text"),...o||[]},Uo(()=>{y.prompt=(T,f,F,b,ot)=>{const it={callback:F,message:T,defaultValue:f};it.title=b?b:y.Msg.VARIABLE_MODAL_TITLE,it.varType=typeof ot==="string"?ot:y.SCALAR_VARIABLE_TYPE,it.showVariableOptions=e&&ot!==y.BROADCAST_MESSAGE_VARIABLE_TYPE&&it.title!==y.Msg.RENAME_VARIABLE_MODAL_TITLE&&it.title!==y.Msg.RENAME_LIST_MODAL_TITLE,it.showCloudOption=ot===y.SCALAR_VARIABLE_TYPE&&this.props.canUseCloud,n(it)},y.FlyoutExtensionCategoryHeader.getExtensionState=(T)=>{if(tt.has(T)){const f=tt.get(T);if(f.connectionConfig?.items.every((F)=>localStorage.getItem(`${f.id}.connection.${F.id}`)))return y.StatusButtonState.READY}return y.StatusButtonState.NOT_READY},y.statusButtonCallback=(T)=>{if(!tt.has(T))return;const f=tt.get(T),{connectionConfig:F}=f;if(!F)return;h({title:f.name,label:F.title,inputMode:F.items.map((b)=>({name:b.id,placeholder:b.text,defaultValue:localStorage.getItem(`${f.id}.connection.${b.id}`)})),body:F.description,onSubmit:(b)=>{if(Object.entries(b).forEach(([ot,it])=>{localStorage.setItem(`${f.id}.connection.${ot}`,`${it}`)}),_)y.refreshStatusButtons(_)}})},y.Procedures.externalProcedureDefCallback=(T,f)=>{M({mutator:T,defCallback:f})}},[_]);let Y;if(_)Y=_.getAllVariables().filter((T)=>{if(T.isLocal)return!1;if(T.type===y.BROADCAST_MESSAGE_VARIABLE_TYPE){if(T.name===y.Msg.DEFAULT_BROADCAST_MESSAGE_NAME)return!1;const f=T.id_.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),F=new RegExp(`<field name="BROADCAST_OPTION" id="${f}"[^>]+>[^<]+</field>`,"g");for(let b of W)if(F.test(b.xml))return!0;return!1}return!0});let Z=t||Yo();const J=X===W[0].id,L=(T)=>T.bind(null,{context:M1(),createPrompt:h,createAlert:g,removeAlert:S});tt.forEach((T)=>{Z+=Bt(i,T,J,N,L)});const Q=(T)=>{let f="\n";if(!c)f=i[0].workspaceToCode(T);const F=Array.from(new Set(Object.values(T.blockDB_).filter((b)=>tt.has(b.category_)).map((b)=>b.category_)));return{content:f,extensions:F}},V=(T,f)=>{const{content:F,extensions:b}=Q(f);if(Ct({xml:T,content:F,extensions:b}),E)E(T,f)},O=(T,f)=>{a.callback(T,[],f),n(!1)},j=(T)=>{if(T&&_&&m)m.defCallback(T),_.refreshToolboxSelection_(),_.toolbox_.scrollToCategoryById("myBlocks");M(!1)},k=()=>{n(!1),M(!1)},q=()=>v(!0),vt=()=>v(!1),bt=async(T)=>{if(!tt.has(T)){g("importing",{id:T});let{default:f}=await import(`@blockcode/extension-${T}/blocks`);if(typeof f==="function")f=f(l);if(f.id=T,f.files)for(let F of f.files){const b=`extensions/${T.replace(/[^a-z\d]/gi,"_")}/${F.name}`,ot=await fetch(F.uri).then((it)=>it.text());wt({...F,id:b,content:ot})}if($(f.translations),R)R({...f,blocks:f.blocks.filter(D1)});tt.set(f.id,f),S(T)}setTimeout(()=>{_.toolbox_.setSelectedCategoryById(T)},50)};if(p){if(p===!0&&B===!1)tt.clear(),G(Ho(l,z.extensions,$,wt,R).then(()=>{setTimeout(()=>G(!0),50)}));if(B===!0){const T=p;if(W.length===1||T===X)w(!1),G(!1),setTimeout(()=>Dt(!1),50);else{const f=W.findIndex((b)=>b.id===X)||0;if(W[f].content){const b=W.at(f-1).id;setTimeout(()=>{if(p===!0)w(X);rt(b)})}}}}let Rt=!0;if(z.extensions)Rt=z.extensions.every((T)=>tt.has(T));return w1(Zo,{children:[w1("div",{className:Ft.editorWrapper,children:[Nt(Ko,{toolbox:Z,messages:o,extensionsLoaded:Rt,globalVariables:Y,onWorkspaceCreated:s,onChange:V}),d?null:Nt("div",{className:Xo("scratchCategoryMenu",Ft.extensionButton),children:Nt("button",{className:Ft.addButton,title:C("blocks.extensions.addExtension","Add Extension"),onClick:q,children:Nt("img",{src:g1,title:"Add Extension"})})}),a&&Nt(Gt,{title:a.title,label:a.message,defaultValue:a.defaultValue,enableLocalVariable:u,showListMessage:a.varType===y.LIST_VARIABLE_TYPE,showVariableOptions:a.showVariableOptions,showCloudOption:a.showCloudOption,onClose:k,onSubmit:O}),m&&Nt(Jt,{mutator:m.mutator,onClose:k,onSubmit:j}),D&&Nt(Qt,{deviceId:l,onFilter:A,onSelect:bt,onClose:vt})]}),!1]})}var v1="./assets/icon-blocks-vgmb334q.svg";var b1={"blocks.menu.file":"File","blocks.menu.file.newProject":"New","blocks.menu.file.openProject":"Open","blocks.menu.file.saveProject":"Save","blocks.menu.file.uploadProject":"Load from your computer","blocks.menu.file.downloadProject":"Save to your computer","blocks.menu.edit":"Edit","blocks.menu.edit.undo":"Undo","blocks.menu.edit.redo":"Redo","blocks.menu.device":"Device","blocks.menu.device.name":"device","blocks.menu.device.connect":"Connect to your {name}","blocks.menu.device.disconnect":"Disconnect this {name}","blocks.menu.device.download":"Download program","blocks.menu.device.turnOnAutoDownload":"Turn on Auto Download","blocks.menu.device.turnOffAutoDownload":"Turn off Auto Download","blocks.alert.downloading":"Downloading...{progress}%","blocks.alert.downloadCompleted":"Download completed.","blocks.alert.connectionCancel":"Connection cancel.","blocks.alert.connectionError":"Connection error.","blocks.alert.flashOutSpace":"The flash is running out of space.","blocks.codeTab":"Code","blocks.monitorPane.title":"Monitor","blocks.downloadToDevice":"Download","blocks.extensions.addExtension":"Add Extension","blocks.extensions.empty":"No extension!","blocks.prompt.ok":"OK","blocks.prompt.cancel":"Cancel","blocks.dataPrompt.forAllTargets":"For all targets","blocks.dataPrompt.forThisTarget":"For this target only","blocks.dataPrompt.availableToAllTargets":"This variable will be available to all targets.","blocks.dataPrompt.listAvailableToAllTargets":"This list will be available to all targets.","blocks.myBlockPrompt.title":"Make a Block","blocks.myBlockPrompt.addAnInputNumberText":"Add an input","blocks.myBlockPrompt.numberTextType":"number or text","blocks.myBlockPrompt.addAnInputBoolean":"Add an input","blocks.myBlockPrompt.booleanType":"boolean","blocks.myBlockPrompt.addALabel":"Add a label","blocks.myBlockPrompt.command":"Command","blocks.myBlockPrompt.reporterNumberText":"Return number or text","blocks.myBlockPrompt.reporterBoolean":"Return boolean","blocks.event.programStart":"when program start","blocks.control.stopOther":"other scripts","blocks.myblock.addLabel":" label text","blocks.myblock.addBoolean":"boolean","blocks.myblock.addNumbetText":"number or text"};var S1={"blocks.menu.file":"\u6587\u4EF6","blocks.menu.file.newProject":"\u65B0\u4F5C\u54C1","blocks.menu.file.openProject":"\u6253\u5F00","blocks.menu.file.saveProject":"\u4FDD\u5B58","blocks.menu.file.uploadProject":"\u4ECE\u7535\u8111\u4E2D\u6253\u5F00","blocks.menu.file.downloadProject":"\u4FDD\u5B58\u5230\u7535\u8111","blocks.menu.edit":"\u7F16\u8F91","blocks.menu.edit.undo":"\u64A4\u9500","blocks.menu.edit.redo":"\u6062\u590D","blocks.menu.device":"\u8BBE\u5907","blocks.menu.device.name":"\u8BBE\u5907","blocks.menu.device.connect":"\u8FDE\u63A5{name}","blocks.menu.device.disconnect":"\u65AD\u5F00{name}\u8FDE\u63A5","blocks.menu.device.download":"\u4E0B\u8F7D\u7A0B\u5E8F","blocks.menu.device.turnOnAutoDownload":"\u6253\u5F00\u81EA\u52A8\u4E0B\u8F7D","blocks.menu.device.turnOffAutoDownload":"\u5173\u95ED\u81EA\u52A8\u4E0B\u8F7D","blocks.alert.downloading":"\u6B63\u5728\u4E0B\u8F7D\u2026{progress}%","blocks.alert.downloadCompleted":"\u4E0B\u8F7D\u5B8C\u6210\u3002","blocks.alert.connectionCancel":"\u8FDE\u63A5\u53D6\u6D88\u3002","blocks.alert.connectionError":"\u8FDE\u63A5\u9519\u8BEF\u3002","blocks.alert.flashOutSpace":"\u8BBE\u5907\u7A7A\u95F4\u4E0D\u8DB3\u3002","blocks.codeTab":"\u4EE3\u7801","blocks.monitorPane.title":"\u76D1\u89C6\u5668","blocks.downloadToDevice":"\u4E0B\u8F7D","blocks.extensions.addExtension":"\u6DFB\u52A0\u6269\u5C55","blocks.extensions.empty":"\u6CA1\u6709\u6269\u5C55\uFF01","blocks.prompt.ok":"\u786E\u5B9A","blocks.prompt.cancel":"\u53D6\u6D88","blocks.dataPrompt.forAllTargets":"\u9002\u7528\u4E8E\u5168\u5C40","blocks.dataPrompt.forThisTarget":"\u4EC5\u9002\u7528\u4E8E\u5F53\u524D","blocks.dataPrompt.availableToAllTargets":"\u5168\u5C40\u90FD\u53EF\u4F7F\u7528\u8BE5\u53D8\u91CF\u3002","blocks.dataPrompt.listAvailableToAllTargets":"\u5168\u5C40\u90FD\u53EF\u4F7F\u7528\u8BE5\u5217\u8868\u3002","blocks.myBlockPrompt.title":"\u5236\u4F5C\u65B0\u7684\u79EF\u6728","blocks.myBlockPrompt.addAnInputNumberText":"\u6DFB\u52A0\u8F93\u5165\u9879","blocks.myBlockPrompt.numberTextType":"\u6570\u5B57\u6216\u6587\u672C","blocks.myBlockPrompt.addAnInputBoolean":"\u6DFB\u52A0\u8F93\u5165\u9879","blocks.myBlockPrompt.booleanType":"\u5E03\u5C14\u503C","blocks.myBlockPrompt.addALabel":"\u6DFB\u52A0\u6587\u672C\u6807\u7B7E","blocks.myBlockPrompt.command":"\u65E0\u8FD4\u56DE\u503C","blocks.myBlockPrompt.reporterNumberText":"\u8FD4\u56DE\u6570\u5B57\u6216\u6587\u672C","blocks.myBlockPrompt.reporterBoolean":"\u8FD4\u56DE\u5E03\u5C14\u503C","blocks.event.programStart":"\u5F53\u7A0B\u5E8F\u5F00\u59CB\u8FD0\u884C","blocks.control.stopOther":"\u5176\u4ED6\u811A\u672C","blocks.myblock.addLabel":"\u6587\u672C","blocks.myblock.addBoolean":"\u5E03\u5C14\u503C","blocks.myblock.addNumbetText":"\u6570\u5B57\u6216\u6587\u672C"};var I1={en:b1,"zh-Hans":S1};import{jsx as jt}from"preact/jsx-runtime";var zo={icon:v1,label:jt(F1,{id:"blocks.codeTab",defaultMessage:"Code"}),Content:Lt},nn={label:jt(F1,{id:"blocks.monitorPane.title",defaultMessage:"Monitor"}),Content:null};function Bo({addLocaleData:t,openProject:o}){t(I1);const i=()=>{o(Object.assign(h1))};return i(),{mainMenu:Yt({createProject:i,openProject:o}),tabs:[{...zo,Content:()=>jt(Lt,{generators:[new Ht]})}],sidebars:[],pane:!1,tutorials:!0,canEditProjectName:!0,defaultFileIndex:0,defaultTabIndex:0}}export{nn as monitorPane,Yt as makeMainMenu,I1 as locales,Bo as default,zo as codeTab,ut as PythonGenerator};
