var v1=Object.create;var{getPrototypeOf:P1,defineProperty:kt,getOwnPropertyNames:$1}=Object;var V1=Object.prototype.hasOwnProperty;var U1=(t,i,o)=>{o=t!=null?v1(P1(t)):{};const n=i||!t||!t.__esModule?kt(o,"default",{value:t,enumerable:!0}):o;for(let e of $1(t))if(!V1.call(n,e))kt(n,e,{get:()=>t[e],enumerable:!0});return n};var W1=(t,i)=>()=>(i||t((i={exports:{}}).exports,i),i.exports);var xt=W1((Pt)=>{(function(){var t=typeof Pt!="undefined"&&Pt||typeof define!="undefined"&&{}||this||window;if(typeof define!=="undefined")define("save-svg-as-png",[],function(){return t});t.default=t;var i="http://www.w3.org/2000/xmlns/",o="http://www.w3.org/1999/xhtml",n="http://www.w3.org/2000/svg",e='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd" [<!ENTITY nbsp "&#160;">]>',T=/url\(["']?(.+?)["']?\)/,_={woff2:"font/woff2",woff:"font/woff",otf:"application/x-font-opentype",ttf:"application/x-font-ttf",eot:"application/vnd.ms-fontobject",sfnt:"application/font-sfnt",svg:"image/svg+xml"},d=function l(u){return u instanceof HTMLElement||u instanceof SVGElement},h=function l(u){if(!d(u))throw new Error("an HTMLElement or SVGElement is required; got "+u)},f=function l(u){return new Promise(function(s,a){if(d(u))s(u);else a(new Error("an HTMLElement or SVGElement is required; got "+u))})},R=function l(u){return u&&u.lastIndexOf("http",0)===0&&u.lastIndexOf(window.location.host)===-1},X=function l(u){var s=Object.keys(_).filter(function(a){return u.indexOf("."+a)>0}).map(function(a){return _[a]});if(s)return s[0];return console.error("Unknown font format for "+u+". Fonts may not be working correctly."),"application/octet-stream"},p=function l(u){var s="",a=new Uint8Array(u);for(var E=0;E<a.byteLength;E++)s+=String.fromCharCode(a[E]);return window.btoa(s)},g=function l(u,s,a){var E=u.viewBox&&u.viewBox.baseVal&&u.viewBox.baseVal[a]||s.getAttribute(a)!==null&&!s.getAttribute(a).match(/%$/)&&parseInt(s.getAttribute(a))||u.getBoundingClientRect()[a]||parseInt(s.style[a])||parseInt(window.getComputedStyle(u).getPropertyValue(a));return typeof E==="undefined"||E===null||isNaN(parseFloat(E))?0:E},A=function l(u,s,a,E){if(u.tagName==="svg")return{width:a||g(u,s,"width"),height:E||g(u,s,"height")};else if(u.getBBox){var c=u.getBBox(),S=c.x,w=c.y,J=c.width,Q=c.height;return{width:S+J,height:w+Q}}},N=function l(u){return decodeURIComponent(encodeURIComponent(u).replace(/%([0-9A-F]{2})/g,function(s,a){var E=String.fromCharCode("0x"+a);return E==="%"?"%25":E}))},M=function l(u){var s=window.atob(u.split(",")[1]),a=u.split(",")[0].split(":")[1].split(";")[0],E=new ArrayBuffer(s.length),c=new Uint8Array(E);for(var S=0;S<s.length;S++)c[S]=s.charCodeAt(S);return new Blob([E],{type:a})},b=function l(u,s){if(!s)return;try{return u.querySelector(s)||u.parentNode&&u.parentNode.querySelector(s)}catch(a){console.warn('Invalid CSS selector "'+s+'"',a)}},F=function l(u,s){var a=u.cssText.match(T),E=a&&a[1]||"";if(!E||E.match(/^data:/)||E==="about:blank")return;var c=E.startsWith("../")?s+"/../"+E:E.startsWith("./")?s+"/."+E:E;return{text:u.cssText,format:X(c),url:c}},I=function l(u){return Promise.all(Array.from(u.querySelectorAll("image")).map(function(s){var a=s.getAttributeNS("http://www.w3.org/1999/xlink","href")||s.getAttribute("href");if(!a)return Promise.resolve(null);if(R(a))a+=(a.indexOf("?")===-1?"?":"&")+"t="+new Date().valueOf();return new Promise(function(E,c){var S=document.createElement("canvas"),w=new Image;w.crossOrigin="anonymous",w.src=a,w.onerror=function(){return c(new Error("Could not load "+a))},w.onload=function(){S.width=w.width,S.height=w.height,S.getContext("2d").drawImage(w,0,0),s.setAttributeNS("http://www.w3.org/1999/xlink","href",S.toDataURL("image/png")),E(!0)}})}))},P={},y=function l(u){return Promise.all(u.map(function(s){return new Promise(function(a,E){if(P[s.url])return a(P[s.url]);var c=new XMLHttpRequest;c.addEventListener("load",function(){var S=p(c.response),w=s.text.replace(T,'url("data:'+s.format+";base64,"+S+'")')+"\n";P[s.url]=w,a(w)}),c.addEventListener("error",function(S){console.warn("Failed to load font from: "+s.url,S),P[s.url]=null,a(null)}),c.addEventListener("abort",function(S){console.warn("Aborted loading font from: "+s.url,S),a(null)}),c.open("GET",s.url),c.responseType="arraybuffer",c.send()})})).then(function(s){return s.filter(function(a){return a}).join("")})},H=null,Ot=function l(){if(H)return H;return H=Array.from(document.styleSheets).map(function(u){try{return{rules:u.cssRules,href:u.href}}catch(s){return console.warn("Stylesheet could not be loaded: "+u.href,s),{}}})},mt=function l(u,s){var a=s||{},E=a.selectorRemap,c=a.modifyStyle,S=a.modifyCss,w=a.fonts,J=a.excludeUnusedCss,Q=S||function($,q){var U=E?E($):$,O=c?c(q):q;return U+"{"+O+"}\n"},Z=[],B=typeof w==="undefined",j=w||[];return Ot().forEach(function($){var{rules:q,href:U}=$;if(!q)return;Array.from(q).forEach(function(O){if(typeof O.style!="undefined"){if(b(u,O.selectorText))Z.push(Q(O.selectorText,O.style.cssText));else if(B&&O.cssText.match(/^@font-face/)){var k=F(O,U);if(k)j.push(k)}else if(!J)Z.push(O.cssText)}})}),y(j).then(function($){return Z.join("\n")+$})},bt=function l(){if(!navigator.msSaveOrOpenBlob&&!("download"in document.createElement("a")))return{popup:window.open()}};t.prepareSvg=function(l,u,s){h(l);var a=u||{},E=a.left,c=E===void 0?0:E,S=a.top,w=S===void 0?0:S,J=a.width,Q=a.height,Z=a.scale,B=Z===void 0?1:Z,j=a.responsive,$=j===void 0?!1:j,q=a.excludeCss,U=q===void 0?!1:q;return I(l).then(function(){var O=l.cloneNode(!0);O.style.backgroundColor=(u||{}).backgroundColor||l.style.backgroundColor;var k=A(l,O,J,Q),G=k.width,x=k.height;if(l.tagName!=="svg")if(l.getBBox){if(O.getAttribute("transform")!=null)O.setAttribute("transform",O.getAttribute("transform").replace(/translate\(.*?\)/,""));var wt=document.createElementNS("http://www.w3.org/2000/svg","svg");wt.appendChild(O),O=wt}else{console.error("Attempted to render non-SVG element",l);return}if(O.setAttribute("version","1.1"),O.setAttribute("viewBox",[c,w,G,x].join(" ")),!O.getAttribute("xmlns"))O.setAttributeNS(i,"xmlns",n);if(!O.getAttribute("xmlns:xlink"))O.setAttributeNS(i,"xmlns:xlink","http://www.w3.org/1999/xlink");if($)O.removeAttribute("width"),O.removeAttribute("height"),O.setAttribute("preserveAspectRatio","xMinYMin meet");else O.setAttribute("width",G*B),O.setAttribute("height",x*B);if(Array.from(O.querySelectorAll("foreignObject > *")).forEach(function(m){m.setAttributeNS(i,"xmlns",m.tagName==="svg"?n:o)}),U){var Dt=document.createElement("div");Dt.appendChild(O);var ft=Dt.innerHTML;if(typeof s==="function")s(ft,G,x);else return{src:ft,width:G,height:x}}else return mt(l,u).then(function(m){var C=document.createElement("style");C.setAttribute("type","text/css"),C.innerHTML="<![CDATA[\n"+m+"\n]]>";var v=document.createElement("defs");v.appendChild(C),O.insertBefore(v,O.firstChild);var D=document.createElement("div");D.appendChild(O);var ot=D.innerHTML.replace(/NS\d+:href/gi,'xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href');if(typeof s==="function")s(ot,G,x);else return{src:ot,width:G,height:x}})})},t.svgAsDataUri=function(l,u,s){return h(l),t.prepareSvg(l,u).then(function(a){var{src:E,width:c,height:S}=a,w="data:image/svg+xml;base64,"+window.btoa(N(e+E));if(typeof s==="function")s(w,c,S);return w})},t.svgAsPngUri=function(l,u,s){h(l);var a=u||{},E=a.encoderType,c=E===void 0?"image/png":E,S=a.encoderOptions,w=S===void 0?0.8:S,J=a.canvg,Q=function Z(B){var{src:j,width:$,height:q}=B,U=document.createElement("canvas"),O=U.getContext("2d"),k=window.devicePixelRatio||1;if(U.width=$*k,U.height=q*k,U.style.width=U.width+"px",U.style.height=U.height+"px",O.setTransform(k,0,0,k,0,0),J)J(U,j);else O.drawImage(j,0,0);var G=void 0;try{G=U.toDataURL(c,w)}catch(x){if(typeof SecurityError!=="undefined"&&x instanceof SecurityError||x.name==="SecurityError"){console.error("Rendered SVG images cannot be downloaded in this browser.");return}else throw x}if(typeof s==="function")s(G,U.width,U.height);return Promise.resolve(G)};if(J)return t.prepareSvg(l,u).then(Q);else return t.svgAsDataUri(l,u).then(function(Z){return new Promise(function(B,j){var $=new Image;$.onload=function(){return B(Q({src:$,width:$.width,height:$.height}))},$.onerror=function(){j("There was an error loading the data URI as an image on the following SVG\n"+window.atob(Z.slice(26))+"Open the following link to see browser\'s diagnosis\n"+Z)},$.src=Z})})},t.download=function(l,u,s){if(navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(M(u),l);else{var a=document.createElement("a");if("download"in a){a.download=l,a.style.display="none",document.body.appendChild(a);try{var E=M(u),c=URL.createObjectURL(E);a.href=c,a.onclick=function(){return requestAnimationFrame(function(){return URL.revokeObjectURL(c)})}}catch(S){console.error(S),console.warn("Error while getting object URL. Falling back to string URL."),a.href=u}a.click(),document.body.removeChild(a)}else if(s&&s.popup)s.popup.document.title=l,s.popup.location.replace(u)}},t.saveSvg=function(l,u,s){var a=bt();return f(l).then(function(E){return t.svgAsDataUri(E,s||{})}).then(function(E){return t.download(u,E,a)})},t.saveSvgAsPng=function(l,u,s){var a=bt();return f(l).then(function(E){return t.svgAsPngUri(E,s||{})}).then(function(E){return t.download(u,E,a)})}})()});import{Text as L1}from"@blockcode/ui";import{Text as Kt}from"@blockcode/ui";var i1=U1(xt(),1);import{Keys as rt,useLayout as X1,useEditor as y1}from"@blockcode/core";import{Text as _t,MenuSection as t1,MenuItem as ct}from"@blockcode/ui";import{ScratchBlocks as K1}from"@blockcode/blocks-editor";import{jsx as tt,jsxs as Vt,Fragment as Y1}from"preact/jsx-runtime";var $t=/Mac/i.test(navigator.platform||navigator.userAgent);function Ut({itemClassName:t,onNew:i,onOpen:o,onSave:n,children:e}){const{createPrompt:T,setStoreLibrary:_}=X1(),{modified:d,saveNow:h,saveToComputer:f,openFromComputer:R}=y1(),X=(g)=>{if(n)return n(g);return g},p=async()=>{let g,A;const N=K1.getMainWorkspace();if(N){const M=N.getCanvas();if(M)g=await i1.svgAsDataUri(M,{})}return(M)=>{let b=new Set;const F={thumb:g,...X(M)};if(F.assetList)F.assetList=F.assetList.filter((I)=>!I.id.startsWith("extensions/"));return F.fileList=F.fileList.map(({content:I,script:P,extensions:y,...H})=>{return b=b.union(new Set(y)),H}),F.editor.extensions=Array.from(b),F}};return Vt(Y1,{children:[Vt(t1,{children:[tt(ct,{className:t,label:tt(_t,{id:"blocks.menu.file.newProject",defaultMessage:"New"}),hotkey:[$t?rt.COMMAND:rt.CONTROL,rt.N],onClick:()=>{if(d)T({title:tt(_t,{id:"gui.projects.notSaved",defaultMessage:"Not saved"}),label:tt(_t,{id:"gui.projects.replaceProject",defaultMessage:"Replace contents of the current project?"}),onSubmit:i});else i()}}),tt(ct,{className:t,label:tt(_t,{id:"blocks.menu.file.openProject",defaultMessage:"Open"}),hotkey:[$t?rt.COMMAND:rt.CONTROL,rt.O],onClick:()=>_(!0)}),tt(ct,{className:t,label:tt(_t,{id:"blocks.menu.file.saveProject",defaultMessage:"Save"}),hotkey:[$t?rt.COMMAND:rt.CONTROL,rt.S],onClick:async()=>h(await p())})]}),Vt(t1,{children:[tt(ct,{className:t,label:tt(_t,{id:"blocks.menu.file.uploadProject",defaultMessage:"Load from your computer"}),onClick:()=>R(o)}),tt(ct,{className:t,label:tt(_t,{id:"blocks.menu.file.downloadProject",defaultMessage:"save to your computer"}),onClick:async()=>f(await p())})]}),e]})}import{useEffect as H1,useState as Wt}from"preact/hooks";import{Keys as ht}from"@blockcode/core";import{Text as o1,MenuSection as Z1,MenuItem as n1}from"@blockcode/ui";import{ScratchBlocks as z1}from"@blockcode/blocks-editor";import{jsx as Ft,jsxs as s1,Fragment as B1}from"preact/jsx-runtime";var a1=/Mac/i.test(navigator.platform||navigator.userAgent);function Xt({itemClassName:t,children:i}){const[o,n]=Wt(!0),[e,T]=Wt(!0),[_,d]=Wt(null),h=z1.getMainWorkspace();if(h){if(_?.id!==h.id)d(h)}return H1(()=>{if(_)_.addChangeListener(()=>{n(_.undoStack_.length===0),T(_.redoStack_.length===0)}),n(_.undoStack_.length===0),T(_.redoStack_.length===0)},[_]),s1(B1,{children:[s1(Z1,{children:[Ft(n1,{disabled:o,className:t,label:Ft(o1,{id:"blocks.menu.edit.undo",defaultMessage:"Undo"}),hotkey:[a1?ht.COMMAND:ht.CONTROL,ht.Z],onClick:async(f)=>{if(f instanceof MouseEvent&&_)_.undo(!1)}}),Ft(n1,{disabled:e,className:t,label:Ft(o1,{id:"blocks.menu.edit.redo",defaultMessage:"Redo"}),hotkey:a1?[ht.SHIFT,ht.COMMAND,ht.Z]:[ht.CONTROL,ht.Y],onClick:async(f)=>{if(f instanceof MouseEvent&&_)_.undo(!0)}})]}),i]})}import{useLocale as G1,useLayout as J1,useEditor as Q1}from"@blockcode/core";import{Text as pt,Spinner as j1,MenuSection as q1,MenuItem as k1}from"@blockcode/ui";import{connectDevice as x1,disconnectDevice as _o,checkFlash as ti,writeFiles as ii,configDevice as oi,showDownloadScreen as ni}from"@blockcode/device-pyboard";var r1=[{usbVendorId:12346},{usbVendorId:11914}];import{jsx as et,jsxs as si,Fragment as ai}from"preact/jsx-runtime";var ut=null;function yt({itemClassName:t,deviceName:i,deviceFilters:o,downloadScreen:n,onDownload:e,children:T}){const{maybeLocaleText:_}=G1(),{createAlert:d,removeAlert:h,createPrompt:f}=J1(),{key:R,name:X,fileList:p,assetList:g,device:A,setDevice:N}=Q1(),M=(I)=>{if(!ut)ut=`download.${Date.now()}`;if(I<100)d({id:ut,icon:et(j1,{level:"success"}),message:et(pt,{id:"blocks.alert.downloading",defaultMessage:"Downloading...{progress}%",progress:I})});else d({id:ut,icon:null,message:et(pt,{id:"blocks.alert.downloadCompleted",defaultMessage:"Download completed."})}),setTimeout(b,1000)},b=()=>{h(ut),ut=null},F=()=>{d({message:et(pt,{id:"blocks.alert.connectionError",defaultMessage:"Connection error."})},1000)};if(ut&&!A)F(),b();return si(ai,{children:[et(q1,{children:et(k1,{disabled:ut,className:t,label:et(pt,{id:"blocks.menu.device.download",defaultMessage:"Download program"}),onClick:async()=>{if(ut)return;try{const I=A||await x1(o||r1,N);if(n)await ni(I,n);let P=e?e(X,p,g):[].concat(g);if(P=P.map((y)=>({...y,id:y.id[0]!=="_"?`proj${R}/${y.id}`:y.id})),M(0),await ti(I,P))await ii(I,P,M),await oi(I,{"latest-project":R});else f({title:i||et(pt,{id:"blocks.menu.device.name",defaultMessage:"device"}),label:et(pt,{id:"blocks.alert.flashOutSpace",defaultMessage:"The flash is running out of space."})}),b();I.hardReset()}catch(I){console.log(I),F(),b()}}})}),T]})}var u1="./assets/icon-file-egaz1kfx.svg";var e1="./assets/icon-edit-jejnm7yb.svg";var d1="./assets/icon-device-3gcajtt2.svg";import{jsx as Rt}from"preact/jsx-runtime";function Yt({deviceName:t,deviceFilters:i,createProject:o,openProject:n,saveProject:e,downloadProjectToDevice:T,showDownloadScreen:_}){return[{icon:u1,label:Rt(Kt,{id:"blocks.menu.file",defaultMessage:"File"}),Menu:({itemClassName:d,children:h})=>Rt(Ut,{itemClassName:d,onNew:o,onOpen:n,onSave:e,children:h})},{icon:e1,label:Rt(Kt,{id:"blocks.menu.edit",defaultMessage:"Edit"}),Menu:({itemClassName:d,children:h})=>Rt(Xt,{itemClassName:d,children:h})},{icon:d1,label:Rt(Kt,{id:"blocks.menu.device",defaultMessage:"Device"}),Menu:({itemClassName:d,children:h})=>Rt(yt,{deviceName:t,itemClassName:d,deviceFilters:i,downloadScreen:_,onDownload:T,children:h})}]}var h1=`code_${Date.now().toString(36)}`,di=`
from blocks import *
import ${h1}
start()
`,E1={assetList:[{id:"main",type:"text/x-python",content:di}],fileList:[{id:h1,type:"text/x-python"}]};import{ScratchBlocks as z}from"@blockcode/blocks-editor";class dt extends z.Generator{ORDER_ATOMIC=0;ORDER_COLLECTION=1;ORDER_STRING_CONVERSION=1;ORDER_MEMBER=2.1;ORDER_FUNCTION_CALL=2.2;ORDER_EXPONENTIATION=3;ORDER_UNARY_SIGN=4;ORDER_BITWISE_NOT=4;ORDER_MULTIPLICATIVE=5;ORDER_ADDITIVE=6;ORDER_BITWISE_SHIFT=7;ORDER_BITWISE_AND=8;ORDER_BITWISE_XOR=9;ORDER_BITWISE_OR=10;ORDER_RELATIONAL=11;ORDER_LOGICAL_NOT=12;ORDER_LOGICAL_AND=13;ORDER_LOGICAL_OR=14;ORDER_CONDITIONAL=15;ORDER_LAMBDA=16;ORDER_NONE=99;constructor(){super("Python");this.addReservedWords("False,None,True,and,as,assert,break,class,continue,def,del,elif,else,except,exec,finally,for,from,global,if,import,in,is,lambda,nonlocal,not,or,pass,print,raise,return,try,while,with,yield,NotImplemented,Ellipsis,__debug__,quit,exit,copyright,license,credits,ArithmeticError,AssertionError,AttributeError,BaseException,BlockingIOError,BrokenPipeError,BufferError,BytesWarning,ChildProcessError,ConnectionAbortedError,ConnectionError,ConnectionRefusedError,ConnectionResetError,DeprecationWarning,EOFError,Ellipsis,EnvironmentError,Exception,FileExistsError,FileNotFoundError,FloatingPointError,FutureWarning,GeneratorExit,IOError,ImportError,ImportWarning,IndentationError,IndexError,InterruptedError,IsADirectoryError,KeyError,KeyboardInterrupt,LookupError,MemoryError,ModuleNotFoundError,NameError,NotADirectoryError,NotImplemented,NotImplementedError,OSError,OverflowError,PendingDeprecationWarning,PermissionError,ProcessLookupError,RecursionError,ReferenceError,ResourceWarning,RuntimeError,RuntimeWarning,StandardError,StopAsyncIteration,StopIteration,SyntaxError,SyntaxWarning,SystemError,SystemExit,TabError,TimeoutError,TypeError,UnboundLocalError,UnicodeDecodeError,UnicodeEncodeError,UnicodeError,UnicodeTranslateError,UnicodeWarning,UserWarning,ValueError,Warning,ZeroDivisionError,_,__build_class__,__debug__,__doc__,__import__,__loader__,__name__,__package__,__spec__,abs,all,any,apply,ascii,basestring,bin,bool,buffer,bytearray,bytes,callable,chr,classmethod,cmp,coerce,compile,complex,copyright,credits,delattr,dict,dir,divmod,enumerate,eval,exec,execfile,exit,file,filter,float,format,frozenset,getattr,globals,hasattr,hash,help,hex,id,input,int,intern,isinstance,issubclass,iter,len,license,list,locals,long,map,max,memoryview,min,next,object,oct,open,ord,pow,print,property,quit,range,raw_input,reduce,reload,repr,reversed,round,set,setattr,slice,sorted,staticmethod,str,sum,super,tuple,type,unichr,unicode,vars,xrange,zip,math,random,Number"),this.ORDER_OVERRIDES=[[this.ORDER_FUNCTION_CALL,this.ORDER_MEMBER],[this.ORDER_FUNCTION_CALL,this.ORDER_FUNCTION_CALL],[this.ORDER_MEMBER,this.ORDER_MEMBER],[this.ORDER_MEMBER,this.ORDER_FUNCTION_CALL],[this.ORDER_LOGICAL_NOT,this.ORDER_LOGICAL_NOT],[this.ORDER_LOGICAL_AND,this.ORDER_LOGICAL_AND],[this.ORDER_LOGICAL_OR,this.ORDER_LOGICAL_OR]];for(let t in dt.prototype)if(typeof dt.prototype[t]==="function")dt.prototype[t]=dt.prototype[t].bind(this)}init(t){if(this.PASS=this.INDENT+"pass\n",this.definitions_=Object.create(null),this.functionNames_=Object.create(null),!this.variableDB_)this.variableDB_=new z.Names(this.RESERVED_WORDS_);else this.variableDB_.reset();this.variableDB_.setVariableMap(t.getVariableMap());const i=[],o=t.getAllVariables();for(let e=0;e<o.length;e++){if(o[e].type===z.BROADCAST_MESSAGE_VARIABLE_TYPE)continue;let T=this.variableDB_.getName(o[e].getId(),z.Variables.NAME_TYPE),_="0";if(o[e].type===z.LIST_VARIABLE_TYPE)T=`${T}_${z.LIST_VARIABLE_TYPE}`,_="[]";i.push(`${T} = ${_}`)}const n=z.Variables.allDeveloperVariables(t);for(let e=0;e<n.length;e++){let T=this.variableDB_.getName(n[e],z.Names.DEVELOPER_VARIABLE_TYPE),_="0";if(o[e].type===z.LIST_VARIABLE_TYPE)T=`${T}_${z.LIST_VARIABLE_TYPE}`,_="[]";i.push(`${T} = ${_}`)}if(i.length)this.definitions_.variables=i.join("\n")}finish(t){const i=[],o=[];for(let e in this.definitions_){const T=this.definitions_[e];if(T.match(/^(from\s+\S+\s+)?import\s+\S+/))i.push(T);else o.push(T)}return delete this.definitions_,delete this.functionNames_,this.variableDB_.reset(),(i.join("\n")+"\n\n"+o.join("\n\n")).replace(/\n\n+/g,"\n\n").replace(/\n*$/,"\n\n\n")+t}scrubNakedValue(t){return t+"\n"}quote_(t){let i='"';if(t.indexOf('"')!==-1)if(t.indexOf("'")===-1)i="'";else t=t.replace(/"/g,'\\"');return i+t+i}scrub_(t,i){let o="";if(!t.outputConnection?.targetConnection){let n=t.getCommentText();if(n=z.utils.wrap(n,this.COMMENT_WRAP-3),n)if(t.getProcedureDef)o+='"""'+n+'\n"""\n';else o+=this.prefixLines(n+"\n","# ");for(let e=0;e<t.inputList.length;e++)if(t.inputList[e].type==z.INPUT_VALUE){const T=t.inputList[e].connection.targetBlock();if(T){const _=this.allNestedComments(T);if(_)o+=this.prefixLines(_,"# ")}}}if(t.startHat_){const n=t.nextConnection&&t.nextConnection.targetBlock();let e=this.blockToCode(n);if(e)e=this.prefixLines(e,this.INDENT),i=i.replace(`\n${this.PASS}`,`\n${e}`);return o+i}if(t.parentBlock_){const n=t.nextConnection&&t.nextConnection.targetBlock(),e=this.blockToCode(n);return o+i+e}}getAdjustedInt(t,i,o,n){let e=o||0;if(t.workspace.options.oneBasedIndex)e--;const T=t.workspace.options.oneBasedIndex?"1":"0",_=e?this.ORDER_ADDITIVE:this.ORDER_NONE;let d=this.valueToCode(t,i,_)||T;if(z.isNumber(d)){if(d=parseInt(d,10)+e,n)d=-d}else{if(e>0)d="int("+d+" + "+e+")";else if(e<0)d="int("+d+" - "+-e+")";else d="int("+d+")";if(n)d="-"+d}return d}functionToCode(t,i){return`async def ${t}(${i.join(",")}):\n  this_func = ${t}\n${this.PASS}\n`}eventToCode(t,...i){const o=this.variableDB_.getName(t,z.Variables.NAME_TYPE);if(!this.functionNames_[o])this.functionNames_[o]=0;this.functionNames_[o]+=1;const n=`${t}_${this.functionNames_[o]}`;return this.functionToCode(n,i)}}var r=dt.prototype;var hi=(t)=>{const i=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(i,(n,e,T,_)=>e+e+T+T+_+_);const o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return o?{r:parseInt(o[1],16),g:parseInt(o[2],16),b:parseInt(o[3],16)}:null};r.colour_picker=function(t){const{r:i,g:o,b:n}=hi(t.getFieldValue("COLOUR"));return[`(${i}, ${o}, ${n})`,this.ORDER_ATOMIC]};var At="  await runtime.next_frame()\n";r.control_wait=function(t){let i="";if(this.STATEMENT_PREFIX)i+=this.injectId(this.STATEMENT_PREFIX,t);const o=this.valueToCode(t,"DURATION",this.ORDER_NONE)||0;return i+=`await runtime.wait_for(num(${o}))\n`,i};r.control_repeat=function(t){let i="";if(this.STATEMENT_PREFIX)i+=this.injectId(this.STATEMENT_PREFIX,t);let o=this.statementToCode(t,"SUBSTACK")||this.PASS;if(this.STATEMENT_SUFFIX)o=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,t),this.INDENT)+o;const n=this.valueToCode(t,"TIMES",this.ORDER_NONE)||10;return i+=`for _ in range(num(${n})):\n${o}${At}`,i};r.control_forever=function(t){let i="";if(this.STATEMENT_PREFIX)i+=this.injectId(this.STATEMENT_PREFIX,t);let o=this.statementToCode(t,"SUBSTACK")||this.PASS;if(this.STATEMENT_SUFFIX)o=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,t),this.INDENT)+o;return i+=`while True:\n${o}${At}`,i};r.control_if=function(t){let i="";if(this.STATEMENT_PREFIX)i+=this.injectId(this.STATEMENT_PREFIX,t);let o=this.statementToCode(t,"SUBSTACK")||this.PASS;if(this.STATEMENT_SUFFIX)o=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,t),this.INDENT)+o;const n=this.valueToCode(t,"CONDITION",this.ORDER_NONE)||"False";if(i+=`if ${n}:\n${o}`,t.getInput("SUBSTACK2")){if(o=this.statementToCode(t,"SUBSTACK2")||this.PASS,this.STATEMENT_SUFFIX)o=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,t),this.INDENT)+o;i+=`else:\n${o}`}return i};r.control_if_else=r.control_if;r.control_wait_until=function(t){let i="";if(this.STATEMENT_PREFIX)i+=this.injectId(this.STATEMENT_PREFIX,t);const o=this.valueToCode(t,"CONDITION",this.ORDER_NONE)||"False";return i+=`while not ${o}:\n${At}`,i};r.control_repeat_until=function(t){let i="";if(this.STATEMENT_PREFIX)i+=this.injectId(this.STATEMENT_PREFIX,t);let o=this.statementToCode(t,"SUBSTACK")||this.PASS;if(this.STATEMENT_SUFFIX)o=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,t),this.INDENT)+o;const n=this.valueToCode(t,"CONDITION",this.ORDER_NONE)||"False";return i+=`while not ${n}:\n${o}${At}`,i};r.control_while=function(t){let i="";if(this.STATEMENT_PREFIX)i+=this.injectId(this.STATEMENT_PREFIX,t);let o=this.statementToCode(t,"SUBSTACK")||this.PASS;if(this.STATEMENT_SUFFIX)o=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,t),this.INDENT)+o;const n=this.valueToCode(t,"CONDITION",this.ORDER_NONE)||"False";return i+=`while ${n}:\n${o}${At}`,i};r.control_stop=function(t){let i="";if(this.STATEMENT_PREFIX)i+=this.injectId(this.STATEMENT_PREFIX,t);switch(t.getFieldValue("STOP_OPTION")){case"all":i+="runtime.stop()\n";break;case"this script":i+="return\n";break;case"other scripts in sprite":i+="runtime.stop_tasks(this_func)\n";break}return i};import{ScratchBlocks as L}from"@blockcode/blocks-editor";r.data_variable=function(t){return[this.variableDB_.getName(t.getFieldValue("VARIABLE"),L.Variables.NAME_TYPE),this.ORDER_ATOMIC]};r.data_setvariableto=function(t){let i="";if(r.STATEMENT_PREFIX)i+=r.injectId(r.STATEMENT_PREFIX,t);const o=this.variableDB_.getName(t.getFieldValue("VARIABLE"),L.Variables.NAME_TYPE),n=this.valueToCode(t,"VALUE",this.ORDER_NONE)||'""';return i+=`${o} = ${n}\n`,i};r.data_changevariableby=function(t){let i="";if(r.STATEMENT_PREFIX)i+=r.injectId(r.STATEMENT_PREFIX,t);const o=this.variableDB_.getName(t.getFieldValue("VARIABLE"),L.Variables.NAME_TYPE),n=this.valueToCode(t,"VALUE",this.ORDER_NONE)||0;return i+=`${o} = num(${o}) + num(${n})\n`,i};r.data_listcontents=function(t){return[this.variableDB_.getName(t.getFieldValue("LIST"),L.Variables.NAME_TYPE)+"_"+L.LIST_VARIABLE_TYPE,this.ORDER_ATOMIC]};r.data_addtolist=function(t){let i="";if(this.STATEMENT_PREFIX)i+=this.injectId(this.STATEMENT_PREFIX,t);const o=this.variableDB_.getName(t.getFieldValue("LIST"),L.Variables.NAME_TYPE)+"_"+L.LIST_VARIABLE_TYPE,n=this.valueToCode(t,"ITEM",this.ORDER_NONE)||'""';return i+=`${o}.append(${n})\n`,i};r.data_deleteoflist=function(t){let i="";if(this.STATEMENT_PREFIX)i+=this.injectId(this.STATEMENT_PREFIX,t);const o=this.variableDB_.getName(t.getFieldValue("LIST"),L.Variables.NAME_TYPE)+"_"+L.LIST_VARIABLE_TYPE,n=this.valueToCode(t,"INDEX",this.ORDER_NONE)||1;return i+=`${o}.remove(runtime.index(${n}, len(${o})))\n`,i};r.data_deletealloflist=function(t){let i="";if(this.STATEMENT_PREFIX)i+=this.injectId(this.STATEMENT_PREFIX,t);const o=this.variableDB_.getName(t.getFieldValue("LIST"),L.Variables.NAME_TYPE)+"_"+L.LIST_VARIABLE_TYPE;return i+=`${o} = []\n`,i};r.data_insertatlist=function(t){let i="";if(this.STATEMENT_PREFIX)i+=this.injectId(this.STATEMENT_PREFIX,t);const o=this.variableDB_.getName(t.getFieldValue("LIST"),L.Variables.NAME_TYPE)+"_"+L.LIST_VARIABLE_TYPE,n=this.valueToCode(t,"INDEX",this.ORDER_NONE)||1,e=this.valueToCode(t,"ITEM",this.ORDER_NONE)||'""';return i+=`${o}.insert(runtime.index(${n}, len(${o})), ${e})\n`,i};r.data_replaceitemoflist=function(t){let i="";if(this.STATEMENT_PREFIX)i+=this.injectId(this.STATEMENT_PREFIX,t);const o=this.variableDB_.getName(t.getFieldValue("LIST"),L.Variables.NAME_TYPE)+"_"+L.LIST_VARIABLE_TYPE,n=this.valueToCode(t,"INDEX",this.ORDER_NONE)||1,e=this.valueToCode(t,"ITEM",this.ORDER_NONE)||'""';return i+=`${o}[runtime.index(${n}, len(${o}))] = ${e}\n`,i};r.data_itemoflist=function(t){const i=this.variableDB_.getName(t.getFieldValue("LIST"),L.Variables.NAME_TYPE)+"_"+L.LIST_VARIABLE_TYPE,o=this.valueToCode(t,"INDEX",this.ORDER_NONE)||1;return[`${i}[runtime.index(${o}, len(${i}))]`,this.ORDER_CONDITIONAL]};r.data_itemnumoflist=function(t){const i=this.variableDB_.getName(t.getFieldValue("LIST"),L.Variables.NAME_TYPE)+"_"+L.LIST_VARIABLE_TYPE,o=this.valueToCode(t,"ITEM",this.ORDER_NONE)||0;return[`(${i}.index(${o}) + 1)`,this.ORDER_NONE]};r.data_lengthoflist=function(t){return[`len(${this.variableDB_.getName(t.getFieldValue("LIST"),L.Variables.NAME_TYPE)+"_"+L.LIST_VARIABLE_TYPE})`,this.ORDER_FUNCTION_CALL]};r.data_listcontainsitem=function(t){const i=this.variableDB_.getName(t.getFieldValue("LIST"),L.Variables.NAME_TYPE)+"_"+L.LIST_VARIABLE_TYPE,o=this.valueToCode(t,"ITEM",this.ORDER_NONE)||0;return[`bool(${i}.count(${o}))`,this.ORDER_FUNCTION_CALL]};import{ScratchBlocks as _1}from"@blockcode/blocks-editor";r.event_whenflagclicked=function(){return`@when_start\n${this.eventToCode("start")}`};r.event_whengreaterthan=function(t){const i=t.getFieldValue("WHENGREATERTHANMENU"),o=this.valueToCode(t,"VALUE",this.ORDER_NONE)||0,n=this.eventToCode("greaterthen");return`@when_greaterthen("${i}", num(${o}))\n${n}`};r.event_whenbroadcastreceived=function(t){const i=this.variableDB_.getName(t.getFieldValue("BROADCAST_OPTION"),_1.Variables.NAME_TYPE),o=this.eventToCode("broadcastreceived");return`@when_broadcastreceived("${i}")\n${o}`};r.event_broadcast_menu=function(t){return[this.variableDB_.getName(t.getFieldValue("BROADCAST_OPTION"),_1.Variables.NAME_TYPE),this.ORDER_ATOMIC]};r.event_broadcast=function(t){return`runtime.broadcast("${this.valueToCode(t,"BROADCAST_INPUT",this.ORDER_NONE)||'"message1"'}")\n`};r.event_broadcastandwait=function(t){return`await runtime.broadcast("${this.valueToCode(t,"BROADCAST_INPUT",this.ORDER_NONE)||'"message1"'}", waiting=True)\n`};r.math_number=function(t){let i=parseFloat(t.getFieldValue("NUM")),o;if(i===1/0)i='float("inf")',o=this.ORDER_FUNCTION_CALL;else if(i===-1/0)i='-float("inf")',o=this.ORDER_UNARY_SIGN;else if(Number.isNaN(i))i='float("nan")',o=this.ORDER_UNARY_SIGN;else o=i<0?this.ORDER_UNARY_SIGN:this.ORDER_ATOMIC;return[i,o]};r.math_integer=function(t){const i=parseInt(t.getFieldValue("NUM")),o=i<0?this.ORDER_UNARY_SIGN:this.ORDER_ATOMIC;return[i,o]};r.math_whole_number=function(t){return[Math.abs(parseInt(t.getFieldValue("NUM"))),this.ORDER_ATOMIC]};r.math_positive_number=function(t){let i=parseFloat(t.getFieldValue("NUM")),o;if(i===1/0)i='float("inf")',o=this.ORDER_FUNCTION_CALL;else if(i===-1/0)i='-float("inf")',o=this.ORDER_FUNCTION_CALL;else if(Number.isNaN(i))i='float("nan")',o=this.ORDER_FUNCTION_CALL;else i=i<0?0:i,o=this.ORDER_ATOMIC;return[i,o]};r.math_angle=function(t){let i=parseFloat(t.getFieldValue("NUM")),o;if(i==1/0)i='float("inf")',o=this.ORDER_FUNCTION_CALL;else if(i==-1/0)i='-float("inf")',o=this.ORDER_UNARY_SIGN;else i=i%360,i=i<0?i+360:i,o=this.ORDER_ATOMIC;return[i,o]};r.operator_add=function(t){const i=this.valueToCode(t,"NUM1",this.ORDER_NONE)||0,o=this.valueToCode(t,"NUM2",this.ORDER_NONE)||0;return[`(num(${i}) + num(${o}))`,this.ORDER_SUBTRACTION]};r.operator_subtract=function(t){const i=this.valueToCode(t,"NUM1",this.ORDER_NONE)||0,o=this.valueToCode(t,"NUM2",this.ORDER_NONE)||0;return[`(num(${i}) - num(${o}))`,this.ORDER_SUBTRACTION]};r.operator_multiply=function(t){const i=this.valueToCode(t,"NUM1",this.ORDER_NONE)||0,o=this.valueToCode(t,"NUM2",this.ORDER_NONE)||0;return[`(num(${i}) * num(${o}))`,this.ORDER_SUBTRACTION]};r.operator_divide=function(t){const i=this.valueToCode(t,"NUM1",this.ORDER_NONE)||0,o=this.valueToCode(t,"NUM2",this.ORDER_NONE)||0;return[`(num(${i}) / num(${o}))`,this.ORDER_SUBTRACTION]};r.operator_random=function(t){const i=this.valueToCode(t,"FROM",this.ORDER_NONE)||0,o=this.valueToCode(t,"TO",this.ORDER_NONE)||0;return[`runtime.random(${i}, ${o})`,this.ORDER_FUNCTION_CALL]};r.operator_gt=function(t){const i=this.valueToCode(t,"OPERAND1",this.ORDER_NONE)||0,o=this.valueToCode(t,"OPERAND2",this.ORDER_NONE)||0;return[`(num(${i}) > num(${o}))`,this.ORDER_RELATIONAL]};r.operator_lt=function(t){const i=this.valueToCode(t,"OPERAND1",this.ORDER_NONE)||0,o=this.valueToCode(t,"OPERAND2",this.ORDER_NONE)||0;return[`(num(${i}) < num(${o}))`,this.ORDER_RELATIONAL]};r.operator_equals=function(t){const i=this.valueToCode(t,"OPERAND1",this.ORDER_NONE)||0,o=this.valueToCode(t,"OPERAND2",this.ORDER_NONE)||0;return[`equals(${i}, ${o})`,this.ORDER_FUNCTION_CALL]};r.operator_and=function(t){const i=this.valueToCode(t,"OPERAND1",this.ORDER_NONE)||"False",o=this.valueToCode(t,"OPERAND2",this.ORDER_NONE)||"False";return[`(${i} and ${o})`,this.ORDER_LOGICAL_AND]};r.operator_or=function(t){const i=this.valueToCode(t,"OPERAND1",this.ORDER_NONE)||"False",o=this.valueToCode(t,"OPERAND2",this.ORDER_NONE)||"False";return[`(${i} or ${o})`,this.ORDER_LOGICAL_OR]};r.operator_not=function(t){return[`(not ${this.valueToCode(t,"OPERAND",this.ORDER_NONE)||"False"})`,this.ORDER_LOGICAL_NOT]};r.operator_join=function(t){const i=this.valueToCode(t,"STRING1",this.ORDER_NONE)||'""',o=this.valueToCode(t,"STRING2",this.ORDER_NONE)||'""';return[`(str(${i}) + str(${o}))`,this.ORDER_ATOMIC]};r.operator_letter_of=function(t){const i=this.valueToCode(t,"LETTER",this.ORDER_NONE)||0;return[`(str(${this.valueToCode(t,"STRING",this.ORDER_NONE)||'""'})[num(${i}) - 1] || "")`,this.ORDER_MEMBER]};r.operator_length=function(t){return[`len(str(${this.valueToCode(t,"STRING",this.ORDER_NONE)||'""'}))`,this.ORDER_FUNCTION_CALL]};r.operator_contains=function(t){const i=this.valueToCode(t,"STRING1",this.ORDER_NONE)||'""',o=this.valueToCode(t,"STRING2",this.ORDER_NONE)||'""';return[`(str(${i}).count(str(${o})) > 0)`,this.ORDER_FUNCTION_CALL]};r.operator_mod=function(t){const i=this.valueToCode(t,"NUM1",this.ORDER_NONE)||0,o=this.valueToCode(t,"NUM2",this.ORDER_NONE)||0;return[`(num(${i}) % num(${o}))`,this.ORDER_MODULUS]};r.operator_round=function(t){return this.definitions_.import_math="import math",[`math.round(num(${this.valueToCode(t,"NUM",this.ORDER_NONE)||0}))`,this.ORDER_FUNCTION_CALL]};r.operator_mathop=function(t){this.definitions_.import_math="import math";const i=this.valueToCode(t,"NUM",this.ORDER_NONE)||0,o=t.getFieldValue("OPERATOR");let n="";if(o==="ceiling")n+=`math.ceil(num(${i}))`;else if(o==="sin"||o==="cos"||o==="tan")n+=`math.${o}(math.radians(num(${i})))`;else if(o==="asin"||o==="acos"||o==="atan")n+=`math.degrees(math.${o}(num(${i})))`;else if(o==="ln")n+=`(math.log(num(${i}))`;else if(o==="log")n+=`(math.log10(num(${i}))`;else if(o==="e ^")n+=`math.exp(num(${i}))`;else if(o==="10 ^")n+=`math.pow(10, num(${i}))`;else n+=`math.${o}(num(${i}))`;return[n,this.ORDER_FUNCTION_CALL]};import{ScratchBlocks as gt}from"@blockcode/blocks-editor";r.procedures_definition=function(t){const i=t.childBlocks_[0],o=this.variableDB_.getName(i.getProcCode(),gt.Procedures.NAME_TYPE),n=i.childBlocks_.map((e)=>this.variableDB_.getName(e.getFieldValue("VALUE"),gt.Variables.NAME_TYPE));return this.functionToCode(o,n)};r.procedures_call=function(t){const i=this.variableDB_.getName(t.getProcCode(),gt.Procedures.NAME_TYPE),o=t.argumentIds_.map((n)=>this.valueToCode(t,n,this.ORDER_NONE));return`await ${i}(${o.join(",")})\n`};r.argument_reporter_boolean=function(t){return[this.variableDB_.getName(t.getFieldValue("VALUE"),gt.Variables.NAME_TYPE),this.ORDER_ATOMIC]};r.argument_reporter_string_number=function(t){return[this.variableDB_.getName(t.getFieldValue("VALUE"),gt.Variables.NAME_TYPE),this.ORDER_ATOMIC]};r.sensing_timer=function(){return["runtime.time",this.ORDER_MEMBER]};r.sensing_resettimer=function(){return"runtime.reset_timer()\n"};r.text=function(t){const i=t.getFieldValue("TEXT");return[i.length===0||isNaN(i)?this.quote_(i):+i,this.ORDER_ATOMIC]};class Ht extends dt{init(t){super.init(t),this.definitions_.import_blocks="from blocks import *"}}import{useEffect as Ui,useState as St}from"preact/hooks";import{useLocale as Wi,useLayout as Xi,useEditor as M1}from"@blockcode/core";import{classNames as yi}from"@blockcode/ui";import{BlocksEditor as Ki,ScratchBlocks as K,makeToolboxXML as Yi}from"@blockcode/blocks-editor";import{ScratchBlocks as Zt,blockSeparator as Ei}from"@blockcode/blocks-editor";var _i=1,Ni=2,Ti=3,zt="#0FBD8C",Bt="#0DA57A",N1="#0B8E69",st=(t)=>{if(typeof t!=="string")if(Array.isArray(t))t=String(t);else return t;return t.replace(/[<>&'"]/g,(i)=>{switch(i){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case"'":return"&apos;";case'"':return"&quot;"}})},T1={number:"math_number",angle:"math_angle",text:"text",string:"text",color:"colour_picker",matrix:"matrix",note:"note"},l1={number:"NUM",angle:"NUM",text:"TEXT",string:"TEXT",matrix:"MATRIX",note:"NOTE"};function Gt(t,i,o,n,e){const{id:T}=i,_=n(i.name);let d=`<category name="${st(_)}" id="${st(T)}"`;if(d+=` colour="${st(i.themeColor||zt)}"`,d+=` secondaryColour="${st(i.inputColor||Bt)}"`,i.connectionConfig)d+=' showStatusButton="true"';if(i.iconURI)d+=` iconURI="${st(i.iconURI)}"`;return d+=">",i.menus=i.menus||{},i.blocks.forEach((h)=>{if(h==="---"){d+=`${Ei}`;return}if(h.button){d+=`<button text="${n(h.text)}" callbackKey="${h.button}"></button>`;const A=Zt.getMainWorkspace();if(A){const N=A.getFlyout();if(N){const M=N.getWorkspace();if(M)M.registerButtonCallback(h.button,e(h.onClick))}}return}if(o&&h.useStage===!1)return;if(!o&&h.useSprite===!1)return;const f=`${T}_${h.id}`,R={message0:n(h.text),category:T,outputShape:Ti,colour:i.themeColor||zt,colourSecondary:i.inputColor||Bt,colourTertiary:i.otherColor||N1};let X=1;if(i.iconURI)R.message0=`%1 %2 ${R.message0}`,R.args0=[{type:"field_image",src:i.iconURI,width:40,height:40},{type:"field_vertical_separator"}],R.extensions=["scratch_extension"],X+=2;if(h.hat)R.nextStatement=null;else if(h.output){if(h.output==="boolean")R.output="Boolean",R.outputShape=_i;else R.output="String",R.outputShape=Ni;R.checkboxInFlyout=h.monitoring!==!1}else R.previousStatement=null,R.nextStatement=null;let p=`<block type="${st(f)}">`;if(h.inputs)R.checkboxInFlyout=!1,R.args0=[].concat(R.args0||[],Object.entries(h.inputs).map(([A,N])=>{const M={name:A,type:"input_value"};if(N.menu){let b=N.menu,F=N.name||A,I=N.inputMode||!1,P=N.type||"string",y=N.default||"";if(typeof N.menu==="string")F=N.menu,b=i.menus[F];if(!Array.isArray(b))I=b.inputMode||I,P=b.type||P,y=b.default||y,b=b.items;if(I){if(!i.menus[F])i.menus[F]={inputMode:I,type:P,items:b};if(p+=`<value name="${st(A)}">`,p+=`<shadow type="${T}_menu_${F}">`,y)p+=`<field name="${F}">${st(n(y))}</field>`;p+="</shadow></value>"}else if(b)M.type="field_dropdown",M.options=b.map((H)=>{if(Array.isArray(H)){const[Ot,mt]=H;return[n(Ot),mt]}return H=`${H}`,[H,H]})}else if(N.type==="boolean")M.check="Boolean";else{if(p+=`<value name="${st(A)}">`,T1[N.type]){if(p+=`<shadow type="${T1[N.type]}">`,N.default&&l1[N.type])p+=`<field name="${l1[N.type]}">${st(n(N.default))}</field>`;p+="</shadow>"}p+="</value>"}return R.message0=R.message0.replace(`[${A}]`,`%${X++}`),M}));Zt.Blocks[f]={init(){this.jsonInit(R)}};const g=t.name_.toLowerCase();if(h[g])t[f]=h[g].bind(t);else t[f]=()=>"";p+="</block>",d+=p}),Object.entries(i.menus).forEach(([h,f])=>{if(!f.inputMode)return;const R=`${T}_menu_${h}`,X=f.type==="number"?"output_number":"output_string",p={message0:"%1",args0:[{type:"field_dropdown",name:h,options:f.items.map((g)=>{if(Array.isArray(g)){const[A,N]=g;return[n(A),N]}return g=`${g}`,[g,g]})}],category:T,colour:i.themeColor||zt,colourSecondary:i.inputColor||Bt,colourTertiary:i.otherColor||N1,extensions:[X]};Zt.Blocks[R]={init(){this.jsonInit(p)}},t[R]=(g)=>{const A=g.getFieldValue(h);return[A.length===0||isNaN(A)?this.quote_(A):+A,this.ORDER_ATOMIC]}}),d+="</category>",d}import{useRef as li,useEffect as mi,useState as m1}from"preact/hooks";import{classNames as pi,Text as Ct,Button as p1,Modal as Ri,BufferedInput as Ci}from"@blockcode/ui";function Nt(t){const i=globalThis.document,o=i.createElement("style");o.appendChild(i.createTextNode(t)),i.head.append(o)}Nt("._5SVWFW_prompt-modal{width:360px}._5SVWFW_prompt-content{background:var(--ui-white);padding:1.5rem 2.25rem}._5SVWFW_prompt-content input[type=checkbox],._5SVWFW_prompt-content input[type=radio]{margin:3px}._5SVWFW_label{margin:0 0 .75rem;font-weight:500}._5SVWFW_variable-name-text-input{border:1px solid var(--ui-black-transparent);color:var(--text-primary-transparent);border-radius:5px;width:100%;height:3rem;margin-bottom:1.5rem;padding:0 1rem;font-size:.875rem}._5SVWFW_info-message{text-align:center;margin-bottom:1.5rem;font-size:.875rem;font-weight:400}._5SVWFW_options{justify-content:space-between;margin-bottom:1.5rem;font-weight:400;display:flex}._5SVWFW_button-row{text-align:right;font-weight:bolder}._5SVWFW_button{padding:.75rem 1rem;font-size:.85rem;font-weight:600}._5SVWFW_ok-button{background:var(--motion-primary);border:var(--motion-primary);color:var(--ui-white);margin-left:var(--space)}");var at={buttonRow:"_5SVWFW_button-row",okButton:"_5SVWFW_ok-button",promptModal:"_5SVWFW_prompt-modal",variableNameTextInput:"_5SVWFW_variable-name-text-input",options:"_5SVWFW_options",promptContent:"_5SVWFW_prompt-content",label:"_5SVWFW_label",infoMessage:"_5SVWFW_info-message",button:"_5SVWFW_button"};import{jsx as Y,jsxs as Mt}from"preact/jsx-runtime";function Jt({title:t,label:i,defaultValue:o,enableLocalVariable:n,showListMessage:e,showVariableOptions:T,showCloudOption:_,onClose:d,onSubmit:h}){const f=li(null),[R,X]=m1(o),[p,g]=m1({scope:"global",isCloud:!1}),A=()=>{h(R,p)},N=(M)=>{if(M.key==="Escape")d();if(M.key==="Enter")h(f.current.base.value,p)};return mi(()=>{if(f.current)f.current.base.focus(),window.addEventListener("keydown",N);return()=>{window.removeEventListener("keydown",N)}},[f]),Y(Ri,{title:t,className:at.promptModal,onClose:d,children:Mt("div",{className:at.promptContent,children:[Y("div",{className:at.label,children:i}),Y(Ci,{autoFocus:!0,forceFocus:!0,ref:f,className:at.variableNameTextInput,defaultValue:R,onSubmit:X}),T&&Y("div",{children:n?Mt("div",{className:at.options,children:[Mt("label",{children:[Y("input",{checked:p.scope==="global",name:"variableScopeOption",type:"radio",value:"global",onChange:()=>g({...p,scope:"global"})}),Y(Ct,{id:"blocks.dataPrompt.forAllTargets",defaultMessage:"For all targets"})]}),Mt("label",{children:[Y("input",{checked:p.scope==="local",name:"variableScopeOption",type:"radio",value:"local",onChange:()=>g({...p,scope:"local"})}),Y(Ct,{id:"blocks.dataPrompt.forThisTarget",defaultMessage:"For this target only"})]})]}):Y("div",{className:at.infoMessage,children:e?Y(Ct,{id:"blocks.dataPrompt.listAvailableToAllTargets",defaultMessage:"This list will be available to all targets."}):Y(Ct,{id:"blocks.dataPrompt.availableToAllTargets",defaultMessage:"This variable will be available to all targets."})})}),Mt("div",{className:at.buttonRow,children:[Y(p1,{className:at.button,onClick:d,children:Y(Ct,{id:"blocks.prompt.cancel",defaultMessage:"Cancel"})}),Y(p1,{className:pi(at.button,at.okButton),onClick:A,children:Y(Ct,{id:"blocks.prompt.ok",defaultMessage:"OK"})})]})]})})}import{useRef as Ai,useEffect as gi,useState as Mi}from"preact/hooks";import{classNames as Si,Text as Et,Button as f1,Modal as bi}from"@blockcode/ui";import{ScratchBlocks as It}from"@blockcode/blocks-editor";Nt(".ObKnhW_prompt-modal{width:700px;margin:50px auto}.ObKnhW_body{background:var(--ui-white);padding:1.5rem 2.25rem}.ObKnhW_body input[type=checkbox],.ObKnhW_body input[type=radio]{margin:3px}.ObKnhW_workspace{min-height:200px;position:relative}.ObKnhW_workspace .injectionDiv{position:absolute;inset:0}.ObKnhW_workspace .blocklySvg{background-color:var(--ui-primary)}.ObKnhW_options-row{justify-content:space-between;display:flex}.ObKnhW_option-card{border:2px solid var(--ui-black-transparent);border-radius:var(--space);padding:calc(var(--space)*2);text-align:center;cursor:pointer;background:#fff;flex-grow:1;flex-basis:100px;transition:all .2s}.ObKnhW_option-card:hover{border:2px solid var(--motion-primary);box-shadow:0px 0px 0px 4px var(--motion-transparent)}.ObKnhW_option-card+.ObKnhW_option-card{margin-left:1rem}.ObKnhW_option-icon{max-height:48px;margin-bottom:.5rem}.ObKnhW_option-title{font-weight:700}.ObKnhW_radiobox-row{justify-content:space-between;margin:1rem 6rem 1.5rem;font-weight:400;display:flex}.ObKnhW_button-row{text-align:right;margin-top:1rem;font-weight:bolder}.ObKnhW_button-row button{border:1px solid var(--ui-black-transparent);background:#fff;border-radius:.25rem;padding:.75rem 1rem;font-size:.85rem;font-weight:700}.ObKnhW_button-row button.ObKnhW_ok-button{background:var(--motion-primary);border:var(--motion-primary);color:#fff}.ObKnhW_button-row button+button{margin-left:.5rem}");var V={promptModal:"ObKnhW_prompt-modal",optionsRow:"ObKnhW_options-row",okButton:"ObKnhW_ok-button",workspace:"ObKnhW_workspace",body:"ObKnhW_body",buttonRow:"ObKnhW_button-row",optionTitle:"ObKnhW_option-title",optionCard:"ObKnhW_option-card",optionIcon:"ObKnhW_option-icon",radioboxRow:"ObKnhW_radiobox-row"};var R1="./assets/icon-boolean-input-v045mxhp.svg";var C1="./assets/icon-text-input-3m98080h.svg";var O1="./assets/icon-label-a0d2gknc.svg";import{jsx as W,jsxs as Tt}from"preact/jsx-runtime";var wi={zoom:{controls:!1,wheel:!1,startScale:0.9},comments:!1,collapse:!1,scrollbars:!0};function Qt({mutator:t,onClose:i,onSubmit:o}){const n=Ai(null),[e,T]=Mi("command"),_=()=>{},d=()=>{if(n.mutationRoot)n.mutationRoot.addLabelExternal()},h=()=>{if(n.mutationRoot)n.mutationRoot.addBooleanExternal()},f=()=>{if(n.mutationRoot)n.mutationRoot.addStringNumberExternal()},R=()=>{o(n.mutationRoot?.mutationToDom(!0))};return gi(()=>{if(n.current){const X=It.Blocks.defaultToolbox;It.Blocks.defaultToolbox=null,n.workspace=It.inject(n.current,Object.assign({},wi,{media:"./assets/blocks-media/"})),It.Blocks.defaultToolbox=X,n.mutationRoot=n.workspace.newBlock("procedures_declaration"),n.mutationRoot.setMovable(!1),n.mutationRoot.setDeletable(!1),n.mutationRoot.contextMenu=!1,n.workspace.addChangeListener(()=>{n.mutationRoot.onChangeFn();const p=n.workspace.getMetrics(),{x:g,y:A}=n.mutationRoot.getRelativeToSurfaceXY(),N=p.viewHeight/2-n.mutationRoot.height/2-A;let M=p.viewWidth/2-n.mutationRoot.width/2-g;if(n.mutationRoot.width>p.viewWidth)M=p.viewWidth-n.mutationRoot.width-g;n.mutationRoot.moveBy(M,N)}),n.mutationRoot.domToMutation(t),n.mutationRoot.initSvg(),n.mutationRoot.render(),setTimeout(()=>{n.mutationRoot.focusLastEditor_()})}return()=>{if(n.workspace)n.workspace.dispose()}},[n]),Tt(bi,{title:W(Et,{id:"blocks.myBlockPrompt.title",defaultMessage:"Make a Block"}),className:V.promptModal,onClose:i,children:[W("div",{ref:n,className:V.workspace}),Tt("div",{className:V.body,children:[Tt("div",{className:V.optionsRow,children:[Tt("div",{role:"button",className:V.optionCard,onClick:f,children:[W("img",{className:V.optionIcon,src:C1}),W("div",{className:V.optionTitle,children:W(Et,{id:"blocks.myBlockPrompt.addAnInputNumberText",defaultMessage:"Add an input"})}),W("div",{className:V.optionDescription,children:W(Et,{id:"blocks.myBlockPrompt.numberTextType",defaultMessage:"number or text"})})]}),Tt("div",{role:"button",className:V.optionCard,onClick:h,children:[W("img",{className:V.optionIcon,src:R1}),W("div",{className:V.optionTitle,children:W(Et,{id:"blocks.myBlockPrompt.addAnInputBoolean",defaultMessage:"Add an input"})}),W("div",{className:V.optionDescription,children:W(Et,{id:"blocks.myBlockPrompt.booleanType",defaultMessage:"boolean"})})]}),Tt("div",{role:"button",className:V.optionCard,onClick:d,children:[W("img",{className:V.optionIcon,src:O1}),W("div",{className:V.optionTitle,children:W(Et,{id:"blocks.myBlockPrompt.addALabel",defaultMessage:"Add a label"})})]})]}),Tt("div",{className:V.buttonRow,children:[W(f1,{className:V.button,onClick:i,children:W(Et,{id:"blocks.prompt.cancel",defaultMessage:"Cancel"})}),W(f1,{className:Si(V.button,V.okButton),onClick:R,children:W(Et,{id:"blocks.prompt.ok",defaultMessage:"OK"})})]})]})]})}import{useEffect as Di,useState as A1}from"preact/hooks";import{useLocale as Fi,useLayout as Ii,useEditor as Li}from"@blockcode/core";import{Library as vi}from"@blockcode/ui";var c1=["nes","translate","color-sensor","servo","time","pen","brain","request","text","broadcast"].map(async(t)=>{const{default:i}=await import(`@blockcode/extension-${t}`);return i.id=t,i});import{jsx as $i}from"preact/jsx-runtime";var Pi=Promise.all(c1);function jt({deviceId:t,onSelect:i,onClose:o,onFilter:n}){const[e,T]=A1([]),[_,d]=A1(!1),{language:h,getText:f}=Fi(),{createAlert:R,removeAlert:X}=Ii(),{addAsset:p}=Li(),g=(A)=>{const N=A.tags||[];let M=["blocks",["dupont","data"],["3v3","5v"]];if(n)M=n(N);if(Array.isArray(M))return M.every((b)=>{if(Array.isArray(b))return b.some((F)=>N.includes(F));return N.includes(b)});return M};return Di(()=>{Pi.then((A)=>{T(A.filter(g).map((N)=>Object.assign({...N,featured:!0,disabled:N.disabled||N.preview,onSelect:()=>{i(N.id),o()}},N.translations&&N.translations[h]?{name:N.translations[h].name||N.name,description:N.translations[h].description||N.description,collaborator:N.translations[h].collaborator||N.collaborator}:{}))),d(!1)})},[]),$i(vi,{filterable:!0,loading:_,items:e,filterPlaceholder:f("gui.library.search","Search"),title:f("blocks.extensions.addExtension","Add Extension"),emptyText:f("blocks.extensions.empty","No extension!"),onClose:o})}Nt(".cujmXa_editor-wrapper{border-radius:inherit;width:100%;height:100%;position:relative}.cujmXa_extension-button{z-index:var(--z-index-extension-button);background:var(--motion-primary);border:1px solid var(--motion-primary);box-sizing:content-box;border-bottom-left-radius:inherit;border-top:0;height:3.25rem;position:absolute;bottom:-1px;left:-1px}.cujmXa_extension-button:before{--fade-out-distance:15px;content:\"\";top:calc(calc(-1*var(--fade-out-distance)));height:var(--fade-out-distance);background:linear-gradient(#0000,#00000026);position:absolute;left:0;right:0}.cujmXa_add-button{cursor:pointer;background:0 0;border:none;outline:none;width:100%;height:100%}.cujmXa_add-button img{width:1.75rem;height:1.75rem}.cujmXa_debug-box{z-index:var(--z-index-monitor);border:1px solid var(--ui-tertiary);border-radius:var(--space)var(--space)0 0;opacity:.8;font-size:var(--standard-font-size);background:#fff;border-bottom:0;width:600px;height:300px;position:absolute;bottom:0;left:50vw;overflow:auto;transform:translate(-50%)}.cujmXa_debug-box pre{margin:calc(var(--space)/2)}");var Lt={debugBox:"cujmXa_debug-box",addButton:"cujmXa_add-button",editorWrapper:"cujmXa_editor-wrapper",extensionButton:"cujmXa_extension-button"};var g1="./assets/icon-extension-61vrne2y.svg";import{jsx as lt,jsxs as S1,Fragment as Zi}from"preact/jsx-runtime";var it=new Map,b1=(t)=>typeof t!=="string"&&!t.button;var Hi=async(t,i,o,n,e)=>{if(i){for(let T of i)if(!it.has(T)){let{default:_}=await import(`@blockcode/extension-${T}/blocks`);if(typeof _==="function")_=_(t);if(_.id=T,_.files)for(let d of _.files){const h=`extensions/${T}/${d.name}`,f=await fetch(d.uri).then((R)=>R.text());n({...d,id:h,content:f})}if(o(_.translations),e)e({..._,blocks:_.blocks.filter(b1)});it.set(T,_)}}};function vt({toolbox:t,messages:i,generator:o,enableMultiTargets:n,enableLocalVariable:e,disableGenerator:T,disableExtension:_,deviceId:d,onChange:h,onExtensionsFilter:f,onLoadExtension:R}){const{addLocaleData:X,getText:p,maybeLocaleText:g}=Wi(),{splash:A,createPrompt:N,createAlert:M,removeAlert:b,setSplash:F}=Xi(),{editor:I,fileList:P,selectedFileId:y,openFile:H,modifyFile:Ot,addAsset:mt,setModified:bt}=M1(),[l,u]=St(),[s,a]=St(!1),[E,c]=St(!1),[S,w]=St(!1),[J,Q]=St(!1);i={EVENT_WHENPROGRAMSTART:p("blocks.event.programStart","when program start"),CONTROL_STOP_OTHER:p("blocks.control.stopOther","other scripts"),PROCEDURES_ADD_LABEL:p("blocks.myblock.addLabel"," label text"),PROCEDURES_ADD_BOOLEAN:p("blocks.myblock.addBoolean","boolean"),PROCEDURES_ADD_STRING_NUMBER:p("blocks.myblock.addNumbetText","number or text"),...i||[]},Ui(()=>{K.prompt=(m,C,v,D,ot)=>{const nt={callback:v,message:m,defaultValue:C};nt.title=D?D:K.Msg.VARIABLE_MODAL_TITLE,nt.varType=typeof ot==="string"?ot:K.SCALAR_VARIABLE_TYPE,nt.showVariableOptions=n&&ot!==K.BROADCAST_MESSAGE_VARIABLE_TYPE&&nt.title!==K.Msg.RENAME_VARIABLE_MODAL_TITLE&&nt.title!==K.Msg.RENAME_LIST_MODAL_TITLE,nt.showCloudOption=ot===K.SCALAR_VARIABLE_TYPE&&this.props.canUseCloud,a(nt)},K.FlyoutExtensionCategoryHeader.getExtensionState=(m)=>{if(it.has(m)){const C=it.get(m);if(C.connectionConfig?.items.every((v)=>localStorage.getItem(`${C.id}.connection.${v.id}`)))return K.StatusButtonState.READY}return K.StatusButtonState.NOT_READY},K.statusButtonCallback=(m)=>{if(!it.has(m))return;const C=it.get(m),{connectionConfig:v}=C;if(!v)return;N({title:C.name,label:v.title,inputMode:v.items.map((D)=>({name:D.id,placeholder:D.text,defaultValue:localStorage.getItem(`${C.id}.connection.${D.id}`)})),body:v.description,onSubmit:(D)=>{if(Object.entries(D).forEach(([ot,nt])=>{localStorage.setItem(`${C.id}.connection.${ot}`,`${nt}`)}),l)K.refreshStatusButtons(l)}})},K.Procedures.externalProcedureDefCallback=(m,C)=>{c({mutator:m,defCallback:C})}},[l]);let Z;if(l)Z=l.getAllVariables().filter((m)=>{if(m.isLocal)return!1;if(m.type===K.BROADCAST_MESSAGE_VARIABLE_TYPE){if(m.name===K.Msg.DEFAULT_BROADCAST_MESSAGE_NAME)return!1;const C=m.id_.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),v=new RegExp(`<field name="BROADCAST_OPTION" id="${C}"[^>]+>[^<]+</field>`,"g");for(let D of P)if(v.test(D.xml))return!0;return!1}return!0});let B=t||Yi();const j=y===P[0].id,$=(m)=>m.bind(null,{context:M1(),createPrompt:N,createAlert:M,removeAlert:b});it.forEach((m)=>{B+=Gt(o,m,j,g,$)});const q=(m)=>{let C;if(!T)C=o.workspaceToCode(m);const v=Array.from(new Set(Object.values(m.blockDB_).filter((D)=>it.has(D.category_)).map((D)=>D.category_)));return{content:C,extensions:v}},U=(m,C)=>{const{content:v,extensions:D}=q(C);if(Ot({xml:m,content:v,extensions:D}),h)h(m,C)},O=(m,C)=>{s.callback(m,[],C),a(!1)},k=(m)=>{if(m&&l&&E)E.defCallback(m),l.refreshToolboxSelection_(),l.toolbox_.scrollToCategoryById("myBlocks");c(!1)},G=()=>{a(!1),c(!1)},x=()=>w(!0),wt=()=>w(!1),Dt=async(m)=>{if(!it.has(m)){M("importing",{id:m});let{default:C}=await import(`@blockcode/extension-${m}/blocks`);if(typeof C==="function")C=C(d);if(C.id=m,C.files)for(let v of C.files){const D=`extensions/${m.replace(/[^a-z\d]/gi,"_")}/${v.name}`,ot=await fetch(v.uri).then((nt)=>nt.text());mt({...v,id:D,content:ot})}if(X(C.translations),R)R({...C,blocks:C.blocks.filter(b1)});it.set(C.id,C),b(m)}setTimeout(()=>{l.toolbox_.setSelectedCategoryById(m)},50)};if(A){if(A===!0&&J===!1)it.clear(),Q(Hi(d,I.extensions,X,mt,R).then(()=>{setTimeout(()=>Q(!0),50)}));if(J===!0)if(A===y)F(!1),Q(!1),setTimeout(()=>bt(!1),50);else{const C=P.findIndex((D)=>D.id===y);if(P[C].content){const D=P.at(C-1).id;setTimeout(()=>{if(A===!0)F(y);H(D)})}}}let ft=!0;if(I.extensions)ft=I.extensions.every((m)=>it.has(m));return S1(Zi,{children:[S1("div",{className:Lt.editorWrapper,children:[lt(Ki,{toolbox:B,messages:i,extensionsLoaded:ft,globalVariables:Z,onWorkspaceCreated:u,onChange:U}),_?null:lt("div",{className:yi("scratchCategoryMenu",Lt.extensionButton),children:lt("button",{className:Lt.addButton,title:p("blocks.extensions.addExtension","Add Extension"),onClick:x,children:lt("img",{src:g1,title:"Add Extension"})})}),s&&lt(Jt,{title:s.title,label:s.message,defaultValue:s.defaultValue,enableLocalVariable:e,showListMessage:s.varType===K.LIST_VARIABLE_TYPE,showVariableOptions:s.showVariableOptions,showCloudOption:s.showCloudOption,onClose:G,onSubmit:O}),E&&lt(Qt,{mutator:E.mutator,onClose:G,onSubmit:k}),S&&lt(jt,{deviceId:d,onFilter:f,onSelect:Dt,onClose:wt})]}),!1]})}var w1="./assets/icon-blocks-vgmb334q.svg";var D1={"blocks.menu.file":"File","blocks.menu.file.newProject":"New","blocks.menu.file.openProject":"Open","blocks.menu.file.saveProject":"Save","blocks.menu.file.uploadProject":"Load from your computer","blocks.menu.file.downloadProject":"Save to your computer","blocks.menu.edit":"Edit","blocks.menu.edit.undo":"Undo","blocks.menu.edit.redo":"Redo","blocks.menu.device":"Device","blocks.menu.device.name":"device","blocks.menu.device.connect":"Connect to your {name}","blocks.menu.device.disconnect":"Disconnect this {name}","blocks.menu.device.download":"Download program","blocks.menu.device.turnOnAutoDownload":"Turn on Auto Download","blocks.menu.device.turnOffAutoDownload":"Turn off Auto Download","blocks.alert.downloading":"Downloading...{progress}%","blocks.alert.downloadCompleted":"Download completed.","blocks.alert.connectionError":"Connection error.","blocks.alert.flashOutSpace":"The flash is running out of space.","blocks.codeTab":"Code","blocks.monitorPane.title":"Monitor","blocks.downloadToDevice":"Download","blocks.extensions.addExtension":"Add Extension","blocks.extensions.empty":"No extension!","blocks.prompt.ok":"OK","blocks.prompt.cancel":"Cancel","blocks.dataPrompt.forAllTargets":"For all targets","blocks.dataPrompt.forThisTarget":"For this target only","blocks.dataPrompt.availableToAllTargets":"This variable will be available to all targets.","blocks.dataPrompt.listAvailableToAllTargets":"This list will be available to all targets.","blocks.myBlockPrompt.title":"Make a Block","blocks.myBlockPrompt.addAnInputNumberText":"Add an input","blocks.myBlockPrompt.numberTextType":"number or text","blocks.myBlockPrompt.addAnInputBoolean":"Add an input","blocks.myBlockPrompt.booleanType":"boolean","blocks.myBlockPrompt.addALabel":"Add a label","blocks.myBlockPrompt.command":"Command","blocks.myBlockPrompt.reporterNumberText":"Return number or text","blocks.myBlockPrompt.reporterBoolean":"Return boolean","blocks.event.programStart":"when program start","blocks.control.stopOther":"other scripts","blocks.myblock.addLabel":" label text","blocks.myblock.addBoolean":"boolean","blocks.myblock.addNumbetText":"number or text"};var F1={"blocks.menu.file":"\u6587\u4EF6","blocks.menu.file.newProject":"\u65B0\u4F5C\u54C1","blocks.menu.file.openProject":"\u6253\u5F00","blocks.menu.file.saveProject":"\u4FDD\u5B58","blocks.menu.file.uploadProject":"\u4ECE\u7535\u8111\u4E2D\u6253\u5F00","blocks.menu.file.downloadProject":"\u4FDD\u5B58\u5230\u7535\u8111","blocks.menu.edit":"\u7F16\u8F91","blocks.menu.edit.undo":"\u64A4\u9500","blocks.menu.edit.redo":"\u6062\u590D","blocks.menu.device":"\u8BBE\u5907","blocks.menu.device.name":"\u8BBE\u5907","blocks.menu.device.connect":"\u8FDE\u63A5{name}","blocks.menu.device.disconnect":"\u65AD\u5F00{name}\u8FDE\u63A5","blocks.menu.device.download":"\u4E0B\u8F7D\u7A0B\u5E8F","blocks.menu.device.turnOnAutoDownload":"\u6253\u5F00\u81EA\u52A8\u4E0B\u8F7D","blocks.menu.device.turnOffAutoDownload":"\u5173\u95ED\u81EA\u52A8\u4E0B\u8F7D","blocks.alert.downloading":"\u6B63\u5728\u4E0B\u8F7D\u2026{progress}%","blocks.alert.downloadCompleted":"\u4E0B\u8F7D\u5B8C\u6210\u3002","blocks.alert.connectionError":"\u8FDE\u63A5\u9519\u8BEF\u3002","blocks.alert.flashOutSpace":"\u8BBE\u5907\u7A7A\u95F4\u4E0D\u8DB3\u3002","blocks.codeTab":"\u4EE3\u7801","blocks.monitorPane.title":"\u76D1\u89C6\u5668","blocks.downloadToDevice":"\u4E0B\u8F7D","blocks.extensions.addExtension":"\u6DFB\u52A0\u6269\u5C55","blocks.extensions.empty":"\u6CA1\u6709\u6269\u5C55\uFF01","blocks.prompt.ok":"\u786E\u5B9A","blocks.prompt.cancel":"\u53D6\u6D88","blocks.dataPrompt.forAllTargets":"\u9002\u7528\u4E8E\u5168\u5C40","blocks.dataPrompt.forThisTarget":"\u4EC5\u9002\u7528\u4E8E\u5F53\u524D","blocks.dataPrompt.availableToAllTargets":"\u5168\u5C40\u90FD\u53EF\u4F7F\u7528\u8BE5\u53D8\u91CF\u3002","blocks.dataPrompt.listAvailableToAllTargets":"\u5168\u5C40\u90FD\u53EF\u4F7F\u7528\u8BE5\u5217\u8868\u3002","blocks.myBlockPrompt.title":"\u5236\u4F5C\u65B0\u7684\u79EF\u6728","blocks.myBlockPrompt.addAnInputNumberText":"\u6DFB\u52A0\u8F93\u5165\u9879","blocks.myBlockPrompt.numberTextType":"\u6570\u5B57\u6216\u6587\u672C","blocks.myBlockPrompt.addAnInputBoolean":"\u6DFB\u52A0\u8F93\u5165\u9879","blocks.myBlockPrompt.booleanType":"\u5E03\u5C14\u503C","blocks.myBlockPrompt.addALabel":"\u6DFB\u52A0\u6587\u672C\u6807\u7B7E","blocks.myBlockPrompt.command":"\u65E0\u8FD4\u56DE\u503C","blocks.myBlockPrompt.reporterNumberText":"\u8FD4\u56DE\u6570\u5B57\u6216\u6587\u672C","blocks.myBlockPrompt.reporterBoolean":"\u8FD4\u56DE\u5E03\u5C14\u503C","blocks.event.programStart":"\u5F53\u7A0B\u5E8F\u5F00\u59CB\u8FD0\u884C","blocks.control.stopOther":"\u5176\u4ED6\u811A\u672C","blocks.myblock.addLabel":"\u6587\u672C","blocks.myblock.addBoolean":"\u5E03\u5C14\u503C","blocks.myblock.addNumbetText":"\u6570\u5B57\u6216\u6587\u672C"};var I1={en:D1,"zh-Hans":F1};import{jsx as qt}from"preact/jsx-runtime";var Bi={icon:w1,label:qt(L1,{id:"blocks.codeTab",defaultMessage:"Code"}),Content:vt},ra={label:qt(L1,{id:"blocks.monitorPane.title",defaultMessage:"Monitor"}),Content:null};function Gi({addLocaleData:t,openProject:i}){t(I1);const o=()=>{i(Object.assign(E1))};return o(),{mainMenu:Yt({createProject:o,openProject:i}),tabs:[{...Bi,Content:()=>qt(vt,{generator:new Ht})}],sidebars:[],pane:!1,tutorials:!0,canEditProjectName:!0,defaultFileIndex:0,defaultTabIndex:0}}export{ra as monitorPane,Yt as makeMainMenu,I1 as locales,Gi as default,Bi as codeTab,dt as PythonGenerator};
