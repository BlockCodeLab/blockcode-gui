import{Text as i}from"@blockcode/ui";var s={en:{"extension.time.name":"Time","extension.time.sync":"sync world time","extension.time.setTimezone":"set timezone to [TIMEZONE]","extension.time.getTime":"current [OPTION]","extension.time.option.year":"year","extension.time.option.month":"month","extension.time.option.date":"date","extension.time.option.weekday":"day of week","extension.time.option.hour":"hour","extension.time.option.minute":"minute","extension.time.option.second":"second","extension.time.days":"days since 2000"},"zh-Hans":{"extension.time.name":"\u65F6\u95F4","extension.time.sync":"\u540C\u6B65\u65F6\u95F4","extension.time.setTimezone":"\u5C06\u65F6\u533A\u8BBE\u4E3A [TIMEZONE]","extension.time.getTime":"\u5F53\u524D\u65F6\u95F4\u7684 [OPTION]","extension.time.option.year":"\u5E74","extension.time.option.month":"\u6708","extension.time.option.date":"\u65E5","extension.time.option.weekday":"\u661F\u671F","extension.time.option.hour":"\u65F6","extension.time.option.minute":"\u5206","extension.time.option.second":"\u79D2","extension.time.days":"2000 \u5E74\u81F3\u4ECA\u7684\u5929\u6570"}};var m="./assets/icon-arfdewc6.svg";var r="./assets/ntptime-3g26nakh.py";function p(){return this.definitions_.timezone="let timezone = 8;",this.provideFunction_("time_get_current_time",[`const ${this.FUNCTION_NAME_PLACEHOLDER_} = (option = 'year') => {`,"  const t = Date.now() + timezone * 60 * 60;","  const d = new Date(t);","  switch (option) {","  case 'year': return d.getFullYear();","  case 'month': return d.getMonth() + 1;","  case 'date': return d.getDate();","  case 'weekday': return d.getDay() === 0 ? 7 : d.getDay();","  case 'hour': return d.getHours();","  case 'minute': return d.getMinutes();","  case 'second': return d.getSeconds();","  default: return '';","  }","};"])}function u(){return this.provideFunction_("get_days_since_2000",[`const ${this.FUNCTION_NAME_PLACEHOLDER_} = () => {`,"  const t = new Date() - new Date(2000, 0, 1, 0, 0, 0);","  return t / (24 * 3600 * 1000);","};"])}import{jsx as n}from"preact/jsx-runtime";var C={iconURI:m,name:n(i,{id:"extension.time.name",defaultMessage:"Time"}),files:[{name:"ntptime",type:"text/x-python",uri:r}],blocks:[{id:"sync",text:n(i,{id:"extension.time.sync",defaultMessage:"sync world time"}),python(t){this.definitions_.import_extension_time="from extensions.time import ntptime";let e="";if(this.STATEMENT_PREFIX)e+=this.injectId(this.STATEMENT_PREFIX,t);return e+="await ntptime.async_world_time()\n",e},vm(t){let e="";if(this.STATEMENT_PREFIX)e+=this.injectId(this.STATEMENT_PREFIX,t);return e+="await runtime.sleep(1);\n",e}},{id:"setTimezone",text:n(i,{id:"extension.time.setTimezone",defaultMessage:"set timezone to [TIMEZONE]"}),inputs:{TIMEZONE:{type:"number",default:"8"}},python(t){this.definitions_.import_extension_time="from extensions.time import ntptime";let e="";if(this.STATEMENT_PREFIX)e+=this.injectId(this.STATEMENT_PREFIX,t);const o=this.valueToCode(t,"TIMEZONE",this.ORDER_NONE)||8;return e+=`ntptime.timezone = num(${o})\n`,e},vm(t){this.definitions_.timezone="let timezone = 8;";let e="";if(this.STATEMENT_PREFIX)e+=this.injectId(this.STATEMENT_PREFIX,t);const o=this.valueToCode(t,"TIMEZONE",this.ORDER_NONE)||8;return e+=`timezone = runtime.number(${o});\n`,e}},{id:"getTime",text:n(i,{id:"extension.time.getTime",defaultMessage:"current [OPTION]"}),output:"number",inputs:{OPTION:{type:"text",default:"year",menu:[[n(i,{id:"extension.time.option.year",defaultMessage:"year"}),"year"],[n(i,{id:"extension.time.option.month",defaultMessage:"month"}),"month"],[n(i,{id:"extension.time.option.date",defaultMessage:"date"}),"date"],[n(i,{id:"extension.time.option.weekday",defaultMessage:"day of week"}),"weekday"],[n(i,{id:"extension.time.option.hour",defaultMessage:"hour"}),"hour"],[n(i,{id:"extension.time.option.minute",defaultMessage:"minute"}),"minute"],[n(i,{id:"extension.time.option.second",defaultMessage:"second"}),"second"]]}},python(t){return this.definitions_.import_extension_time="from extensions.time import ntptime",[`ntptime.get_time(${this.quote_(t.getFieldValue("OPTION")||"year")})`,this.ORDER_FUNCTION_CALL]},vm(t){this.definitions_.timezone="let timezone = 8;";const e=this.quote_(t.getFieldValue("OPTION")||"year");return[`${p.call(this)}(${e})`,this.ORDER_FUNCTION_CALL]}},{id:"days",text:n(i,{id:"extension.time.days",defaultMessage:"days since 2000"}),output:"number",monitoring:!1,python(){return this.definitions_.import_extension_time="from extensions.time import ntptime",["ntptime.get_days()",this.ORDER_FUNCTION_CALL]},vm(){return this.definitions_.timezone="let timezone = 8;",[`${u.call(this)}()`,this.ORDER_FUNCTION_CALL]}}],translations:s};export{C as default};
