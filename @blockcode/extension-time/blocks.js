import{Text as C} from"@blockcode/ui";var S={en:{"extension.time.name":"Time","extension.time.sync":"sync world time","extension.time.setTimezone":"set timezone to [TIMEZONE]","extension.time.getTime":"current [OPTION]","extension.time.option.year":"year","extension.time.option.month":"month","extension.time.option.date":"date","extension.time.option.weekday":"day of week","extension.time.option.hour":"hour","extension.time.option.minute":"minute","extension.time.option.second":"second","extension.time.days":"days since 2000"},"zh-Hans":{"extension.time.name":"\u65F6\u95F4","extension.time.sync":"\u540C\u6B65\u65F6\u95F4","extension.time.setTimezone":"\u5C06\u65F6\u533A\u8BBE\u4E3A [TIMEZONE]","extension.time.getTime":"\u5F53\u524D\u65F6\u95F4\u7684 [OPTION]","extension.time.option.year":"\u5E74","extension.time.option.month":"\u6708","extension.time.option.date":"\u65E5","extension.time.option.weekday":"\u661F\u671F","extension.time.option.hour":"\u65F6","extension.time.option.minute":"\u5206","extension.time.option.second":"\u79D2","extension.time.days":"2000 \u5E74\u81F3\u4ECA\u7684\u5929\u6570"}};var f="./assets/icon-7c3904aa1e96b6b7.svg";var g="./assets/ntptime-de64943b92d20ae8.py";var F=function(){return this.definitions_.timezone="let timezone = 8;",this.provideFunction_("time_get_current_time",[`const ${this.FUNCTION_NAME_PLACEHOLDER_} = (option = 'year') => {`,"  const t = Date.now() + timezone * 60 * 60;","  const d = new Date(t);","  switch (option) {","  case 'year': return d.getFullYear();","  case 'month': return d.getMonth() + 1;","  case 'date': return d.getDate();","  case 'weekday': return d.getDay() === 0 ? 7 : d.getDay();","  case 'hour': return d.getHours();","  case 'minute': return d.getMinutes();","  case 'second': return d.getSeconds();","  default: return '';","  }","};"])},_=function(){return this.provideFunction_("get_days_since_2000",[`const ${this.FUNCTION_NAME_PLACEHOLDER_} = () => {`,"  const t = new Date() - new Date(2000, 0, 1, 0, 0, 0);","  return t / (24 * 3600 * 1000);","};"])};import{jsx as r} from"preact/jsx-runtime";var O={iconURI:f,name:r(C,{id:"extension.time.name",defaultMessage:"Time"}),files:[{name:"ntptime",type:"text/x-python",uri:g}],blocks:[{id:"sync",text:r(C,{id:"extension.time.sync",defaultMessage:"sync world time"}),python(n){this.definitions_.import_extension_time="from extensions.time import ntptime";let h="";if(this.STATEMENT_PREFIX)h+=this.injectId(this.STATEMENT_PREFIX,n);return h+="await ntptime.async_world_time()\n",h},vm(n){let h="";if(this.STATEMENT_PREFIX)h+=this.injectId(this.STATEMENT_PREFIX,n);return h+="await runtime.sleep(1);\n",h}},{id:"setTimezone",text:r(C,{id:"extension.time.setTimezone",defaultMessage:"set timezone to [TIMEZONE]"}),inputs:{TIMEZONE:{type:"number",default:"8"}},python(n){this.definitions_.import_extension_time="from extensions.time import ntptime";let h="";if(this.STATEMENT_PREFIX)h+=this.injectId(this.STATEMENT_PREFIX,n);const s=this.valueToCode(n,"TIMEZONE",this.ORDER_NONE)||8;return h+=`ntptime.timezone = num(${s})\n`,h},vm(n){this.definitions_.timezone="let timezone = 8;";let h="";if(this.STATEMENT_PREFIX)h+=this.injectId(this.STATEMENT_PREFIX,n);const s=this.valueToCode(n,"TIMEZONE",this.ORDER_NONE)||8;return h+=`timezone = runtime.number(${s});\n`,h}},{id:"getTime",text:r(C,{id:"extension.time.getTime",defaultMessage:"current [OPTION]"}),output:"number",inputs:{OPTION:{type:"text",default:"year",menu:[[r(C,{id:"extension.time.option.year",defaultMessage:"year"}),"year"],[r(C,{id:"extension.time.option.month",defaultMessage:"month"}),"month"],[r(C,{id:"extension.time.option.date",defaultMessage:"date"}),"date"],[r(C,{id:"extension.time.option.weekday",defaultMessage:"day of week"}),"weekday"],[r(C,{id:"extension.time.option.hour",defaultMessage:"hour"}),"hour"],[r(C,{id:"extension.time.option.minute",defaultMessage:"minute"}),"minute"],[r(C,{id:"extension.time.option.second",defaultMessage:"second"}),"second"]]}},python(n){return this.definitions_.import_extension_time="from extensions.time import ntptime",[`ntptime.get_time(${this.quote_(n.getFieldValue("OPTION")||"year")})`,this.ORDER_FUNCTION_CALL]},vm(n){this.definitions_.timezone="let timezone = 8;";const h=this.quote_(n.getFieldValue("OPTION")||"year");return[`${F.call(this)}(${h})`,this.ORDER_FUNCTION_CALL]}},{id:"days",text:r(C,{id:"extension.time.days",defaultMessage:"days since 2000"}),output:"number",python(){return this.definitions_.import_extension_time="from extensions.time import ntptime",["ntptime.get_days()",this.ORDER_FUNCTION_CALL]},vm(){return this.definitions_.timezone="let timezone = 8;",[`${_.call(this)}()`,this.ORDER_FUNCTION_CALL]}}],translations:S};export{O as default};
