import{Text as i}from"@blockcode/ui";var s={en:{"extension.time.name":"Time","extension.time.sync":"sync world time","extension.time.setTimezone":"set timezone to [TIMEZONE]","extension.time.getTime":"current [OPTION]","extension.time.option.year":"year","extension.time.option.month":"month","extension.time.option.date":"date","extension.time.option.weekday":"day of week","extension.time.option.hour":"hour","extension.time.option.minute":"minute","extension.time.option.second":"second","extension.time.days":"days since 2000"},"zh-Hans":{"extension.time.name":"时间","extension.time.sync":"同步时间","extension.time.setTimezone":"将时区设为 [TIMEZONE]","extension.time.getTime":"当前时间的 [OPTION]","extension.time.option.year":"年","extension.time.option.month":"月","extension.time.option.date":"日","extension.time.option.weekday":"星期","extension.time.option.hour":"时","extension.time.option.minute":"分","extension.time.option.second":"秒","extension.time.days":"2000 年至今的天数"}};var m="./assets/icon-arfdewc6.svg";var r="./assets/ntptime-3g26nakh.py";import{jsx as n}from"preact/jsx-runtime";var E={iconURI:m,name:n(i,{id:"extension.time.name",defaultMessage:"Time"}),files:[{name:"ntptime",type:"text/x-python",uri:r}],blocks:[{id:"sync",text:n(i,{id:"extension.time.sync",defaultMessage:"sync world time"}),python(t){this.definitions_.import_extension_time="from extensions.time import ntptime";let e="";if(this.STATEMENT_PREFIX)e+=this.injectId(this.STATEMENT_PREFIX,t);return e+=`await ntptime.async_world_time()
`,e},vm(t){let e="";if(this.STATEMENT_PREFIX)e+=this.injectId(this.STATEMENT_PREFIX,t);return e+=`await runtime.sleep(1);
`,e}},{id:"setTimezone",text:n(i,{id:"extension.time.setTimezone",defaultMessage:"set timezone to [TIMEZONE]"}),inputs:{TIMEZONE:{type:"number",default:"8"}},python(t){this.definitions_.import_extension_time="from extensions.time import ntptime";let e="";if(this.STATEMENT_PREFIX)e+=this.injectId(this.STATEMENT_PREFIX,t);let o=this.valueToCode(t,"TIMEZONE",this.ORDER_NONE)||8;return e+=`ntptime.timezone = num(${o})
`,e},vm(t){this.definitions_.timezone="let timezone = 8;";let e="";if(this.STATEMENT_PREFIX)e+=this.injectId(this.STATEMENT_PREFIX,t);let o=this.valueToCode(t,"TIMEZONE",this.ORDER_NONE)||8;return e+=`timezone = runtime.number(${o});
`,e}},{id:"getTime",text:n(i,{id:"extension.time.getTime",defaultMessage:"current [OPTION]"}),output:"number",inputs:{OPTION:{type:"text",default:"year",menu:[[n(i,{id:"extension.time.option.year",defaultMessage:"year"}),"year"],[n(i,{id:"extension.time.option.month",defaultMessage:"month"}),"month"],[n(i,{id:"extension.time.option.date",defaultMessage:"date"}),"date"],[n(i,{id:"extension.time.option.weekday",defaultMessage:"day of week"}),"weekday"],[n(i,{id:"extension.time.option.hour",defaultMessage:"hour"}),"hour"],[n(i,{id:"extension.time.option.minute",defaultMessage:"minute"}),"minute"],[n(i,{id:"extension.time.option.second",defaultMessage:"second"}),"second"]]}},python(t){return this.definitions_.import_extension_time="from extensions.time import ntptime",[`ntptime.get_time(${this.quote_(t.getFieldValue("OPTION")||"year")})`,this.ORDER_FUNCTION_CALL]},vm(t){this.definitions_.timezone="let timezone = 8;";let e=this.quote_(t.getFieldValue("OPTION")||"year");return[`${p.call(this)}(${e})`,this.ORDER_FUNCTION_CALL]}},{id:"days",text:n(i,{id:"extension.time.days",defaultMessage:"days since 2000"}),output:"number",monitoring:!1,python(){return this.definitions_.import_extension_time="from extensions.time import ntptime",["ntptime.get_days()",this.ORDER_FUNCTION_CALL]},vm(){return this.definitions_.timezone="let timezone = 8;",[`${u.call(this)}()`,this.ORDER_FUNCTION_CALL]}}],translations:s};function p(){return this.definitions_.timezone="let timezone = 8;",this.provideFunction_("time_get_current_time",[`const ${this.FUNCTION_NAME_PLACEHOLDER_} = (option = 'year') => {`,"  const t = Date.now() + timezone * 60 * 60;","  const d = new Date(t);","  switch (option) {","  case 'year': return d.getFullYear();","  case 'month': return d.getMonth() + 1;","  case 'date': return d.getDate();","  case 'weekday': return d.getDay() === 0 ? 7 : d.getDay();","  case 'hour': return d.getHours();","  case 'minute': return d.getMinutes();","  case 'second': return d.getSeconds();","  default: return '';","  }","};"])}function u(){return this.provideFunction_("get_days_since_2000",[`const ${this.FUNCTION_NAME_PLACEHOLDER_} = () => {`,"  const t = new Date() - new Date(2000, 0, 1, 0, 0, 0);","  return t / (24 * 3600 * 1000);","};"])}export{E as default};
