var r6=Object.create;var{defineProperty:V1,getPrototypeOf:e6,getOwnPropertyNames:X8}=Object;var J8=Object.prototype.hasOwnProperty;var Q8=(Q,W,Z)=>{Z=Q!=null?r6(e6(Q)):{};const w=W||!Q||!Q.__esModule?V1(Z,"default",{value:Q,enumerable:!0}):Z;for(let z of X8(Q))if(!J8.call(w,z))V1(w,z,{get:()=>Q[z],enumerable:!0});return w};var Z8=(Q,W)=>()=>(W||Q((W={exports:{}}).exports,W),W.exports);var E1=Z8((_1,u0)=>{/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(Q){if(typeof _1==="object"&&typeof u0!=="undefined")u0.exports=Q();else if(typeof define==="function"&&define.amd)define([],Q);else{var W;if(typeof window!=="undefined")W=window;else if(typeof global!=="undefined")W=global;else if(typeof self!=="undefined")W=self;else W=this;W.localforage=Q()}})(function(){var Q,W,Z;return function w(z,O,q){function h(v,i){if(!O[v]){if(!z[v]){var L=typeof require=="function"&&require;if(!i&&L)return L(v,!0);if(x)return x(v,!0);var D=new Error("Cannot find module '"+v+"'");throw D.code="MODULE_NOT_FOUND",D}var m=O[v]={exports:{}};z[v][0].call(m.exports,function(g){var s=z[v][1][g];return h(s?s:g)},m,m.exports,w,z,O,q)}return O[v].exports}var x=typeof require=="function"&&require;for(var j=0;j<q.length;j++)h(q[j]);return h}({1:[function(w,z,O){(function(q){var h=q.MutationObserver||q.WebKitMutationObserver,x;if(h){var j=0,v=new h(g),i=q.document.createTextNode("");v.observe(i,{characterData:!0}),x=function(){i.data=j=++j%2}}else if(!q.setImmediate&&typeof q.MessageChannel!=="undefined"){var L=new q.MessageChannel;L.port1.onmessage=g,x=function(){L.port2.postMessage(0)}}else if("document"in q&&"onreadystatechange"in q.document.createElement("script"))x=function(){var k=q.document.createElement("script");k.onreadystatechange=function(){g(),k.onreadystatechange=null,k.parentNode.removeChild(k),k=null},q.document.documentElement.appendChild(k)};else x=function(){setTimeout(g,0)};var D,m=[];function g(){D=!0;var k,l,p=m.length;while(p){l=m,m=[],k=-1;while(++k<p)l[k]();p=m.length}D=!1}z.exports=s;function s(k){if(m.push(k)===1&&!D)x()}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],2:[function(w,z,O){var q=w(1);function h(){}var x={},j=["REJECTED"],v=["FULFILLED"],i=["PENDING"];z.exports=L;function L(K){if(typeof K!=="function")throw new TypeError("resolver must be a function");if(this.state=i,this.queue=[],this.outcome=void 0,K!==h)s(this,K)}L.prototype.catch=function(K){return this.then(null,K)},L.prototype.then=function(K,T){if(typeof K!=="function"&&this.state===v||typeof T!=="function"&&this.state===j)return this;var S=new this.constructor(h);if(this.state!==i){var E=this.state===v?K:T;m(S,E,this.outcome)}else this.queue.push(new D(S,K,T));return S};function D(K,T,S){if(this.promise=K,typeof T==="function")this.onFulfilled=T,this.callFulfilled=this.otherCallFulfilled;if(typeof S==="function")this.onRejected=S,this.callRejected=this.otherCallRejected}D.prototype.callFulfilled=function(K){x.resolve(this.promise,K)},D.prototype.otherCallFulfilled=function(K){m(this.promise,this.onFulfilled,K)},D.prototype.callRejected=function(K){x.reject(this.promise,K)},D.prototype.otherCallRejected=function(K){m(this.promise,this.onRejected,K)};function m(K,T,S){q(function(){var E;try{E=T(S)}catch(u){return x.reject(K,u)}if(E===K)x.reject(K,new TypeError("Cannot resolve promise with itself"));else x.resolve(K,E)})}x.resolve=function(K,T){var S=k(g,T);if(S.status==="error")return x.reject(K,S.value);var E=S.value;if(E)s(K,E);else{K.state=v,K.outcome=T;var u=-1,f=K.queue.length;while(++u<f)K.queue[u].callFulfilled(T)}return K},x.reject=function(K,T){K.state=j,K.outcome=T;var S=-1,E=K.queue.length;while(++S<E)K.queue[S].callRejected(T);return K};function g(K){var T=K&&K.then;if(K&&(typeof K==="object"||typeof K==="function")&&typeof T==="function")return function S(){T.apply(K,arguments)}}function s(K,T){var S=!1;function E(c){if(S)return;S=!0,x.reject(K,c)}function u(c){if(S)return;S=!0,x.resolve(K,c)}function f(){T(u,E)}var d=k(f);if(d.status==="error")E(d.value)}function k(K,T){var S={};try{S.value=K(T),S.status="success"}catch(E){S.status="error",S.value=E}return S}L.resolve=l;function l(K){if(K instanceof this)return K;return x.resolve(new this(h),K)}L.reject=p;function p(K){var T=new this(h);return x.reject(T,K)}L.all=q0;function q0(K){var T=this;if(Object.prototype.toString.call(K)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=K.length,E=!1;if(!S)return this.resolve([]);var u=new Array(S),f=0,d=-1,c=new this(h);while(++d<S)a(K[d],d);return c;function a(G0,B0){T.resolve(G0).then(L0,function(Q0){if(!E)E=!0,x.reject(c,Q0)});function L0(Q0){if(u[B0]=Q0,++f===S&&!E)E=!0,x.resolve(c,u)}}}L.race=J0;function J0(K){var T=this;if(Object.prototype.toString.call(K)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=K.length,E=!1;if(!S)return this.resolve([]);var u=-1,f=new this(h);while(++u<S)d(K[u]);return f;function d(c){T.resolve(c).then(function(a){if(!E)E=!0,x.resolve(f,a)},function(a){if(!E)E=!0,x.reject(f,a)})}}},{"1":1}],3:[function(w,z,O){(function(q){if(typeof q.Promise!=="function")q.Promise=w(2)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"2":2}],4:[function(w,z,O){var q=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol==="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X};function h(X,G){if(!(X instanceof G))throw new TypeError("Cannot call a class as a function")}function x(){try{if(typeof indexedDB!=="undefined")return indexedDB;if(typeof webkitIndexedDB!=="undefined")return webkitIndexedDB;if(typeof mozIndexedDB!=="undefined")return mozIndexedDB;if(typeof OIndexedDB!=="undefined")return OIndexedDB;if(typeof msIndexedDB!=="undefined")return msIndexedDB}catch(X){return}}var j=x();function v(){try{if(!j||!j.open)return!1;var X=typeof openDatabase!=="undefined"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),G=typeof fetch==="function"&&fetch.toString().indexOf("[native code")!==-1;return(!X||G)&&typeof indexedDB!=="undefined"&&typeof IDBKeyRange!=="undefined"}catch(J){return!1}}function i(X,G){X=X||[],G=G||{};try{return new Blob(X,G)}catch(H){if(H.name!=="TypeError")throw H;var J=typeof BlobBuilder!=="undefined"?BlobBuilder:typeof MSBlobBuilder!=="undefined"?MSBlobBuilder:typeof MozBlobBuilder!=="undefined"?MozBlobBuilder:WebKitBlobBuilder,U=new J;for(var V=0;V<X.length;V+=1)U.append(X[V]);return U.getBlob(G.type)}}if(typeof Promise==="undefined")w(3);var L=Promise;function D(X,G){if(G)X.then(function(J){G(null,J)},function(J){G(J)})}function m(X,G,J){if(typeof G==="function")X.then(G);if(typeof J==="function")X.catch(J)}function g(X){if(typeof X!=="string")console.warn(X+" used as a key, but it is not a string."),X=String(X);return X}function s(){if(arguments.length&&typeof arguments[arguments.length-1]==="function")return arguments[arguments.length-1]}var k="local-forage-detect-blob-support",l=void 0,p={},q0=Object.prototype.toString,J0="readonly",K="readwrite";function T(X){var G=X.length,J=new ArrayBuffer(G),U=new Uint8Array(J);for(var V=0;V<G;V++)U[V]=X.charCodeAt(V);return J}function S(X){return new L(function(G){var J=X.transaction(k,K),U=i([""]);J.objectStore(k).put(U,"key"),J.onabort=function(V){V.preventDefault(),V.stopPropagation(),G(!1)},J.oncomplete=function(){var V=navigator.userAgent.match(/Chrome\/(\d+)/),H=navigator.userAgent.match(/Edge\//);G(H||!V||parseInt(V[1],10)>=43)}}).catch(function(){return!1})}function E(X){if(typeof l==="boolean")return L.resolve(l);return S(X).then(function(G){return l=G,l})}function u(X){var G=p[X.name],J={};if(J.promise=new L(function(U,V){J.resolve=U,J.reject=V}),G.deferredOperations.push(J),!G.dbReady)G.dbReady=J.promise;else G.dbReady=G.dbReady.then(function(){return J.promise})}function f(X){var G=p[X.name],J=G.deferredOperations.pop();if(J)return J.resolve(),J.promise}function d(X,G){var J=p[X.name],U=J.deferredOperations.pop();if(U)return U.reject(G),U.promise}function c(X,G){return new L(function(J,U){if(p[X.name]=p[X.name]||b0(),X.db)if(G)u(X),X.db.close();else return J(X.db);var V=[X.name];if(G)V.push(X.version);var H=j.open.apply(j,V);if(G)H.onupgradeneeded=function(B){var Y=H.result;try{if(Y.createObjectStore(X.storeName),B.oldVersion<=1)Y.createObjectStore(k)}catch(M){if(M.name==="ConstraintError")console.warn('The database "'+X.name+'" has been upgraded from version '+B.oldVersion+" to version "+B.newVersion+', but the storage "'+X.storeName+'" already exists.');else throw M}};H.onerror=function(B){B.preventDefault(),U(H.error)},H.onsuccess=function(){var B=H.result;B.onversionchange=function(Y){Y.target.close()},J(B),f(X)}})}function a(X){return c(X,!1)}function G0(X){return c(X,!0)}function B0(X,G){if(!X.db)return!0;var J=!X.db.objectStoreNames.contains(X.storeName),U=X.version<X.db.version,V=X.version>X.db.version;if(U){if(X.version!==G)console.warn('The database "'+X.name+`" can't be downgraded from version `+X.db.version+" to version "+X.version+".");X.version=X.db.version}if(V||J){if(J){var H=X.db.version+1;if(H>X.version)X.version=H}return!0}return!1}function L0(X){return new L(function(G,J){var U=new FileReader;U.onerror=J,U.onloadend=function(V){var H=btoa(V.target.result||"");G({__local_forage_encoded_blob:!0,data:H,type:X.type})},U.readAsBinaryString(X)})}function Q0(X){var G=T(atob(X.data));return i([G],{type:X.type})}function f0(X){return X&&X.__local_forage_encoded_blob}function e1(X){var G=this,J=G._initReady().then(function(){var U=p[G._dbInfo.name];if(U&&U.dbReady)return U.dbReady});return m(J,X,X),J}function X6(X){u(X);var G=p[X.name],J=G.forages;for(var U=0;U<J.length;U++){var V=J[U];if(V._dbInfo.db)V._dbInfo.db.close(),V._dbInfo.db=null}return X.db=null,a(X).then(function(H){if(X.db=H,B0(X))return G0(X);return H}).then(function(H){X.db=G.db=H;for(var B=0;B<J.length;B++)J[B]._dbInfo.db=H}).catch(function(H){throw d(X,H),H})}function t(X,G,J,U){if(U===void 0)U=1;try{var V=X.db.transaction(X.storeName,G);J(null,V)}catch(H){if(U>0&&(!X.db||H.name==="InvalidStateError"||H.name==="NotFoundError"))return L.resolve().then(function(){if(!X.db||H.name==="NotFoundError"&&!X.db.objectStoreNames.contains(X.storeName)&&X.version<=X.db.version){if(X.db)X.version=X.db.version+1;return G0(X)}}).then(function(){return X6(X).then(function(){t(X,G,J,U-1)})}).catch(J);J(H)}}function b0(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function J6(X){var G=this,J={db:null};if(X)for(var U in X)J[U]=X[U];var V=p[J.name];if(!V)V=b0(),p[J.name]=V;if(V.forages.push(G),!G._initReady)G._initReady=G.ready,G.ready=e1;var H=[];function B(){return L.resolve()}for(var Y=0;Y<V.forages.length;Y++){var M=V.forages[Y];if(M!==G)H.push(M._initReady().catch(B))}var $=V.forages.slice(0);return L.all(H).then(function(){return J.db=V.db,a(J)}).then(function(F){if(J.db=F,B0(J,G._defaultConfig.version))return G0(J);return F}).then(function(F){J.db=V.db=F,G._dbInfo=J;for(var A=0;A<$.length;A++){var P=$[A];if(P!==G)P._dbInfo.db=J.db,P._dbInfo.version=J.version}})}function Q6(X,G){var J=this;X=g(X);var U=new L(function(V,H){J.ready().then(function(){t(J._dbInfo,J0,function(B,Y){if(B)return H(B);try{var M=Y.objectStore(J._dbInfo.storeName),$=M.get(X);$.onsuccess=function(){var F=$.result;if(F===void 0)F=null;if(f0(F))F=Q0(F);V(F)},$.onerror=function(){H($.error)}}catch(F){H(F)}})}).catch(H)});return D(U,G),U}function Z6(X,G){var J=this,U=new L(function(V,H){J.ready().then(function(){t(J._dbInfo,J0,function(B,Y){if(B)return H(B);try{var M=Y.objectStore(J._dbInfo.storeName),$=M.openCursor(),F=1;$.onsuccess=function(){var A=$.result;if(A){var P=A.value;if(f0(P))P=Q0(P);var R=X(P,A.key,F++);if(R!==void 0)V(R);else A.continue()}else V()},$.onerror=function(){H($.error)}}catch(A){H(A)}})}).catch(H)});return D(U,G),U}function W6(X,G,J){var U=this;X=g(X);var V=new L(function(H,B){var Y;U.ready().then(function(){if(Y=U._dbInfo,q0.call(G)==="[object Blob]")return E(Y.db).then(function(M){if(M)return G;return L0(G)});return G}).then(function(M){t(U._dbInfo,K,function($,F){if($)return B($);try{var A=F.objectStore(U._dbInfo.storeName);if(M===null)M=void 0;var P=A.put(M,X);F.oncomplete=function(){if(M===void 0)M=null;H(M)},F.onabort=F.onerror=function(){var R=P.error?P.error:P.transaction.error;B(R)}}catch(R){B(R)}})}).catch(B)});return D(V,J),V}function G6(X,G){var J=this;X=g(X);var U=new L(function(V,H){J.ready().then(function(){t(J._dbInfo,K,function(B,Y){if(B)return H(B);try{var M=Y.objectStore(J._dbInfo.storeName),$=M.delete(X);Y.oncomplete=function(){V()},Y.onerror=function(){H($.error)},Y.onabort=function(){var F=$.error?$.error:$.transaction.error;H(F)}}catch(F){H(F)}})}).catch(H)});return D(U,G),U}function H6(X){var G=this,J=new L(function(U,V){G.ready().then(function(){t(G._dbInfo,K,function(H,B){if(H)return V(H);try{var Y=B.objectStore(G._dbInfo.storeName),M=Y.clear();B.oncomplete=function(){U()},B.onabort=B.onerror=function(){var $=M.error?M.error:M.transaction.error;V($)}}catch($){V($)}})}).catch(V)});return D(J,X),J}function U6(X){var G=this,J=new L(function(U,V){G.ready().then(function(){t(G._dbInfo,J0,function(H,B){if(H)return V(H);try{var Y=B.objectStore(G._dbInfo.storeName),M=Y.count();M.onsuccess=function(){U(M.result)},M.onerror=function(){V(M.error)}}catch($){V($)}})}).catch(V)});return D(J,X),J}function V6(X,G){var J=this,U=new L(function(V,H){if(X<0){V(null);return}J.ready().then(function(){t(J._dbInfo,J0,function(B,Y){if(B)return H(B);try{var M=Y.objectStore(J._dbInfo.storeName),$=!1,F=M.openKeyCursor();F.onsuccess=function(){var A=F.result;if(!A){V(null);return}if(X===0)V(A.key);else if(!$)$=!0,A.advance(X);else V(A.key)},F.onerror=function(){H(F.error)}}catch(A){H(A)}})}).catch(H)});return D(U,G),U}function w6(X){var G=this,J=new L(function(U,V){G.ready().then(function(){t(G._dbInfo,J0,function(H,B){if(H)return V(H);try{var Y=B.objectStore(G._dbInfo.storeName),M=Y.openKeyCursor(),$=[];M.onsuccess=function(){var F=M.result;if(!F){U($);return}$.push(F.key),F.continue()},M.onerror=function(){V(M.error)}}catch(F){V(F)}})}).catch(V)});return D(J,X),J}function z6(X,G){G=s.apply(this,arguments);var J=this.config();if(X=typeof X!=="function"&&X||{},!X.name)X.name=X.name||J.name,X.storeName=X.storeName||J.storeName;var U=this,V;if(!X.name)V=L.reject("Invalid arguments");else{var H=X.name===J.name&&U._dbInfo.db,B=H?L.resolve(U._dbInfo.db):a(X).then(function(Y){var M=p[X.name],$=M.forages;M.db=Y;for(var F=0;F<$.length;F++)$[F]._dbInfo.db=Y;return Y});if(!X.storeName)V=B.then(function(Y){u(X);var M=p[X.name],$=M.forages;Y.close();for(var F=0;F<$.length;F++){var A=$[F];A._dbInfo.db=null}var P=new L(function(R,_){var y=j.deleteDatabase(X.name);y.onerror=function(){var I=y.result;if(I)I.close();_(y.error)},y.onblocked=function(){console.warn('dropInstance blocked for database "'+X.name+'" until all open connections are closed')},y.onsuccess=function(){var I=y.result;if(I)I.close();R(I)}});return P.then(function(R){M.db=R;for(var _=0;_<$.length;_++){var y=$[_];f(y._dbInfo)}}).catch(function(R){throw(d(X,R)||L.resolve()).catch(function(){}),R})});else V=B.then(function(Y){if(!Y.objectStoreNames.contains(X.storeName))return;var M=Y.version+1;u(X);var $=p[X.name],F=$.forages;Y.close();for(var A=0;A<F.length;A++){var P=F[A];P._dbInfo.db=null,P._dbInfo.version=M}var R=new L(function(_,y){var I=j.open(X.name,M);I.onerror=function(n){var U0=I.result;U0.close(),y(n)},I.onupgradeneeded=function(){var n=I.result;n.deleteObjectStore(X.storeName)},I.onsuccess=function(){var n=I.result;n.close(),_(n)}});return R.then(function(_){$.db=_;for(var y=0;y<F.length;y++){var I=F[y];I._dbInfo.db=_,f(I._dbInfo)}}).catch(function(_){throw(d(X,_)||L.resolve()).catch(function(){}),_})})}return D(V,G),V}var B6={_driver:"asyncStorage",_initStorage:J6,_support:v(),iterate:Z6,getItem:Q6,setItem:W6,removeItem:G6,clear:H6,length:U6,key:V6,keys:w6,dropInstance:z6};function Y6(){return typeof openDatabase==="function"}var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",M6="~~local_forage_type~",d0=/^~~local_forage_type~([^~]+)~/,Y0="__lfsc__:",A0=Y0.length,D0="arbf",h0="blob",c0="si08",n0="ui08",i0="uic8",s0="si16",l0="si32",a0="ur16",t0="ui32",o0="fl32",r0="fl64",e0=A0+D0.length,X1=Object.prototype.toString;function J1(X){var G=X.length*0.75,J=X.length,U,V=0,H,B,Y,M;if(X[X.length-1]==="="){if(G--,X[X.length-2]==="=")G--}var $=new ArrayBuffer(G),F=new Uint8Array($);for(U=0;U<J;U+=4)H=r.indexOf(X[U]),B=r.indexOf(X[U+1]),Y=r.indexOf(X[U+2]),M=r.indexOf(X[U+3]),F[V++]=H<<2|B>>4,F[V++]=(B&15)<<4|Y>>2,F[V++]=(Y&3)<<6|M&63;return $}function P0(X){var G=new Uint8Array(X),J="",U;for(U=0;U<G.length;U+=3)J+=r[G[U]>>2],J+=r[(G[U]&3)<<4|G[U+1]>>4],J+=r[(G[U+1]&15)<<2|G[U+2]>>6],J+=r[G[U+2]&63];if(G.length%3===2)J=J.substring(0,J.length-1)+"=";else if(G.length%3===1)J=J.substring(0,J.length-2)+"==";return J}function $6(X,G){var J="";if(X)J=X1.call(X);if(X&&(J==="[object ArrayBuffer]"||X.buffer&&X1.call(X.buffer)==="[object ArrayBuffer]")){var U,V=Y0;if(X instanceof ArrayBuffer)U=X,V+=D0;else if(U=X.buffer,J==="[object Int8Array]")V+=c0;else if(J==="[object Uint8Array]")V+=n0;else if(J==="[object Uint8ClampedArray]")V+=i0;else if(J==="[object Int16Array]")V+=s0;else if(J==="[object Uint16Array]")V+=a0;else if(J==="[object Int32Array]")V+=l0;else if(J==="[object Uint32Array]")V+=t0;else if(J==="[object Float32Array]")V+=o0;else if(J==="[object Float64Array]")V+=r0;else G(new Error("Failed to get type for BinaryArray"));G(V+P0(U))}else if(J==="[object Blob]"){var H=new FileReader;H.onload=function(){var B=M6+X.type+"~"+P0(this.result);G(Y0+h0+B)},H.readAsArrayBuffer(X)}else try{G(JSON.stringify(X))}catch(B){console.error("Couldn't convert value into a JSON string: ",X),G(null,B)}}function F6(X){if(X.substring(0,A0)!==Y0)return JSON.parse(X);var G=X.substring(e0),J=X.substring(A0,e0),U;if(J===h0&&d0.test(G)){var V=G.match(d0);U=V[1],G=G.substring(V[0].length)}var H=J1(G);switch(J){case D0:return H;case h0:return i([H],{type:U});case c0:return new Int8Array(H);case n0:return new Uint8Array(H);case i0:return new Uint8ClampedArray(H);case s0:return new Int16Array(H);case a0:return new Uint16Array(H);case l0:return new Int32Array(H);case t0:return new Uint32Array(H);case o0:return new Float32Array(H);case r0:return new Float64Array(H);default:throw new Error("Unkown type: "+J)}}var x0={serialize:$6,deserialize:F6,stringToBuffer:J1,bufferToString:P0};function Q1(X,G,J,U){X.executeSql("CREATE TABLE IF NOT EXISTS "+G.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],J,U)}function O6(X){var G=this,J={db:null};if(X)for(var U in X)J[U]=typeof X[U]!=="string"?X[U].toString():X[U];var V=new L(function(H,B){try{J.db=openDatabase(J.name,String(J.version),J.description,J.size)}catch(Y){return B(Y)}J.db.transaction(function(Y){Q1(Y,J,function(){G._dbInfo=J,H()},function(M,$){B($)})},B)});return J.serializer=x0,V}function e(X,G,J,U,V,H){X.executeSql(J,U,V,function(B,Y){if(Y.code===Y.SYNTAX_ERR)B.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[G.storeName],function(M,$){if(!$.rows.length)Q1(M,G,function(){M.executeSql(J,U,V,H)},H);else H(M,Y)},H);else H(B,Y)},H)}function K6(X,G){var J=this;X=g(X);var U=new L(function(V,H){J.ready().then(function(){var B=J._dbInfo;B.db.transaction(function(Y){e(Y,B,"SELECT * FROM "+B.storeName+" WHERE key = ? LIMIT 1",[X],function(M,$){var F=$.rows.length?$.rows.item(0).value:null;if(F)F=B.serializer.deserialize(F);V(F)},function(M,$){H($)})})}).catch(H)});return D(U,G),U}function N6(X,G){var J=this,U=new L(function(V,H){J.ready().then(function(){var B=J._dbInfo;B.db.transaction(function(Y){e(Y,B,"SELECT * FROM "+B.storeName,[],function(M,$){var F=$.rows,A=F.length;for(var P=0;P<A;P++){var R=F.item(P),_=R.value;if(_)_=B.serializer.deserialize(_);if(_=X(_,R.key,P+1),_!==void 0){V(_);return}}V()},function(M,$){H($)})})}).catch(H)});return D(U,G),U}function Z1(X,G,J,U){var V=this;X=g(X);var H=new L(function(B,Y){V.ready().then(function(){if(G===void 0)G=null;var M=G,$=V._dbInfo;$.serializer.serialize(G,function(F,A){if(A)Y(A);else $.db.transaction(function(P){e(P,$,"INSERT OR REPLACE INTO "+$.storeName+" (key, value) VALUES (?, ?)",[X,F],function(){B(M)},function(R,_){Y(_)})},function(P){if(P.code===P.QUOTA_ERR){if(U>0){B(Z1.apply(V,[X,M,J,U-1]));return}Y(P)}})})}).catch(Y)});return D(H,J),H}function q6(X,G,J){return Z1.apply(this,[X,G,J,1])}function L6(X,G){var J=this;X=g(X);var U=new L(function(V,H){J.ready().then(function(){var B=J._dbInfo;B.db.transaction(function(Y){e(Y,B,"DELETE FROM "+B.storeName+" WHERE key = ?",[X],function(){V()},function(M,$){H($)})})}).catch(H)});return D(U,G),U}function A6(X){var G=this,J=new L(function(U,V){G.ready().then(function(){var H=G._dbInfo;H.db.transaction(function(B){e(B,H,"DELETE FROM "+H.storeName,[],function(){U()},function(Y,M){V(M)})})}).catch(V)});return D(J,X),J}function D6(X){var G=this,J=new L(function(U,V){G.ready().then(function(){var H=G._dbInfo;H.db.transaction(function(B){e(B,H,"SELECT COUNT(key) as c FROM "+H.storeName,[],function(Y,M){var $=M.rows.item(0).c;U($)},function(Y,M){V(M)})})}).catch(V)});return D(J,X),J}function h6(X,G){var J=this,U=new L(function(V,H){J.ready().then(function(){var B=J._dbInfo;B.db.transaction(function(Y){e(Y,B,"SELECT key FROM "+B.storeName+" WHERE id = ? LIMIT 1",[X+1],function(M,$){var F=$.rows.length?$.rows.item(0).key:null;V(F)},function(M,$){H($)})})}).catch(H)});return D(U,G),U}function P6(X){var G=this,J=new L(function(U,V){G.ready().then(function(){var H=G._dbInfo;H.db.transaction(function(B){e(B,H,"SELECT key FROM "+H.storeName,[],function(Y,M){var $=[];for(var F=0;F<M.rows.length;F++)$.push(M.rows.item(F).key);U($)},function(Y,M){V(M)})})}).catch(V)});return D(J,X),J}function x6(X){return new L(function(G,J){X.transaction(function(U){U.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(V,H){var B=[];for(var Y=0;Y<H.rows.length;Y++)B.push(H.rows.item(Y).name);G({db:X,storeNames:B})},function(V,H){J(H)})},function(U){J(U)})})}function S6(X,G){G=s.apply(this,arguments);var J=this.config();if(X=typeof X!=="function"&&X||{},!X.name)X.name=X.name||J.name,X.storeName=X.storeName||J.storeName;var U=this,V;if(!X.name)V=L.reject("Invalid arguments");else V=new L(function(H){var B;if(X.name===J.name)B=U._dbInfo.db;else B=openDatabase(X.name,"","",0);if(!X.storeName)H(x6(B));else H({db:B,storeNames:[X.storeName]})}).then(function(H){return new L(function(B,Y){H.db.transaction(function(M){function $(R){return new L(function(_,y){M.executeSql("DROP TABLE IF EXISTS "+R,[],function(){_()},function(I,n){y(n)})})}var F=[];for(var A=0,P=H.storeNames.length;A<P;A++)F.push($(H.storeNames[A]));L.all(F).then(function(){B()}).catch(function(R){Y(R)})},function(M){Y(M)})})});return D(V,G),V}var T6={_driver:"webSQLStorage",_initStorage:O6,_support:Y6(),iterate:N6,getItem:K6,setItem:q6,removeItem:L6,clear:A6,length:D6,key:h6,keys:P6,dropInstance:S6};function R6(){try{return typeof localStorage!=="undefined"&&"setItem"in localStorage&&!!localStorage.setItem}catch(X){return!1}}function W1(X,G){var J=X.name+"/";if(X.storeName!==G.storeName)J+=X.storeName+"/";return J}function C6(){var X="_localforage_support_test";try{return localStorage.setItem(X,!0),localStorage.removeItem(X),!1}catch(G){return!0}}function _6(){return!C6()||localStorage.length>0}function E6(X){var G=this,J={};if(X)for(var U in X)J[U]=X[U];if(J.keyPrefix=W1(X,G._defaultConfig),!_6())return L.reject();return G._dbInfo=J,J.serializer=x0,L.resolve()}function j6(X){var G=this,J=G.ready().then(function(){var U=G._dbInfo.keyPrefix;for(var V=localStorage.length-1;V>=0;V--){var H=localStorage.key(V);if(H.indexOf(U)===0)localStorage.removeItem(H)}});return D(J,X),J}function I6(X,G){var J=this;X=g(X);var U=J.ready().then(function(){var V=J._dbInfo,H=localStorage.getItem(V.keyPrefix+X);if(H)H=V.serializer.deserialize(H);return H});return D(U,G),U}function m6(X,G){var J=this,U=J.ready().then(function(){var V=J._dbInfo,H=V.keyPrefix,B=H.length,Y=localStorage.length,M=1;for(var $=0;$<Y;$++){var F=localStorage.key($);if(F.indexOf(H)!==0)continue;var A=localStorage.getItem(F);if(A)A=V.serializer.deserialize(A);if(A=X(A,F.substring(B),M++),A!==void 0)return A}});return D(U,G),U}function y6(X,G){var J=this,U=J.ready().then(function(){var V=J._dbInfo,H;try{H=localStorage.key(X)}catch(B){H=null}if(H)H=H.substring(V.keyPrefix.length);return H});return D(U,G),U}function g6(X){var G=this,J=G.ready().then(function(){var U=G._dbInfo,V=localStorage.length,H=[];for(var B=0;B<V;B++){var Y=localStorage.key(B);if(Y.indexOf(U.keyPrefix)===0)H.push(Y.substring(U.keyPrefix.length))}return H});return D(J,X),J}function k6(X){var G=this,J=G.keys().then(function(U){return U.length});return D(J,X),J}function v6(X,G){var J=this;X=g(X);var U=J.ready().then(function(){var V=J._dbInfo;localStorage.removeItem(V.keyPrefix+X)});return D(U,G),U}function p6(X,G,J){var U=this;X=g(X);var V=U.ready().then(function(){if(G===void 0)G=null;var H=G;return new L(function(B,Y){var M=U._dbInfo;M.serializer.serialize(G,function($,F){if(F)Y(F);else try{localStorage.setItem(M.keyPrefix+X,$),B(H)}catch(A){if(A.name==="QuotaExceededError"||A.name==="NS_ERROR_DOM_QUOTA_REACHED")Y(A);Y(A)}})})});return D(V,J),V}function u6(X,G){if(G=s.apply(this,arguments),X=typeof X!=="function"&&X||{},!X.name){var J=this.config();X.name=X.name||J.name,X.storeName=X.storeName||J.storeName}var U=this,V;if(!X.name)V=L.reject("Invalid arguments");else V=new L(function(H){if(!X.storeName)H(X.name+"/");else H(W1(X,U._defaultConfig))}).then(function(H){for(var B=localStorage.length-1;B>=0;B--){var Y=localStorage.key(B);if(Y.indexOf(H)===0)localStorage.removeItem(Y)}});return D(V,G),V}var f6={_driver:"localStorageWrapper",_initStorage:E6,_support:R6(),iterate:m6,getItem:I6,setItem:p6,removeItem:v6,clear:j6,length:k6,key:y6,keys:g6,dropInstance:u6},b6=function X(G,J){return G===J||typeof G==="number"&&typeof J==="number"&&isNaN(G)&&isNaN(J)},d6=function X(G,J){var U=G.length,V=0;while(V<U){if(b6(G[V],J))return!0;V++}return!1},G1=Array.isArray||function(X){return Object.prototype.toString.call(X)==="[object Array]"},H0={},H1={},Z0={INDEXEDDB:B6,WEBSQL:T6,LOCALSTORAGE:f6},c6=[Z0.INDEXEDDB._driver,Z0.WEBSQL._driver,Z0.LOCALSTORAGE._driver],M0=["dropInstance"],S0=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(M0),n6={description:"",driver:c6.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function i6(X,G){X[G]=function(){var J=arguments;return X.ready().then(function(){return X[G].apply(X,J)})}}function T0(){for(var X=1;X<arguments.length;X++){var G=arguments[X];if(G){for(var J in G)if(G.hasOwnProperty(J))if(G1(G[J]))arguments[0][J]=G[J].slice();else arguments[0][J]=G[J]}}return arguments[0]}var s6=function(){function X(G){h(this,X);for(var J in Z0)if(Z0.hasOwnProperty(J)){var U=Z0[J],V=U._driver;if(this[J]=V,!H0[V])this.defineDriver(U)}this._defaultConfig=T0({},n6),this._config=T0({},this._defaultConfig,G),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return X.prototype.config=function G(J){if((typeof J==="undefined"?"undefined":q(J))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var U in J){if(U==="storeName")J[U]=J[U].replace(/\W/g,"_");if(U==="version"&&typeof J[U]!=="number")return new Error("Database version must be a number.");this._config[U]=J[U]}if("driver"in J&&J.driver)return this.setDriver(this._config.driver);return!0}else if(typeof J==="string")return this._config[J];else return this._config},X.prototype.defineDriver=function G(J,U,V){var H=new L(function(B,Y){try{var M=J._driver,$=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!J._driver){Y($);return}var F=S0.concat("_initStorage");for(var A=0,P=F.length;A<P;A++){var R=F[A],_=!d6(M0,R);if((_||J[R])&&typeof J[R]!=="function"){Y($);return}}var y=function n(){var U0=function k8(t6){return function(){var o6=new Error("Method "+t6+" is not implemented by the current driver"),U1=L.reject(o6);return D(U1,arguments[arguments.length-1]),U1}};for(var R0=0,a6=M0.length;R0<a6;R0++){var C0=M0[R0];if(!J[C0])J[C0]=U0(C0)}};y();var I=function n(U0){if(H0[M])console.info("Redefining LocalForage driver: "+M);H0[M]=J,H1[M]=U0,B()};if("_support"in J)if(J._support&&typeof J._support==="function")J._support().then(I,Y);else I(!!J._support);else I(!0)}catch(n){Y(n)}});return m(H,U,V),H},X.prototype.driver=function G(){return this._driver||null},X.prototype.getDriver=function G(J,U,V){var H=H0[J]?L.resolve(H0[J]):L.reject(new Error("Driver not found."));return m(H,U,V),H},X.prototype.getSerializer=function G(J){var U=L.resolve(x0);return m(U,J),U},X.prototype.ready=function G(J){var U=this,V=U._driverSet.then(function(){if(U._ready===null)U._ready=U._initDriver();return U._ready});return m(V,J,J),V},X.prototype.setDriver=function G(J,U,V){var H=this;if(!G1(J))J=[J];var B=this._getSupportedDrivers(J);function Y(){H._config.driver=H.driver()}function M(A){return H._extend(A),Y(),H._ready=H._initStorage(H._config),H._ready}function $(A){return function(){var P=0;function R(){while(P<A.length){var _=A[P];return P++,H._dbInfo=null,H._ready=null,H.getDriver(_).then(M).catch(R)}Y();var y=new Error("No available storage method found.");return H._driverSet=L.reject(y),H._driverSet}return R()}}var F=this._driverSet!==null?this._driverSet.catch(function(){return L.resolve()}):L.resolve();return this._driverSet=F.then(function(){var A=B[0];return H._dbInfo=null,H._ready=null,H.getDriver(A).then(function(P){H._driver=P._driver,Y(),H._wrapLibraryMethodsWithReady(),H._initDriver=$(B)})}).catch(function(){Y();var A=new Error("No available storage method found.");return H._driverSet=L.reject(A),H._driverSet}),m(this._driverSet,U,V),this._driverSet},X.prototype.supports=function G(J){return!!H1[J]},X.prototype._extend=function G(J){T0(this,J)},X.prototype._getSupportedDrivers=function G(J){var U=[];for(var V=0,H=J.length;V<H;V++){var B=J[V];if(this.supports(B))U.push(B)}return U},X.prototype._wrapLibraryMethodsWithReady=function G(){for(var J=0,U=S0.length;J<U;J++)i6(this,S0[J])},X.prototype.createInstance=function G(J){return new X(J)},X}(),l6=new s6;z.exports=l6},{"3":3}]},{},[4])(4)})});function V0(Q){const W=globalThis.document,Z=W.createElement("style");Z.appendChild(W.createTextNode(Q)),W.head.append(Z)}V0(":root{--ui-primary:#e6f0ff;--ui-secondary:#e9f1fc;--ui-tertiary:#d9e3f2;--ui-modal-overlay:#4c97ffe6;--ui-white:#fff;--ui-white-dim:#ffffffbf;--ui-white-transparent:#ffffff40;--ui-transparent:#fff0;--ui-black-transparent:#00000026;--text-primary:#575e75;--text-primary-transparent:#575e75bf;--motion-primary:#4c97ff;--motion-tertiary:#3373cc;--motion-transparent:#4c97ff59;--motion-light-transparent:#4c97ff26;--red-primary:#ff661a;--red-tertiary:#e64d00;--sound-primary:#cf63cf;--sound-tertiary:#bd42bd;--control-primary:#ffab1a;--data-primary:#ff8c1a;--pen-primary:#0fbd8c;--pen-transparent:#0fbd8c40;--error-primary:#ff8c1a;--error-light:#ffb366;--error-transparent:#ff8c1a40;--extensions-primary:#0fbd8c;--extensions-tertiary:#0b8e69;--extensions-transparent:#0fbd8c59;--extensions-light:#c3efe2;--drop-highlight:#8abbff;--space:.5rem;--standard-font-size:.75rem;--small-font-size:.625rem;--icon-per-row:5;--menu-bar-height:3rem;--language-selector-width:3rem;--tool-bar-height:2.75rem;--library-header-height:3.125rem;--library-filter-bar-height:2.5rem;--form-radius:calc(var(--space)/2);--min-width:1024px;--min-height:640px;--menu-bar-standard-font-size:var(--standard-font-size);--menu-bar-large-font-size:.875rem;--menu-bar-button-size:2rem;--menu-bar-item-max-width:12rem;--z-index-extension-button:42;--z-index-stage-indicator:45;--z-index-add-button:46;--z-index-tooltip:47;--z-index-monitor:48;--z-index-stage-question:49;--z-index-card:480;--z-index-alerts:490;--z-index-menu-bar:491;--z-index-loader:500;--z-index-modal:510;--z-index-drag-layer:1000;--z-index-monitor-dragging:1010;--z-index-dragging-sprite:1020;--z-index-stage-color-picker-background:2000;--z-index-stage-with-color-picker:2010;--z-index-stage-header:5000;--z-index-stage-wrapper-overlay:5000;--z-index-context-menu:10000}html,body,#root{min-width:var(--min-width);min-height:var(--min-height);width:100%;height:100%;margin:0}*{box-sizing:border-box;user-select:none}");V0("body{font-family:Helvetica Neue,Helvetica,Arial,sans-serif}h2{font-size:1.5rem;font-weight:700}p{font-size:1rem;line-height:1.5em}");var U8=function(Q,W,Z){for(var w=new H8(W),z=[],O=function(q){var{options:h,type:x,value:j}=q;if(x!==X0.Variable)if(h)if(x!==X0.Select)try{z.concat(h[new Intl.PluralRules(Q).select(Z[j])].map(O))}catch(v){z.concat(h.other.map(O))}else z.concat((h[Z[j]]||h.other).map(O));else z.push(j);else z.push(Z[j])};!w.input.done;)O(w.next());return z},X0,_0=function(Q,W){return _0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Z,w){Z.__proto__=w}||function(Z,w){for(var z in w)Object.prototype.hasOwnProperty.call(w,z)&&(Z[z]=w[z])},_0(Q,W)},w1=function(Q){function W(Z,w){var z=Q.call(this,"Translation failed")||this;return z.id=Z,z.language=w,z}return function(Z,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+w+" is not a constructor or null");function z(){this.constructor=Z}_0(Z,w),Z.prototype=w===null?Object.create(w):(z.prototype=w.prototype,new z)}(W,Q),W.is=function(Z){return Z instanceof W},W}(Error),W8=function(){function Q(W){this.input=W,this.index=0,this.done=!1,this.value="",this.value=this.input.charAt(0)}return Q.prototype.next=function(){return++this.index>=this.input.length&&(this.done=!0),this.value=this.input.charAt(this.index)},Q.prototype.croak=function(){throw Error("[".concat(this.input,']. Unexpected character "').concat(this.value,'" on position ').concat(this.index,"."))},Q}();(function(Q){Q[Q.Plural=0]="Plural",Q[Q.Select=1]="Select",Q[Q.Text=2]="Text",Q[Q.Variable=3]="Variable"})(X0||(X0={}));var G8=["{","}",","],H8=function(){function Q(W){this.input=new W8(W)}return Q.prototype.next=function(){return this.input.value==="{"?this.readVariable():this.readText()},Q.prototype.skip=function(W){W!==this.input.value&&this.input.croak(),this.input.next()},Q.prototype.readWhile=function(W){for(var Z="";!this.input.done&&W(this.input.value);)Z+=this.input.value,this.input.next();return Z},Q.prototype.readVariable=function(){this.skip("{");var W=this.readWhile(function(w){return!function(z){return G8.includes(z)}(w)}).trim();if(W.length===0&&this.input.croak(),this.input.value==="}")return this.skip("}"),{type:X0.Variable,value:W};this.skip(",");var Z=this.readVariableType();return{options:this.readVariableOptions(),type:Z,value:W}},Q.prototype.readText=function(){return{type:X0.Text,value:this.readWhile(function(W){return W!=="{"&&W!=="}"})}},Q.prototype.readVariableType=function(){var W=this.readWhile(function(Z){return Z!==","}).trim();return W==="plural"?X0.Plural:W==="select"?X0.Select:void this.input.croak()},Q.prototype.readVariableOptions=function(){this.skip(",");for(var W={};this.input.value!=="}";)W[this.readText().value.trim()]=this.readExpression();return this.skip("}"),W},Q.prototype.readExpression=function(){var W=[];for(this.skip("{");this.input.value!=="}";)W.push(this.next());return this.skip("}"),W},Q}(),$0=function(Q,W){Q===void 0&&(Q="en"),W===void 0&&(W=[]);var Z=this;this.memo={},this.onError=console.error,this.formatDate=function(z,O){return new Intl.DateTimeFormat(Z.language,O).format(z)},this.formatNumber=function(z,O){return new Intl.NumberFormat(Z.language,O).format(z)},this.translate=function(z,O){O===void 0&&(O={});var q=Z.getMessageById(z,O.defaultMessage);if(typeof q=="string")try{return U8(Z.language,q,O).join("")}catch(h){Z.onError(new w1(z,Z.language))}return q+""},this.getMessageById=function(z,O){if(!Z.memo[z]){var q=Z.messages[z];q===void 0&&(q=z.split(".").reduce(function(h,x){return h?h[x]:void 0},Z.messages)),typeof q!="string"&&(Z.onError(new w1(z,Z.language)),q=O||z),Z.memo[z]=q}return Z.memo[z]};var w=W.find(function(z){return z.language===Q});this.language=Q,this.messages=w?w.messages:{}};import{createContext as V8,h as w0,Fragment as E0} from"preact";import{useState as w8,useEffect as z8,useContext as z1} from"preact/hooks";var j0=function(Q,W){var Z={};for(var w in Q)Object.prototype.hasOwnProperty.call(Q,w)&&W.indexOf(w)<0&&(Z[w]=Q[w]);if(Q!=null&&typeof Object.getOwnPropertySymbols=="function"){var z=0;for(w=Object.getOwnPropertySymbols(Q);z<w.length;z++)W.indexOf(w[z])<0&&Object.prototype.propertyIsEnumerable.call(Q,w[z])&&(Z[w[z]]=Q[w[z]])}return Z},F0=function(Q){var W=z1(I0);return Q&&Q!==W.language?new $0(Q):W.translator},I0=V8({language:"",locales:[],setLanguage:function(){},translator:new $0}),B1=function(Q){var{children:W,language:Z,locales:w,onError:z}=Q,O=w8(Z);z8(function(){O[1](Z)},[Z]);var q=new $0(O[0],w);return z&&(q.onError=z),w0(I0.Provider,{value:{language:O[0],locales:w,setLanguage:O[1],translator:q}},W)},i8=function(Q){var{language:W,value:Z}=Q,w=j0(Q,["children","language","value"]);return w0(E0,null,F0(W).formatDate(Z,w))},s8=function(Q){var{language:W,value:Z}=Q,w=j0(Q,["children","language","value"]);return w0(E0,null,F0(W).formatNumber(Z,w))},l8=function(Q){var{html:W,id:Z,tagName:w}=Q,z=w===void 0?"span":w,O=j0(Q,["children","html","id","tagName"]),q=z1(I0).translator.translate(Z,O);return W?w0(z,{dangerouslySetInnerHTML:{__html:q}}):w0(E0,null,q)};function B8(Q,W){const Z=document.createElement("a"),w=new Blob([Q]),z=URL.createObjectURL(w);Z.setAttribute("href",z),Z.setAttribute("download",W),Z.click()}import{Fragment as Y8,toChildArray as M8} from"preact";function m0(Q){return[].concat(...M8(Q).map((W)=>Array.isArray(W)?m0(W):W.type===Y8?m0(W.props.children):W))}function $8(Q,W){$1.set(Q,W)}function F8(Q){const W=[];return Q.forEach((Z)=>{if(M1.hasOwnProperty(Z))W[M1[Z]]=Y1[Z];else W.push(Y1[Z])}),W.filter((Z)=>Z).join(o?"":"+")}var N={ESC:"Escape",F1:"F1",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",F10:"F10",F11:"F11",F12:"F12",D1:"Digit1",D2:"Digit2",D3:"Digit3",D4:"Digit4",D5:"Digit5",D6:"Digit6",D7:"Digit7",D8:"Digit8",D9:"Digit9",D0:"Digit0",TAB:"Tab",BACKSPACE:"Backspace",DELETE:"Backspace",ENTER:"Enter",RETURN:"Enter",A:"KeyA",B:"KeyB",C:"KeyC",D:"KeyD",E:"KeyE",F:"KeyF",G:"KeyG",H:"KeyH",I:"KeyI",J:"KeyJ",K:"KeyK",L:"KeyL",M:"KeyM",N:"KeyN",O:"KeyO",P:"KeyP",Q:"KeyQ",R:"KeyR",S:"KeyS",T:"KeyT",U:"KeyU",V:"KeyV",W:"KeyW",X:"KeyX",Y:"KeyY",Z:"KeyZ",UP:"ArrowUp",DOWN:"ArrowDown",LEFT:"ArrowLeft",RIGHT:"ArrowRight",SHIFT:"Shift",CTRL:"Control",ALT:"Alt",WIN:"Meta",CONTROL:"Control",OPTION:"Alt",COMMAND:"Meta",META:"Meta"},o=/Mac/i.test(navigator.platform||navigator.userAgent),Y1={[N.ESC]:o?"\u238B":"Esc",[N.F1]:"F1",[N.F2]:"F2",[N.F3]:"F3",[N.F4]:"F4",[N.F5]:"F5",[N.F6]:"F6",[N.F7]:"F7",[N.F8]:"F8",[N.F9]:"F9",[N.F10]:"F10",[N.F11]:"F11",[N.F12]:"F12",[N.D1]:"1",[N.D2]:"2",[N.D3]:"3",[N.D4]:"4",[N.D5]:"5",[N.D6]:"6",[N.D7]:"7",[N.D8]:"8",[N.D9]:"9",[N.D0]:"0",[N.TAB]:o?"\u21E5":"Tab",[N.DELETE]:o?"\u232B":"Backspace",[N.RETURN]:o?"\u21A9":"Enter",[N.A]:"A",[N.B]:"B",[N.C]:"C",[N.D]:"D",[N.E]:"E",[N.F]:"F",[N.G]:"G",[N.H]:"H",[N.I]:"I",[N.J]:"J",[N.K]:"K",[N.L]:"L",[N.M]:"M",[N.N]:"N",[N.O]:"O",[N.P]:"P",[N.Q]:"Q",[N.R]:"R",[N.S]:"S",[N.T]:"T",[N.U]:"U",[N.V]:"V",[N.W]:"W",[N.X]:"X",[N.Y]:"Y",[N.Z]:"Z",[N.UP]:"\u2191",[N.DOWN]:"\u2193",[N.LEFT]:"\u2190",[N.RIGHT]:"\u2192",[N.SHIFT]:o?"\u21E7":"Shift",[N.CONTROL]:o?"\u2303":"Ctrl",[N.OPTION]:o?"\u2325":"Alt",[N.COMMAND]:o?"\u2318":"\u229E"},M1={[N.CONTROL]:0,[N.OPTION]:1,[N.SHIFT]:2,[N.COMMAND]:3},$1=new Map;window.addEventListener("keydown",(Q)=>{$1.forEach((W,Z)=>{const w=(z)=>{if(z===N.CONTROL&&Q.ctrlKey)return!0;if(z===N.OPTION&&Q.altKey)return!0;if(z===N.SHIFT&&Q.shiftKey)return!0;if(z===N.COMMAND&&Q.metaKey)return!0;if(z===Q.code)return!0;return!1};if(Z.every(w)&&typeof W==="function")Q.preventDefault(),W()})});var O8=function(Q){console&&console.warn&&console.warn(Q)},C=function(){C.init.call(this)},K0=function(Q){if(typeof Q!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof Q)},N1=function(Q){return Q._maxListeners===void 0?C.defaultMaxListeners:Q._maxListeners},q1=function(Q,W,Z,w){var z,O,q;if(K0(Z),O=Q._events,O===void 0?(O=Q._events=Object.create(null),Q._eventsCount=0):(O.newListener!==void 0&&(Q.emit("newListener",W,Z.listener?Z.listener:Z),O=Q._events),q=O[W]),q===void 0)q=O[W]=Z,++Q._eventsCount;else if(typeof q=="function"?q=O[W]=w?[Z,q]:[q,Z]:w?q.unshift(Z):q.push(Z),z=N1(Q),z>0&&q.length>z&&!q.warned){q.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+q.length+" "+String(W)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=Q,h.type=W,h.count=q.length,O8(h)}return Q},K8=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)},L1=function(Q,W,Z){var w={fired:!1,wrapFn:void 0,target:Q,type:W,listener:Z},z=K8.bind(w);return z.listener=Z,w.wrapFn=z,z},A1=function(Q,W,Z){var w=Q._events;if(w===void 0)return[];var z=w[W];return z===void 0?[]:typeof z=="function"?Z?[z.listener||z]:[z]:Z?q8(z):h1(z,z.length)},D1=function(Q){var W=this._events;if(W!==void 0){var Z=W[Q];if(typeof Z=="function")return 1;if(Z!==void 0)return Z.length}return 0},h1=function(Q,W){for(var Z=new Array(W),w=0;w<W;++w)Z[w]=Q[w];return Z},N8=function(Q,W){for(;W+1<Q.length;W++)Q[W]=Q[W+1];Q.pop()},q8=function(Q){for(var W=new Array(Q.length),Z=0;Z<W.length;++Z)W[Z]=Q[Z].listener||Q[Z];return W};var W0=typeof Reflect=="object"?Reflect:null,F1=W0&&typeof W0.apply=="function"?W0.apply:function(Q,W,Z){return Function.prototype.apply.call(Q,W,Z)},O0;W0&&typeof W0.ownKeys=="function"?O0=W0.ownKeys:Object.getOwnPropertySymbols?O0=function(Q){return Object.getOwnPropertyNames(Q).concat(Object.getOwnPropertySymbols(Q))}:O0=function(Q){return Object.getOwnPropertyNames(Q)};var K1=Number.isNaN||function(Q){return Q!==Q};C.EventEmitter=C;C.prototype._events=void 0;C.prototype._eventsCount=0;C.prototype._maxListeners=void 0;var O1=10;Object.defineProperty(C,"defaultMaxListeners",{enumerable:!0,get:function(){return O1},set:function(Q){if(typeof Q!="number"||Q<0||K1(Q))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+Q+".");O1=Q}});C.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};C.prototype.setMaxListeners=function(Q){if(typeof Q!="number"||Q<0||K1(Q))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+Q+".");return this._maxListeners=Q,this};C.prototype.getMaxListeners=function(){return N1(this)};C.prototype.emit=function(Q){for(var W=[],Z=1;Z<arguments.length;Z++)W.push(arguments[Z]);var w=Q==="error",z=this._events;if(z!==void 0)w=w&&z.error===void 0;else if(!w)return!1;if(w){var O;if(W.length>0&&(O=W[0]),O instanceof Error)throw O;var q=new Error("Unhandled error."+(O?" ("+O.message+")":""));throw q.context=O,q}var h=z[Q];if(h===void 0)return!1;if(typeof h=="function")F1(h,this,W);else for(var x=h.length,j=h1(h,x),Z=0;Z<x;++Z)F1(j[Z],this,W);return!0};C.prototype.addListener=function(Q,W){return q1(this,Q,W,!1)};C.prototype.on=C.prototype.addListener;C.prototype.prependListener=function(Q,W){return q1(this,Q,W,!0)};C.prototype.once=function(Q,W){return K0(W),this.on(Q,L1(this,Q,W)),this};C.prototype.prependOnceListener=function(Q,W){return K0(W),this.prependListener(Q,L1(this,Q,W)),this};C.prototype.removeListener=function(Q,W){var Z,w,z,O,q;if(K0(W),w=this._events,w===void 0)return this;if(Z=w[Q],Z===void 0)return this;if(Z===W||Z.listener===W)--this._eventsCount===0?this._events=Object.create(null):(delete w[Q],w.removeListener&&this.emit("removeListener",Q,Z.listener||W));else if(typeof Z!="function"){for(z=-1,O=Z.length-1;O>=0;O--)if(Z[O]===W||Z[O].listener===W){q=Z[O].listener,z=O;break}if(z<0)return this;z===0?Z.shift():N8(Z,z),Z.length===1&&(w[Q]=Z[0]),w.removeListener!==void 0&&this.emit("removeListener",Q,q||W)}return this};C.prototype.off=C.prototype.removeListener;C.prototype.removeAllListeners=function(Q){var W,Z,w;if(Z=this._events,Z===void 0)return this;if(Z.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):Z[Q]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete Z[Q]),this;if(arguments.length===0){var z=Object.keys(Z),O;for(w=0;w<z.length;++w)O=z[w],O!=="removeListener"&&this.removeAllListeners(O);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(W=Z[Q],typeof W=="function")this.removeListener(Q,W);else if(W!==void 0)for(w=W.length-1;w>=0;w--)this.removeListener(Q,W[w]);return this};C.prototype.listeners=function(Q){return A1(this,Q,!0)};C.prototype.rawListeners=function(Q){return A1(this,Q,!1)};C.listenerCount=function(Q,W){return typeof Q.listenerCount=="function"?Q.listenerCount(W):D1.call(Q,W)};C.prototype.listenerCount=D1;C.prototype.eventNames=function(){return this._eventsCount>0?O0(this._events):[]};var XX=C.prototype;class P1 extends C{constructor(Q){super();this.port=Q,this.reader=null}dispose(){this.close().then(()=>{this.port=null})}getInfo(){return this.port.getInfo()}open(Q){return new Promise((W,Z)=>{this.port.open(Q).then(()=>{const w=()=>{this.reader=this.port.readable.getReader(),this.reader.read().then(({value:z,done:O})=>{if(this.reader.releaseLock(),z)this.emit("data",z);if(O);else w()}).catch(()=>{this.emit("disconnect")})};w(),this.emit("connect"),W()}).catch((w)=>{Z(w)})})}close(){return new Promise((Q,W)=>{if(this.reader)this.reader.cancel().then(()=>this.port.close()).then(()=>Q()).catch((Z)=>W(Z));else this.reader=null,this.port.close().then(()=>Q()).catch((Z)=>W(Z))})}write(Q,W="text"){return new Promise((Z,w)=>{const z=this.port.writable.getWriter();if(W==="binary")z.write(Q).then(()=>Z()).catch((O)=>w(O));else{const O=new TextEncoder;z.write(O.encode(Q)).then(()=>Z()).catch((q)=>w(q))}z.releaseLock()})}}function x1(Q){return new Promise((W)=>{setTimeout(W,Q)})}var L8=()=>x1(0);var S1={"zh-CN":"zh-Hans","zh-TW":"zh-Hant","zh-HK":"zh-Hant","zh-MO":"zh-Hant"};function y0(Q){if(S1[Q])return S1[Q];return Q}var g0="en",k0=navigator.language,{DisplayNames:v0,Locale:A8}=window.Intl,D8=new v0([g0],{type:"language"}),h8=new v0([k0],{type:"language"}),z0=new Map,R1=(Q)=>(Q=y0(Q))&&z0.has(Q)&&Q,p0=(Q)=>{const W=new A8(Q),Z=W.textInfo||W.getTextInfo();return Z&&Z.direction==="rtl"},T1=(Q,W={})=>{const Z=new v0([Q],{type:"language"});return z0.set(Q,{language:Z.of(Q),languageInDefault:D8.of(Q),languageInBrowser:h8.of(Q)}),{language:Q,messages:W}},C1=[T1("en"),T1("zh-Hans")];var b=Q8(E1(),1);import{createContext as P8} from"preact";import{useContext as x8,useReducer as S8} from"preact/hooks";function R8(){const{state:Q,dispatch:W}=x8(i1);return{...Q,closeProject(){W({type:j1})},async openProject(Z){if(typeof Z==="stirng")Z=await b.default.getItem(key);if(Z)W({type:I1,payload:Z});else throw new Error(`${key} does not exist.`)},setProjectName(Z){W({type:m1,payload:Z})},addFile(Z){if(Q.fileList.find((w)=>w.id===Z.id))throw Error("File already exists");W({type:y1,payload:Z})},openFile(Z){if(Z<0||Z>Q.fileList.length-1)throw Error("File does not exist");W({type:g1,payload:Z})},deleteFile(Z){if(Z<0||Z>Q.fileList.length-1)throw Error("File does not exist");W({type:k1,payload:Z})},renameFile(Z){if(Q.fileList.find((w)=>w.name===Z))throw Error("File already exists");W({type:v1,payload:Z})},modifyFile(Z){W({type:p1,payload:Z})},addAsset(Z){if(Q.assetList.find((w)=>w.id===Z.id))throw Error("Asset already exists");W({type:u1,payload:Z})},deleteAsset(...Z){if(Array.isArray(Z[0]))Z=Z[0];W({type:f1,payload:Z})},modifyAsset(Z){W({type:b1,payload:Z})},connectDevice(Z){W({type:d1,payload:Z})},setEditor(Z){W({type:c1,payload:Z})},async saveThumb(Z){if(Q.key){const w=await b.default.getItem(Q.key);w.thumb=Z,b.default.setItem(Q.key,w)}},async saveNow(){const Z=Date.now(),w=Q.key||Z.toString(36),{name:z,editor:O,assetList:q,fileList:h,selectedIndex:x}=Q,j=await b.default.setItem(w,{key:w,name:z,editor:O,assetList:q,fileList:h,selectedIndex:x,modifiedDate:Z});return W({type:n1,payload:{key:w,modified:!1}}),j},async listProjects(){const Z=[];return await b.default.iterate((w,z)=>{Z.push({key:z,name:w.name,image:w.thumb,modifiedDate:w.modifiedDate})}),Z},getProject(Z){return b.default.getItem(Z)},async renameProject(Z,w){const z=await b.default.getItem(Z);z.name=w,await b.default.setItem(z.key,z)},async duplicateProject(Z){const w=await b.default.getItem(Z);w.modifiedDate=Date.now(),w.key=w.modifiedDate.toString(36),await b.default.setItem(w.key,w)},async deleteProject(Z){await b.default.removeItem(Z)}}}function C8({children:Q}){const[W,Z]=S8(T8,N0);return _8(i1.Provider,{value:{state:W,dispatch:Z},children:Q})}import{jsx as _8} from"preact/jsx-runtime";var j1="CLOSE_PROJECT",I1="OPEN_PROJECT",m1="SET_PROJECT_NAME",y1="ADD_FILE",g1="OPEN_FILE",k1="DELETE_FILE",v1="RENAME_FILE",p1="MODIFY_FILE",u1="ADD_ASSET",f1="DELETE_ASSET",b1="MODIFY_ASSET",d1="CONNECT_DEVICE",c1="CONFIG_EDITOR",n1="SAVE_KEY";b.default.config({name:"blockcode-store"});var N0={key:null,name:"",editor:null,assetList:[],fileList:[],selectedIndex:-1,device:null,modified:!1},i1=P8({state:Object.assign({},N0),dispatch:()=>{}}),T8=(Q,W)=>{switch(W.type){case j1:return Object.assign({},N0);case I1:if(!W.payload.editor)W.payload.editor=Q.editor;return Object.assign({},N0,W.payload);case m1:return{...Q,name:W.payload,modified:!0};case y1:return{...Q,fileList:Q.fileList.concat(W.payload),selectedIndex:Q.fileList.length,modified:!0};case g1:return{...Q,selectedIndex:W.payload};case k1:return{...Q,fileList:Q.fileList.filter((Z,w)=>w!==W.payload),selectedIndex:W.payload===Q.fileList.length-1?W.payload-1:W.payload,modified:!0};case v1:return{...Q,fileList:Q.fileList.map((Z,w)=>{if(w===Q.selectedIndex)return{...Z,name:W.payload};return Z}),modified:!0};case p1:return{...Q,fileList:Q.fileList.map((Z,w)=>{if(W.payload.id?Z.id===W.payload.id:w===Q.selectedIndex)return{...Z,...W.payload};return Z}),modified:!0};case u1:return{...Q,assetList:Q.assetList.concat(W.payload),modified:!0};case f1:return{...Q,assetList:Q.assetList.filter((Z)=>!W.payload.includes(Z.id)),modified:!0};case b1:return{...Q,assetList:Q.assetList.map((Z,w)=>{if(Z.id===W.payload.id)return{...Z,...W.payload};return Z}),modified:!0};case d1:return{...Q,device:W.payload};case c1:return{...Q,editor:Object.assign(Q.editor||{},W.payload),modified:!0};case n1:return{...Q,...W.payload};default:return Q}};import{createContext as E8} from"preact";import{useContext as j8,useReducer as I8} from"preact/hooks";function y8(){const{state:Q,dispatch:W}=j8(r1),Z=F0();return{...Q,addLocaleData(w){W({type:a1,payload:Q.locales.map(({language:z,messages:O})=>({language:z,messages:Object.assign(O,w[z])}))})},setLanguage(w){if(Q.language!==w)W({type:t1,payload:w})},getText(w,z,O={}){if(typeof z==="object")O=z;return Z.translate(w,{...O,defaultMessage:z})}}}function g8({children:Q}){const[W,Z]=I8(m8,o1);return l1(B1,{language:W.language,locales:W.locales,children:l1(r1.Provider,{value:{state:W,dispatch:Z},children:Q})})}import{jsx as l1} from"preact/jsx-runtime";var a1="SET_LOCALES",t1="SET_LANGUAGE",s1=R1(k0)||g0,o1={locales:C1,language:s1,supportLanguages:z0,isRtl:p0(s1)},r1=E8({state:o1,dispatch:()=>{}}),m8=(Q,W)=>{switch(W.type){case a1:return{...Q,locales:W.payload};case t1:return{...Q,language:W.payload,isRtl:p0(W.payload)};default:return Q}};export{y8 as useLocale,R8 as useEditor,z0 as supportLanguages,x1 as sleep,F8 as showHotkey,$8 as setHotkey,L8 as nextTick,m0 as flatChildren,B8 as exportFile,l8 as Text,P1 as Serial,s8 as Numeric,g8 as LocalesProvider,N as Keys,C8 as EditorProvider,i8 as DateTime};
