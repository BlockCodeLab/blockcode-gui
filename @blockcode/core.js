var U9=Object.create;var{defineProperty:F1,getPrototypeOf:z9,getOwnPropertyNames:B9}=Object;var Y9=Object.prototype.hasOwnProperty;var $9=(J,W,Z)=>{Z=J!=null?U9(z9(J)):{};const U=W||!J||!J.__esModule?F1(Z,"default",{value:J,enumerable:!0}):Z;for(let z of B9(J))if(!Y9.call(U,z))F1(U,z,{get:()=>J[z],enumerable:!0});return U};var M9=(J,W)=>()=>(W||J((W={exports:{}}).exports,W),W.exports);var V0=((J)=>typeof require!=="undefined"?require:typeof Proxy!=="undefined"?new Proxy(J,{get:(W,Z)=>(typeof require!=="undefined"?require:W)[Z]}):J)(function(J){if(typeof require!=="undefined")return require.apply(this,arguments);throw Error('Dynamic require of "'+J+'" is not supported')});var v1=M9((k1,d0)=>{/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(J){if(typeof k1==="object"&&typeof d0!=="undefined")d0.exports=J();else if(typeof define==="function"&&define.amd)define([],J);else{var W;if(typeof window!=="undefined")W=window;else if(typeof global!=="undefined")W=global;else if(typeof self!=="undefined")W=self;else W=this;W.localforage=J()}})(function(){var J,W,Z;return function U(z,F,K){function P(v,n){if(!F[v]){if(!z[v]){var L=typeof V0=="function"&&V0;if(!n&&L)return L(v,!0);if(x)return x(v,!0);var h=new Error("Cannot find module '"+v+"'");throw h.code="MODULE_NOT_FOUND",h}var y=F[v]={exports:{}};z[v][0].call(y.exports,function(g){var i=z[v][1][g];return P(i?i:g)},y,y.exports,U,z,F,K)}return F[v].exports}var x=typeof V0=="function"&&V0;for(var E=0;E<K.length;E++)P(K[E]);return P}({1:[function(U,z,F){(function(K){var P=K.MutationObserver||K.WebKitMutationObserver,x;if(P){var E=0,v=new P(g),n=K.document.createTextNode("");v.observe(n,{characterData:!0}),x=function(){n.data=E=++E%2}}else if(!K.setImmediate&&typeof K.MessageChannel!=="undefined"){var L=new K.MessageChannel;L.port1.onmessage=g,x=function(){L.port2.postMessage(0)}}else if("document"in K&&"onreadystatechange"in K.document.createElement("script"))x=function(){var k=K.document.createElement("script");k.onreadystatechange=function(){g(),k.onreadystatechange=null,k.parentNode.removeChild(k),k=null},K.document.documentElement.appendChild(k)};else x=function(){setTimeout(g,0)};var h,y=[];function g(){h=!0;var k,s,p=y.length;while(p){s=y,y=[],k=-1;while(++k<p)s[k]();p=y.length}h=!1}z.exports=i;function i(k){if(y.push(k)===1&&!h)x()}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],2:[function(U,z,F){var K=U(1);function P(){}var x={},E=["REJECTED"],v=["FULFILLED"],n=["PENDING"];z.exports=L;function L(O){if(typeof O!=="function")throw new TypeError("resolver must be a function");if(this.state=n,this.queue=[],this.outcome=void 0,O!==P)i(this,O)}L.prototype.catch=function(O){return this.then(null,O)},L.prototype.then=function(O,R){if(typeof O!=="function"&&this.state===v||typeof R!=="function"&&this.state===E)return this;var S=new this.constructor(P);if(this.state!==n){var j=this.state===v?O:R;y(S,j,this.outcome)}else this.queue.push(new h(S,O,R));return S};function h(O,R,S){if(this.promise=O,typeof R==="function")this.onFulfilled=R,this.callFulfilled=this.otherCallFulfilled;if(typeof S==="function")this.onRejected=S,this.callRejected=this.otherCallRejected}h.prototype.callFulfilled=function(O){x.resolve(this.promise,O)},h.prototype.otherCallFulfilled=function(O){y(this.promise,this.onFulfilled,O)},h.prototype.callRejected=function(O){x.reject(this.promise,O)},h.prototype.otherCallRejected=function(O){y(this.promise,this.onRejected,O)};function y(O,R,S){K(function(){var j;try{j=R(S)}catch(u){return x.reject(O,u)}if(j===O)x.reject(O,new TypeError("Cannot resolve promise with itself"));else x.resolve(O,j)})}x.resolve=function(O,R){var S=k(g,R);if(S.status==="error")return x.reject(O,S.value);var j=S.value;if(j)i(O,j);else{O.state=v,O.outcome=R;var u=-1,f=O.queue.length;while(++u<f)O.queue[u].callFulfilled(R)}return O},x.reject=function(O,R){O.state=E,O.outcome=R;var S=-1,j=O.queue.length;while(++S<j)O.queue[S].callRejected(R);return O};function g(O){var R=O&&O.then;if(O&&(typeof O==="object"||typeof O==="function")&&typeof R==="function")return function S(){R.apply(O,arguments)}}function i(O,R){var S=!1;function j(d){if(S)return;S=!0,x.reject(O,d)}function u(d){if(S)return;S=!0,x.resolve(O,d)}function f(){R(u,j)}var b=k(f);if(b.status==="error")j(b.value)}function k(O,R){var S={};try{S.value=O(R),S.status="success"}catch(j){S.status="error",S.value=j}return S}L.resolve=s;function s(O){if(O instanceof this)return O;return x.resolve(new this(P),O)}L.reject=p;function p(O){var R=new this(P);return x.reject(R,O)}L.all=P0;function P0(O){var R=this;if(Object.prototype.toString.call(O)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=O.length,j=!1;if(!S)return this.resolve([]);var u=new Array(S),f=0,b=-1,d=new this(P);while(++b<S)o(O[b],b);return d;function o(G0,Y0){R.resolve(G0).then(h0,function(Q0){if(!j)j=!0,x.reject(d,Q0)});function h0(Q0){if(u[Y0]=Q0,++f===S&&!j)j=!0,x.resolve(d,u)}}}L.race=J0;function J0(O){var R=this;if(Object.prototype.toString.call(O)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=O.length,j=!1;if(!S)return this.resolve([]);var u=-1,f=new this(P);while(++u<S)b(O[u]);return f;function b(d){R.resolve(d).then(function(o){if(!j)j=!0,x.resolve(f,o)},function(o){if(!j)j=!0,x.reject(f,o)})}}},{"1":1}],3:[function(U,z,F){(function(K){if(typeof K.Promise!=="function")K.Promise=U(2)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"2":2}],4:[function(U,z,F){var K=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol==="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X};function P(X,G){if(!(X instanceof G))throw new TypeError("Cannot call a class as a function")}function x(){try{if(typeof indexedDB!=="undefined")return indexedDB;if(typeof webkitIndexedDB!=="undefined")return webkitIndexedDB;if(typeof mozIndexedDB!=="undefined")return mozIndexedDB;if(typeof OIndexedDB!=="undefined")return OIndexedDB;if(typeof msIndexedDB!=="undefined")return msIndexedDB}catch(X){return}}var E=x();function v(){try{if(!E||!E.open)return!1;var X=typeof openDatabase!=="undefined"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),G=typeof fetch==="function"&&fetch.toString().indexOf("[native code")!==-1;return(!X||G)&&typeof indexedDB!=="undefined"&&typeof IDBKeyRange!=="undefined"}catch(Q){return!1}}function n(X,G){X=X||[],G=G||{};try{return new Blob(X,G)}catch(H){if(H.name!=="TypeError")throw H;var Q=typeof BlobBuilder!=="undefined"?BlobBuilder:typeof MSBlobBuilder!=="undefined"?MSBlobBuilder:typeof MozBlobBuilder!=="undefined"?MozBlobBuilder:WebKitBlobBuilder,w=new Q;for(var V=0;V<X.length;V+=1)w.append(X[V]);return w.getBlob(G.type)}}if(typeof Promise==="undefined")U(3);var L=Promise;function h(X,G){if(G)X.then(function(Q){G(null,Q)},function(Q){G(Q)})}function y(X,G,Q){if(typeof G==="function")X.then(G);if(typeof Q==="function")X.catch(Q)}function g(X){if(typeof X!=="string")console.warn(X+" used as a key, but it is not a string."),X=String(X);return X}function i(){if(arguments.length&&typeof arguments[arguments.length-1]==="function")return arguments[arguments.length-1]}var k="local-forage-detect-blob-support",s=void 0,p={},P0=Object.prototype.toString,J0="readonly",O="readwrite";function R(X){var G=X.length,Q=new ArrayBuffer(G),w=new Uint8Array(Q);for(var V=0;V<G;V++)w[V]=X.charCodeAt(V);return Q}function S(X){return new L(function(G){var Q=X.transaction(k,O),w=n([""]);Q.objectStore(k).put(w,"key"),Q.onabort=function(V){V.preventDefault(),V.stopPropagation(),G(!1)},Q.oncomplete=function(){var V=navigator.userAgent.match(/Chrome\/(\d+)/),H=navigator.userAgent.match(/Edge\//);G(H||!V||parseInt(V[1],10)>=43)}}).catch(function(){return!1})}function j(X){if(typeof s==="boolean")return L.resolve(s);return S(X).then(function(G){return s=G,s})}function u(X){var G=p[X.name],Q={};if(Q.promise=new L(function(w,V){Q.resolve=w,Q.reject=V}),G.deferredOperations.push(Q),!G.dbReady)G.dbReady=Q.promise;else G.dbReady=G.dbReady.then(function(){return Q.promise})}function f(X){var G=p[X.name],Q=G.deferredOperations.pop();if(Q)return Q.resolve(),Q.promise}function b(X,G){var Q=p[X.name],w=Q.deferredOperations.pop();if(w)return w.reject(G),w.promise}function d(X,G){return new L(function(Q,w){if(p[X.name]=p[X.name]||o0(),X.db)if(G)u(X),X.db.close();else return Q(X.db);var V=[X.name];if(G)V.push(X.version);var H=E.open.apply(E,V);if(G)H.onupgradeneeded=function(B){var Y=H.result;try{if(Y.createObjectStore(X.storeName),B.oldVersion<=1)Y.createObjectStore(k)}catch($){if($.name==="ConstraintError")console.warn('The database "'+X.name+'" has been upgraded from version '+B.oldVersion+" to version "+B.newVersion+', but the storage "'+X.storeName+'" already exists.');else throw $}};H.onerror=function(B){B.preventDefault(),w(H.error)},H.onsuccess=function(){var B=H.result;B.onversionchange=function(Y){Y.target.close()},Q(B),f(X)}})}function o(X){return d(X,!1)}function G0(X){return d(X,!0)}function Y0(X,G){if(!X.db)return!0;var Q=!X.db.objectStoreNames.contains(X.storeName),w=X.version<X.db.version,V=X.version>X.db.version;if(w){if(X.version!==G)console.warn('The database "'+X.name+`" can't be downgraded from version `+X.db.version+" to version "+X.version+".");X.version=X.db.version}if(V||Q){if(Q){var H=X.db.version+1;if(H>X.version)X.version=H}return!0}return!1}function h0(X){return new L(function(G,Q){var w=new FileReader;w.onerror=Q,w.onloadend=function(V){var H=btoa(V.target.result||"");G({__local_forage_encoded_blob:!0,data:H,type:X.type})},w.readAsBinaryString(X)})}function Q0(X){var G=R(atob(X.data));return n([G],{type:X.type})}function s0(X){return X&&X.__local_forage_encoded_blob}function zX(X){var G=this,Q=G._initReady().then(function(){var w=p[G._dbInfo.name];if(w&&w.dbReady)return w.dbReady});return y(Q,X,X),Q}function BX(X){u(X);var G=p[X.name],Q=G.forages;for(var w=0;w<Q.length;w++){var V=Q[w];if(V._dbInfo.db)V._dbInfo.db.close(),V._dbInfo.db=null}return X.db=null,o(X).then(function(H){if(X.db=H,Y0(X))return G0(X);return H}).then(function(H){X.db=G.db=H;for(var B=0;B<Q.length;B++)Q[B]._dbInfo.db=H}).catch(function(H){throw b(X,H),H})}function a(X,G,Q,w){if(w===void 0)w=1;try{var V=X.db.transaction(X.storeName,G);Q(null,V)}catch(H){if(w>0&&(!X.db||H.name==="InvalidStateError"||H.name==="NotFoundError"))return L.resolve().then(function(){if(!X.db||H.name==="NotFoundError"&&!X.db.objectStoreNames.contains(X.storeName)&&X.version<=X.db.version){if(X.db)X.version=X.db.version+1;return G0(X)}}).then(function(){return BX(X).then(function(){a(X,G,Q,w-1)})}).catch(Q);Q(H)}}function o0(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function YX(X){var G=this,Q={db:null};if(X)for(var w in X)Q[w]=X[w];var V=p[Q.name];if(!V)V=o0(),p[Q.name]=V;if(V.forages.push(G),!G._initReady)G._initReady=G.ready,G.ready=zX;var H=[];function B(){return L.resolve()}for(var Y=0;Y<V.forages.length;Y++){var $=V.forages[Y];if($!==G)H.push($._initReady().catch(B))}var M=V.forages.slice(0);return L.all(H).then(function(){return Q.db=V.db,o(Q)}).then(function(N){if(Q.db=N,Y0(Q,G._defaultConfig.version))return G0(Q);return N}).then(function(N){Q.db=V.db=N,G._dbInfo=Q;for(var D=0;D<M.length;D++){var A=M[D];if(A!==G)A._dbInfo.db=Q.db,A._dbInfo.version=Q.version}})}function $X(X,G){var Q=this;X=g(X);var w=new L(function(V,H){Q.ready().then(function(){a(Q._dbInfo,J0,function(B,Y){if(B)return H(B);try{var $=Y.objectStore(Q._dbInfo.storeName),M=$.get(X);M.onsuccess=function(){var N=M.result;if(N===void 0)N=null;if(s0(N))N=Q0(N);V(N)},M.onerror=function(){H(M.error)}}catch(N){H(N)}})}).catch(H)});return h(w,G),w}function MX(X,G){var Q=this,w=new L(function(V,H){Q.ready().then(function(){a(Q._dbInfo,J0,function(B,Y){if(B)return H(B);try{var $=Y.objectStore(Q._dbInfo.storeName),M=$.openCursor(),N=1;M.onsuccess=function(){var D=M.result;if(D){var A=D.value;if(s0(A))A=Q0(A);var T=X(A,D.key,N++);if(T!==void 0)V(T);else D.continue()}else V()},M.onerror=function(){H(M.error)}}catch(D){H(D)}})}).catch(H)});return h(w,G),w}function FX(X,G,Q){var w=this;X=g(X);var V=new L(function(H,B){var Y;w.ready().then(function(){if(Y=w._dbInfo,P0.call(G)==="[object Blob]")return j(Y.db).then(function($){if($)return G;return h0(G)});return G}).then(function($){a(w._dbInfo,O,function(M,N){if(M)return B(M);try{var D=N.objectStore(w._dbInfo.storeName);if($===null)$=void 0;var A=D.put($,X);N.oncomplete=function(){if($===void 0)$=null;H($)},N.onabort=N.onerror=function(){var T=A.error?A.error:A.transaction.error;B(T)}}catch(T){B(T)}})}).catch(B)});return h(V,Q),V}function NX(X,G){var Q=this;X=g(X);var w=new L(function(V,H){Q.ready().then(function(){a(Q._dbInfo,O,function(B,Y){if(B)return H(B);try{var $=Y.objectStore(Q._dbInfo.storeName),M=$.delete(X);Y.oncomplete=function(){V()},Y.onerror=function(){H(M.error)},Y.onabort=function(){var N=M.error?M.error:M.transaction.error;H(N)}}catch(N){H(N)}})}).catch(H)});return h(w,G),w}function KX(X){var G=this,Q=new L(function(w,V){G.ready().then(function(){a(G._dbInfo,O,function(H,B){if(H)return V(H);try{var Y=B.objectStore(G._dbInfo.storeName),$=Y.clear();B.oncomplete=function(){w()},B.onabort=B.onerror=function(){var M=$.error?$.error:$.transaction.error;V(M)}}catch(M){V(M)}})}).catch(V)});return h(Q,X),Q}function OX(X){var G=this,Q=new L(function(w,V){G.ready().then(function(){a(G._dbInfo,J0,function(H,B){if(H)return V(H);try{var Y=B.objectStore(G._dbInfo.storeName),$=Y.count();$.onsuccess=function(){w($.result)},$.onerror=function(){V($.error)}}catch(M){V(M)}})}).catch(V)});return h(Q,X),Q}function qX(X,G){var Q=this,w=new L(function(V,H){if(X<0){V(null);return}Q.ready().then(function(){a(Q._dbInfo,J0,function(B,Y){if(B)return H(B);try{var $=Y.objectStore(Q._dbInfo.storeName),M=!1,N=$.openKeyCursor();N.onsuccess=function(){var D=N.result;if(!D){V(null);return}if(X===0)V(D.key);else if(!M)M=!0,D.advance(X);else V(D.key)},N.onerror=function(){H(N.error)}}catch(D){H(D)}})}).catch(H)});return h(w,G),w}function LX(X){var G=this,Q=new L(function(w,V){G.ready().then(function(){a(G._dbInfo,J0,function(H,B){if(H)return V(H);try{var Y=B.objectStore(G._dbInfo.storeName),$=Y.openKeyCursor(),M=[];$.onsuccess=function(){var N=$.result;if(!N){w(M);return}M.push(N.key),N.continue()},$.onerror=function(){V($.error)}}catch(N){V(N)}})}).catch(V)});return h(Q,X),Q}function DX(X,G){G=i.apply(this,arguments);var Q=this.config();if(X=typeof X!=="function"&&X||{},!X.name)X.name=X.name||Q.name,X.storeName=X.storeName||Q.storeName;var w=this,V;if(!X.name)V=L.reject("Invalid arguments");else{var H=X.name===Q.name&&w._dbInfo.db,B=H?L.resolve(w._dbInfo.db):o(X).then(function(Y){var $=p[X.name],M=$.forages;$.db=Y;for(var N=0;N<M.length;N++)M[N]._dbInfo.db=Y;return Y});if(!X.storeName)V=B.then(function(Y){u(X);var $=p[X.name],M=$.forages;Y.close();for(var N=0;N<M.length;N++){var D=M[N];D._dbInfo.db=null}var A=new L(function(T,_){var m=E.deleteDatabase(X.name);m.onerror=function(){var I=m.result;if(I)I.close();_(m.error)},m.onblocked=function(){console.warn('dropInstance blocked for database "'+X.name+'" until all open connections are closed')},m.onsuccess=function(){var I=m.result;if(I)I.close();T(I)}});return A.then(function(T){$.db=T;for(var _=0;_<M.length;_++){var m=M[_];f(m._dbInfo)}}).catch(function(T){throw(b(X,T)||L.resolve()).catch(function(){}),T})});else V=B.then(function(Y){if(!Y.objectStoreNames.contains(X.storeName))return;var $=Y.version+1;u(X);var M=p[X.name],N=M.forages;Y.close();for(var D=0;D<N.length;D++){var A=N[D];A._dbInfo.db=null,A._dbInfo.version=$}var T=new L(function(_,m){var I=E.open(X.name,$);I.onerror=function(c){var w0=I.result;w0.close(),m(c)},I.onupgradeneeded=function(){var c=I.result;c.deleteObjectStore(X.storeName)},I.onsuccess=function(){var c=I.result;c.close(),_(c)}});return T.then(function(_){M.db=_;for(var m=0;m<N.length;m++){var I=N[m];I._dbInfo.db=_,f(I._dbInfo)}}).catch(function(_){throw(b(X,_)||L.resolve()).catch(function(){}),_})})}return h(V,G),V}var PX={_driver:"asyncStorage",_initStorage:YX,_support:v(),iterate:MX,getItem:$X,setItem:FX,removeItem:NX,clear:KX,length:OX,key:qX,keys:LX,dropInstance:DX};function hX(){return typeof openDatabase==="function"}var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",AX="~~local_forage_type~",a0=/^~~local_forage_type~([^~]+)~/,$0="__lfsc__:",A0=$0.length,x0="arbf",S0="blob",t0="si08",r0="ui08",e0="uic8",X1="si16",J1="si32",Q1="ur16",Z1="ui32",W1="fl32",G1="fl64",H1=A0+x0.length,w1=Object.prototype.toString;function V1(X){var G=X.length*0.75,Q=X.length,w,V=0,H,B,Y,$;if(X[X.length-1]==="="){if(G--,X[X.length-2]==="=")G--}var M=new ArrayBuffer(G),N=new Uint8Array(M);for(w=0;w<Q;w+=4)H=r.indexOf(X[w]),B=r.indexOf(X[w+1]),Y=r.indexOf(X[w+2]),$=r.indexOf(X[w+3]),N[V++]=H<<2|B>>4,N[V++]=(B&15)<<4|Y>>2,N[V++]=(Y&3)<<6|$&63;return M}function R0(X){var G=new Uint8Array(X),Q="",w;for(w=0;w<G.length;w+=3)Q+=r[G[w]>>2],Q+=r[(G[w]&3)<<4|G[w+1]>>4],Q+=r[(G[w+1]&15)<<2|G[w+2]>>6],Q+=r[G[w+2]&63];if(G.length%3===2)Q=Q.substring(0,Q.length-1)+"=";else if(G.length%3===1)Q=Q.substring(0,Q.length-2)+"==";return Q}function xX(X,G){var Q="";if(X)Q=w1.call(X);if(X&&(Q==="[object ArrayBuffer]"||X.buffer&&w1.call(X.buffer)==="[object ArrayBuffer]")){var w,V=$0;if(X instanceof ArrayBuffer)w=X,V+=x0;else if(w=X.buffer,Q==="[object Int8Array]")V+=t0;else if(Q==="[object Uint8Array]")V+=r0;else if(Q==="[object Uint8ClampedArray]")V+=e0;else if(Q==="[object Int16Array]")V+=X1;else if(Q==="[object Uint16Array]")V+=Q1;else if(Q==="[object Int32Array]")V+=J1;else if(Q==="[object Uint32Array]")V+=Z1;else if(Q==="[object Float32Array]")V+=W1;else if(Q==="[object Float64Array]")V+=G1;else G(new Error("Failed to get type for BinaryArray"));G(V+R0(w))}else if(Q==="[object Blob]"){var H=new FileReader;H.onload=function(){var B=AX+X.type+"~"+R0(this.result);G($0+S0+B)},H.readAsArrayBuffer(X)}else try{G(JSON.stringify(X))}catch(B){console.error("Couldn't convert value into a JSON string: ",X),G(null,B)}}function SX(X){if(X.substring(0,A0)!==$0)return JSON.parse(X);var G=X.substring(H1),Q=X.substring(A0,H1),w;if(Q===S0&&a0.test(G)){var V=G.match(a0);w=V[1],G=G.substring(V[0].length)}var H=V1(G);switch(Q){case x0:return H;case S0:return n([H],{type:w});case t0:return new Int8Array(H);case r0:return new Uint8Array(H);case e0:return new Uint8ClampedArray(H);case X1:return new Int16Array(H);case Q1:return new Uint16Array(H);case J1:return new Int32Array(H);case Z1:return new Uint32Array(H);case W1:return new Float32Array(H);case G1:return new Float64Array(H);default:throw new Error("Unkown type: "+Q)}}var T0={serialize:xX,deserialize:SX,stringToBuffer:V1,bufferToString:R0};function U1(X,G,Q,w){X.executeSql("CREATE TABLE IF NOT EXISTS "+G.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],Q,w)}function RX(X){var G=this,Q={db:null};if(X)for(var w in X)Q[w]=typeof X[w]!=="string"?X[w].toString():X[w];var V=new L(function(H,B){try{Q.db=openDatabase(Q.name,String(Q.version),Q.description,Q.size)}catch(Y){return B(Y)}Q.db.transaction(function(Y){U1(Y,Q,function(){G._dbInfo=Q,H()},function($,M){B(M)})},B)});return Q.serializer=T0,V}function e(X,G,Q,w,V,H){X.executeSql(Q,w,V,function(B,Y){if(Y.code===Y.SYNTAX_ERR)B.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[G.storeName],function($,M){if(!M.rows.length)U1($,G,function(){$.executeSql(Q,w,V,H)},H);else H($,Y)},H);else H(B,Y)},H)}function TX(X,G){var Q=this;X=g(X);var w=new L(function(V,H){Q.ready().then(function(){var B=Q._dbInfo;B.db.transaction(function(Y){e(Y,B,"SELECT * FROM "+B.storeName+" WHERE key = ? LIMIT 1",[X],function($,M){var N=M.rows.length?M.rows.item(0).value:null;if(N)N=B.serializer.deserialize(N);V(N)},function($,M){H(M)})})}).catch(H)});return h(w,G),w}function CX(X,G){var Q=this,w=new L(function(V,H){Q.ready().then(function(){var B=Q._dbInfo;B.db.transaction(function(Y){e(Y,B,"SELECT * FROM "+B.storeName,[],function($,M){var N=M.rows,D=N.length;for(var A=0;A<D;A++){var T=N.item(A),_=T.value;if(_)_=B.serializer.deserialize(_);if(_=X(_,T.key,A+1),_!==void 0){V(_);return}}V()},function($,M){H(M)})})}).catch(H)});return h(w,G),w}function z1(X,G,Q,w){var V=this;X=g(X);var H=new L(function(B,Y){V.ready().then(function(){if(G===void 0)G=null;var $=G,M=V._dbInfo;M.serializer.serialize(G,function(N,D){if(D)Y(D);else M.db.transaction(function(A){e(A,M,"INSERT OR REPLACE INTO "+M.storeName+" (key, value) VALUES (?, ?)",[X,N],function(){B($)},function(T,_){Y(_)})},function(A){if(A.code===A.QUOTA_ERR){if(w>0){B(z1.apply(V,[X,$,Q,w-1]));return}Y(A)}})})}).catch(Y)});return h(H,Q),H}function _X(X,G,Q){return z1.apply(this,[X,G,Q,1])}function jX(X,G){var Q=this;X=g(X);var w=new L(function(V,H){Q.ready().then(function(){var B=Q._dbInfo;B.db.transaction(function(Y){e(Y,B,"DELETE FROM "+B.storeName+" WHERE key = ?",[X],function(){V()},function($,M){H(M)})})}).catch(H)});return h(w,G),w}function EX(X){var G=this,Q=new L(function(w,V){G.ready().then(function(){var H=G._dbInfo;H.db.transaction(function(B){e(B,H,"DELETE FROM "+H.storeName,[],function(){w()},function(Y,$){V($)})})}).catch(V)});return h(Q,X),Q}function IX(X){var G=this,Q=new L(function(w,V){G.ready().then(function(){var H=G._dbInfo;H.db.transaction(function(B){e(B,H,"SELECT COUNT(key) as c FROM "+H.storeName,[],function(Y,$){var M=$.rows.item(0).c;w(M)},function(Y,$){V($)})})}).catch(V)});return h(Q,X),Q}function yX(X,G){var Q=this,w=new L(function(V,H){Q.ready().then(function(){var B=Q._dbInfo;B.db.transaction(function(Y){e(Y,B,"SELECT key FROM "+B.storeName+" WHERE id = ? LIMIT 1",[X+1],function($,M){var N=M.rows.length?M.rows.item(0).key:null;V(N)},function($,M){H(M)})})}).catch(H)});return h(w,G),w}function mX(X){var G=this,Q=new L(function(w,V){G.ready().then(function(){var H=G._dbInfo;H.db.transaction(function(B){e(B,H,"SELECT key FROM "+H.storeName,[],function(Y,$){var M=[];for(var N=0;N<$.rows.length;N++)M.push($.rows.item(N).key);w(M)},function(Y,$){V($)})})}).catch(V)});return h(Q,X),Q}function gX(X){return new L(function(G,Q){X.transaction(function(w){w.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(V,H){var B=[];for(var Y=0;Y<H.rows.length;Y++)B.push(H.rows.item(Y).name);G({db:X,storeNames:B})},function(V,H){Q(H)})},function(w){Q(w)})})}function kX(X,G){G=i.apply(this,arguments);var Q=this.config();if(X=typeof X!=="function"&&X||{},!X.name)X.name=X.name||Q.name,X.storeName=X.storeName||Q.storeName;var w=this,V;if(!X.name)V=L.reject("Invalid arguments");else V=new L(function(H){var B;if(X.name===Q.name)B=w._dbInfo.db;else B=openDatabase(X.name,"","",0);if(!X.storeName)H(gX(B));else H({db:B,storeNames:[X.storeName]})}).then(function(H){return new L(function(B,Y){H.db.transaction(function($){function M(T){return new L(function(_,m){$.executeSql("DROP TABLE IF EXISTS "+T,[],function(){_()},function(I,c){m(c)})})}var N=[];for(var D=0,A=H.storeNames.length;D<A;D++)N.push(M(H.storeNames[D]));L.all(N).then(function(){B()}).catch(function(T){Y(T)})},function($){Y($)})})});return h(V,G),V}var vX={_driver:"webSQLStorage",_initStorage:RX,_support:hX(),iterate:CX,getItem:TX,setItem:_X,removeItem:jX,clear:EX,length:IX,key:yX,keys:mX,dropInstance:kX};function pX(){try{return typeof localStorage!=="undefined"&&"setItem"in localStorage&&!!localStorage.setItem}catch(X){return!1}}function B1(X,G){var Q=X.name+"/";if(X.storeName!==G.storeName)Q+=X.storeName+"/";return Q}function uX(){var X="_localforage_support_test";try{return localStorage.setItem(X,!0),localStorage.removeItem(X),!1}catch(G){return!0}}function fX(){return!uX()||localStorage.length>0}function bX(X){var G=this,Q={};if(X)for(var w in X)Q[w]=X[w];if(Q.keyPrefix=B1(X,G._defaultConfig),!fX())return L.reject();return G._dbInfo=Q,Q.serializer=T0,L.resolve()}function dX(X){var G=this,Q=G.ready().then(function(){var w=G._dbInfo.keyPrefix;for(var V=localStorage.length-1;V>=0;V--){var H=localStorage.key(V);if(H.indexOf(w)===0)localStorage.removeItem(H)}});return h(Q,X),Q}function cX(X,G){var Q=this;X=g(X);var w=Q.ready().then(function(){var V=Q._dbInfo,H=localStorage.getItem(V.keyPrefix+X);if(H)H=V.serializer.deserialize(H);return H});return h(w,G),w}function nX(X,G){var Q=this,w=Q.ready().then(function(){var V=Q._dbInfo,H=V.keyPrefix,B=H.length,Y=localStorage.length,$=1;for(var M=0;M<Y;M++){var N=localStorage.key(M);if(N.indexOf(H)!==0)continue;var D=localStorage.getItem(N);if(D)D=V.serializer.deserialize(D);if(D=X(D,N.substring(B),$++),D!==void 0)return D}});return h(w,G),w}function iX(X,G){var Q=this,w=Q.ready().then(function(){var V=Q._dbInfo,H;try{H=localStorage.key(X)}catch(B){H=null}if(H)H=H.substring(V.keyPrefix.length);return H});return h(w,G),w}function lX(X){var G=this,Q=G.ready().then(function(){var w=G._dbInfo,V=localStorage.length,H=[];for(var B=0;B<V;B++){var Y=localStorage.key(B);if(Y.indexOf(w.keyPrefix)===0)H.push(Y.substring(w.keyPrefix.length))}return H});return h(Q,X),Q}function sX(X){var G=this,Q=G.keys().then(function(w){return w.length});return h(Q,X),Q}function oX(X,G){var Q=this;X=g(X);var w=Q.ready().then(function(){var V=Q._dbInfo;localStorage.removeItem(V.keyPrefix+X)});return h(w,G),w}function aX(X,G,Q){var w=this;X=g(X);var V=w.ready().then(function(){if(G===void 0)G=null;var H=G;return new L(function(B,Y){var $=w._dbInfo;$.serializer.serialize(G,function(M,N){if(N)Y(N);else try{localStorage.setItem($.keyPrefix+X,M),B(H)}catch(D){if(D.name==="QuotaExceededError"||D.name==="NS_ERROR_DOM_QUOTA_REACHED")Y(D);Y(D)}})})});return h(V,Q),V}function tX(X,G){if(G=i.apply(this,arguments),X=typeof X!=="function"&&X||{},!X.name){var Q=this.config();X.name=X.name||Q.name,X.storeName=X.storeName||Q.storeName}var w=this,V;if(!X.name)V=L.reject("Invalid arguments");else V=new L(function(H){if(!X.storeName)H(X.name+"/");else H(B1(X,w._defaultConfig))}).then(function(H){for(var B=localStorage.length-1;B>=0;B--){var Y=localStorage.key(B);if(Y.indexOf(H)===0)localStorage.removeItem(Y)}});return h(V,G),V}var rX={_driver:"localStorageWrapper",_initStorage:bX,_support:pX(),iterate:nX,getItem:cX,setItem:aX,removeItem:oX,clear:dX,length:sX,key:iX,keys:lX,dropInstance:tX},eX=function X(G,Q){return G===Q||typeof G==="number"&&typeof Q==="number"&&isNaN(G)&&isNaN(Q)},X9=function X(G,Q){var w=G.length,V=0;while(V<w){if(eX(G[V],Q))return!0;V++}return!1},Y1=Array.isArray||function(X){return Object.prototype.toString.call(X)==="[object Array]"},H0={},$1={},Z0={INDEXEDDB:PX,WEBSQL:vX,LOCALSTORAGE:rX},J9=[Z0.INDEXEDDB._driver,Z0.WEBSQL._driver,Z0.LOCALSTORAGE._driver],M0=["dropInstance"],C0=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(M0),Q9={description:"",driver:J9.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Z9(X,G){X[G]=function(){var Q=arguments;return X.ready().then(function(){return X[G].apply(X,Q)})}}function _0(){for(var X=1;X<arguments.length;X++){var G=arguments[X];if(G){for(var Q in G)if(G.hasOwnProperty(Q))if(Y1(G[Q]))arguments[0][Q]=G[Q].slice();else arguments[0][Q]=G[Q]}}return arguments[0]}var W9=function(){function X(G){P(this,X);for(var Q in Z0)if(Z0.hasOwnProperty(Q)){var w=Z0[Q],V=w._driver;if(this[Q]=V,!H0[V])this.defineDriver(w)}this._defaultConfig=_0({},Q9),this._config=_0({},this._defaultConfig,G),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return X.prototype.config=function G(Q){if((typeof Q==="undefined"?"undefined":K(Q))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var w in Q){if(w==="storeName")Q[w]=Q[w].replace(/\W/g,"_");if(w==="version"&&typeof Q[w]!=="number")return new Error("Database version must be a number.");this._config[w]=Q[w]}if("driver"in Q&&Q.driver)return this.setDriver(this._config.driver);return!0}else if(typeof Q==="string")return this._config[Q];else return this._config},X.prototype.defineDriver=function G(Q,w,V){var H=new L(function(B,Y){try{var $=Q._driver,M=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!Q._driver){Y(M);return}var N=C0.concat("_initStorage");for(var D=0,A=N.length;D<A;D++){var T=N[D],_=!X9(M0,T);if((_||Q[T])&&typeof Q[T]!=="function"){Y(M);return}}var m=function c(){var w0=function J6(w9){return function(){var V9=new Error("Method "+w9+" is not implemented by the current driver"),M1=L.reject(V9);return h(M1,arguments[arguments.length-1]),M1}};for(var j0=0,H9=M0.length;j0<H9;j0++){var E0=M0[j0];if(!Q[E0])Q[E0]=w0(E0)}};m();var I=function c(w0){if(H0[$])console.info("Redefining LocalForage driver: "+$);H0[$]=Q,$1[$]=w0,B()};if("_support"in Q)if(Q._support&&typeof Q._support==="function")Q._support().then(I,Y);else I(!!Q._support);else I(!0)}catch(c){Y(c)}});return y(H,w,V),H},X.prototype.driver=function G(){return this._driver||null},X.prototype.getDriver=function G(Q,w,V){var H=H0[Q]?L.resolve(H0[Q]):L.reject(new Error("Driver not found."));return y(H,w,V),H},X.prototype.getSerializer=function G(Q){var w=L.resolve(T0);return y(w,Q),w},X.prototype.ready=function G(Q){var w=this,V=w._driverSet.then(function(){if(w._ready===null)w._ready=w._initDriver();return w._ready});return y(V,Q,Q),V},X.prototype.setDriver=function G(Q,w,V){var H=this;if(!Y1(Q))Q=[Q];var B=this._getSupportedDrivers(Q);function Y(){H._config.driver=H.driver()}function $(D){return H._extend(D),Y(),H._ready=H._initStorage(H._config),H._ready}function M(D){return function(){var A=0;function T(){while(A<D.length){var _=D[A];return A++,H._dbInfo=null,H._ready=null,H.getDriver(_).then($).catch(T)}Y();var m=new Error("No available storage method found.");return H._driverSet=L.reject(m),H._driverSet}return T()}}var N=this._driverSet!==null?this._driverSet.catch(function(){return L.resolve()}):L.resolve();return this._driverSet=N.then(function(){var D=B[0];return H._dbInfo=null,H._ready=null,H.getDriver(D).then(function(A){H._driver=A._driver,Y(),H._wrapLibraryMethodsWithReady(),H._initDriver=M(B)})}).catch(function(){Y();var D=new Error("No available storage method found.");return H._driverSet=L.reject(D),H._driverSet}),y(this._driverSet,w,V),this._driverSet},X.prototype.supports=function G(Q){return!!$1[Q]},X.prototype._extend=function G(Q){_0(this,Q)},X.prototype._getSupportedDrivers=function G(Q){var w=[];for(var V=0,H=Q.length;V<H;V++){var B=Q[V];if(this.supports(B))w.push(B)}return w},X.prototype._wrapLibraryMethodsWithReady=function G(){for(var Q=0,w=C0.length;Q<w;Q++)Z9(this,C0[Q])},X.prototype.createInstance=function G(Q){return new X(Q)},X}(),G9=new W9;z.exports=G9},{"3":3}]},{},[4])(4)})});function U0(J){const W=globalThis.document,Z=W.createElement("style");Z.appendChild(W.createTextNode(J)),W.head.append(Z)}U0(":root{--ui-primary:#e6f0ff;--ui-secondary:#e9f1fc;--ui-tertiary:#d9e3f2;--ui-modal-overlay:#4c97ffe6;--ui-white:#fff;--ui-white-dim:#ffffffbf;--ui-white-transparent:#ffffff40;--ui-transparent:#fff0;--ui-black-transparent:#00000026;--text-primary:#575e75;--text-primary-transparent:#575e75bf;--motion-primary:#4c97ff;--motion-tertiary:#3373cc;--motion-transparent:#4c97ff59;--motion-light-transparent:#4c97ff26;--red-primary:#ff661a;--red-tertiary:#e64d00;--sound-primary:#cf63cf;--sound-tertiary:#bd42bd;--control-primary:#ffab1a;--data-primary:#ff8c1a;--pen-primary:#0fbd8c;--pen-transparent:#0fbd8c40;--error-primary:#ff8c1a;--error-light:#ffb366;--error-transparent:#ff8c1a40;--extensions-primary:#0fbd8c;--extensions-tertiary:#0b8e69;--extensions-transparent:#0fbd8c59;--extensions-light:#c3efe2;--drop-highlight:#8abbff;--space:.5rem;--standard-font-size:.75rem;--small-font-size:.625rem;--icon-per-row:5;--menu-bar-height:3rem;--language-selector-width:3rem;--tool-bar-height:2.75rem;--library-header-height:3.125rem;--library-filter-bar-height:2.5rem;--form-radius:calc(var(--space)/2);--min-width:1024px;--min-height:640px;--menu-bar-standard-font-size:var(--standard-font-size);--menu-bar-large-font-size:.875rem;--menu-bar-button-size:2rem;--menu-bar-item-max-width:12rem;--z-index-extension-button:42;--z-index-stage-indicator:45;--z-index-add-button:46;--z-index-tooltip:47;--z-index-monitor:48;--z-index-stage-question:49;--z-index-card:480;--z-index-alerts:490;--z-index-menu-bar:491;--z-index-loader:500;--z-index-modal:510;--z-index-drag-layer:1000;--z-index-monitor-dragging:1010;--z-index-dragging-sprite:1020;--z-index-stage-color-picker-background:2000;--z-index-stage-with-color-picker:2010;--z-index-stage-header:5000;--z-index-stage-wrapper-overlay:5000;--z-index-context-menu:10000}html,body,#root{min-width:var(--min-width);min-height:var(--min-height);width:100%;height:100%;margin:0}*{box-sizing:border-box;user-select:none}");U0("body{font-family:Helvetica Neue,Helvetica,Microsoft Yahei,Arial,sans-serif}h2{font-size:1.5rem;font-weight:700}p{font-size:1rem;line-height:1.5em}");var O9=function(J,W,Z){for(var U=new K9(W),z=[],F=function(K){var{options:P,type:x,value:E}=K;if(x!==X0.Variable)if(P)if(x!==X0.Select)try{z.concat(P[new Intl.PluralRules(J).select(Z[E])].map(F))}catch(v){z.concat(P.other.map(F))}else z.concat((P[Z[E]]||P.other).map(F));else z.push(E);else z.push(Z[E])};!U.input.done;)F(U.next());return z},X0,I0=function(J,W){return I0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Z,U){Z.__proto__=U}||function(Z,U){for(var z in U)Object.prototype.hasOwnProperty.call(U,z)&&(Z[z]=U[z])},I0(J,W)},N1=function(J){function W(Z,U){var z=J.call(this,"Translation failed")||this;return z.id=Z,z.language=U,z}return function(Z,U){if(typeof U!="function"&&U!==null)throw new TypeError("Class extends value "+U+" is not a constructor or null");function z(){this.constructor=Z}I0(Z,U),Z.prototype=U===null?Object.create(U):(z.prototype=U.prototype,new z)}(W,J),W.is=function(Z){return Z instanceof W},W}(Error),F9=function(){function J(W){this.input=W,this.index=0,this.done=!1,this.value="",this.value=this.input.charAt(0)}return J.prototype.next=function(){return++this.index>=this.input.length&&(this.done=!0),this.value=this.input.charAt(this.index)},J.prototype.croak=function(){throw Error("[".concat(this.input,']. Unexpected character "').concat(this.value,'" on position ').concat(this.index,"."))},J}();(function(J){J[J.Plural=0]="Plural",J[J.Select=1]="Select",J[J.Text=2]="Text",J[J.Variable=3]="Variable"})(X0||(X0={}));var N9=["{","}",","],K9=function(){function J(W){this.input=new F9(W)}return J.prototype.next=function(){return this.input.value==="{"?this.readVariable():this.readText()},J.prototype.skip=function(W){W!==this.input.value&&this.input.croak(),this.input.next()},J.prototype.readWhile=function(W){for(var Z="";!this.input.done&&W(this.input.value);)Z+=this.input.value,this.input.next();return Z},J.prototype.readVariable=function(){this.skip("{");var W=this.readWhile(function(U){return!function(z){return N9.includes(z)}(U)}).trim();if(W.length===0&&this.input.croak(),this.input.value==="}")return this.skip("}"),{type:X0.Variable,value:W};this.skip(",");var Z=this.readVariableType();return{options:this.readVariableOptions(),type:Z,value:W}},J.prototype.readText=function(){return{type:X0.Text,value:this.readWhile(function(W){return W!=="{"&&W!=="}"})}},J.prototype.readVariableType=function(){var W=this.readWhile(function(Z){return Z!==","}).trim();return W==="plural"?X0.Plural:W==="select"?X0.Select:void this.input.croak()},J.prototype.readVariableOptions=function(){this.skip(",");for(var W={};this.input.value!=="}";)W[this.readText().value.trim()]=this.readExpression();return this.skip("}"),W},J.prototype.readExpression=function(){var W=[];for(this.skip("{");this.input.value!=="}";)W.push(this.next());return this.skip("}"),W},J}(),F0=function(J,W){J===void 0&&(J="en"),W===void 0&&(W=[]);var Z=this;this.memo={},this.onError=console.error,this.formatDate=function(z,F){return new Intl.DateTimeFormat(Z.language,F).format(z)},this.formatNumber=function(z,F){return new Intl.NumberFormat(Z.language,F).format(z)},this.translate=function(z,F){F===void 0&&(F={});var K=Z.getMessageById(z,F.defaultMessage);if(typeof K=="string")try{return O9(Z.language,K,F).join("")}catch(P){Z.onError(new N1(z,Z.language))}return K+""},this.getMessageById=function(z,F){if(!Z.memo[z]){var K=Z.messages[z];K===void 0&&(K=z.split(".").reduce(function(P,x){return P?P[x]:void 0},Z.messages)),typeof K!="string"&&(Z.onError(new N1(z,Z.language)),K=F||z),Z.memo[z]=K}return Z.memo[z]};var U=W.find(function(z){return z.language===J});this.language=J,this.messages=U?U.messages:{}};import{createContext as q9,h as z0,Fragment as y0} from"preact";import{useState as L9,useEffect as D9,useContext as K1} from"preact/hooks";var m0=function(J,W){var Z={};for(var U in J)Object.prototype.hasOwnProperty.call(J,U)&&W.indexOf(U)<0&&(Z[U]=J[U]);if(J!=null&&typeof Object.getOwnPropertySymbols=="function"){var z=0;for(U=Object.getOwnPropertySymbols(J);z<U.length;z++)W.indexOf(U[z])<0&&Object.prototype.propertyIsEnumerable.call(J,U[z])&&(Z[U[z]]=J[U[z]])}return Z},N0=function(J){var W=K1(g0);return J&&J!==W.language?new F0(J):W.translator},g0=q9({language:"",locales:[],setLanguage:function(){},translator:new F0}),O1=function(J){var{children:W,language:Z,locales:U,onError:z}=J,F=L9(Z);D9(function(){F[1](Z)},[Z]);var K=new F0(F[0],U);return z&&(K.onError=z),z0(g0.Provider,{value:{language:F[0],locales:U,setLanguage:F[1],translator:K}},W)},z6=function(J){var{language:W,value:Z}=J,U=m0(J,["children","language","value"]);return z0(y0,null,N0(W).formatDate(Z,U))},B6=function(J){var{language:W,value:Z}=J,U=m0(J,["children","language","value"]);return z0(y0,null,N0(W).formatNumber(Z,U))},Y6=function(J){var{html:W,id:Z,tagName:U}=J,z=U===void 0?"span":U,F=m0(J,["children","html","id","tagName"]),K=K1(g0).translator.translate(Z,F);return W?z0(z,{dangerouslySetInnerHTML:{__html:K}}):z0(y0,null,K)};function P9(J,W){const Z=document.createElement("a"),U=new Blob([J]),z=URL.createObjectURL(U);Z.setAttribute("href",z),Z.setAttribute("download",W),Z.click()}import{Fragment as h9,toChildArray as A9} from"preact";function k0(J){return[].concat(...A9(J).map((W)=>Array.isArray(W)?k0(W):W.type===h9?k0(W.props.children):W))}function x9(J,W){D1.set(J,W)}function S9(J){const W=[];return J.forEach((Z)=>{if(L1.hasOwnProperty(Z))W[L1[Z]]=q1[Z];else W.push(q1[Z])}),W.filter((Z)=>Z).join(t?"":"+")}var q={ESC:"Escape",F1:"F1",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",F10:"F10",F11:"F11",F12:"F12",D1:"Digit1",D2:"Digit2",D3:"Digit3",D4:"Digit4",D5:"Digit5",D6:"Digit6",D7:"Digit7",D8:"Digit8",D9:"Digit9",D0:"Digit0",TAB:"Tab",BACKSPACE:"Backspace",DELETE:"Backspace",ENTER:"Enter",RETURN:"Enter",A:"KeyA",B:"KeyB",C:"KeyC",D:"KeyD",E:"KeyE",F:"KeyF",G:"KeyG",H:"KeyH",I:"KeyI",J:"KeyJ",K:"KeyK",L:"KeyL",M:"KeyM",N:"KeyN",O:"KeyO",P:"KeyP",Q:"KeyQ",R:"KeyR",S:"KeyS",T:"KeyT",U:"KeyU",V:"KeyV",W:"KeyW",X:"KeyX",Y:"KeyY",Z:"KeyZ",UP:"ArrowUp",DOWN:"ArrowDown",LEFT:"ArrowLeft",RIGHT:"ArrowRight",SHIFT:"Shift",CTRL:"Control",ALT:"Alt",WIN:"Meta",CONTROL:"Control",OPTION:"Alt",COMMAND:"Meta",META:"Meta"},t=/Mac/i.test(navigator.platform||navigator.userAgent),q1={[q.ESC]:t?"\u238B":"Esc",[q.F1]:"F1",[q.F2]:"F2",[q.F3]:"F3",[q.F4]:"F4",[q.F5]:"F5",[q.F6]:"F6",[q.F7]:"F7",[q.F8]:"F8",[q.F9]:"F9",[q.F10]:"F10",[q.F11]:"F11",[q.F12]:"F12",[q.D1]:"1",[q.D2]:"2",[q.D3]:"3",[q.D4]:"4",[q.D5]:"5",[q.D6]:"6",[q.D7]:"7",[q.D8]:"8",[q.D9]:"9",[q.D0]:"0",[q.TAB]:t?"\u21E5":"Tab",[q.DELETE]:t?"\u232B":"Backspace",[q.RETURN]:t?"\u21A9":"Enter",[q.A]:"A",[q.B]:"B",[q.C]:"C",[q.D]:"D",[q.E]:"E",[q.F]:"F",[q.G]:"G",[q.H]:"H",[q.I]:"I",[q.J]:"J",[q.K]:"K",[q.L]:"L",[q.M]:"M",[q.N]:"N",[q.O]:"O",[q.P]:"P",[q.Q]:"Q",[q.R]:"R",[q.S]:"S",[q.T]:"T",[q.U]:"U",[q.V]:"V",[q.W]:"W",[q.X]:"X",[q.Y]:"Y",[q.Z]:"Z",[q.UP]:"\u2191",[q.DOWN]:"\u2193",[q.LEFT]:"\u2190",[q.RIGHT]:"\u2192",[q.SHIFT]:t?"\u21E7":"Shift",[q.CONTROL]:t?"\u2303":"Ctrl",[q.OPTION]:t?"\u2325":"Alt",[q.COMMAND]:t?"\u2318":"\u229E"},L1={[q.CONTROL]:0,[q.OPTION]:1,[q.SHIFT]:2,[q.COMMAND]:3},D1=new Map;window.addEventListener("keydown",(J)=>{D1.forEach((W,Z)=>{const U=(z)=>{if(z===q.CONTROL&&J.ctrlKey)return!0;if(z===q.OPTION&&J.altKey)return!0;if(z===q.SHIFT&&J.shiftKey)return!0;if(z===q.COMMAND&&J.metaKey)return!0;if(z===J.code)return!0;return!1};if(Z.every(U)&&typeof W==="function")J.preventDefault(),W()})});var R9=function(J){console&&console.warn&&console.warn(J)},C=function(){C.init.call(this)},O0=function(J){if(typeof J!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof J)},x1=function(J){return J._maxListeners===void 0?C.defaultMaxListeners:J._maxListeners},S1=function(J,W,Z,U){var z,F,K;if(O0(Z),F=J._events,F===void 0?(F=J._events=Object.create(null),J._eventsCount=0):(F.newListener!==void 0&&(J.emit("newListener",W,Z.listener?Z.listener:Z),F=J._events),K=F[W]),K===void 0)K=F[W]=Z,++J._eventsCount;else if(typeof K=="function"?K=F[W]=U?[Z,K]:[K,Z]:U?K.unshift(Z):K.push(Z),z=x1(J),z>0&&K.length>z&&!K.warned){K.warned=!0;var P=new Error("Possible EventEmitter memory leak detected. "+K.length+" "+String(W)+" listeners added. Use emitter.setMaxListeners() to increase limit");P.name="MaxListenersExceededWarning",P.emitter=J,P.type=W,P.count=K.length,R9(P)}return J},T9=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)},R1=function(J,W,Z){var U={fired:!1,wrapFn:void 0,target:J,type:W,listener:Z},z=T9.bind(U);return z.listener=Z,U.wrapFn=z,z},T1=function(J,W,Z){var U=J._events;if(U===void 0)return[];var z=U[W];return z===void 0?[]:typeof z=="function"?Z?[z.listener||z]:[z]:Z?_9(z):_1(z,z.length)},C1=function(J){var W=this._events;if(W!==void 0){var Z=W[J];if(typeof Z=="function")return 1;if(Z!==void 0)return Z.length}return 0},_1=function(J,W){for(var Z=new Array(W),U=0;U<W;++U)Z[U]=J[U];return Z},C9=function(J,W){for(;W+1<J.length;W++)J[W]=J[W+1];J.pop()},_9=function(J){for(var W=new Array(J.length),Z=0;Z<W.length;++Z)W[Z]=J[Z].listener||J[Z];return W};var W0=typeof Reflect=="object"?Reflect:null,P1=W0&&typeof W0.apply=="function"?W0.apply:function(J,W,Z){return Function.prototype.apply.call(J,W,Z)},K0;W0&&typeof W0.ownKeys=="function"?K0=W0.ownKeys:Object.getOwnPropertySymbols?K0=function(J){return Object.getOwnPropertyNames(J).concat(Object.getOwnPropertySymbols(J))}:K0=function(J){return Object.getOwnPropertyNames(J)};var A1=Number.isNaN||function(J){return J!==J};C.EventEmitter=C;C.prototype._events=void 0;C.prototype._eventsCount=0;C.prototype._maxListeners=void 0;var h1=10;Object.defineProperty(C,"defaultMaxListeners",{enumerable:!0,get:function(){return h1},set:function(J){if(typeof J!="number"||J<0||A1(J))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+J+".");h1=J}});C.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};C.prototype.setMaxListeners=function(J){if(typeof J!="number"||J<0||A1(J))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+J+".");return this._maxListeners=J,this};C.prototype.getMaxListeners=function(){return x1(this)};C.prototype.emit=function(J){for(var W=[],Z=1;Z<arguments.length;Z++)W.push(arguments[Z]);var U=J==="error",z=this._events;if(z!==void 0)U=U&&z.error===void 0;else if(!U)return!1;if(U){var F;if(W.length>0&&(F=W[0]),F instanceof Error)throw F;var K=new Error("Unhandled error."+(F?" ("+F.message+")":""));throw K.context=F,K}var P=z[J];if(P===void 0)return!1;if(typeof P=="function")P1(P,this,W);else for(var x=P.length,E=_1(P,x),Z=0;Z<x;++Z)P1(E[Z],this,W);return!0};C.prototype.addListener=function(J,W){return S1(this,J,W,!1)};C.prototype.on=C.prototype.addListener;C.prototype.prependListener=function(J,W){return S1(this,J,W,!0)};C.prototype.once=function(J,W){return O0(W),this.on(J,R1(this,J,W)),this};C.prototype.prependOnceListener=function(J,W){return O0(W),this.prependListener(J,R1(this,J,W)),this};C.prototype.removeListener=function(J,W){var Z,U,z,F,K;if(O0(W),U=this._events,U===void 0)return this;if(Z=U[J],Z===void 0)return this;if(Z===W||Z.listener===W)--this._eventsCount===0?this._events=Object.create(null):(delete U[J],U.removeListener&&this.emit("removeListener",J,Z.listener||W));else if(typeof Z!="function"){for(z=-1,F=Z.length-1;F>=0;F--)if(Z[F]===W||Z[F].listener===W){K=Z[F].listener,z=F;break}if(z<0)return this;z===0?Z.shift():C9(Z,z),Z.length===1&&(U[J]=Z[0]),U.removeListener!==void 0&&this.emit("removeListener",J,K||W)}return this};C.prototype.off=C.prototype.removeListener;C.prototype.removeAllListeners=function(J){var W,Z,U;if(Z=this._events,Z===void 0)return this;if(Z.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):Z[J]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete Z[J]),this;if(arguments.length===0){var z=Object.keys(Z),F;for(U=0;U<z.length;++U)F=z[U],F!=="removeListener"&&this.removeAllListeners(F);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(W=Z[J],typeof W=="function")this.removeListener(J,W);else if(W!==void 0)for(U=W.length-1;U>=0;U--)this.removeListener(J,W[U]);return this};C.prototype.listeners=function(J){return T1(this,J,!0)};C.prototype.rawListeners=function(J){return T1(this,J,!1)};C.listenerCount=function(J,W){return typeof J.listenerCount=="function"?J.listenerCount(W):C1.call(J,W)};C.prototype.listenerCount=C1;C.prototype.eventNames=function(){return this._eventsCount>0?K0(this._events):[]};var O6=C.prototype;class j1 extends C{constructor(J){super();this.port=J,this.reader=null,J._serial=this}dispose(){this.close().then(()=>{this.port=null})}getInfo(){return this.port.getInfo()}open(J){return new Promise((W,Z)=>{this.port.open(J).then(()=>{const U=()=>{this.reader=this.port.readable.getReader(),this.reader.read().then(({value:z,done:F})=>{if(this.reader.releaseLock(),z)this.emit("data",z);if(F);else U()}).catch(()=>{this.emit("disconnect")})};U(),this.emit("connect"),W()}).catch((U)=>{Z(U)})})}close(){return new Promise((J,W)=>{if(this.reader)this.reader.cancel().then(()=>this.port.close()).then(()=>J()).catch((Z)=>W(Z));else this.reader=null,this.port.close().then(()=>J()).catch((Z)=>W(Z))})}write(J,W="text"){return new Promise((Z,U)=>{const z=this.port.writable.getWriter();if(W==="binary")z.write(J).then(()=>Z()).catch((F)=>U(F));else{const F=new TextEncoder;z.write(F.encode(J)).then(()=>Z()).catch((K)=>U(K))}z.releaseLock()})}}function E1(J){return new Promise((W)=>{setTimeout(W,J)})}var j9=()=>E1(0);var I1={"zh-CN":"zh-Hans","zh-TW":"zh-Hant","zh-HK":"zh-Hant","zh-MO":"zh-Hant"};function v0(J){if(I1[J])return I1[J];return J}var p0="en",u0=navigator.language,{DisplayNames:f0,Locale:E9}=window.Intl,I9=new f0([p0],{type:"language"}),y9=new f0([u0],{type:"language"}),B0=new Map,m1=(J)=>(J=v0(J))&&B0.has(J)&&J,b0=(J)=>{const W=new E9(J),Z=W.textInfo||W.getTextInfo();return Z&&Z.direction==="rtl"},y1=(J,W={})=>{const Z=new f0([J],{type:"language"});return B0.set(J,{language:Z.of(J),languageInDefault:I9.of(J),languageInBrowser:y9.of(J)}),{language:J,messages:W}},g1=[y1("en"),y1("zh-Hans")];var l=$9(v1(),1);import{createContext as m9} from"preact";import{useContext as g9,useReducer as k9} from"preact/hooks";function p9(){const{state:J,dispatch:W}=g9(s1);return{...J,closeProject(){W({type:p1})},async openProject(Z){if(typeof Z==="stirng")Z=await l.default.getItem(key);if(Z)W({type:u1,payload:Z});else throw new Error(`${key} does not exist.`)},setProjectName(Z){W({type:f1,payload:Z})},addFile(Z){if(J.fileList.find((U)=>U.id===Z.id))throw Error("File already exists");W({type:b1,payload:Z})},openFile(Z){if(Z<0||Z>J.fileList.length-1)throw Error("File does not exist");W({type:d1,payload:Z})},deleteFile(Z){if(Z<0||Z>J.fileList.length-1)throw Error("File does not exist");W({type:c1,payload:Z})},renameFile(Z){if(J.fileList.find((U)=>U.name===Z));W({type:c0,payload:{name:Z}})},modifyFile(Z){if(J.fileList.find((U,z)=>Z.id?U.id===Z.id:z===J.selectedIndex))W({type:c0,payload:Z});else throw Error("File does not exists")},addAsset(Z){if(J.assetList.find((U)=>U.id===Z.id))W({type:q0,payload:Z});else W({type:n0,payload:Z})},deleteAsset(...Z){if(Array.isArray(Z[0]))Z=Z[0];W({type:n1,payload:Z})},renameAsset(Z){if(J.assetList.find((U)=>U.name===Z.name));W({type:q0,payload:Z})},modifyAsset(Z){if(J.assetList.find((U)=>U.id===Z.id))W({type:q0,payload:Z});else W({type:n0,payload:Z})},setDevice(Z){W({type:i1,payload:Z})},setEditor(Z){W({type:l1,payload:Z})},async saveNow(Z){const U=Date.now(),z=J.key||U.toString(36),{name:F,editor:K,assetList:P,fileList:x}=J,E=await l.default.setItem(z,Z({key:z,name:F,assetList:P,fileList:x,modifiedDate:U,editor:{package:K.package}}));return W({type:i0,payload:{key:z,modified:!1}}),E},setModified(Z){W({type:i0,payload:{modified:Z}})},async listProjects(){const Z=[];return await l.default.iterate((U,z)=>{Z.push({key:z,name:U.name,image:U.thumb,modifiedDate:U.modifiedDate})}),Z},getProject(Z){return l.default.getItem(Z)},async renameProject(Z,U){const z=await l.default.getItem(Z);z.name=U,await l.default.setItem(z.key,z)},async duplicateProject(Z){const U=await l.default.getItem(Z);U.modifiedDate=Date.now(),U.key=U.modifiedDate.toString(36),await l.default.setItem(U.key,U)},async deleteProject(Z){await l.default.removeItem(Z)}}}function u9({children:J}){const[W,Z]=k9(v9,L0);return f9(s1.Provider,{value:{state:W,dispatch:Z},children:J})}import{jsx as f9} from"preact/jsx-runtime";var p1="CLOSE_PROJECT",u1="OPEN_PROJECT",f1="SET_PROJECT_NAME",b1="ADD_FILE",d1="OPEN_FILE",c1="DELETE_FILE",c0="MODIFY_FILE",n0="ADD_ASSET",n1="DELETE_ASSET",q0="MODIFY_ASSET",i1="CONNECT_DEVICE",l1="CONFIG_EDITOR",i0="SAVE_DATA";l.default.config({name:"blockcode-store"});var L0={key:null,name:"",editor:null,assetList:[],fileList:[],selectedIndex:-1,device:null,modified:!1},s1=m9({state:Object.assign({},L0),dispatch:()=>{}}),v9=(J,W)=>{switch(W.type){case p1:return Object.assign({},L0);case u1:if(!W.payload.editor)W.payload.editor=J.editor;return Object.assign({},L0,W.payload);case f1:return{...J,name:W.payload,modified:!0};case b1:return{...J,fileList:J.fileList.concat(W.payload),selectedIndex:J.fileList.length,modified:!0};case d1:return{...J,selectedIndex:W.payload};case c1:return{...J,fileList:J.fileList.filter((Z,U)=>U!==W.payload),selectedIndex:W.payload>J.selectedIndex||J.fileList.length-1>J.selectedIndex?J.selectedIndex:J.selectedIndex-1,modified:!0};case c0:return{...J,fileList:J.fileList.map((Z,U)=>{if(W.payload.id?Z.id===W.payload.id:U===J.selectedIndex)return{...Z,...W.payload};return Z}),modified:!0};case n0:return{...J,assetList:J.assetList.concat(W.payload),modified:!0};case n1:return{...J,assetList:J.assetList.filter((Z)=>!W.payload.includes(Z.id)),modified:!0};case q0:return{...J,assetList:J.assetList.map((Z)=>{if(Z.id===W.payload.id)return{...Z,...W.payload};return Z}),modified:!0};case i1:return{...J,device:W.payload};case l1:return{...J,editor:Object.assign(J.editor||{},W.payload),modified:!0};case i0:return{...J,...W.payload};default:return J}};import{createContext as b9} from"preact";import{useContext as d9,useReducer as c9} from"preact/hooks";function i9(){const{alerts:J,state:W,dispatch:Z}=d9(ZX);return{...W,setSplash(U){Z({type:o1,payload:U})},createAlert(...U){let z,F,K=0;for(let P of U){if(typeof P==="string")z=P;if(typeof P==="object")F=P;if(typeof P==="number")K=P}if(z&&J[z])F=F?Object.assign(J[z],F):J[z];if(!F)return;if(!F.id)F.id=Date.now().toString(36);if(Z({type:a1,payload:F}),K>0)setTimeout(()=>{Z({type:l0,payload:F.id})},K)},removeAlert(U){Z({type:l0,payload:U})},createPrompt(U){Z({type:t1,payload:U})},createLayout(U){Z({type:e1,payload:U})},clearLayout(){Z({type:r1})},selectTab(U){Z({type:XX,payload:U})},addTabs(U){Z({type:JX,payload:U})},setStoreLibrary(U){Z({type:QX,payload:U})}}}function l9({alerts:J,children:W}){const[Z,U]=c9(n9,D0);return s9(ZX.Provider,{value:{alerts:J,state:Z,dispatch:U},children:W})}import{jsx as s9} from"preact/jsx-runtime";var o1="SET_SPLASH",a1="CREATE_ALERT",l0="REMOVE_ALERT",t1="CREATE_PROMPT",r1="CLEAR_LAYOUT",e1="CREATE_LAYOUT",XX="SELECT_TAB",JX="ADD_TABS",QX="SHOW_STORE_LIBRARY",D0={splash:!1,alerts:[],prompt:null,mainMenu:null,tabs:[],sidebars:[],pane:!1,tutorials:!1,selectedTabIndex:-1,canEditProjectName:!1,storeLibrary:!1},ZX=b9({state:Object.assign({},D0),dispatch:()=>{}}),n9=(J,W)=>{switch(W.type){case e1:return Object.assign({},D0,{splash:J.splash},W.payload);case r1:return Object.assign({},D0);case o1:return{...J,splash:W.payload};case a1:if(J.alerts.find((Z)=>Z.id===W.payload.id))return{...J,alerts:J.alerts.map((Z)=>{if(Z.id===W.payload.id)return{...Z,...W.payload};return Z})};return{...J,alerts:[...J.alerts,W.payload]};case l0:return{...J,alerts:J.alerts.filter((Z)=>Z.id!==W.payload)};case t1:return{...J,prompt:W.payload};case XX:return{...J,selectedTabIndex:W.payload};case JX:return{...J,tabs:[...J.tabs,...W.payload]};case QX:return{...J,storeLibrary:W.payload};default:return J}};import{createContext as o9} from"preact";import{useContext as a9,useReducer as t9} from"preact/hooks";function e9(){const{state:J,dispatch:W}=a9(UX),{translate:Z}=N0(),U=(z)=>{if(!z?.props)return z;if(z.props.children)return z.props.children.map((F)=>U(F)).join("");return Z(z.props.id,z.props)};return{...J,addLocaleData(z){W({type:HX,payload:J.locales.map(({language:F,messages:K})=>({language:F,messages:Object.assign(K,z[F])}))})},setLanguage(z){if(J.language!==z)W({type:wX,payload:z})},getText(z,F,K={}){if(typeof F==="object")K=F,F=K.defaultMessage;return Z(z,{...K,defaultMessage:F})},maybeLocaleText(z){return U(z)}}}function X6({children:J}){const[W,Z]=t9(r9,VX),U=(z)=>{};return GX(O1,{language:W.language,locales:W.locales,onError:U,children:GX(UX.Provider,{value:{state:W,dispatch:Z},children:J})})}import{jsx as GX} from"preact/jsx-runtime";var HX="SET_LOCALES",wX="SET_LANGUAGE",WX=m1(u0)||p0,VX={locales:g1,language:WX,supportLanguages:B0,isRtl:b0(WX)},UX=o9({state:VX,dispatch:()=>{}}),r9=(J,W)=>{switch(W.type){case HX:return{...J,locales:W.payload};case wX:return{...J,language:W.payload,isRtl:b0(W.payload)};default:return J}};export{e9 as useLocale,i9 as useLayout,p9 as useEditor,B0 as supportLanguages,E1 as sleep,S9 as showHotkey,x9 as setHotkey,j9 as nextTick,k0 as flatChildren,P9 as exportFile,Y6 as Text,j1 as Serial,B6 as Numeric,X6 as LocalesProvider,l9 as LayoutProvider,q as Keys,u9 as EditorProvider,z6 as DateTime};
