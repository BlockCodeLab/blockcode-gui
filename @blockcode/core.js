var r6=Object.create;var{defineProperty:U1,getPrototypeOf:e6,getOwnPropertyNames:X8}=Object;var J8=Object.prototype.hasOwnProperty;var Q8=(Q,G,Z)=>{Z=Q!=null?r6(e6(Q)):{};const w=G||!Q||!Q.__esModule?U1(Z,"default",{value:Q,enumerable:!0}):Z;for(let z of X8(Q))if(!J8.call(w,z))U1(w,z,{get:()=>Q[z],enumerable:!0});return w};var Z8=(Q,G)=>()=>(G||Q((G={exports:{}}).exports,G),G.exports);var E1=Z8((_1,u0)=>{/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(Q){if(typeof _1==="object"&&typeof u0!=="undefined")u0.exports=Q();else if(typeof define==="function"&&define.amd)define([],Q);else{var G;if(typeof window!=="undefined")G=window;else if(typeof global!=="undefined")G=global;else if(typeof self!=="undefined")G=self;else G=this;G.localforage=Q()}})(function(){var Q,G,Z;return function w(z,O,q){function h(v,i){if(!O[v]){if(!z[v]){var L=typeof require=="function"&&require;if(!i&&L)return L(v,!0);if(x)return x(v,!0);var D=new Error("Cannot find module '"+v+"'");throw D.code="MODULE_NOT_FOUND",D}var y=O[v]={exports:{}};z[v][0].call(y.exports,function(g){var s=z[v][1][g];return h(s?s:g)},y,y.exports,w,z,O,q)}return O[v].exports}var x=typeof require=="function"&&require;for(var j=0;j<q.length;j++)h(q[j]);return h}({1:[function(w,z,O){(function(q){var h=q.MutationObserver||q.WebKitMutationObserver,x;if(h){var j=0,v=new h(g),i=q.document.createTextNode("");v.observe(i,{characterData:!0}),x=function(){i.data=j=++j%2}}else if(!q.setImmediate&&typeof q.MessageChannel!=="undefined"){var L=new q.MessageChannel;L.port1.onmessage=g,x=function(){L.port2.postMessage(0)}}else if("document"in q&&"onreadystatechange"in q.document.createElement("script"))x=function(){var k=q.document.createElement("script");k.onreadystatechange=function(){g(),k.onreadystatechange=null,k.parentNode.removeChild(k),k=null},q.document.documentElement.appendChild(k)};else x=function(){setTimeout(g,0)};var D,y=[];function g(){D=!0;var k,l,p=y.length;while(p){l=y,y=[],k=-1;while(++k<p)l[k]();p=y.length}D=!1}z.exports=s;function s(k){if(y.push(k)===1&&!D)x()}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],2:[function(w,z,O){var q=w(1);function h(){}var x={},j=["REJECTED"],v=["FULFILLED"],i=["PENDING"];z.exports=L;function L(K){if(typeof K!=="function")throw new TypeError("resolver must be a function");if(this.state=i,this.queue=[],this.outcome=void 0,K!==h)s(this,K)}L.prototype.catch=function(K){return this.then(null,K)},L.prototype.then=function(K,T){if(typeof K!=="function"&&this.state===v||typeof T!=="function"&&this.state===j)return this;var S=new this.constructor(h);if(this.state!==i){var E=this.state===v?K:T;y(S,E,this.outcome)}else this.queue.push(new D(S,K,T));return S};function D(K,T,S){if(this.promise=K,typeof T==="function")this.onFulfilled=T,this.callFulfilled=this.otherCallFulfilled;if(typeof S==="function")this.onRejected=S,this.callRejected=this.otherCallRejected}D.prototype.callFulfilled=function(K){x.resolve(this.promise,K)},D.prototype.otherCallFulfilled=function(K){y(this.promise,this.onFulfilled,K)},D.prototype.callRejected=function(K){x.reject(this.promise,K)},D.prototype.otherCallRejected=function(K){y(this.promise,this.onRejected,K)};function y(K,T,S){q(function(){var E;try{E=T(S)}catch(u){return x.reject(K,u)}if(E===K)x.reject(K,new TypeError("Cannot resolve promise with itself"));else x.resolve(K,E)})}x.resolve=function(K,T){var S=k(g,T);if(S.status==="error")return x.reject(K,S.value);var E=S.value;if(E)s(K,E);else{K.state=v,K.outcome=T;var u=-1,f=K.queue.length;while(++u<f)K.queue[u].callFulfilled(T)}return K},x.reject=function(K,T){K.state=j,K.outcome=T;var S=-1,E=K.queue.length;while(++S<E)K.queue[S].callRejected(T);return K};function g(K){var T=K&&K.then;if(K&&(typeof K==="object"||typeof K==="function")&&typeof T==="function")return function S(){T.apply(K,arguments)}}function s(K,T){var S=!1;function E(c){if(S)return;S=!0,x.reject(K,c)}function u(c){if(S)return;S=!0,x.resolve(K,c)}function f(){T(u,E)}var d=k(f);if(d.status==="error")E(d.value)}function k(K,T){var S={};try{S.value=K(T),S.status="success"}catch(E){S.status="error",S.value=E}return S}L.resolve=l;function l(K){if(K instanceof this)return K;return x.resolve(new this(h),K)}L.reject=p;function p(K){var T=new this(h);return x.reject(T,K)}L.all=q0;function q0(K){var T=this;if(Object.prototype.toString.call(K)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=K.length,E=!1;if(!S)return this.resolve([]);var u=new Array(S),f=0,d=-1,c=new this(h);while(++d<S)a(K[d],d);return c;function a(G0,B0){T.resolve(G0).then(L0,function(Q0){if(!E)E=!0,x.reject(c,Q0)});function L0(Q0){if(u[B0]=Q0,++f===S&&!E)E=!0,x.resolve(c,u)}}}L.race=J0;function J0(K){var T=this;if(Object.prototype.toString.call(K)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=K.length,E=!1;if(!S)return this.resolve([]);var u=-1,f=new this(h);while(++u<S)d(K[u]);return f;function d(c){T.resolve(c).then(function(a){if(!E)E=!0,x.resolve(f,a)},function(a){if(!E)E=!0,x.reject(f,a)})}}},{"1":1}],3:[function(w,z,O){(function(q){if(typeof q.Promise!=="function")q.Promise=w(2)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"2":2}],4:[function(w,z,O){var q=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol==="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X};function h(X,W){if(!(X instanceof W))throw new TypeError("Cannot call a class as a function")}function x(){try{if(typeof indexedDB!=="undefined")return indexedDB;if(typeof webkitIndexedDB!=="undefined")return webkitIndexedDB;if(typeof mozIndexedDB!=="undefined")return mozIndexedDB;if(typeof OIndexedDB!=="undefined")return OIndexedDB;if(typeof msIndexedDB!=="undefined")return msIndexedDB}catch(X){return}}var j=x();function v(){try{if(!j||!j.open)return!1;var X=typeof openDatabase!=="undefined"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),W=typeof fetch==="function"&&fetch.toString().indexOf("[native code")!==-1;return(!X||W)&&typeof indexedDB!=="undefined"&&typeof IDBKeyRange!=="undefined"}catch(J){return!1}}function i(X,W){X=X||[],W=W||{};try{return new Blob(X,W)}catch(H){if(H.name!=="TypeError")throw H;var J=typeof BlobBuilder!=="undefined"?BlobBuilder:typeof MSBlobBuilder!=="undefined"?MSBlobBuilder:typeof MozBlobBuilder!=="undefined"?MozBlobBuilder:WebKitBlobBuilder,V=new J;for(var U=0;U<X.length;U+=1)V.append(X[U]);return V.getBlob(W.type)}}if(typeof Promise==="undefined")w(3);var L=Promise;function D(X,W){if(W)X.then(function(J){W(null,J)},function(J){W(J)})}function y(X,W,J){if(typeof W==="function")X.then(W);if(typeof J==="function")X.catch(J)}function g(X){if(typeof X!=="string")console.warn(X+" used as a key, but it is not a string."),X=String(X);return X}function s(){if(arguments.length&&typeof arguments[arguments.length-1]==="function")return arguments[arguments.length-1]}var k="local-forage-detect-blob-support",l=void 0,p={},q0=Object.prototype.toString,J0="readonly",K="readwrite";function T(X){var W=X.length,J=new ArrayBuffer(W),V=new Uint8Array(J);for(var U=0;U<W;U++)V[U]=X.charCodeAt(U);return J}function S(X){return new L(function(W){var J=X.transaction(k,K),V=i([""]);J.objectStore(k).put(V,"key"),J.onabort=function(U){U.preventDefault(),U.stopPropagation(),W(!1)},J.oncomplete=function(){var U=navigator.userAgent.match(/Chrome\/(\d+)/),H=navigator.userAgent.match(/Edge\//);W(H||!U||parseInt(U[1],10)>=43)}}).catch(function(){return!1})}function E(X){if(typeof l==="boolean")return L.resolve(l);return S(X).then(function(W){return l=W,l})}function u(X){var W=p[X.name],J={};if(J.promise=new L(function(V,U){J.resolve=V,J.reject=U}),W.deferredOperations.push(J),!W.dbReady)W.dbReady=J.promise;else W.dbReady=W.dbReady.then(function(){return J.promise})}function f(X){var W=p[X.name],J=W.deferredOperations.pop();if(J)return J.resolve(),J.promise}function d(X,W){var J=p[X.name],V=J.deferredOperations.pop();if(V)return V.reject(W),V.promise}function c(X,W){return new L(function(J,V){if(p[X.name]=p[X.name]||b0(),X.db)if(W)u(X),X.db.close();else return J(X.db);var U=[X.name];if(W)U.push(X.version);var H=j.open.apply(j,U);if(W)H.onupgradeneeded=function(B){var Y=H.result;try{if(Y.createObjectStore(X.storeName),B.oldVersion<=1)Y.createObjectStore(k)}catch(M){if(M.name==="ConstraintError")console.warn('The database "'+X.name+'" has been upgraded from version '+B.oldVersion+" to version "+B.newVersion+', but the storage "'+X.storeName+'" already exists.');else throw M}};H.onerror=function(B){B.preventDefault(),V(H.error)},H.onsuccess=function(){var B=H.result;B.onversionchange=function(Y){Y.target.close()},J(B),f(X)}})}function a(X){return c(X,!1)}function G0(X){return c(X,!0)}function B0(X,W){if(!X.db)return!0;var J=!X.db.objectStoreNames.contains(X.storeName),V=X.version<X.db.version,U=X.version>X.db.version;if(V){if(X.version!==W)console.warn('The database "'+X.name+`" can't be downgraded from version `+X.db.version+" to version "+X.version+".");X.version=X.db.version}if(U||J){if(J){var H=X.db.version+1;if(H>X.version)X.version=H}return!0}return!1}function L0(X){return new L(function(W,J){var V=new FileReader;V.onerror=J,V.onloadend=function(U){var H=btoa(U.target.result||"");W({__local_forage_encoded_blob:!0,data:H,type:X.type})},V.readAsBinaryString(X)})}function Q0(X){var W=T(atob(X.data));return i([W],{type:X.type})}function f0(X){return X&&X.__local_forage_encoded_blob}function e1(X){var W=this,J=W._initReady().then(function(){var V=p[W._dbInfo.name];if(V&&V.dbReady)return V.dbReady});return y(J,X,X),J}function X6(X){u(X);var W=p[X.name],J=W.forages;for(var V=0;V<J.length;V++){var U=J[V];if(U._dbInfo.db)U._dbInfo.db.close(),U._dbInfo.db=null}return X.db=null,a(X).then(function(H){if(X.db=H,B0(X))return G0(X);return H}).then(function(H){X.db=W.db=H;for(var B=0;B<J.length;B++)J[B]._dbInfo.db=H}).catch(function(H){throw d(X,H),H})}function t(X,W,J,V){if(V===void 0)V=1;try{var U=X.db.transaction(X.storeName,W);J(null,U)}catch(H){if(V>0&&(!X.db||H.name==="InvalidStateError"||H.name==="NotFoundError"))return L.resolve().then(function(){if(!X.db||H.name==="NotFoundError"&&!X.db.objectStoreNames.contains(X.storeName)&&X.version<=X.db.version){if(X.db)X.version=X.db.version+1;return G0(X)}}).then(function(){return X6(X).then(function(){t(X,W,J,V-1)})}).catch(J);J(H)}}function b0(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function J6(X){var W=this,J={db:null};if(X)for(var V in X)J[V]=X[V];var U=p[J.name];if(!U)U=b0(),p[J.name]=U;if(U.forages.push(W),!W._initReady)W._initReady=W.ready,W.ready=e1;var H=[];function B(){return L.resolve()}for(var Y=0;Y<U.forages.length;Y++){var M=U.forages[Y];if(M!==W)H.push(M._initReady().catch(B))}var $=U.forages.slice(0);return L.all(H).then(function(){return J.db=U.db,a(J)}).then(function(F){if(J.db=F,B0(J,W._defaultConfig.version))return G0(J);return F}).then(function(F){J.db=U.db=F,W._dbInfo=J;for(var A=0;A<$.length;A++){var P=$[A];if(P!==W)P._dbInfo.db=J.db,P._dbInfo.version=J.version}})}function Q6(X,W){var J=this;X=g(X);var V=new L(function(U,H){J.ready().then(function(){t(J._dbInfo,J0,function(B,Y){if(B)return H(B);try{var M=Y.objectStore(J._dbInfo.storeName),$=M.get(X);$.onsuccess=function(){var F=$.result;if(F===void 0)F=null;if(f0(F))F=Q0(F);U(F)},$.onerror=function(){H($.error)}}catch(F){H(F)}})}).catch(H)});return D(V,W),V}function Z6(X,W){var J=this,V=new L(function(U,H){J.ready().then(function(){t(J._dbInfo,J0,function(B,Y){if(B)return H(B);try{var M=Y.objectStore(J._dbInfo.storeName),$=M.openCursor(),F=1;$.onsuccess=function(){var A=$.result;if(A){var P=A.value;if(f0(P))P=Q0(P);var R=X(P,A.key,F++);if(R!==void 0)U(R);else A.continue()}else U()},$.onerror=function(){H($.error)}}catch(A){H(A)}})}).catch(H)});return D(V,W),V}function W6(X,W,J){var V=this;X=g(X);var U=new L(function(H,B){var Y;V.ready().then(function(){if(Y=V._dbInfo,q0.call(W)==="[object Blob]")return E(Y.db).then(function(M){if(M)return W;return L0(W)});return W}).then(function(M){t(V._dbInfo,K,function($,F){if($)return B($);try{var A=F.objectStore(V._dbInfo.storeName);if(M===null)M=void 0;var P=A.put(M,X);F.oncomplete=function(){if(M===void 0)M=null;H(M)},F.onabort=F.onerror=function(){var R=P.error?P.error:P.transaction.error;B(R)}}catch(R){B(R)}})}).catch(B)});return D(U,J),U}function G6(X,W){var J=this;X=g(X);var V=new L(function(U,H){J.ready().then(function(){t(J._dbInfo,K,function(B,Y){if(B)return H(B);try{var M=Y.objectStore(J._dbInfo.storeName),$=M.delete(X);Y.oncomplete=function(){U()},Y.onerror=function(){H($.error)},Y.onabort=function(){var F=$.error?$.error:$.transaction.error;H(F)}}catch(F){H(F)}})}).catch(H)});return D(V,W),V}function H6(X){var W=this,J=new L(function(V,U){W.ready().then(function(){t(W._dbInfo,K,function(H,B){if(H)return U(H);try{var Y=B.objectStore(W._dbInfo.storeName),M=Y.clear();B.oncomplete=function(){V()},B.onabort=B.onerror=function(){var $=M.error?M.error:M.transaction.error;U($)}}catch($){U($)}})}).catch(U)});return D(J,X),J}function V6(X){var W=this,J=new L(function(V,U){W.ready().then(function(){t(W._dbInfo,J0,function(H,B){if(H)return U(H);try{var Y=B.objectStore(W._dbInfo.storeName),M=Y.count();M.onsuccess=function(){V(M.result)},M.onerror=function(){U(M.error)}}catch($){U($)}})}).catch(U)});return D(J,X),J}function U6(X,W){var J=this,V=new L(function(U,H){if(X<0){U(null);return}J.ready().then(function(){t(J._dbInfo,J0,function(B,Y){if(B)return H(B);try{var M=Y.objectStore(J._dbInfo.storeName),$=!1,F=M.openKeyCursor();F.onsuccess=function(){var A=F.result;if(!A){U(null);return}if(X===0)U(A.key);else if(!$)$=!0,A.advance(X);else U(A.key)},F.onerror=function(){H(F.error)}}catch(A){H(A)}})}).catch(H)});return D(V,W),V}function w6(X){var W=this,J=new L(function(V,U){W.ready().then(function(){t(W._dbInfo,J0,function(H,B){if(H)return U(H);try{var Y=B.objectStore(W._dbInfo.storeName),M=Y.openKeyCursor(),$=[];M.onsuccess=function(){var F=M.result;if(!F){V($);return}$.push(F.key),F.continue()},M.onerror=function(){U(M.error)}}catch(F){U(F)}})}).catch(U)});return D(J,X),J}function z6(X,W){W=s.apply(this,arguments);var J=this.config();if(X=typeof X!=="function"&&X||{},!X.name)X.name=X.name||J.name,X.storeName=X.storeName||J.storeName;var V=this,U;if(!X.name)U=L.reject("Invalid arguments");else{var H=X.name===J.name&&V._dbInfo.db,B=H?L.resolve(V._dbInfo.db):a(X).then(function(Y){var M=p[X.name],$=M.forages;M.db=Y;for(var F=0;F<$.length;F++)$[F]._dbInfo.db=Y;return Y});if(!X.storeName)U=B.then(function(Y){u(X);var M=p[X.name],$=M.forages;Y.close();for(var F=0;F<$.length;F++){var A=$[F];A._dbInfo.db=null}var P=new L(function(R,_){var m=j.deleteDatabase(X.name);m.onerror=function(){var I=m.result;if(I)I.close();_(m.error)},m.onblocked=function(){console.warn('dropInstance blocked for database "'+X.name+'" until all open connections are closed')},m.onsuccess=function(){var I=m.result;if(I)I.close();R(I)}});return P.then(function(R){M.db=R;for(var _=0;_<$.length;_++){var m=$[_];f(m._dbInfo)}}).catch(function(R){throw(d(X,R)||L.resolve()).catch(function(){}),R})});else U=B.then(function(Y){if(!Y.objectStoreNames.contains(X.storeName))return;var M=Y.version+1;u(X);var $=p[X.name],F=$.forages;Y.close();for(var A=0;A<F.length;A++){var P=F[A];P._dbInfo.db=null,P._dbInfo.version=M}var R=new L(function(_,m){var I=j.open(X.name,M);I.onerror=function(n){var V0=I.result;V0.close(),m(n)},I.onupgradeneeded=function(){var n=I.result;n.deleteObjectStore(X.storeName)},I.onsuccess=function(){var n=I.result;n.close(),_(n)}});return R.then(function(_){$.db=_;for(var m=0;m<F.length;m++){var I=F[m];I._dbInfo.db=_,f(I._dbInfo)}}).catch(function(_){throw(d(X,_)||L.resolve()).catch(function(){}),_})})}return D(U,W),U}var B6={_driver:"asyncStorage",_initStorage:J6,_support:v(),iterate:Z6,getItem:Q6,setItem:W6,removeItem:G6,clear:H6,length:V6,key:U6,keys:w6,dropInstance:z6};function Y6(){return typeof openDatabase==="function"}var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",M6="~~local_forage_type~",d0=/^~~local_forage_type~([^~]+)~/,Y0="__lfsc__:",A0=Y0.length,D0="arbf",h0="blob",c0="si08",n0="ui08",i0="uic8",s0="si16",l0="si32",a0="ur16",t0="ui32",o0="fl32",r0="fl64",e0=A0+D0.length,X1=Object.prototype.toString;function J1(X){var W=X.length*0.75,J=X.length,V,U=0,H,B,Y,M;if(X[X.length-1]==="="){if(W--,X[X.length-2]==="=")W--}var $=new ArrayBuffer(W),F=new Uint8Array($);for(V=0;V<J;V+=4)H=r.indexOf(X[V]),B=r.indexOf(X[V+1]),Y=r.indexOf(X[V+2]),M=r.indexOf(X[V+3]),F[U++]=H<<2|B>>4,F[U++]=(B&15)<<4|Y>>2,F[U++]=(Y&3)<<6|M&63;return $}function P0(X){var W=new Uint8Array(X),J="",V;for(V=0;V<W.length;V+=3)J+=r[W[V]>>2],J+=r[(W[V]&3)<<4|W[V+1]>>4],J+=r[(W[V+1]&15)<<2|W[V+2]>>6],J+=r[W[V+2]&63];if(W.length%3===2)J=J.substring(0,J.length-1)+"=";else if(W.length%3===1)J=J.substring(0,J.length-2)+"==";return J}function $6(X,W){var J="";if(X)J=X1.call(X);if(X&&(J==="[object ArrayBuffer]"||X.buffer&&X1.call(X.buffer)==="[object ArrayBuffer]")){var V,U=Y0;if(X instanceof ArrayBuffer)V=X,U+=D0;else if(V=X.buffer,J==="[object Int8Array]")U+=c0;else if(J==="[object Uint8Array]")U+=n0;else if(J==="[object Uint8ClampedArray]")U+=i0;else if(J==="[object Int16Array]")U+=s0;else if(J==="[object Uint16Array]")U+=a0;else if(J==="[object Int32Array]")U+=l0;else if(J==="[object Uint32Array]")U+=t0;else if(J==="[object Float32Array]")U+=o0;else if(J==="[object Float64Array]")U+=r0;else W(new Error("Failed to get type for BinaryArray"));W(U+P0(V))}else if(J==="[object Blob]"){var H=new FileReader;H.onload=function(){var B=M6+X.type+"~"+P0(this.result);W(Y0+h0+B)},H.readAsArrayBuffer(X)}else try{W(JSON.stringify(X))}catch(B){console.error("Couldn't convert value into a JSON string: ",X),W(null,B)}}function F6(X){if(X.substring(0,A0)!==Y0)return JSON.parse(X);var W=X.substring(e0),J=X.substring(A0,e0),V;if(J===h0&&d0.test(W)){var U=W.match(d0);V=U[1],W=W.substring(U[0].length)}var H=J1(W);switch(J){case D0:return H;case h0:return i([H],{type:V});case c0:return new Int8Array(H);case n0:return new Uint8Array(H);case i0:return new Uint8ClampedArray(H);case s0:return new Int16Array(H);case a0:return new Uint16Array(H);case l0:return new Int32Array(H);case t0:return new Uint32Array(H);case o0:return new Float32Array(H);case r0:return new Float64Array(H);default:throw new Error("Unkown type: "+J)}}var x0={serialize:$6,deserialize:F6,stringToBuffer:J1,bufferToString:P0};function Q1(X,W,J,V){X.executeSql("CREATE TABLE IF NOT EXISTS "+W.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],J,V)}function O6(X){var W=this,J={db:null};if(X)for(var V in X)J[V]=typeof X[V]!=="string"?X[V].toString():X[V];var U=new L(function(H,B){try{J.db=openDatabase(J.name,String(J.version),J.description,J.size)}catch(Y){return B(Y)}J.db.transaction(function(Y){Q1(Y,J,function(){W._dbInfo=J,H()},function(M,$){B($)})},B)});return J.serializer=x0,U}function e(X,W,J,V,U,H){X.executeSql(J,V,U,function(B,Y){if(Y.code===Y.SYNTAX_ERR)B.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[W.storeName],function(M,$){if(!$.rows.length)Q1(M,W,function(){M.executeSql(J,V,U,H)},H);else H(M,Y)},H);else H(B,Y)},H)}function K6(X,W){var J=this;X=g(X);var V=new L(function(U,H){J.ready().then(function(){var B=J._dbInfo;B.db.transaction(function(Y){e(Y,B,"SELECT * FROM "+B.storeName+" WHERE key = ? LIMIT 1",[X],function(M,$){var F=$.rows.length?$.rows.item(0).value:null;if(F)F=B.serializer.deserialize(F);U(F)},function(M,$){H($)})})}).catch(H)});return D(V,W),V}function N6(X,W){var J=this,V=new L(function(U,H){J.ready().then(function(){var B=J._dbInfo;B.db.transaction(function(Y){e(Y,B,"SELECT * FROM "+B.storeName,[],function(M,$){var F=$.rows,A=F.length;for(var P=0;P<A;P++){var R=F.item(P),_=R.value;if(_)_=B.serializer.deserialize(_);if(_=X(_,R.key,P+1),_!==void 0){U(_);return}}U()},function(M,$){H($)})})}).catch(H)});return D(V,W),V}function Z1(X,W,J,V){var U=this;X=g(X);var H=new L(function(B,Y){U.ready().then(function(){if(W===void 0)W=null;var M=W,$=U._dbInfo;$.serializer.serialize(W,function(F,A){if(A)Y(A);else $.db.transaction(function(P){e(P,$,"INSERT OR REPLACE INTO "+$.storeName+" (key, value) VALUES (?, ?)",[X,F],function(){B(M)},function(R,_){Y(_)})},function(P){if(P.code===P.QUOTA_ERR){if(V>0){B(Z1.apply(U,[X,M,J,V-1]));return}Y(P)}})})}).catch(Y)});return D(H,J),H}function q6(X,W,J){return Z1.apply(this,[X,W,J,1])}function L6(X,W){var J=this;X=g(X);var V=new L(function(U,H){J.ready().then(function(){var B=J._dbInfo;B.db.transaction(function(Y){e(Y,B,"DELETE FROM "+B.storeName+" WHERE key = ?",[X],function(){U()},function(M,$){H($)})})}).catch(H)});return D(V,W),V}function A6(X){var W=this,J=new L(function(V,U){W.ready().then(function(){var H=W._dbInfo;H.db.transaction(function(B){e(B,H,"DELETE FROM "+H.storeName,[],function(){V()},function(Y,M){U(M)})})}).catch(U)});return D(J,X),J}function D6(X){var W=this,J=new L(function(V,U){W.ready().then(function(){var H=W._dbInfo;H.db.transaction(function(B){e(B,H,"SELECT COUNT(key) as c FROM "+H.storeName,[],function(Y,M){var $=M.rows.item(0).c;V($)},function(Y,M){U(M)})})}).catch(U)});return D(J,X),J}function h6(X,W){var J=this,V=new L(function(U,H){J.ready().then(function(){var B=J._dbInfo;B.db.transaction(function(Y){e(Y,B,"SELECT key FROM "+B.storeName+" WHERE id = ? LIMIT 1",[X+1],function(M,$){var F=$.rows.length?$.rows.item(0).key:null;U(F)},function(M,$){H($)})})}).catch(H)});return D(V,W),V}function P6(X){var W=this,J=new L(function(V,U){W.ready().then(function(){var H=W._dbInfo;H.db.transaction(function(B){e(B,H,"SELECT key FROM "+H.storeName,[],function(Y,M){var $=[];for(var F=0;F<M.rows.length;F++)$.push(M.rows.item(F).key);V($)},function(Y,M){U(M)})})}).catch(U)});return D(J,X),J}function x6(X){return new L(function(W,J){X.transaction(function(V){V.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(U,H){var B=[];for(var Y=0;Y<H.rows.length;Y++)B.push(H.rows.item(Y).name);W({db:X,storeNames:B})},function(U,H){J(H)})},function(V){J(V)})})}function S6(X,W){W=s.apply(this,arguments);var J=this.config();if(X=typeof X!=="function"&&X||{},!X.name)X.name=X.name||J.name,X.storeName=X.storeName||J.storeName;var V=this,U;if(!X.name)U=L.reject("Invalid arguments");else U=new L(function(H){var B;if(X.name===J.name)B=V._dbInfo.db;else B=openDatabase(X.name,"","",0);if(!X.storeName)H(x6(B));else H({db:B,storeNames:[X.storeName]})}).then(function(H){return new L(function(B,Y){H.db.transaction(function(M){function $(R){return new L(function(_,m){M.executeSql("DROP TABLE IF EXISTS "+R,[],function(){_()},function(I,n){m(n)})})}var F=[];for(var A=0,P=H.storeNames.length;A<P;A++)F.push($(H.storeNames[A]));L.all(F).then(function(){B()}).catch(function(R){Y(R)})},function(M){Y(M)})})});return D(U,W),U}var T6={_driver:"webSQLStorage",_initStorage:O6,_support:Y6(),iterate:N6,getItem:K6,setItem:q6,removeItem:L6,clear:A6,length:D6,key:h6,keys:P6,dropInstance:S6};function R6(){try{return typeof localStorage!=="undefined"&&"setItem"in localStorage&&!!localStorage.setItem}catch(X){return!1}}function W1(X,W){var J=X.name+"/";if(X.storeName!==W.storeName)J+=X.storeName+"/";return J}function C6(){var X="_localforage_support_test";try{return localStorage.setItem(X,!0),localStorage.removeItem(X),!1}catch(W){return!0}}function _6(){return!C6()||localStorage.length>0}function E6(X){var W=this,J={};if(X)for(var V in X)J[V]=X[V];if(J.keyPrefix=W1(X,W._defaultConfig),!_6())return L.reject();return W._dbInfo=J,J.serializer=x0,L.resolve()}function j6(X){var W=this,J=W.ready().then(function(){var V=W._dbInfo.keyPrefix;for(var U=localStorage.length-1;U>=0;U--){var H=localStorage.key(U);if(H.indexOf(V)===0)localStorage.removeItem(H)}});return D(J,X),J}function I6(X,W){var J=this;X=g(X);var V=J.ready().then(function(){var U=J._dbInfo,H=localStorage.getItem(U.keyPrefix+X);if(H)H=U.serializer.deserialize(H);return H});return D(V,W),V}function y6(X,W){var J=this,V=J.ready().then(function(){var U=J._dbInfo,H=U.keyPrefix,B=H.length,Y=localStorage.length,M=1;for(var $=0;$<Y;$++){var F=localStorage.key($);if(F.indexOf(H)!==0)continue;var A=localStorage.getItem(F);if(A)A=U.serializer.deserialize(A);if(A=X(A,F.substring(B),M++),A!==void 0)return A}});return D(V,W),V}function m6(X,W){var J=this,V=J.ready().then(function(){var U=J._dbInfo,H;try{H=localStorage.key(X)}catch(B){H=null}if(H)H=H.substring(U.keyPrefix.length);return H});return D(V,W),V}function g6(X){var W=this,J=W.ready().then(function(){var V=W._dbInfo,U=localStorage.length,H=[];for(var B=0;B<U;B++){var Y=localStorage.key(B);if(Y.indexOf(V.keyPrefix)===0)H.push(Y.substring(V.keyPrefix.length))}return H});return D(J,X),J}function k6(X){var W=this,J=W.keys().then(function(V){return V.length});return D(J,X),J}function v6(X,W){var J=this;X=g(X);var V=J.ready().then(function(){var U=J._dbInfo;localStorage.removeItem(U.keyPrefix+X)});return D(V,W),V}function p6(X,W,J){var V=this;X=g(X);var U=V.ready().then(function(){if(W===void 0)W=null;var H=W;return new L(function(B,Y){var M=V._dbInfo;M.serializer.serialize(W,function($,F){if(F)Y(F);else try{localStorage.setItem(M.keyPrefix+X,$),B(H)}catch(A){if(A.name==="QuotaExceededError"||A.name==="NS_ERROR_DOM_QUOTA_REACHED")Y(A);Y(A)}})})});return D(U,J),U}function u6(X,W){if(W=s.apply(this,arguments),X=typeof X!=="function"&&X||{},!X.name){var J=this.config();X.name=X.name||J.name,X.storeName=X.storeName||J.storeName}var V=this,U;if(!X.name)U=L.reject("Invalid arguments");else U=new L(function(H){if(!X.storeName)H(X.name+"/");else H(W1(X,V._defaultConfig))}).then(function(H){for(var B=localStorage.length-1;B>=0;B--){var Y=localStorage.key(B);if(Y.indexOf(H)===0)localStorage.removeItem(Y)}});return D(U,W),U}var f6={_driver:"localStorageWrapper",_initStorage:E6,_support:R6(),iterate:y6,getItem:I6,setItem:p6,removeItem:v6,clear:j6,length:k6,key:m6,keys:g6,dropInstance:u6},b6=function X(W,J){return W===J||typeof W==="number"&&typeof J==="number"&&isNaN(W)&&isNaN(J)},d6=function X(W,J){var V=W.length,U=0;while(U<V){if(b6(W[U],J))return!0;U++}return!1},G1=Array.isArray||function(X){return Object.prototype.toString.call(X)==="[object Array]"},H0={},H1={},Z0={INDEXEDDB:B6,WEBSQL:T6,LOCALSTORAGE:f6},c6=[Z0.INDEXEDDB._driver,Z0.WEBSQL._driver,Z0.LOCALSTORAGE._driver],M0=["dropInstance"],S0=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(M0),n6={description:"",driver:c6.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function i6(X,W){X[W]=function(){var J=arguments;return X.ready().then(function(){return X[W].apply(X,J)})}}function T0(){for(var X=1;X<arguments.length;X++){var W=arguments[X];if(W){for(var J in W)if(W.hasOwnProperty(J))if(G1(W[J]))arguments[0][J]=W[J].slice();else arguments[0][J]=W[J]}}return arguments[0]}var s6=function(){function X(W){h(this,X);for(var J in Z0)if(Z0.hasOwnProperty(J)){var V=Z0[J],U=V._driver;if(this[J]=U,!H0[U])this.defineDriver(V)}this._defaultConfig=T0({},n6),this._config=T0({},this._defaultConfig,W),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return X.prototype.config=function W(J){if((typeof J==="undefined"?"undefined":q(J))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var V in J){if(V==="storeName")J[V]=J[V].replace(/\W/g,"_");if(V==="version"&&typeof J[V]!=="number")return new Error("Database version must be a number.");this._config[V]=J[V]}if("driver"in J&&J.driver)return this.setDriver(this._config.driver);return!0}else if(typeof J==="string")return this._config[J];else return this._config},X.prototype.defineDriver=function W(J,V,U){var H=new L(function(B,Y){try{var M=J._driver,$=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!J._driver){Y($);return}var F=S0.concat("_initStorage");for(var A=0,P=F.length;A<P;A++){var R=F[A],_=!d6(M0,R);if((_||J[R])&&typeof J[R]!=="function"){Y($);return}}var m=function n(){var V0=function k8(t6){return function(){var o6=new Error("Method "+t6+" is not implemented by the current driver"),V1=L.reject(o6);return D(V1,arguments[arguments.length-1]),V1}};for(var R0=0,a6=M0.length;R0<a6;R0++){var C0=M0[R0];if(!J[C0])J[C0]=V0(C0)}};m();var I=function n(V0){if(H0[M])console.info("Redefining LocalForage driver: "+M);H0[M]=J,H1[M]=V0,B()};if("_support"in J)if(J._support&&typeof J._support==="function")J._support().then(I,Y);else I(!!J._support);else I(!0)}catch(n){Y(n)}});return y(H,V,U),H},X.prototype.driver=function W(){return this._driver||null},X.prototype.getDriver=function W(J,V,U){var H=H0[J]?L.resolve(H0[J]):L.reject(new Error("Driver not found."));return y(H,V,U),H},X.prototype.getSerializer=function W(J){var V=L.resolve(x0);return y(V,J),V},X.prototype.ready=function W(J){var V=this,U=V._driverSet.then(function(){if(V._ready===null)V._ready=V._initDriver();return V._ready});return y(U,J,J),U},X.prototype.setDriver=function W(J,V,U){var H=this;if(!G1(J))J=[J];var B=this._getSupportedDrivers(J);function Y(){H._config.driver=H.driver()}function M(A){return H._extend(A),Y(),H._ready=H._initStorage(H._config),H._ready}function $(A){return function(){var P=0;function R(){while(P<A.length){var _=A[P];return P++,H._dbInfo=null,H._ready=null,H.getDriver(_).then(M).catch(R)}Y();var m=new Error("No available storage method found.");return H._driverSet=L.reject(m),H._driverSet}return R()}}var F=this._driverSet!==null?this._driverSet.catch(function(){return L.resolve()}):L.resolve();return this._driverSet=F.then(function(){var A=B[0];return H._dbInfo=null,H._ready=null,H.getDriver(A).then(function(P){H._driver=P._driver,Y(),H._wrapLibraryMethodsWithReady(),H._initDriver=$(B)})}).catch(function(){Y();var A=new Error("No available storage method found.");return H._driverSet=L.reject(A),H._driverSet}),y(this._driverSet,V,U),this._driverSet},X.prototype.supports=function W(J){return!!H1[J]},X.prototype._extend=function W(J){T0(this,J)},X.prototype._getSupportedDrivers=function W(J){var V=[];for(var U=0,H=J.length;U<H;U++){var B=J[U];if(this.supports(B))V.push(B)}return V},X.prototype._wrapLibraryMethodsWithReady=function W(){for(var J=0,V=S0.length;J<V;J++)i6(this,S0[J])},X.prototype.createInstance=function W(J){return new X(J)},X}(),l6=new s6;z.exports=l6},{"3":3}]},{},[4])(4)})});function U0(Q){const G=globalThis.document,Z=G.createElement("style");Z.appendChild(G.createTextNode(Q)),G.head.append(Z)}U0(":root{--ui-primary:#e6f0ff;--ui-secondary:#e9f1fc;--ui-tertiary:#d9e3f2;--ui-modal-overlay:#4c97ffe6;--ui-white:#fff;--ui-white-dim:#ffffffbf;--ui-white-transparent:#ffffff40;--ui-transparent:#fff0;--ui-black-transparent:#00000026;--text-primary:#575e75;--text-primary-transparent:#575e75bf;--motion-primary:#4c97ff;--motion-tertiary:#3373cc;--motion-transparent:#4c97ff59;--motion-light-transparent:#4c97ff26;--red-primary:#ff661a;--red-tertiary:#e64d00;--sound-primary:#cf63cf;--sound-tertiary:#bd42bd;--control-primary:#ffab1a;--data-primary:#ff8c1a;--pen-primary:#0fbd8c;--pen-transparent:#0fbd8c40;--error-primary:#ff8c1a;--error-light:#ffb366;--error-transparent:#ff8c1a40;--extensions-primary:#0fbd8c;--extensions-tertiary:#0b8e69;--extensions-transparent:#0fbd8c59;--extensions-light:#c3efe2;--drop-highlight:#8abbff;--space:.5rem;--standard-font-size:.75rem;--small-font-size:.625rem;--icon-per-row:5;--menu-bar-height:3rem;--language-selector-width:3rem;--tool-bar-height:2.75rem;--library-header-height:3.125rem;--library-filter-bar-height:2.5rem;--form-radius:calc(var(--space)/2);--min-width:1024px;--min-height:640px;--menu-bar-standard-font-size:var(--standard-font-size);--menu-bar-large-font-size:.875rem;--menu-bar-button-size:2rem;--menu-bar-item-max-width:12rem;--z-index-extension-button:42;--z-index-stage-indicator:45;--z-index-add-button:46;--z-index-tooltip:47;--z-index-monitor:48;--z-index-stage-question:49;--z-index-card:480;--z-index-alerts:490;--z-index-menu-bar:491;--z-index-loader:500;--z-index-modal:510;--z-index-drag-layer:1000;--z-index-monitor-dragging:1010;--z-index-dragging-sprite:1020;--z-index-stage-color-picker-background:2000;--z-index-stage-with-color-picker:2010;--z-index-stage-header:5000;--z-index-stage-wrapper-overlay:5000;--z-index-context-menu:10000}html,body,#root{min-width:var(--min-width);min-height:var(--min-height);width:100%;height:100%;margin:0}*{box-sizing:border-box;user-select:none}");U0("body{font-family:Helvetica Neue,Helvetica,Arial,sans-serif}h2{font-size:1.5rem;font-weight:700}p{font-size:1rem;line-height:1.5em}");var V8=function(Q,G,Z){for(var w=new H8(G),z=[],O=function(q){var{options:h,type:x,value:j}=q;if(x!==X0.Variable)if(h)if(x!==X0.Select)try{z.concat(h[new Intl.PluralRules(Q).select(Z[j])].map(O))}catch(v){z.concat(h.other.map(O))}else z.concat((h[Z[j]]||h.other).map(O));else z.push(j);else z.push(Z[j])};!w.input.done;)O(w.next());return z},X0,_0=function(Q,G){return _0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Z,w){Z.__proto__=w}||function(Z,w){for(var z in w)Object.prototype.hasOwnProperty.call(w,z)&&(Z[z]=w[z])},_0(Q,G)},w1=function(Q){function G(Z,w){var z=Q.call(this,"Translation failed")||this;return z.id=Z,z.language=w,z}return function(Z,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+w+" is not a constructor or null");function z(){this.constructor=Z}_0(Z,w),Z.prototype=w===null?Object.create(w):(z.prototype=w.prototype,new z)}(G,Q),G.is=function(Z){return Z instanceof G},G}(Error),W8=function(){function Q(G){this.input=G,this.index=0,this.done=!1,this.value="",this.value=this.input.charAt(0)}return Q.prototype.next=function(){return++this.index>=this.input.length&&(this.done=!0),this.value=this.input.charAt(this.index)},Q.prototype.croak=function(){throw Error("[".concat(this.input,']. Unexpected character "').concat(this.value,'" on position ').concat(this.index,"."))},Q}();(function(Q){Q[Q.Plural=0]="Plural",Q[Q.Select=1]="Select",Q[Q.Text=2]="Text",Q[Q.Variable=3]="Variable"})(X0||(X0={}));var G8=["{","}",","],H8=function(){function Q(G){this.input=new W8(G)}return Q.prototype.next=function(){return this.input.value==="{"?this.readVariable():this.readText()},Q.prototype.skip=function(G){G!==this.input.value&&this.input.croak(),this.input.next()},Q.prototype.readWhile=function(G){for(var Z="";!this.input.done&&G(this.input.value);)Z+=this.input.value,this.input.next();return Z},Q.prototype.readVariable=function(){this.skip("{");var G=this.readWhile(function(w){return!function(z){return G8.includes(z)}(w)}).trim();if(G.length===0&&this.input.croak(),this.input.value==="}")return this.skip("}"),{type:X0.Variable,value:G};this.skip(",");var Z=this.readVariableType();return{options:this.readVariableOptions(),type:Z,value:G}},Q.prototype.readText=function(){return{type:X0.Text,value:this.readWhile(function(G){return G!=="{"&&G!=="}"})}},Q.prototype.readVariableType=function(){var G=this.readWhile(function(Z){return Z!==","}).trim();return G==="plural"?X0.Plural:G==="select"?X0.Select:void this.input.croak()},Q.prototype.readVariableOptions=function(){this.skip(",");for(var G={};this.input.value!=="}";)G[this.readText().value.trim()]=this.readExpression();return this.skip("}"),G},Q.prototype.readExpression=function(){var G=[];for(this.skip("{");this.input.value!=="}";)G.push(this.next());return this.skip("}"),G},Q}(),$0=function(Q,G){Q===void 0&&(Q="en"),G===void 0&&(G=[]);var Z=this;this.memo={},this.onError=console.error,this.formatDate=function(z,O){return new Intl.DateTimeFormat(Z.language,O).format(z)},this.formatNumber=function(z,O){return new Intl.NumberFormat(Z.language,O).format(z)},this.translate=function(z,O){O===void 0&&(O={});var q=Z.getMessageById(z,O.defaultMessage);if(typeof q=="string")try{return V8(Z.language,q,O).join("")}catch(h){Z.onError(new w1(z,Z.language))}return q+""},this.getMessageById=function(z,O){if(!Z.memo[z]){var q=Z.messages[z];q===void 0&&(q=z.split(".").reduce(function(h,x){return h?h[x]:void 0},Z.messages)),typeof q!="string"&&(Z.onError(new w1(z,Z.language)),q=O||z),Z.memo[z]=q}return Z.memo[z]};var w=G.find(function(z){return z.language===Q});this.language=Q,this.messages=w?w.messages:{}};import{createContext as U8,h as w0,Fragment as E0} from"preact";import{useState as w8,useEffect as z8,useContext as z1} from"preact/hooks";var j0=function(Q,G){var Z={};for(var w in Q)Object.prototype.hasOwnProperty.call(Q,w)&&G.indexOf(w)<0&&(Z[w]=Q[w]);if(Q!=null&&typeof Object.getOwnPropertySymbols=="function"){var z=0;for(w=Object.getOwnPropertySymbols(Q);z<w.length;z++)G.indexOf(w[z])<0&&Object.prototype.propertyIsEnumerable.call(Q,w[z])&&(Z[w[z]]=Q[w[z]])}return Z},F0=function(Q){var G=z1(I0);return Q&&Q!==G.language?new $0(Q):G.translator},I0=U8({language:"",locales:[],setLanguage:function(){},translator:new $0}),B1=function(Q){var{children:G,language:Z,locales:w,onError:z}=Q,O=w8(Z);z8(function(){O[1](Z)},[Z]);var q=new $0(O[0],w);return z&&(q.onError=z),w0(I0.Provider,{value:{language:O[0],locales:w,setLanguage:O[1],translator:q}},G)},i8=function(Q){var{language:G,value:Z}=Q,w=j0(Q,["children","language","value"]);return w0(E0,null,F0(G).formatDate(Z,w))},s8=function(Q){var{language:G,value:Z}=Q,w=j0(Q,["children","language","value"]);return w0(E0,null,F0(G).formatNumber(Z,w))},l8=function(Q){var{html:G,id:Z,tagName:w}=Q,z=w===void 0?"span":w,O=j0(Q,["children","html","id","tagName"]),q=z1(I0).translator.translate(Z,O);return G?w0(z,{dangerouslySetInnerHTML:{__html:q}}):w0(E0,null,q)};function B8(Q,G){const Z=document.createElement("a"),w=new Blob([Q]),z=URL.createObjectURL(w);Z.setAttribute("href",z),Z.setAttribute("download",G),Z.click()}import{Fragment as Y8,toChildArray as M8} from"preact";function y0(Q){return[].concat(...M8(Q).map((G)=>Array.isArray(G)?y0(G):G.type===Y8?y0(G.props.children):G))}function $8(Q,G){$1.set(Q,G)}function F8(Q){const G=[];return Q.forEach((Z)=>{if(M1.hasOwnProperty(Z))G[M1[Z]]=Y1[Z];else G.push(Y1[Z])}),G.filter((Z)=>Z).join(o?"":"+")}var N={ESC:"Escape",F1:"F1",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",F10:"F10",F11:"F11",F12:"F12",D1:"Digit1",D2:"Digit2",D3:"Digit3",D4:"Digit4",D5:"Digit5",D6:"Digit6",D7:"Digit7",D8:"Digit8",D9:"Digit9",D0:"Digit0",TAB:"Tab",BACKSPACE:"Backspace",DELETE:"Backspace",ENTER:"Enter",RETURN:"Enter",A:"KeyA",B:"KeyB",C:"KeyC",D:"KeyD",E:"KeyE",F:"KeyF",G:"KeyG",H:"KeyH",I:"KeyI",J:"KeyJ",K:"KeyK",L:"KeyL",M:"KeyM",N:"KeyN",O:"KeyO",P:"KeyP",Q:"KeyQ",R:"KeyR",S:"KeyS",T:"KeyT",U:"KeyU",V:"KeyV",W:"KeyW",X:"KeyX",Y:"KeyY",Z:"KeyZ",UP:"ArrowUp",DOWN:"ArrowDown",LEFT:"ArrowLeft",RIGHT:"ArrowRight",SHIFT:"Shift",CTRL:"Control",ALT:"Alt",WIN:"Meta",CONTROL:"Control",OPTION:"Alt",COMMAND:"Meta",META:"Meta"},o=/Mac/i.test(navigator.platform||navigator.userAgent),Y1={[N.ESC]:o?"\u238B":"Esc",[N.F1]:"F1",[N.F2]:"F2",[N.F3]:"F3",[N.F4]:"F4",[N.F5]:"F5",[N.F6]:"F6",[N.F7]:"F7",[N.F8]:"F8",[N.F9]:"F9",[N.F10]:"F10",[N.F11]:"F11",[N.F12]:"F12",[N.D1]:"1",[N.D2]:"2",[N.D3]:"3",[N.D4]:"4",[N.D5]:"5",[N.D6]:"6",[N.D7]:"7",[N.D8]:"8",[N.D9]:"9",[N.D0]:"0",[N.TAB]:o?"\u21E5":"Tab",[N.DELETE]:o?"\u232B":"Backspace",[N.RETURN]:o?"\u21A9":"Enter",[N.A]:"A",[N.B]:"B",[N.C]:"C",[N.D]:"D",[N.E]:"E",[N.F]:"F",[N.G]:"G",[N.H]:"H",[N.I]:"I",[N.J]:"J",[N.K]:"K",[N.L]:"L",[N.M]:"M",[N.N]:"N",[N.O]:"O",[N.P]:"P",[N.Q]:"Q",[N.R]:"R",[N.S]:"S",[N.T]:"T",[N.U]:"U",[N.V]:"V",[N.W]:"W",[N.X]:"X",[N.Y]:"Y",[N.Z]:"Z",[N.UP]:"\u2191",[N.DOWN]:"\u2193",[N.LEFT]:"\u2190",[N.RIGHT]:"\u2192",[N.SHIFT]:o?"\u21E7":"Shift",[N.CONTROL]:o?"\u2303":"Ctrl",[N.OPTION]:o?"\u2325":"Alt",[N.COMMAND]:o?"\u2318":"\u229E"},M1={[N.CONTROL]:0,[N.OPTION]:1,[N.SHIFT]:2,[N.COMMAND]:3},$1=new Map;window.addEventListener("keydown",(Q)=>{$1.forEach((G,Z)=>{const w=(z)=>{if(z===N.CONTROL&&Q.ctrlKey)return!0;if(z===N.OPTION&&Q.altKey)return!0;if(z===N.SHIFT&&Q.shiftKey)return!0;if(z===N.COMMAND&&Q.metaKey)return!0;if(z===Q.code)return!0;return!1};if(Z.every(w)&&typeof G==="function")Q.preventDefault(),G()})});var O8=function(Q){console&&console.warn&&console.warn(Q)},C=function(){C.init.call(this)},K0=function(Q){if(typeof Q!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof Q)},N1=function(Q){return Q._maxListeners===void 0?C.defaultMaxListeners:Q._maxListeners},q1=function(Q,G,Z,w){var z,O,q;if(K0(Z),O=Q._events,O===void 0?(O=Q._events=Object.create(null),Q._eventsCount=0):(O.newListener!==void 0&&(Q.emit("newListener",G,Z.listener?Z.listener:Z),O=Q._events),q=O[G]),q===void 0)q=O[G]=Z,++Q._eventsCount;else if(typeof q=="function"?q=O[G]=w?[Z,q]:[q,Z]:w?q.unshift(Z):q.push(Z),z=N1(Q),z>0&&q.length>z&&!q.warned){q.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+q.length+" "+String(G)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=Q,h.type=G,h.count=q.length,O8(h)}return Q},K8=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)},L1=function(Q,G,Z){var w={fired:!1,wrapFn:void 0,target:Q,type:G,listener:Z},z=K8.bind(w);return z.listener=Z,w.wrapFn=z,z},A1=function(Q,G,Z){var w=Q._events;if(w===void 0)return[];var z=w[G];return z===void 0?[]:typeof z=="function"?Z?[z.listener||z]:[z]:Z?q8(z):h1(z,z.length)},D1=function(Q){var G=this._events;if(G!==void 0){var Z=G[Q];if(typeof Z=="function")return 1;if(Z!==void 0)return Z.length}return 0},h1=function(Q,G){for(var Z=new Array(G),w=0;w<G;++w)Z[w]=Q[w];return Z},N8=function(Q,G){for(;G+1<Q.length;G++)Q[G]=Q[G+1];Q.pop()},q8=function(Q){for(var G=new Array(Q.length),Z=0;Z<G.length;++Z)G[Z]=Q[Z].listener||Q[Z];return G};var W0=typeof Reflect=="object"?Reflect:null,F1=W0&&typeof W0.apply=="function"?W0.apply:function(Q,G,Z){return Function.prototype.apply.call(Q,G,Z)},O0;W0&&typeof W0.ownKeys=="function"?O0=W0.ownKeys:Object.getOwnPropertySymbols?O0=function(Q){return Object.getOwnPropertyNames(Q).concat(Object.getOwnPropertySymbols(Q))}:O0=function(Q){return Object.getOwnPropertyNames(Q)};var K1=Number.isNaN||function(Q){return Q!==Q};C.EventEmitter=C;C.prototype._events=void 0;C.prototype._eventsCount=0;C.prototype._maxListeners=void 0;var O1=10;Object.defineProperty(C,"defaultMaxListeners",{enumerable:!0,get:function(){return O1},set:function(Q){if(typeof Q!="number"||Q<0||K1(Q))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+Q+".");O1=Q}});C.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};C.prototype.setMaxListeners=function(Q){if(typeof Q!="number"||Q<0||K1(Q))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+Q+".");return this._maxListeners=Q,this};C.prototype.getMaxListeners=function(){return N1(this)};C.prototype.emit=function(Q){for(var G=[],Z=1;Z<arguments.length;Z++)G.push(arguments[Z]);var w=Q==="error",z=this._events;if(z!==void 0)w=w&&z.error===void 0;else if(!w)return!1;if(w){var O;if(G.length>0&&(O=G[0]),O instanceof Error)throw O;var q=new Error("Unhandled error."+(O?" ("+O.message+")":""));throw q.context=O,q}var h=z[Q];if(h===void 0)return!1;if(typeof h=="function")F1(h,this,G);else for(var x=h.length,j=h1(h,x),Z=0;Z<x;++Z)F1(j[Z],this,G);return!0};C.prototype.addListener=function(Q,G){return q1(this,Q,G,!1)};C.prototype.on=C.prototype.addListener;C.prototype.prependListener=function(Q,G){return q1(this,Q,G,!0)};C.prototype.once=function(Q,G){return K0(G),this.on(Q,L1(this,Q,G)),this};C.prototype.prependOnceListener=function(Q,G){return K0(G),this.prependListener(Q,L1(this,Q,G)),this};C.prototype.removeListener=function(Q,G){var Z,w,z,O,q;if(K0(G),w=this._events,w===void 0)return this;if(Z=w[Q],Z===void 0)return this;if(Z===G||Z.listener===G)--this._eventsCount===0?this._events=Object.create(null):(delete w[Q],w.removeListener&&this.emit("removeListener",Q,Z.listener||G));else if(typeof Z!="function"){for(z=-1,O=Z.length-1;O>=0;O--)if(Z[O]===G||Z[O].listener===G){q=Z[O].listener,z=O;break}if(z<0)return this;z===0?Z.shift():N8(Z,z),Z.length===1&&(w[Q]=Z[0]),w.removeListener!==void 0&&this.emit("removeListener",Q,q||G)}return this};C.prototype.off=C.prototype.removeListener;C.prototype.removeAllListeners=function(Q){var G,Z,w;if(Z=this._events,Z===void 0)return this;if(Z.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):Z[Q]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete Z[Q]),this;if(arguments.length===0){var z=Object.keys(Z),O;for(w=0;w<z.length;++w)O=z[w],O!=="removeListener"&&this.removeAllListeners(O);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(G=Z[Q],typeof G=="function")this.removeListener(Q,G);else if(G!==void 0)for(w=G.length-1;w>=0;w--)this.removeListener(Q,G[w]);return this};C.prototype.listeners=function(Q){return A1(this,Q,!0)};C.prototype.rawListeners=function(Q){return A1(this,Q,!1)};C.listenerCount=function(Q,G){return typeof Q.listenerCount=="function"?Q.listenerCount(G):D1.call(Q,G)};C.prototype.listenerCount=D1;C.prototype.eventNames=function(){return this._eventsCount>0?O0(this._events):[]};var XX=C.prototype;class P1 extends C{constructor(Q){super();this.port=Q,this.reader=null}dispose(){this.close().then(()=>{this.port=null})}getInfo(){return this.port.getInfo()}open(Q){return new Promise((G,Z)=>{this.port.open(Q).then(()=>{const w=()=>{this.reader=this.port.readable.getReader(),this.reader.read().then(({value:z,done:O})=>{if(this.reader.releaseLock(),z)this.emit("data",z);if(O);else w()}).catch(()=>{this.emit("disconnect")})};w(),this.emit("connect"),G()}).catch((w)=>{Z(w)})})}close(){return new Promise((Q,G)=>{if(this.reader)this.reader.cancel().then(()=>this.port.close()).then(()=>Q()).catch((Z)=>G(Z));else this.reader=null,this.port.close().then(()=>Q()).catch((Z)=>G(Z))})}write(Q,G="text"){return new Promise((Z,w)=>{const z=this.port.writable.getWriter();if(G==="binary")z.write(Q).then(()=>Z()).catch((O)=>w(O));else{const O=new TextEncoder;z.write(O.encode(Q)).then(()=>Z()).catch((q)=>w(q))}z.releaseLock()})}}function x1(Q){return new Promise((G)=>{setTimeout(G,Q)})}var L8=()=>x1(0);var S1={"zh-CN":"zh-Hans","zh-TW":"zh-Hant","zh-HK":"zh-Hant","zh-MO":"zh-Hant"};function m0(Q){if(S1[Q])return S1[Q];return Q}var g0="en",k0=navigator.language,{DisplayNames:v0,Locale:A8}=window.Intl,D8=new v0([g0],{type:"language"}),h8=new v0([k0],{type:"language"}),z0=new Map,R1=(Q)=>(Q=m0(Q))&&z0.has(Q)&&Q,p0=(Q)=>{const G=new A8(Q),Z=G.textInfo||G.getTextInfo();return Z&&Z.direction==="rtl"},T1=(Q,G={})=>{const Z=new v0([Q],{type:"language"});return z0.set(Q,{language:Z.of(Q),languageInDefault:D8.of(Q),languageInBrowser:h8.of(Q)}),{language:Q,messages:G}},C1=[T1("en"),T1("zh-Hans")];var b=Q8(E1(),1);import{createContext as P8} from"preact";import{useContext as x8,useReducer as S8} from"preact/hooks";function R8(){const{state:Q,dispatch:G}=x8(i1);return{...Q,closeProject(){G({type:j1})},async openProject(Z){if(typeof Z==="stirng")Z=await b.default.getItem(key);if(Z)G({type:I1,payload:Z});else throw new Error(`${key} does not exist.`)},setProjectName(Z){G({type:y1,payload:Z})},addFile(Z){if(Q.fileList.find((w)=>w.id===Z.id))throw Error("File already exists");G({type:m1,payload:Z})},openFile(Z){if(Z<0||Z>Q.fileList.length-1)throw Error("File does not exist");G({type:g1,payload:Z})},deleteFile(Z){if(Z<0||Z>Q.fileList.length-1)throw Error("File does not exist");G({type:k1,payload:Z})},renameFile(Z){if(Q.fileList.find((w)=>w.name===Z))throw Error("File already exists");G({type:v1,payload:Z})},modifyFile(Z){G({type:p1,payload:Z})},addAsset(Z){if(Q.assetList.find((w)=>w.id===Z.id))throw Error("Asset already exists");G({type:u1,payload:Z})},deleteAsset(...Z){if(Array.isArray(Z[0]))Z=Z[0];G({type:f1,payload:Z})},modifyAsset(Z){G({type:b1,payload:Z})},connectDevice(Z){G({type:d1,payload:Z})},setEditor(Z){G({type:c1,payload:Z})},async saveThumb(Z){if(Q.key){const w=await b.default.getItem(Q.key);w.thumb=Z,b.default.setItem(Q.key,w)}},async saveNow(){const Z=Date.now(),w=Q.key||Z.toString(36),{name:z,editor:O,assetList:q,fileList:h,selectedIndex:x}=Q,j=await b.default.setItem(w,{key:w,name:z,editor:O,assetList:q,fileList:h,selectedIndex:x,modifiedDate:Z});return G({type:n1,payload:{key:w,modified:!1}}),j},async listProjects(){const Z=[];return await b.default.iterate((w,z)=>{Z.push({key:z,name:w.name,image:w.thumb,modifiedDate:w.modifiedDate})}),Z},getProject(Z){return b.default.getItem(Z)},async renameProject(Z,w){const z=await b.default.getItem(Z);z.name=w,await b.default.setItem(z.key,z)},async duplicateProject(Z){const w=await b.default.getItem(Z);w.modifiedDate=Date.now(),w.key=w.modifiedDate.toString(36),await b.default.setItem(w.key,w)},async deleteProject(Z){await b.default.removeItem(Z)}}}function C8({children:Q}){const[G,Z]=S8(T8,N0);return _8(i1.Provider,{value:{state:G,dispatch:Z},children:Q})}import{jsx as _8} from"preact/jsx-runtime";var j1="CLOSE_PROJECT",I1="OPEN_PROJECT",y1="SET_PROJECT_NAME",m1="ADD_FILE",g1="OPEN_FILE",k1="DELETE_FILE",v1="RENAME_FILE",p1="MODIFY_FILE",u1="ADD_ASSET",f1="DELETE_ASSET",b1="MODIFY_ASSET",d1="CONNECT_DEVICE",c1="CONFIG_EDITOR",n1="SAVE_KEY";b.default.config({name:"blockcode-store"});var N0={key:null,name:"",editor:null,assetList:[],fileList:[],selectedIndex:-1,device:null,modified:!1},i1=P8({state:Object.assign({},N0),dispatch:()=>{}}),T8=(Q,G)=>{switch(G.type){case j1:return Object.assign({},N0);case I1:return Object.assign({},N0,G.payload);case y1:return{...Q,name:G.payload,modified:!0};case m1:return{...Q,fileList:Q.fileList.concat(G.payload),selectedIndex:Q.fileList.length,modified:!0};case g1:return{...Q,selectedIndex:G.payload};case k1:return{...Q,fileList:Q.fileList.filter((Z,w)=>w!==G.payload),selectedIndex:G.payload===Q.fileList.length-1?G.payload-1:G.payload,modified:!0};case v1:return{...Q,fileList:Q.fileList.map((Z,w)=>{if(w===Q.selectedIndex)return{...Z,name:G.payload};return Z}),modified:!0};case p1:return{...Q,fileList:Q.fileList.map((Z,w)=>{if(G.payload.id?Z.id===G.payload.id:w===Q.selectedIndex)return{...Z,...G.payload};return Z}),modified:!0};case u1:return{...Q,assetList:Q.assetList.concat(G.payload),modified:!0};case f1:return{...Q,assetList:Q.assetList.filter((Z)=>!G.payload.includes(Z.id)),modified:!0};case b1:return{...Q,assetList:Q.assetList.map((Z,w)=>{if(Z.id===G.payload.id)return{...Z,...G.payload};return Z}),modified:!0};case d1:return{...Q,device:G.payload};case c1:return{...Q,editor:Object.assign(Q.editor||{},G.payload),modified:!0};case n1:return{...Q,...G.payload};default:return Q}};import{createContext as E8} from"preact";import{useContext as j8,useReducer as I8} from"preact/hooks";function m8(){const{state:Q,dispatch:G}=j8(r1),Z=F0();return{...Q,addLocaleData(w){G({type:a1,payload:Q.locales.map(({language:z,messages:O})=>({language:z,messages:Object.assign(O,w[z])}))})},setLanguage(w){if(Q.language!==w)G({type:t1,payload:w})},getText(w,z,O={}){if(typeof z==="object")O=z;return Z.translate(w,{...O,defaultMessage:z})}}}function g8({children:Q}){const[G,Z]=I8(y8,o1);return l1(B1,{language:G.language,locales:G.locales,children:l1(r1.Provider,{value:{state:G,dispatch:Z},children:Q})})}import{jsx as l1} from"preact/jsx-runtime";var a1="SET_LOCALES",t1="SET_LANGUAGE",s1=R1(k0)||g0,o1={locales:C1,language:s1,supportLanguages:z0,isRtl:p0(s1)},r1=E8({state:o1,dispatch:()=>{}}),y8=(Q,G)=>{switch(G.type){case a1:return{...Q,locales:G.payload};case t1:return{...Q,language:G.payload,isRtl:p0(G.payload)};default:return Q}};export{m8 as useLocale,R8 as useEditor,z0 as supportLanguages,x1 as sleep,F8 as showHotkey,$8 as setHotkey,L8 as nextTick,y0 as flatChildren,B8 as exportFile,l8 as Text,P1 as Serial,s8 as Numeric,g8 as LocalesProvider,N as Keys,C8 as EditorProvider,i8 as DateTime};
