var E0=Object.create;var{defineProperty:Kh,getPrototypeOf:H0,getOwnPropertyNames:K0}=Object;var J0=Object.prototype.hasOwnProperty;var W0=(h,y,w)=>{w=h!=null?E0(H0(h)):{};const p=y||!h||!h.__esModule?Kh(w,"default",{value:h,enumerable:!0}):w;for(let x of K0(h))if(!J0.call(p,x))Kh(p,x,{get:()=>h[x],enumerable:!0});return p};var G0=(h,y)=>()=>(y||h((y={exports:{}}).exports,y),y.exports);var Ft=((h)=>typeof require!=="undefined"?require:typeof Proxy!=="undefined"?new Proxy(h,{get:(y,w)=>(typeof require!=="undefined"?require:y)[w]}):h)(function(h){if(typeof require!=="undefined")return require.apply(this,arguments);throw Error('Dynamic require of "'+h+'" is not supported')});var Ch=G0((_h,It)=>{/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(h){if(typeof _h==="object"&&typeof It!=="undefined")It.exports=h();else if(typeof define==="function"&&define.amd)define([],h);else{var y;if(typeof window!=="undefined")y=window;else if(typeof global!=="undefined")y=global;else if(typeof self!=="undefined")y=self;else y=this;y.localforage=h()}})(function(){var h,y,w;return function p(x,J,V){function Q(R,s){if(!J[R]){if(!x[R]){var X=typeof Ft=="function"&&Ft;if(!s&&X)return X(R,!0);if(A)return A(R,!0);var U=new Error("Cannot find module '"+R+"'");throw U.code="MODULE_NOT_FOUND",U}var $=J[R]={exports:{}};x[R][0].call($.exports,function(C){var d=x[R][1][C];return Q(d?d:C)},$,$.exports,p,x,J,V)}return J[R].exports}var A=typeof Ft=="function"&&Ft;for(var g=0;g<V.length;g++)Q(V[g]);return Q}({1:[function(p,x,J){(function(V){var Q=V.MutationObserver||V.WebKitMutationObserver,A;if(Q){var g=0,R=new Q(C),s=V.document.createTextNode("");R.observe(s,{characterData:!0}),A=function(){s.data=g=++g%2}}else if(!V.setImmediate&&typeof V.MessageChannel!=="undefined"){var X=new V.MessageChannel;X.port1.onmessage=C,A=function(){X.port2.postMessage(0)}}else if("document"in V&&"onreadystatechange"in V.document.createElement("script"))A=function(){var f=V.document.createElement("script");f.onreadystatechange=function(){C(),f.onreadystatechange=null,f.parentNode.removeChild(f),f=null},V.document.documentElement.appendChild(f)};else A=function(){setTimeout(C,0)};var U,$=[];function C(){U=!0;var f,a,q=$.length;while(q){a=$,$=[],f=-1;while(++f<q)a[f]();q=$.length}U=!1}x.exports=d;function d(f){if($.push(f)===1&&!U)A()}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],2:[function(p,x,J){var V=p(1);function Q(){}var A={},g=["REJECTED"],R=["FULFILLED"],s=["PENDING"];x.exports=X;function X(T){if(typeof T!=="function")throw new TypeError("resolver must be a function");if(this.state=s,this.queue=[],this.outcome=void 0,T!==Q)d(this,T)}X.prototype.catch=function(T){return this.then(null,T)},X.prototype.then=function(T,D){if(typeof T!=="function"&&this.state===R||typeof D!=="function"&&this.state===g)return this;var m=new this.constructor(Q);if(this.state!==s){var S=this.state===R?T:D;$(m,S,this.outcome)}else this.queue.push(new U(m,T,D));return m};function U(T,D,m){if(this.promise=T,typeof D==="function")this.onFulfilled=D,this.callFulfilled=this.otherCallFulfilled;if(typeof m==="function")this.onRejected=m,this.callRejected=this.otherCallRejected}U.prototype.callFulfilled=function(T){A.resolve(this.promise,T)},U.prototype.otherCallFulfilled=function(T){$(this.promise,this.onFulfilled,T)},U.prototype.callRejected=function(T){A.reject(this.promise,T)},U.prototype.otherCallRejected=function(T){$(this.promise,this.onRejected,T)};function $(T,D,m){V(function(){var S;try{S=D(m)}catch(i){return A.reject(T,i)}if(S===T)A.reject(T,new TypeError("Cannot resolve promise with itself"));else A.resolve(T,S)})}A.resolve=function(T,D){var m=f(C,D);if(m.status==="error")return A.reject(T,m.value);var S=m.value;if(S)d(T,S);else{T.state=R,T.outcome=D;var i=-1,j=T.queue.length;while(++i<j)T.queue[i].callFulfilled(D)}return T},A.reject=function(T,D){T.state=g,T.outcome=D;var m=-1,S=T.queue.length;while(++m<S)T.queue[m].callRejected(D);return T};function C(T){var D=T&&T.then;if(T&&(typeof T==="object"||typeof T==="function")&&typeof D==="function")return function m(){D.apply(T,arguments)}}function d(T,D){var m=!1;function S(I){if(m)return;m=!0,A.reject(T,I)}function i(I){if(m)return;m=!0,A.resolve(T,I)}function j(){D(i,S)}var v=f(j);if(v.status==="error")S(v.value)}function f(T,D){var m={};try{m.value=T(D),m.status="success"}catch(S){m.status="error",m.value=S}return m}X.resolve=a;function a(T){if(T instanceof this)return T;return A.resolve(new this(Q),T)}X.reject=q;function q(T){var D=new this(Q);return A.reject(D,T)}X.all=Qt;function Qt(T){var D=this;if(Object.prototype.toString.call(T)!=="[object Array]")return this.reject(new TypeError("must be an array"));var m=T.length,S=!1;if(!m)return this.resolve([]);var i=new Array(m),j=0,v=-1,I=new this(Q);while(++v<m)o(T[v],v);return I;function o(Lt,Ht){D.resolve(Lt).then(Ut,function(nt){if(!S)S=!0,A.reject(I,nt)});function Ut(nt){if(i[Ht]=nt,++j===m&&!S)S=!0,A.resolve(I,i)}}}X.race=ht;function ht(T){var D=this;if(Object.prototype.toString.call(T)!=="[object Array]")return this.reject(new TypeError("must be an array"));var m=T.length,S=!1;if(!m)return this.resolve([]);var i=-1,j=new this(Q);while(++i<m)v(T[i]);return j;function v(I){D.resolve(I).then(function(o){if(!S)S=!0,A.resolve(j,o)},function(o){if(!S)S=!0,A.reject(j,o)})}}},{"1":1}],3:[function(p,x,J){(function(V){if(typeof V.Promise!=="function")V.Promise=p(2)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"2":2}],4:[function(p,x,J){var V=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function Q(t,L){if(!(t instanceof L))throw new TypeError("Cannot call a class as a function")}function A(){try{if(typeof indexedDB!=="undefined")return indexedDB;if(typeof webkitIndexedDB!=="undefined")return webkitIndexedDB;if(typeof mozIndexedDB!=="undefined")return mozIndexedDB;if(typeof OIndexedDB!=="undefined")return OIndexedDB;if(typeof msIndexedDB!=="undefined")return msIndexedDB}catch(t){return}}var g=A();function R(){try{if(!g||!g.open)return!1;var t=typeof openDatabase!=="undefined"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),L=typeof fetch==="function"&&fetch.toString().indexOf("[native code")!==-1;return(!t||L)&&typeof indexedDB!=="undefined"&&typeof IDBKeyRange!=="undefined"}catch(n){return!1}}function s(t,L){t=t||[],L=L||{};try{return new Blob(t,L)}catch(u){if(u.name!=="TypeError")throw u;var n=typeof BlobBuilder!=="undefined"?BlobBuilder:typeof MSBlobBuilder!=="undefined"?MSBlobBuilder:typeof MozBlobBuilder!=="undefined"?MozBlobBuilder:WebKitBlobBuilder,O=new n;for(var F=0;F<t.length;F+=1)O.append(t[F]);return O.getBlob(L.type)}}if(typeof Promise==="undefined")p(3);var X=Promise;function U(t,L){if(L)t.then(function(n){L(null,n)},function(n){L(n)})}function $(t,L,n){if(typeof L==="function")t.then(L);if(typeof n==="function")t.catch(n)}function C(t){if(typeof t!=="string")console.warn(t+" used as a key, but it is not a string."),t=String(t);return t}function d(){if(arguments.length&&typeof arguments[arguments.length-1]==="function")return arguments[arguments.length-1]}var f="local-forage-detect-blob-support",a=void 0,q={},Qt=Object.prototype.toString,ht="readonly",T="readwrite";function D(t){var L=t.length,n=new ArrayBuffer(L),O=new Uint8Array(n);for(var F=0;F<L;F++)O[F]=t.charCodeAt(F);return n}function m(t){return new X(function(L){var n=t.transaction(f,T),O=s([""]);n.objectStore(f).put(O,"key"),n.onabort=function(F){F.preventDefault(),F.stopPropagation(),L(!1)},n.oncomplete=function(){var F=navigator.userAgent.match(/Chrome\/(\d+)/),u=navigator.userAgent.match(/Edge\//);L(u||!F||parseInt(F[1],10)>=43)}}).catch(function(){return!1})}function S(t){if(typeof a==="boolean")return X.resolve(a);return m(t).then(function(L){return a=L,a})}function i(t){var L=q[t.name],n={};if(n.promise=new X(function(O,F){n.resolve=O,n.reject=F}),L.deferredOperations.push(n),!L.dbReady)L.dbReady=n.promise;else L.dbReady=L.dbReady.then(function(){return n.promise})}function j(t){var L=q[t.name],n=L.deferredOperations.pop();if(n)return n.resolve(),n.promise}function v(t,L){var n=q[t.name],O=n.deferredOperations.pop();if(O)return O.reject(L),O.promise}function I(t,L){return new X(function(n,O){if(q[t.name]=q[t.name]||kt(),t.db)if(L)i(t),t.db.close();else return n(t.db);var F=[t.name];if(L)F.push(t.version);var u=g.open.apply(g,F);if(L)u.onupgradeneeded=function(E){var H=u.result;try{if(H.createObjectStore(t.storeName),E.oldVersion<=1)H.createObjectStore(f)}catch(K){if(K.name==="ConstraintError")console.warn('The database "'+t.name+'" has been upgraded from version '+E.oldVersion+" to version "+E.newVersion+', but the storage "'+t.storeName+'" already exists.');else throw K}};u.onerror=function(E){E.preventDefault(),O(u.error)},u.onsuccess=function(){var E=u.result;E.onversionchange=function(H){H.target.close()},n(E),j(t)}})}function o(t){return I(t,!1)}function Lt(t){return I(t,!0)}function Ht(t,L){if(!t.db)return!0;var n=!t.db.objectStoreNames.contains(t.storeName),O=t.version<t.db.version,F=t.version>t.db.version;if(O){if(t.version!==L)console.warn('The database "'+t.name+`" can't be downgraded from version `+t.db.version+" to version "+t.version+".");t.version=t.db.version}if(F||n){if(n){var u=t.db.version+1;if(u>t.version)t.version=u}return!0}return!1}function Ut(t){return new X(function(L,n){var O=new FileReader;O.onerror=n,O.onloadend=function(F){var u=btoa(F.target.result||"");L({__local_forage_encoded_blob:!0,data:u,type:t.type})},O.readAsBinaryString(t)})}function nt(t){var L=D(atob(t.data));return s([L],{type:t.type})}function dt(t){return t&&t.__local_forage_encoded_blob}function En(t){var L=this,n=L._initReady().then(function(){var O=q[L._dbInfo.name];if(O&&O.dbReady)return O.dbReady});return $(n,t,t),n}function Hn(t){i(t);var L=q[t.name],n=L.forages;for(var O=0;O<n.length;O++){var F=n[O];if(F._dbInfo.db)F._dbInfo.db.close(),F._dbInfo.db=null}return t.db=null,o(t).then(function(u){if(t.db=u,Ht(t))return Lt(t);return u}).then(function(u){t.db=L.db=u;for(var E=0;E<n.length;E++)n[E]._dbInfo.db=u}).catch(function(u){throw v(t,u),u})}function b(t,L,n,O){if(O===void 0)O=1;try{var F=t.db.transaction(t.storeName,L);n(null,F)}catch(u){if(O>0&&(!t.db||u.name==="InvalidStateError"||u.name==="NotFoundError"))return X.resolve().then(function(){if(!t.db||u.name==="NotFoundError"&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version){if(t.db)t.version=t.db.version+1;return Lt(t)}}).then(function(){return Hn(t).then(function(){b(t,L,n,O-1)})}).catch(n);n(u)}}function kt(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Kn(t){var L=this,n={db:null};if(t)for(var O in t)n[O]=t[O];var F=q[n.name];if(!F)F=kt(),q[n.name]=F;if(F.forages.push(L),!L._initReady)L._initReady=L.ready,L.ready=En;var u=[];function E(){return X.resolve()}for(var H=0;H<F.forages.length;H++){var K=F.forages[H];if(K!==L)u.push(K._initReady().catch(E))}var W=F.forages.slice(0);return X.all(u).then(function(){return n.db=F.db,o(n)}).then(function(G){if(n.db=G,Ht(n,L._defaultConfig.version))return Lt(n);return G}).then(function(G){n.db=F.db=G,L._dbInfo=n;for(var z=0;z<W.length;z++){var Z=W[z];if(Z!==L)Z._dbInfo.db=n.db,Z._dbInfo.version=n.version}})}function Jn(t,L){var n=this;t=C(t);var O=new X(function(F,u){n.ready().then(function(){b(n._dbInfo,ht,function(E,H){if(E)return u(E);try{var K=H.objectStore(n._dbInfo.storeName),W=K.get(t);W.onsuccess=function(){var G=W.result;if(G===void 0)G=null;if(dt(G))G=nt(G);F(G)},W.onerror=function(){u(W.error)}}catch(G){u(G)}})}).catch(u)});return U(O,L),O}function Wn(t,L){var n=this,O=new X(function(F,u){n.ready().then(function(){b(n._dbInfo,ht,function(E,H){if(E)return u(E);try{var K=H.objectStore(n._dbInfo.storeName),W=K.openCursor(),G=1;W.onsuccess=function(){var z=W.result;if(z){var Z=z.value;if(dt(Z))Z=nt(Z);var N=t(Z,z.key,G++);if(N!==void 0)F(N);else z.continue()}else F()},W.onerror=function(){u(W.error)}}catch(z){u(z)}})}).catch(u)});return U(O,L),O}function Gn(t,L,n){var O=this;t=C(t);var F=new X(function(u,E){var H;O.ready().then(function(){if(H=O._dbInfo,Qt.call(L)==="[object Blob]")return S(H.db).then(function(K){if(K)return L;return Ut(L)});return L}).then(function(K){b(O._dbInfo,T,function(W,G){if(W)return E(W);try{var z=G.objectStore(O._dbInfo.storeName);if(K===null)K=void 0;var Z=z.put(K,t);G.oncomplete=function(){if(K===void 0)K=null;u(K)},G.onabort=G.onerror=function(){var N=Z.error?Z.error:Z.transaction.error;E(N)}}catch(N){E(N)}})}).catch(E)});return U(F,n),F}function Vn(t,L){var n=this;t=C(t);var O=new X(function(F,u){n.ready().then(function(){b(n._dbInfo,T,function(E,H){if(E)return u(E);try{var K=H.objectStore(n._dbInfo.storeName),W=K.delete(t);H.oncomplete=function(){F()},H.onerror=function(){u(W.error)},H.onabort=function(){var G=W.error?W.error:W.transaction.error;u(G)}}catch(G){u(G)}})}).catch(u)});return U(O,L),O}function Tn(t){var L=this,n=new X(function(O,F){L.ready().then(function(){b(L._dbInfo,T,function(u,E){if(u)return F(u);try{var H=E.objectStore(L._dbInfo.storeName),K=H.clear();E.oncomplete=function(){O()},E.onabort=E.onerror=function(){var W=K.error?K.error:K.transaction.error;F(W)}}catch(W){F(W)}})}).catch(F)});return U(n,t),n}function Mn(t){var L=this,n=new X(function(O,F){L.ready().then(function(){b(L._dbInfo,ht,function(u,E){if(u)return F(u);try{var H=E.objectStore(L._dbInfo.storeName),K=H.count();K.onsuccess=function(){O(K.result)},K.onerror=function(){F(K.error)}}catch(W){F(W)}})}).catch(F)});return U(n,t),n}function Xn(t,L){var n=this,O=new X(function(F,u){if(t<0){F(null);return}n.ready().then(function(){b(n._dbInfo,ht,function(E,H){if(E)return u(E);try{var K=H.objectStore(n._dbInfo.storeName),W=!1,G=K.openKeyCursor();G.onsuccess=function(){var z=G.result;if(!z){F(null);return}if(t===0)F(z.key);else if(!W)W=!0,z.advance(t);else F(z.key)},G.onerror=function(){u(G.error)}}catch(z){u(z)}})}).catch(u)});return U(O,L),O}function zn(t){var L=this,n=new X(function(O,F){L.ready().then(function(){b(L._dbInfo,ht,function(u,E){if(u)return F(u);try{var H=E.objectStore(L._dbInfo.storeName),K=H.openKeyCursor(),W=[];K.onsuccess=function(){var G=K.result;if(!G){O(W);return}W.push(G.key),G.continue()},K.onerror=function(){F(K.error)}}catch(G){F(G)}})}).catch(F)});return U(n,t),n}function Qn(t,L){L=d.apply(this,arguments);var n=this.config();if(t=typeof t!=="function"&&t||{},!t.name)t.name=t.name||n.name,t.storeName=t.storeName||n.storeName;var O=this,F;if(!t.name)F=X.reject("Invalid arguments");else{var u=t.name===n.name&&O._dbInfo.db,E=u?X.resolve(O._dbInfo.db):o(t).then(function(H){var K=q[t.name],W=K.forages;K.db=H;for(var G=0;G<W.length;G++)W[G]._dbInfo.db=H;return H});if(!t.storeName)F=E.then(function(H){i(t);var K=q[t.name],W=K.forages;H.close();for(var G=0;G<W.length;G++){var z=W[G];z._dbInfo.db=null}var Z=new X(function(N,Y){var _=g.deleteDatabase(t.name);_.onerror=function(){var P=_.result;if(P)P.close();Y(_.error)},_.onblocked=function(){console.warn('dropInstance blocked for database "'+t.name+'" until all open connections are closed')},_.onsuccess=function(){var P=_.result;if(P)P.close();N(P)}});return Z.then(function(N){K.db=N;for(var Y=0;Y<W.length;Y++){var _=W[Y];j(_._dbInfo)}}).catch(function(N){throw(v(t,N)||X.resolve()).catch(function(){}),N})});else F=E.then(function(H){if(!H.objectStoreNames.contains(t.storeName))return;var K=H.version+1;i(t);var W=q[t.name],G=W.forages;H.close();for(var z=0;z<G.length;z++){var Z=G[z];Z._dbInfo.db=null,Z._dbInfo.version=K}var N=new X(function(Y,_){var P=g.open(t.name,K);P.onerror=function(c){var Ot=P.result;Ot.close(),_(c)},P.onupgradeneeded=function(){var c=P.result;c.deleteObjectStore(t.storeName)},P.onsuccess=function(){var c=P.result;c.close(),Y(c)}});return N.then(function(Y){W.db=Y;for(var _=0;_<G.length;_++){var P=G[_];P._dbInfo.db=Y,j(P._dbInfo)}}).catch(function(Y){throw(v(t,Y)||X.resolve()).catch(function(){}),Y})})}return U(F,L),F}var Un={_driver:"asyncStorage",_initStorage:Kn,_support:R(),iterate:Wn,getItem:Jn,setItem:Gn,removeItem:Vn,clear:Tn,length:Mn,key:Xn,keys:zn,dropInstance:Qn};function Zn(){return typeof openDatabase==="function"}var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",An="~~local_forage_type~",at=/^~~local_forage_type~([^~]+)~/,Kt="__lfsc__:",Zt=Kt.length,At="arbf",mt="blob",ot="si08",bt="ui08",lt="uic8",rt="si16",et="si32",th="ur16",hh="ui32",nh="fl32",wh="fl64",yh=Zt+At.length,Lh=Object.prototype.toString;function uh(t){var L=t.length*0.75,n=t.length,O,F=0,u,E,H,K;if(t[t.length-1]==="="){if(L--,t[t.length-2]==="=")L--}var W=new ArrayBuffer(L),G=new Uint8Array(W);for(O=0;O<n;O+=4)u=r.indexOf(t[O]),E=r.indexOf(t[O+1]),H=r.indexOf(t[O+2]),K=r.indexOf(t[O+3]),G[F++]=u<<2|E>>4,G[F++]=(E&15)<<4|H>>2,G[F++]=(H&3)<<6|K&63;return W}function Dt(t){var L=new Uint8Array(t),n="",O;for(O=0;O<L.length;O+=3)n+=r[L[O]>>2],n+=r[(L[O]&3)<<4|L[O+1]>>4],n+=r[(L[O+1]&15)<<2|L[O+2]>>6],n+=r[L[O+2]&63];if(L.length%3===2)n=n.substring(0,n.length-1)+"=";else if(L.length%3===1)n=n.substring(0,n.length-2)+"==";return n}function mn(t,L){var n="";if(t)n=Lh.call(t);if(t&&(n==="[object ArrayBuffer]"||t.buffer&&Lh.call(t.buffer)==="[object ArrayBuffer]")){var O,F=Kt;if(t instanceof ArrayBuffer)O=t,F+=At;else if(O=t.buffer,n==="[object Int8Array]")F+=ot;else if(n==="[object Uint8Array]")F+=bt;else if(n==="[object Uint8ClampedArray]")F+=lt;else if(n==="[object Int16Array]")F+=rt;else if(n==="[object Uint16Array]")F+=th;else if(n==="[object Int32Array]")F+=et;else if(n==="[object Uint32Array]")F+=hh;else if(n==="[object Float32Array]")F+=nh;else if(n==="[object Float64Array]")F+=wh;else L(new Error("Failed to get type for BinaryArray"));L(F+Dt(O))}else if(n==="[object Blob]"){var u=new FileReader;u.onload=function(){var E=An+t.type+"~"+Dt(this.result);L(Kt+mt+E)},u.readAsArrayBuffer(t)}else try{L(JSON.stringify(t))}catch(E){console.error("Couldn't convert value into a JSON string: ",t),L(null,E)}}function Dn(t){if(t.substring(0,Zt)!==Kt)return JSON.parse(t);var L=t.substring(yh),n=t.substring(Zt,yh),O;if(n===mt&&at.test(L)){var F=L.match(at);O=F[1],L=L.substring(F[0].length)}var u=uh(L);switch(n){case At:return u;case mt:return s([u],{type:O});case ot:return new Int8Array(u);case bt:return new Uint8Array(u);case lt:return new Uint8ClampedArray(u);case rt:return new Int16Array(u);case th:return new Uint16Array(u);case et:return new Int32Array(u);case hh:return new Uint32Array(u);case nh:return new Float32Array(u);case wh:return new Float64Array(u);default:throw new Error("Unkown type: "+n)}}var Nt={serialize:mn,deserialize:Dn,stringToBuffer:uh,bufferToString:Dt};function Oh(t,L,n,O){t.executeSql("CREATE TABLE IF NOT EXISTS "+L.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,O)}function Nn(t){var L=this,n={db:null};if(t)for(var O in t)n[O]=typeof t[O]!=="string"?t[O].toString():t[O];var F=new X(function(u,E){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(H){return E(H)}n.db.transaction(function(H){Oh(H,n,function(){L._dbInfo=n,u()},function(K,W){E(W)})},E)});return n.serializer=Nt,F}function e(t,L,n,O,F,u){t.executeSql(n,O,F,function(E,H){if(H.code===H.SYNTAX_ERR)E.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[L.storeName],function(K,W){if(!W.rows.length)Oh(K,L,function(){K.executeSql(n,O,F,u)},u);else u(K,H)},u);else u(E,H)},u)}function Bn(t,L){var n=this;t=C(t);var O=new X(function(F,u){n.ready().then(function(){var E=n._dbInfo;E.db.transaction(function(H){e(H,E,"SELECT * FROM "+E.storeName+" WHERE key = ? LIMIT 1",[t],function(K,W){var G=W.rows.length?W.rows.item(0).value:null;if(G)G=E.serializer.deserialize(G);F(G)},function(K,W){u(W)})})}).catch(u)});return U(O,L),O}function Yn(t,L){var n=this,O=new X(function(F,u){n.ready().then(function(){var E=n._dbInfo;E.db.transaction(function(H){e(H,E,"SELECT * FROM "+E.storeName,[],function(K,W){var G=W.rows,z=G.length;for(var Z=0;Z<z;Z++){var N=G.item(Z),Y=N.value;if(Y)Y=E.serializer.deserialize(Y);if(Y=t(Y,N.key,Z+1),Y!==void 0){F(Y);return}}F()},function(K,W){u(W)})})}).catch(u)});return U(O,L),O}function Fh(t,L,n,O){var F=this;t=C(t);var u=new X(function(E,H){F.ready().then(function(){if(L===void 0)L=null;var K=L,W=F._dbInfo;W.serializer.serialize(L,function(G,z){if(z)H(z);else W.db.transaction(function(Z){e(Z,W,"INSERT OR REPLACE INTO "+W.storeName+" (key, value) VALUES (?, ?)",[t,G],function(){E(K)},function(N,Y){H(Y)})},function(Z){if(Z.code===Z.QUOTA_ERR){if(O>0){E(Fh.apply(F,[t,K,n,O-1]));return}H(Z)}})})}).catch(H)});return U(u,n),u}function Sn(t,L,n){return Fh.apply(this,[t,L,n,1])}function gn(t,L){var n=this;t=C(t);var O=new X(function(F,u){n.ready().then(function(){var E=n._dbInfo;E.db.transaction(function(H){e(H,E,"DELETE FROM "+E.storeName+" WHERE key = ?",[t],function(){F()},function(K,W){u(W)})})}).catch(u)});return U(O,L),O}function Pn(t){var L=this,n=new X(function(O,F){L.ready().then(function(){var u=L._dbInfo;u.db.transaction(function(E){e(E,u,"DELETE FROM "+u.storeName,[],function(){O()},function(H,K){F(K)})})}).catch(F)});return U(n,t),n}function $n(t){var L=this,n=new X(function(O,F){L.ready().then(function(){var u=L._dbInfo;u.db.transaction(function(E){e(E,u,"SELECT COUNT(key) as c FROM "+u.storeName,[],function(H,K){var W=K.rows.item(0).c;O(W)},function(H,K){F(K)})})}).catch(F)});return U(n,t),n}function _n(t,L){var n=this,O=new X(function(F,u){n.ready().then(function(){var E=n._dbInfo;E.db.transaction(function(H){e(H,E,"SELECT key FROM "+E.storeName+" WHERE id = ? LIMIT 1",[t+1],function(K,W){var G=W.rows.length?W.rows.item(0).key:null;F(G)},function(K,W){u(W)})})}).catch(u)});return U(O,L),O}function Cn(t){var L=this,n=new X(function(O,F){L.ready().then(function(){var u=L._dbInfo;u.db.transaction(function(E){e(E,u,"SELECT key FROM "+u.storeName,[],function(H,K){var W=[];for(var G=0;G<K.rows.length;G++)W.push(K.rows.item(G).key);O(W)},function(H,K){F(K)})})}).catch(F)});return U(n,t),n}function fn(t){return new X(function(L,n){t.transaction(function(O){O.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(F,u){var E=[];for(var H=0;H<u.rows.length;H++)E.push(u.rows.item(H).name);L({db:t,storeNames:E})},function(F,u){n(u)})},function(O){n(O)})})}function Rn(t,L){L=d.apply(this,arguments);var n=this.config();if(t=typeof t!=="function"&&t||{},!t.name)t.name=t.name||n.name,t.storeName=t.storeName||n.storeName;var O=this,F;if(!t.name)F=X.reject("Invalid arguments");else F=new X(function(u){var E;if(t.name===n.name)E=O._dbInfo.db;else E=openDatabase(t.name,"","",0);if(!t.storeName)u(fn(E));else u({db:E,storeNames:[t.storeName]})}).then(function(u){return new X(function(E,H){u.db.transaction(function(K){function W(N){return new X(function(Y,_){K.executeSql("DROP TABLE IF EXISTS "+N,[],function(){Y()},function(P,c){_(c)})})}var G=[];for(var z=0,Z=u.storeNames.length;z<Z;z++)G.push(W(u.storeNames[z]));X.all(G).then(function(){E()}).catch(function(N){H(N)})},function(K){H(K)})})});return U(F,L),F}var qn={_driver:"webSQLStorage",_initStorage:Nn,_support:Zn(),iterate:Yn,getItem:Bn,setItem:Sn,removeItem:gn,clear:Pn,length:$n,key:_n,keys:Cn,dropInstance:Rn};function jn(){try{return typeof localStorage!=="undefined"&&"setItem"in localStorage&&!!localStorage.setItem}catch(t){return!1}}function ph(t,L){var n=t.name+"/";if(t.storeName!==L.storeName)n+=t.storeName+"/";return n}function vn(){var t="_localforage_support_test";try{return localStorage.setItem(t,!0),localStorage.removeItem(t),!1}catch(L){return!0}}function In(){return!vn()||localStorage.length>0}function cn(t){var L=this,n={};if(t)for(var O in t)n[O]=t[O];if(n.keyPrefix=ph(t,L._defaultConfig),!In())return X.reject();return L._dbInfo=n,n.serializer=Nt,X.resolve()}function sn(t){var L=this,n=L.ready().then(function(){var O=L._dbInfo.keyPrefix;for(var F=localStorage.length-1;F>=0;F--){var u=localStorage.key(F);if(u.indexOf(O)===0)localStorage.removeItem(u)}});return U(n,t),n}function dn(t,L){var n=this;t=C(t);var O=n.ready().then(function(){var F=n._dbInfo,u=localStorage.getItem(F.keyPrefix+t);if(u)u=F.serializer.deserialize(u);return u});return U(O,L),O}function kn(t,L){var n=this,O=n.ready().then(function(){var F=n._dbInfo,u=F.keyPrefix,E=u.length,H=localStorage.length,K=1;for(var W=0;W<H;W++){var G=localStorage.key(W);if(G.indexOf(u)!==0)continue;var z=localStorage.getItem(G);if(z)z=F.serializer.deserialize(z);if(z=t(z,G.substring(E),K++),z!==void 0)return z}});return U(O,L),O}function an(t,L){var n=this,O=n.ready().then(function(){var F=n._dbInfo,u;try{u=localStorage.key(t)}catch(E){u=null}if(u)u=u.substring(F.keyPrefix.length);return u});return U(O,L),O}function on(t){var L=this,n=L.ready().then(function(){var O=L._dbInfo,F=localStorage.length,u=[];for(var E=0;E<F;E++){var H=localStorage.key(E);if(H.indexOf(O.keyPrefix)===0)u.push(H.substring(O.keyPrefix.length))}return u});return U(n,t),n}function bn(t){var L=this,n=L.keys().then(function(O){return O.length});return U(n,t),n}function ln(t,L){var n=this;t=C(t);var O=n.ready().then(function(){var F=n._dbInfo;localStorage.removeItem(F.keyPrefix+t)});return U(O,L),O}function rn(t,L,n){var O=this;t=C(t);var F=O.ready().then(function(){if(L===void 0)L=null;var u=L;return new X(function(E,H){var K=O._dbInfo;K.serializer.serialize(L,function(W,G){if(G)H(G);else try{localStorage.setItem(K.keyPrefix+t,W),E(u)}catch(z){if(z.name==="QuotaExceededError"||z.name==="NS_ERROR_DOM_QUOTA_REACHED")H(z);H(z)}})})});return U(F,n),F}function en(t,L){if(L=d.apply(this,arguments),t=typeof t!=="function"&&t||{},!t.name){var n=this.config();t.name=t.name||n.name,t.storeName=t.storeName||n.storeName}var O=this,F;if(!t.name)F=X.reject("Invalid arguments");else F=new X(function(u){if(!t.storeName)u(t.name+"/");else u(ph(t,O._defaultConfig))}).then(function(u){for(var E=localStorage.length-1;E>=0;E--){var H=localStorage.key(E);if(H.indexOf(u)===0)localStorage.removeItem(H)}});return U(F,L),F}var t0={_driver:"localStorageWrapper",_initStorage:cn,_support:jn(),iterate:kn,getItem:dn,setItem:rn,removeItem:ln,clear:sn,length:bn,key:an,keys:on,dropInstance:en},h0=function t(L,n){return L===n||typeof L==="number"&&typeof n==="number"&&isNaN(L)&&isNaN(n)},n0=function t(L,n){var O=L.length,F=0;while(F<O){if(h0(L[F],n))return!0;F++}return!1},xh=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"},ut={},Eh={},wt={INDEXEDDB:Un,WEBSQL:qn,LOCALSTORAGE:t0},w0=[wt.INDEXEDDB._driver,wt.WEBSQL._driver,wt.LOCALSTORAGE._driver],Jt=["dropInstance"],Bt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Jt),y0={description:"",driver:w0.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function L0(t,L){t[L]=function(){var n=arguments;return t.ready().then(function(){return t[L].apply(t,n)})}}function Yt(){for(var t=1;t<arguments.length;t++){var L=arguments[t];if(L){for(var n in L)if(L.hasOwnProperty(n))if(xh(L[n]))arguments[0][n]=L[n].slice();else arguments[0][n]=L[n]}}return arguments[0]}var u0=function(){function t(L){Q(this,t);for(var n in wt)if(wt.hasOwnProperty(n)){var O=wt[n],F=O._driver;if(this[n]=F,!ut[F])this.defineDriver(O)}this._defaultConfig=Yt({},y0),this._config=Yt({},this._defaultConfig,L),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return t.prototype.config=function L(n){if((typeof n==="undefined"?"undefined":V(n))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var O in n){if(O==="storeName")n[O]=n[O].replace(/\W/g,"_");if(O==="version"&&typeof n[O]!=="number")return new Error("Database version must be a number.");this._config[O]=n[O]}if("driver"in n&&n.driver)return this.setDriver(this._config.driver);return!0}else if(typeof n==="string")return this._config[n];else return this._config},t.prototype.defineDriver=function L(n,O,F){var u=new X(function(E,H){try{var K=n._driver,W=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!n._driver){H(W);return}var G=Bt.concat("_initStorage");for(var z=0,Z=G.length;z<Z;z++){var N=G[z],Y=!n0(Jt,N);if((Y||n[N])&&typeof n[N]!=="function"){H(W);return}}var _=function c(){var Ot=function ww(p0){return function(){var x0=new Error("Method "+p0+" is not implemented by the current driver"),Hh=X.reject(x0);return U(Hh,arguments[arguments.length-1]),Hh}};for(var St=0,F0=Jt.length;St<F0;St++){var gt=Jt[St];if(!n[gt])n[gt]=Ot(gt)}};_();var P=function c(Ot){if(ut[K])console.info("Redefining LocalForage driver: "+K);ut[K]=n,Eh[K]=Ot,E()};if("_support"in n)if(n._support&&typeof n._support==="function")n._support().then(P,H);else P(!!n._support);else P(!0)}catch(c){H(c)}});return $(u,O,F),u},t.prototype.driver=function L(){return this._driver||null},t.prototype.getDriver=function L(n,O,F){var u=ut[n]?X.resolve(ut[n]):X.reject(new Error("Driver not found."));return $(u,O,F),u},t.prototype.getSerializer=function L(n){var O=X.resolve(Nt);return $(O,n),O},t.prototype.ready=function L(n){var O=this,F=O._driverSet.then(function(){if(O._ready===null)O._ready=O._initDriver();return O._ready});return $(F,n,n),F},t.prototype.setDriver=function L(n,O,F){var u=this;if(!xh(n))n=[n];var E=this._getSupportedDrivers(n);function H(){u._config.driver=u.driver()}function K(z){return u._extend(z),H(),u._ready=u._initStorage(u._config),u._ready}function W(z){return function(){var Z=0;function N(){while(Z<z.length){var Y=z[Z];return Z++,u._dbInfo=null,u._ready=null,u.getDriver(Y).then(K).catch(N)}H();var _=new Error("No available storage method found.");return u._driverSet=X.reject(_),u._driverSet}return N()}}var G=this._driverSet!==null?this._driverSet.catch(function(){return X.resolve()}):X.resolve();return this._driverSet=G.then(function(){var z=E[0];return u._dbInfo=null,u._ready=null,u.getDriver(z).then(function(Z){u._driver=Z._driver,H(),u._wrapLibraryMethodsWithReady(),u._initDriver=W(E)})}).catch(function(){H();var z=new Error("No available storage method found.");return u._driverSet=X.reject(z),u._driverSet}),$(this._driverSet,O,F),this._driverSet},t.prototype.supports=function L(n){return!!Eh[n]},t.prototype._extend=function L(n){Yt(this,n)},t.prototype._getSupportedDrivers=function L(n){var O=[];for(var F=0,u=n.length;F<u;F++){var E=n[F];if(this.supports(E))O.push(E)}return O},t.prototype._wrapLibraryMethodsWithReady=function L(){for(var n=0,O=Bt.length;n<O;n++)L0(this,Bt[n])},t.prototype.createInstance=function L(n){return new t(n)},t}(),O0=new u0;x.exports=O0},{"3":3}]},{},[4])(4)})});function pt(h){const y=globalThis.document,w=y.createElement("style");w.appendChild(y.createTextNode(h)),y.head.append(w)}pt(":root{--ui-primary:#e6f0ff;--ui-secondary:#e9f1fc;--ui-tertiary:#d9e3f2;--ui-modal-overlay:#4c97ffe6;--ui-white:#fff;--ui-white-dim:#ffffffbf;--ui-white-transparent:#ffffff40;--ui-transparent:#fff0;--ui-black-transparent:#00000026;--text-primary:#575e75;--text-primary-transparent:#575e75bf;--motion-primary:#4c97ff;--motion-tertiary:#3373cc;--motion-transparent:#4c97ff59;--motion-light-transparent:#4c97ff26;--red-primary:#ff661a;--red-tertiary:#e64d00;--sound-primary:#cf63cf;--sound-tertiary:#bd42bd;--control-primary:#ffab1a;--data-primary:#ff8c1a;--pen-primary:#0fbd8c;--pen-transparent:#0fbd8c40;--error-primary:#ff8c1a;--error-light:#ffb366;--error-transparent:#ff8c1a40;--extensions-primary:#0fbd8c;--extensions-tertiary:#0b8e69;--extensions-transparent:#0fbd8c59;--extensions-light:#c3efe2;--drop-highlight:#8abbff;--space:.5rem;--standard-font-size:.75rem;--small-font-size:.625rem;--icon-per-row:5;--menu-bar-height:3rem;--language-selector-width:3rem;--tool-bar-height:2.75rem;--library-header-height:3.125rem;--library-filter-bar-height:2.5rem;--form-radius:calc(var(--space)/2);--min-width:1024px;--min-height:640px;--menu-bar-standard-font-size:var(--standard-font-size);--menu-bar-large-font-size:.875rem;--menu-bar-button-size:2rem;--menu-bar-item-max-width:12rem;--z-index-extension-button:42;--z-index-stage-indicator:45;--z-index-add-button:46;--z-index-tooltip:47;--z-index-monitor:48;--z-index-stage-question:49;--z-index-card:480;--z-index-alerts:490;--z-index-menu-bar:491;--z-index-loader:500;--z-index-modal:510;--z-index-drag-layer:1000;--z-index-monitor-dragging:1010;--z-index-dragging-sprite:1020;--z-index-stage-color-picker-background:2000;--z-index-stage-with-color-picker:2010;--z-index-stage-header:5000;--z-index-stage-wrapper-overlay:5000;--z-index-context-menu:10000}html,body,#root{min-width:var(--min-width);min-height:var(--min-height);width:100%;height:100%;margin:0}*{box-sizing:border-box;user-select:none}");pt("body{font-family:Helvetica Neue,Helvetica,Microsoft Yahei,Arial,sans-serif}h2{font-size:1.5rem;font-weight:700}p{font-size:1rem;line-height:1.5em}");var X0=function(h,y,w){for(var p=new M0(y),x=[],J=function(V){var{options:Q,type:A,value:g}=V;if(A!==tt.Variable)if(Q)if(A!==tt.Select)try{x.concat(Q[new Intl.PluralRules(h).select(w[g])].map(J))}catch(R){x.concat(Q.other.map(J))}else x.concat((Q[w[g]]||Q.other).map(J));else x.push(g);else x.push(w[g])};!p.input.done;)J(p.next());return x},tt,Pt=function(h,y){return Pt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,p){w.__proto__=p}||function(w,p){for(var x in p)Object.prototype.hasOwnProperty.call(p,x)&&(w[x]=p[x])},Pt(h,y)},Jh=function(h){function y(w,p){var x=h.call(this,"Translation failed")||this;return x.id=w,x.language=p,x}return function(w,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+p+" is not a constructor or null");function x(){this.constructor=w}Pt(w,p),w.prototype=p===null?Object.create(p):(x.prototype=p.prototype,new x)}(y,h),y.is=function(w){return w instanceof y},y}(Error),V0=function(){function h(y){this.input=y,this.index=0,this.done=!1,this.value="",this.value=this.input.charAt(0)}return h.prototype.next=function(){return++this.index>=this.input.length&&(this.done=!0),this.value=this.input.charAt(this.index)},h.prototype.croak=function(){throw Error("[".concat(this.input,']. Unexpected character "').concat(this.value,'" on position ').concat(this.index,"."))},h}();(function(h){h[h.Plural=0]="Plural",h[h.Select=1]="Select",h[h.Text=2]="Text",h[h.Variable=3]="Variable"})(tt||(tt={}));var T0=["{","}",","],M0=function(){function h(y){this.input=new V0(y)}return h.prototype.next=function(){return this.input.value==="{"?this.readVariable():this.readText()},h.prototype.skip=function(y){y!==this.input.value&&this.input.croak(),this.input.next()},h.prototype.readWhile=function(y){for(var w="";!this.input.done&&y(this.input.value);)w+=this.input.value,this.input.next();return w},h.prototype.readVariable=function(){this.skip("{");var y=this.readWhile(function(p){return!function(x){return T0.includes(x)}(p)}).trim();if(y.length===0&&this.input.croak(),this.input.value==="}")return this.skip("}"),{type:tt.Variable,value:y};this.skip(",");var w=this.readVariableType();return{options:this.readVariableOptions(),type:w,value:y}},h.prototype.readText=function(){return{type:tt.Text,value:this.readWhile(function(y){return y!=="{"&&y!=="}"})}},h.prototype.readVariableType=function(){var y=this.readWhile(function(w){return w!==","}).trim();return y==="plural"?tt.Plural:y==="select"?tt.Select:void this.input.croak()},h.prototype.readVariableOptions=function(){this.skip(",");for(var y={};this.input.value!=="}";)y[this.readText().value.trim()]=this.readExpression();return this.skip("}"),y},h.prototype.readExpression=function(){var y=[];for(this.skip("{");this.input.value!=="}";)y.push(this.next());return this.skip("}"),y},h}(),Wt=function(h,y){h===void 0&&(h="en"),y===void 0&&(y=[]);var w=this;this.memo={},this.onError=console.error,this.formatDate=function(x,J){return new Intl.DateTimeFormat(w.language,J).format(x)},this.formatNumber=function(x,J){return new Intl.NumberFormat(w.language,J).format(x)},this.translate=function(x,J){J===void 0&&(J={});var V=w.getMessageById(x,J.defaultMessage);if(typeof V=="string")try{return X0(w.language,V,J).join("")}catch(Q){w.onError(new Jh(x,w.language))}return V+""},this.getMessageById=function(x,J){if(!w.memo[x]){var V=w.messages[x];V===void 0&&(V=x.split(".").reduce(function(Q,A){return Q?Q[A]:void 0},w.messages)),typeof V!="string"&&(w.onError(new Jh(x,w.language)),V=J||x),w.memo[x]=V}return w.memo[x]};var p=y.find(function(x){return x.language===h});this.language=h,this.messages=p?p.messages:{}};import{createContext as z0,h as xt,Fragment as $t} from"preact";import{useState as Q0,useEffect as U0,useContext as Wh} from"preact/hooks";var _t=function(h,y){var w={};for(var p in h)Object.prototype.hasOwnProperty.call(h,p)&&y.indexOf(p)<0&&(w[p]=h[p]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function"){var x=0;for(p=Object.getOwnPropertySymbols(h);x<p.length;x++)y.indexOf(p[x])<0&&Object.prototype.propertyIsEnumerable.call(h,p[x])&&(w[p[x]]=h[p[x]])}return w},Gt=function(h){var y=Wh(Ct);return h&&h!==y.language?new Wt(h):y.translator},Ct=z0({language:"",locales:[],setLanguage:function(){},translator:new Wt}),Gh=function(h){var{children:y,language:w,locales:p,onError:x}=h,J=Q0(w);U0(function(){J[1](w)},[w]);var V=new Wt(J[0],p);return x&&(V.onError=x),xt(Ct.Provider,{value:{language:J[0],locales:p,setLanguage:J[1],translator:V}},y)},Hw=function(h){var{language:y,value:w}=h,p=_t(h,["children","language","value"]);return xt($t,null,Gt(y).formatDate(w,p))},Kw=function(h){var{language:y,value:w}=h,p=_t(h,["children","language","value"]);return xt($t,null,Gt(y).formatNumber(w,p))},Jw=function(h){var{html:y,id:w,tagName:p}=h,x=p===void 0?"span":p,J=_t(h,["children","html","id","tagName"]),V=Wh(Ct).translator.translate(w,J);return y?xt(x,{dangerouslySetInnerHTML:{__html:V}}):xt($t,null,V)};function Z0(h,y){const w=document.createElement("a"),p=new Blob([h]),x=URL.createObjectURL(p);w.setAttribute("href",x),w.setAttribute("download",y),w.click()}import{Fragment as A0,toChildArray as m0} from"preact";function ft(h){return[].concat(...m0(h).map((y)=>Array.isArray(y)?ft(y):y.type===A0?ft(y.props.children):y))}function D0(h,y){Mh.set(h,y)}function N0(h){const y=[];return h.forEach((w)=>{if(Th.hasOwnProperty(w))y[Th[w]]=Vh[w];else y.push(Vh[w])}),y.filter((w)=>w).join(l?"":"+")}var M={ESC:"Escape",F1:"F1",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",F10:"F10",F11:"F11",F12:"F12",D1:"Digit1",D2:"Digit2",D3:"Digit3",D4:"Digit4",D5:"Digit5",D6:"Digit6",D7:"Digit7",D8:"Digit8",D9:"Digit9",D0:"Digit0",TAB:"Tab",BACKSPACE:"Backspace",DELETE:"Backspace",ENTER:"Enter",RETURN:"Enter",A:"KeyA",B:"KeyB",C:"KeyC",D:"KeyD",E:"KeyE",F:"KeyF",G:"KeyG",H:"KeyH",I:"KeyI",J:"KeyJ",K:"KeyK",L:"KeyL",M:"KeyM",N:"KeyN",O:"KeyO",P:"KeyP",Q:"KeyQ",R:"KeyR",S:"KeyS",T:"KeyT",U:"KeyU",V:"KeyV",W:"KeyW",X:"KeyX",Y:"KeyY",Z:"KeyZ",UP:"ArrowUp",DOWN:"ArrowDown",LEFT:"ArrowLeft",RIGHT:"ArrowRight",SHIFT:"Shift",CTRL:"Control",ALT:"Alt",WIN:"Meta",CONTROL:"Control",OPTION:"Alt",COMMAND:"Meta",META:"Meta"},l=/Mac/i.test(navigator.platform||navigator.userAgent),Vh={[M.ESC]:l?"\u238B":"Esc",[M.F1]:"F1",[M.F2]:"F2",[M.F3]:"F3",[M.F4]:"F4",[M.F5]:"F5",[M.F6]:"F6",[M.F7]:"F7",[M.F8]:"F8",[M.F9]:"F9",[M.F10]:"F10",[M.F11]:"F11",[M.F12]:"F12",[M.D1]:"1",[M.D2]:"2",[M.D3]:"3",[M.D4]:"4",[M.D5]:"5",[M.D6]:"6",[M.D7]:"7",[M.D8]:"8",[M.D9]:"9",[M.D0]:"0",[M.TAB]:l?"\u21E5":"Tab",[M.DELETE]:l?"\u232B":"Backspace",[M.RETURN]:l?"\u21A9":"Enter",[M.A]:"A",[M.B]:"B",[M.C]:"C",[M.D]:"D",[M.E]:"E",[M.F]:"F",[M.G]:"G",[M.H]:"H",[M.I]:"I",[M.J]:"J",[M.K]:"K",[M.L]:"L",[M.M]:"M",[M.N]:"N",[M.O]:"O",[M.P]:"P",[M.Q]:"Q",[M.R]:"R",[M.S]:"S",[M.T]:"T",[M.U]:"U",[M.V]:"V",[M.W]:"W",[M.X]:"X",[M.Y]:"Y",[M.Z]:"Z",[M.UP]:"\u2191",[M.DOWN]:"\u2193",[M.LEFT]:"\u2190",[M.RIGHT]:"\u2192",[M.SHIFT]:l?"\u21E7":"Shift",[M.CONTROL]:l?"\u2303":"Ctrl",[M.OPTION]:l?"\u2325":"Alt",[M.COMMAND]:l?"\u2318":"\u229E"},Th={[M.CONTROL]:0,[M.OPTION]:1,[M.SHIFT]:2,[M.COMMAND]:3},Mh=new Map;window.addEventListener("keydown",(h)=>{Mh.forEach((y,w)=>{const p=(x)=>{if(x===M.CONTROL&&h.ctrlKey)return!0;if(x===M.OPTION&&h.altKey)return!0;if(x===M.SHIFT&&h.shiftKey)return!0;if(x===M.COMMAND&&h.metaKey)return!0;if(x===h.code)return!0;return!1};if(w.every(p)&&typeof y==="function")h.preventDefault(),y()})});var B0=function(h){console&&console.warn&&console.warn(h)},B=function(){B.init.call(this)},Tt=function(h){if(typeof h!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof h)},Uh=function(h){return h._maxListeners===void 0?B.defaultMaxListeners:h._maxListeners},Zh=function(h,y,w,p){var x,J,V;if(Tt(w),J=h._events,J===void 0?(J=h._events=Object.create(null),h._eventsCount=0):(J.newListener!==void 0&&(h.emit("newListener",y,w.listener?w.listener:w),J=h._events),V=J[y]),V===void 0)V=J[y]=w,++h._eventsCount;else if(typeof V=="function"?V=J[y]=p?[w,V]:[V,w]:p?V.unshift(w):V.push(w),x=Uh(h),x>0&&V.length>x&&!V.warned){V.warned=!0;var Q=new Error("Possible EventEmitter memory leak detected. "+V.length+" "+String(y)+" listeners added. Use emitter.setMaxListeners() to increase limit");Q.name="MaxListenersExceededWarning",Q.emitter=h,Q.type=y,Q.count=V.length,B0(Q)}return h},Y0=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)},Ah=function(h,y,w){var p={fired:!1,wrapFn:void 0,target:h,type:y,listener:w},x=Y0.bind(p);return x.listener=w,p.wrapFn=x,x},mh=function(h,y,w){var p=h._events;if(p===void 0)return[];var x=p[y];return x===void 0?[]:typeof x=="function"?w?[x.listener||x]:[x]:w?g0(x):Nh(x,x.length)},Dh=function(h){var y=this._events;if(y!==void 0){var w=y[h];if(typeof w=="function")return 1;if(w!==void 0)return w.length}return 0},Nh=function(h,y){for(var w=new Array(y),p=0;p<y;++p)w[p]=h[p];return w},S0=function(h,y){for(;y+1<h.length;y++)h[y]=h[y+1];h.pop()},g0=function(h){for(var y=new Array(h.length),w=0;w<y.length;++w)y[w]=h[w].listener||h[w];return y};var yt=typeof Reflect=="object"?Reflect:null,Xh=yt&&typeof yt.apply=="function"?yt.apply:function(h,y,w){return Function.prototype.apply.call(h,y,w)},Vt;yt&&typeof yt.ownKeys=="function"?Vt=yt.ownKeys:Object.getOwnPropertySymbols?Vt=function(h){return Object.getOwnPropertyNames(h).concat(Object.getOwnPropertySymbols(h))}:Vt=function(h){return Object.getOwnPropertyNames(h)};var Qh=Number.isNaN||function(h){return h!==h};B.EventEmitter=B;B.prototype._events=void 0;B.prototype._eventsCount=0;B.prototype._maxListeners=void 0;var zh=10;Object.defineProperty(B,"defaultMaxListeners",{enumerable:!0,get:function(){return zh},set:function(h){if(typeof h!="number"||h<0||Qh(h))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+h+".");zh=h}});B.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};B.prototype.setMaxListeners=function(h){if(typeof h!="number"||h<0||Qh(h))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+h+".");return this._maxListeners=h,this};B.prototype.getMaxListeners=function(){return Uh(this)};B.prototype.emit=function(h){for(var y=[],w=1;w<arguments.length;w++)y.push(arguments[w]);var p=h==="error",x=this._events;if(x!==void 0)p=p&&x.error===void 0;else if(!p)return!1;if(p){var J;if(y.length>0&&(J=y[0]),J instanceof Error)throw J;var V=new Error("Unhandled error."+(J?" ("+J.message+")":""));throw V.context=J,V}var Q=x[h];if(Q===void 0)return!1;if(typeof Q=="function")Xh(Q,this,y);else for(var A=Q.length,g=Nh(Q,A),w=0;w<A;++w)Xh(g[w],this,y);return!0};B.prototype.addListener=function(h,y){return Zh(this,h,y,!1)};B.prototype.on=B.prototype.addListener;B.prototype.prependListener=function(h,y){return Zh(this,h,y,!0)};B.prototype.once=function(h,y){return Tt(y),this.on(h,Ah(this,h,y)),this};B.prototype.prependOnceListener=function(h,y){return Tt(y),this.prependListener(h,Ah(this,h,y)),this};B.prototype.removeListener=function(h,y){var w,p,x,J,V;if(Tt(y),p=this._events,p===void 0)return this;if(w=p[h],w===void 0)return this;if(w===y||w.listener===y)--this._eventsCount===0?this._events=Object.create(null):(delete p[h],p.removeListener&&this.emit("removeListener",h,w.listener||y));else if(typeof w!="function"){for(x=-1,J=w.length-1;J>=0;J--)if(w[J]===y||w[J].listener===y){V=w[J].listener,x=J;break}if(x<0)return this;x===0?w.shift():S0(w,x),w.length===1&&(p[h]=w[0]),p.removeListener!==void 0&&this.emit("removeListener",h,V||y)}return this};B.prototype.off=B.prototype.removeListener;B.prototype.removeAllListeners=function(h){var y,w,p;if(w=this._events,w===void 0)return this;if(w.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):w[h]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete w[h]),this;if(arguments.length===0){var x=Object.keys(w),J;for(p=0;p<x.length;++p)J=x[p],J!=="removeListener"&&this.removeAllListeners(J);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(y=w[h],typeof y=="function")this.removeListener(h,y);else if(y!==void 0)for(p=y.length-1;p>=0;p--)this.removeListener(h,y[p]);return this};B.prototype.listeners=function(h){return mh(this,h,!0)};B.prototype.rawListeners=function(h){return mh(this,h,!1)};B.listenerCount=function(h,y){return typeof h.listenerCount=="function"?h.listenerCount(y):Dh.call(h,y)};B.prototype.listenerCount=Dh;B.prototype.eventNames=function(){return this._eventsCount>0?Vt(this._events):[]};var Xw=B.prototype;class Bh extends B{constructor(h){super();this.port=h,this.reader=null,h._serial=this}dispose(){this.close().then(()=>{this.port=null})}getInfo(){return this.port.getInfo()}open(h){return new Promise((y,w)=>{this.port.open(h).then(()=>{const p=()=>{this.reader=this.port.readable.getReader(),this.reader.read().then(({value:x,done:J})=>{if(this.reader.releaseLock(),x)this.emit("data",x);if(J);else p()}).catch(()=>{this.emit("disconnect")})};p(),this.emit("connect"),y()}).catch((p)=>{w(p)})})}close(){return new Promise((h,y)=>{if(this.reader)this.reader.cancel().then(()=>this.port.close()).then(()=>h()).catch((w)=>y(w));else this.reader=null,this.port.close().then(()=>h()).catch((w)=>y(w))})}write(h,y="text"){return new Promise((w,p)=>{const x=this.port.writable.getWriter();if(y==="binary")x.write(h).then(()=>w()).catch((J)=>p(J));else{const J=new TextEncoder;x.write(J.encode(h)).then(()=>w()).catch((V)=>p(V))}x.releaseLock()})}}function Yh(h){return new Promise((y)=>{setTimeout(y,h)})}var P0=()=>Yh(0);var Sh={"zh-CN":"zh-Hans","zh-TW":"zh-Hant","zh-HK":"zh-Hant","zh-MO":"zh-Hant"};function Rt(h){if(Sh[h])return Sh[h];return h}var qt="en",it=navigator.language,{DisplayNames:jt,Locale:$0}=window.Intl,_0=new jt([qt],{type:"language"}),C0=new jt([it],{type:"language"}),Et=new Map,Ph=(h)=>(h=Rt(h))&&Et.has(h)&&h,vt=(h)=>{const y=new $0(h),w=y.textInfo||y.getTextInfo();return w&&w.direction==="rtl"},gh=(h,y={})=>{const w=new jt([h],{type:"language"});return Et.set(h,{language:w.of(h),languageInDefault:_0.of(h),languageInBrowser:C0.of(h)}),{language:h,messages:y}},$h=[gh("en"),gh("zh-Hans")];var k=W0(Ch(),1);import{createContext as f0} from"preact";import{useContext as R0,useReducer as q0} from"preact/hooks";function j0(){const{state:h,dispatch:y}=R0(oh);return{...h,closeProject(){y({type:fh})},async openProject(w){if(typeof w==="stirng")w=await k.default.getItem(key);if(w)y({type:Rh,payload:w});else throw new Error(`${key} does not exist.`)},setProjectName(w){y({type:qh,payload:w})},addFile(w){if(h.fileList.find((p)=>p.id===w.id))throw Error("File already exists");if(w.name)w.name=Mt(h.fileList,w.name);y({type:ih,payload:w})},openFile(w){if(h.fileList.findIndex((p)=>p.id===w)===-1)throw Error("File does not exist");y({type:jh,payload:w})},deleteFile(w){y({type:vh,payload:w})},modifyFile(w){if(h.fileList.find((p)=>w.id?p.id===w.id:p.id===h.selectedFileId)){if(w.name)w.name=Mt(h.fileList,w.name);y({type:Ih,payload:w})}else throw Error("File does not exists")},addAsset(w){if(h.assetList.find((p)=>p.id===w.id))throw Error("Asset already exists");else{if(w.name)w.name=Mt(h.assetList,w.name);y({type:ch,payload:w})}},deleteAsset(...w){if(Array.isArray(w[0]))w=w[0];y({type:sh,payload:w})},modifyAsset(w){if(h.assetList.find((p)=>p.id===w.id)){if(w.name)w.name=Mt(h.assetList,w.name);y({type:dh,payload:w})}else throw Error("Asset does not exists")},setDevice(w){y({type:kh,payload:w})},setEditor(w){y({type:ah,payload:w})},async saveNow(w){const p=Date.now(),x=h.key||p.toString(36),{name:J,editor:V,assetList:Q,fileList:A}=h,g=await k.default.setItem(x,w({key:x,name:J,assetList:Q,fileList:A,modifiedDate:p,editor:{package:V.package}}));return y({type:ct,payload:{key:x,modified:!1}}),g},setModified(w){y({type:ct,payload:{modified:w}})},async listProjects(){const w=[];return await k.default.iterate((p,x)=>{w.push({key:x,name:p.name,image:p.thumb,modifiedDate:p.modifiedDate})}),w},getProject(w){return k.default.getItem(w)},async renameProject(w,p){const x=await k.default.getItem(w);x.name=p,await k.default.setItem(x.key,x)},async duplicateProject(w){const p=await k.default.getItem(w);p.modifiedDate=Date.now(),p.key=p.modifiedDate.toString(36),await k.default.setItem(p.key,p)},async deleteProject(w){await k.default.removeItem(w)}}}function v0({children:h}){const[y,w]=q0(i0,Xt);return I0(oh.Provider,{value:{state:y,dispatch:w},children:h})}import{jsx as I0} from"preact/jsx-runtime";var fh="CLOSE_PROJECT",Rh="OPEN_PROJECT",qh="SET_PROJECT_NAME",ih="ADD_FILE",jh="OPEN_FILE",vh="DELETE_FILE",Ih="MODIFY_FILE",ch="ADD_ASSET",sh="DELETE_ASSET",dh="MODIFY_ASSET",kh="CONNECT_DEVICE",ah="CONFIG_EDITOR",ct="SAVE_DATA";k.default.config({name:"blockcode-store"});var Xt={key:null,name:"",editor:null,assetList:[],fileList:[],selectedFileId:null,device:null,modified:!1},oh=f0({state:Object.assign({},Xt),dispatch:()=>{}}),i0=(h,y)=>{switch(y.type){case fh:return Object.assign({},Xt);case Rh:if(!y.payload.editor)y.payload.editor=h.editor;if(!y.payload.key)y.payload.key=Date.now().toString(36);return Object.assign({},Xt,y.payload);case qh:return{...h,name:y.payload,modified:!0};case ih:return{...h,fileList:h.fileList.concat(y.payload),selectedFileId:y.payload.id,modified:!0};case jh:return{...h,selectedFileId:y.payload};case vh:let w=h.fileList.findIndex((x)=>x.id===y.payload);if(w===-1)return h;const p=h.fileList.filter((x)=>x.id!==y.payload);if(w>=p.length)w=p.length-1;return{...h,fileList:p,selectedFileId:p[w].id,modified:!0};case Ih:return{...h,fileList:h.fileList.map((x)=>{if(y.payload.id?x.id===y.payload.id:x.id===h.selectedFileId)return{...x,...y.payload};return x}),modified:!0};case ch:return{...h,assetList:h.assetList.concat(y.payload),modified:!0};case sh:return{...h,assetList:h.assetList.filter((x)=>!y.payload.includes(x.id)),modified:!0};case dh:return{...h,assetList:h.assetList.map((x)=>{if(x.id===y.payload.id)return{...x,...y.payload};return x}),modified:!0};case kh:return{...h,device:y.payload};case ah:return{...h,editor:Object.assign(h.editor||{},y.payload),modified:!0};case ct:return{...h,...y.payload};default:return h}},Mt=(h,y)=>{if(y=y.trim(),h.find((w)=>w.name===y)){const w=y.replace(/\d+$/,""),p=new RegExp(`${w}(\\d+)\$`);let x=0;for(let J of h){const V=p.exec(J.name);if(V){const Q=parseInt(V[1]);if(Q>x)x=Q}}y=`${w}${x+1}`}return y};import{createContext as c0} from"preact";import{useContext as s0,useReducer as d0} from"preact/hooks";function a0(){const{alerts:h,state:y,dispatch:w}=s0(yn);return{...y,setSplash(p){w({type:bh,payload:p})},createAlert(...p){let x,J,V=0;for(let Q of p){if(typeof Q==="string")x=Q;if(typeof Q==="object")J=Q;if(typeof Q==="number")V=Q}if(x&&h[x])J=J?Object.assign(h[x],J):h[x];if(!J)return;if(!J.id)J.id=Date.now().toString(36);if(w({type:lh,payload:J}),V>0)setTimeout(()=>{w({type:st,payload:J.id})},V)},removeAlert(p){w({type:st,payload:p})},createPrompt(p){w({type:rh,payload:p})},createLayout(p){w({type:tn,payload:p})},clearLayout(){w({type:eh})},selectTab(p){w({type:hn,payload:p})},addTabs(p){w({type:nn,payload:p})},setStoreLibrary(p){w({type:wn,payload:p})}}}function o0({alerts:h,children:y}){const[w,p]=d0(k0,zt);return b0(yn.Provider,{value:{alerts:h,state:w,dispatch:p},children:y})}import{jsx as b0} from"preact/jsx-runtime";var bh="SET_SPLASH",lh="CREATE_ALERT",st="REMOVE_ALERT",rh="CREATE_PROMPT",eh="CLEAR_LAYOUT",tn="CREATE_LAYOUT",hn="SELECT_TAB",nn="ADD_TABS",wn="SHOW_STORE_LIBRARY",zt={splash:!1,alerts:[],prompt:null,mainMenu:null,tabs:[],sidebars:[],pane:!1,tutorials:!1,selectedTabIndex:-1,canEditProjectName:!1,storeLibrary:!1},yn=c0({state:Object.assign({},zt),dispatch:()=>{}}),k0=(h,y)=>{switch(y.type){case tn:return Object.assign({},zt,{splash:h.splash},y.payload);case eh:return Object.assign({},zt);case bh:return{...h,splash:y.payload};case lh:if(h.alerts.find((w)=>w.id===y.payload.id))return{...h,alerts:h.alerts.map((w)=>{if(w.id===y.payload.id)return{...w,...y.payload};return w})};return{...h,alerts:[...h.alerts,y.payload]};case st:return{...h,alerts:h.alerts.filter((w)=>w.id!==y.payload)};case rh:return{...h,prompt:y.payload};case hn:return{...h,selectedTabIndex:y.payload};case nn:return{...h,tabs:[...h.tabs,...y.payload]};case wn:return{...h,storeLibrary:y.payload};default:return h}};import{createContext as l0} from"preact";import{useContext as r0,useReducer as e0} from"preact/hooks";function hw(){const{state:h,dispatch:y}=r0(xn),{translate:w}=Gt(),p=(x)=>{if(!x?.props)return x;if(x.props.children)return x.props.children.map((J)=>p(J)).join("");return w(x.props.id,x.props)};return{...h,addLocaleData(x){y({type:On,payload:h.locales.map(({language:J,messages:V})=>({language:J,messages:Object.assign(V,x[J])}))})},setLanguage(x){if(h.language!==x)y({type:Fn,payload:x})},getText(x,J,V={}){if(typeof J==="object")V=J,J=V.defaultMessage;return w(x,{...V,defaultMessage:J})},maybeLocaleText(x){return p(x)}}}function nw({children:h}){const[y,w]=e0(tw,pn),p=(x)=>{};return un(Gh,{language:y.language,locales:y.locales,onError:p,children:un(xn.Provider,{value:{state:y,dispatch:w},children:h})})}import{jsx as un} from"preact/jsx-runtime";var On="SET_LOCALES",Fn="SET_LANGUAGE",Ln=Ph(it)||qt,pn={locales:$h,language:Ln,supportLanguages:Et,isRtl:vt(Ln)},xn=l0({state:pn,dispatch:()=>{}}),tw=(h,y)=>{switch(y.type){case On:return{...h,locales:y.payload};case Fn:return{...h,language:y.payload,isRtl:vt(y.payload)};default:return h}};export{hw as useLocale,a0 as useLayout,j0 as useEditor,Et as supportLanguages,Yh as sleep,N0 as showHotkey,D0 as setHotkey,P0 as nextTick,ft as flatChildren,Z0 as exportFile,Jw as Text,Bh as Serial,Kw as Numeric,nw as LocalesProvider,o0 as LayoutProvider,M as Keys,v0 as EditorProvider,Hw as DateTime};
