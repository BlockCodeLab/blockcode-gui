var H0=Object.create;var{defineProperty:Jh,getPrototypeOf:K0,getOwnPropertyNames:J0}=Object;var W0=Object.prototype.hasOwnProperty;var G0=(h,y,w)=>{w=h!=null?H0(K0(h)):{};const x=y||!h||!h.__esModule?Jh(w,"default",{value:h,enumerable:!0}):w;for(let F of J0(h))if(!W0.call(x,F))Jh(x,F,{get:()=>h[F],enumerable:!0});return x};var V0=(h,y)=>()=>(y||h((y={exports:{}}).exports,y),y.exports);var Ot=((h)=>typeof require!=="undefined"?require:typeof Proxy!=="undefined"?new Proxy(h,{get:(y,w)=>(typeof require!=="undefined"?require:y)[w]}):h)(function(h){if(typeof require!=="undefined")return require.apply(this,arguments);throw Error('Dynamic require of "'+h+'" is not supported')});var Ch=V0((fh,ct)=>{/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(h){if(typeof fh==="object"&&typeof ct!=="undefined")ct.exports=h();else if(typeof define==="function"&&define.amd)define([],h);else{var y;if(typeof window!=="undefined")y=window;else if(typeof global!=="undefined")y=global;else if(typeof self!=="undefined")y=self;else y=this;y.localforage=h()}})(function(){var h,y,w;return function x(F,J,V){function Q(R,s){if(!J[R]){if(!F[R]){var X=typeof Ot=="function"&&Ot;if(!s&&X)return X(R,!0);if(A)return A(R,!0);var U=new Error("Cannot find module '"+R+"'");throw U.code="MODULE_NOT_FOUND",U}var $=J[R]={exports:{}};F[R][0].call($.exports,function(f){var d=F[R][1][f];return Q(d?d:f)},$,$.exports,x,F,J,V)}return J[R].exports}var A=typeof Ot=="function"&&Ot;for(var S=0;S<V.length;S++)Q(V[S]);return Q}({1:[function(x,F,J){(function(V){var Q=V.MutationObserver||V.WebKitMutationObserver,A;if(Q){var S=0,R=new Q(f),s=V.document.createTextNode("");R.observe(s,{characterData:!0}),A=function(){s.data=S=++S%2}}else if(!V.setImmediate&&typeof V.MessageChannel!=="undefined"){var X=new V.MessageChannel;X.port1.onmessage=f,A=function(){X.port2.postMessage(0)}}else if("document"in V&&"onreadystatechange"in V.document.createElement("script"))A=function(){var C=V.document.createElement("script");C.onreadystatechange=function(){f(),C.onreadystatechange=null,C.parentNode.removeChild(C),C=null},V.document.documentElement.appendChild(C)};else A=function(){setTimeout(f,0)};var U,$=[];function f(){U=!0;var C,a,q=$.length;while(q){a=$,$=[],C=-1;while(++C<q)a[C]();q=$.length}U=!1}F.exports=d;function d(C){if($.push(C)===1&&!U)A()}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],2:[function(x,F,J){var V=x(1);function Q(){}var A={},S=["REJECTED"],R=["FULFILLED"],s=["PENDING"];F.exports=X;function X(T){if(typeof T!=="function")throw new TypeError("resolver must be a function");if(this.state=s,this.queue=[],this.outcome=void 0,T!==Q)d(this,T)}X.prototype.catch=function(T){return this.then(null,T)},X.prototype.then=function(T,D){if(typeof T!=="function"&&this.state===R||typeof D!=="function"&&this.state===S)return this;var m=new this.constructor(Q);if(this.state!==s){var g=this.state===R?T:D;$(m,g,this.outcome)}else this.queue.push(new U(m,T,D));return m};function U(T,D,m){if(this.promise=T,typeof D==="function")this.onFulfilled=D,this.callFulfilled=this.otherCallFulfilled;if(typeof m==="function")this.onRejected=m,this.callRejected=this.otherCallRejected}U.prototype.callFulfilled=function(T){A.resolve(this.promise,T)},U.prototype.otherCallFulfilled=function(T){$(this.promise,this.onFulfilled,T)},U.prototype.callRejected=function(T){A.reject(this.promise,T)},U.prototype.otherCallRejected=function(T){$(this.promise,this.onRejected,T)};function $(T,D,m){V(function(){var g;try{g=D(m)}catch(i){return A.reject(T,i)}if(g===T)A.reject(T,new TypeError("Cannot resolve promise with itself"));else A.resolve(T,g)})}A.resolve=function(T,D){var m=C(f,D);if(m.status==="error")return A.reject(T,m.value);var g=m.value;if(g)d(T,g);else{T.state=R,T.outcome=D;var i=-1,j=T.queue.length;while(++i<j)T.queue[i].callFulfilled(D)}return T},A.reject=function(T,D){T.state=S,T.outcome=D;var m=-1,g=T.queue.length;while(++m<g)T.queue[m].callRejected(D);return T};function f(T){var D=T&&T.then;if(T&&(typeof T==="object"||typeof T==="function")&&typeof D==="function")return function m(){D.apply(T,arguments)}}function d(T,D){var m=!1;function g(I){if(m)return;m=!0,A.reject(T,I)}function i(I){if(m)return;m=!0,A.resolve(T,I)}function j(){D(i,g)}var v=C(j);if(v.status==="error")g(v.value)}function C(T,D){var m={};try{m.value=T(D),m.status="success"}catch(g){m.status="error",m.value=g}return m}X.resolve=a;function a(T){if(T instanceof this)return T;return A.resolve(new this(Q),T)}X.reject=q;function q(T){var D=new this(Q);return A.reject(D,T)}X.all=Qt;function Qt(T){var D=this;if(Object.prototype.toString.call(T)!=="[object Array]")return this.reject(new TypeError("must be an array"));var m=T.length,g=!1;if(!m)return this.resolve([]);var i=new Array(m),j=0,v=-1,I=new this(Q);while(++v<m)o(T[v],v);return I;function o(Lt,Ht){D.resolve(Lt).then(Ut,function(nt){if(!g)g=!0,A.reject(I,nt)});function Ut(nt){if(i[Ht]=nt,++j===m&&!g)g=!0,A.resolve(I,i)}}}X.race=ht;function ht(T){var D=this;if(Object.prototype.toString.call(T)!=="[object Array]")return this.reject(new TypeError("must be an array"));var m=T.length,g=!1;if(!m)return this.resolve([]);var i=-1,j=new this(Q);while(++i<m)v(T[i]);return j;function v(I){D.resolve(I).then(function(o){if(!g)g=!0,A.resolve(j,o)},function(o){if(!g)g=!0,A.reject(j,o)})}}},{"1":1}],3:[function(x,F,J){(function(V){if(typeof V.Promise!=="function")V.Promise=x(2)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"2":2}],4:[function(x,F,J){var V=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function Q(t,L){if(!(t instanceof L))throw new TypeError("Cannot call a class as a function")}function A(){try{if(typeof indexedDB!=="undefined")return indexedDB;if(typeof webkitIndexedDB!=="undefined")return webkitIndexedDB;if(typeof mozIndexedDB!=="undefined")return mozIndexedDB;if(typeof OIndexedDB!=="undefined")return OIndexedDB;if(typeof msIndexedDB!=="undefined")return msIndexedDB}catch(t){return}}var S=A();function R(){try{if(!S||!S.open)return!1;var t=typeof openDatabase!=="undefined"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),L=typeof fetch==="function"&&fetch.toString().indexOf("[native code")!==-1;return(!t||L)&&typeof indexedDB!=="undefined"&&typeof IDBKeyRange!=="undefined"}catch(n){return!1}}function s(t,L){t=t||[],L=L||{};try{return new Blob(t,L)}catch(u){if(u.name!=="TypeError")throw u;var n=typeof BlobBuilder!=="undefined"?BlobBuilder:typeof MSBlobBuilder!=="undefined"?MSBlobBuilder:typeof MozBlobBuilder!=="undefined"?MozBlobBuilder:WebKitBlobBuilder,p=new n;for(var O=0;O<t.length;O+=1)p.append(t[O]);return p.getBlob(L.type)}}if(typeof Promise==="undefined")x(3);var X=Promise;function U(t,L){if(L)t.then(function(n){L(null,n)},function(n){L(n)})}function $(t,L,n){if(typeof L==="function")t.then(L);if(typeof n==="function")t.catch(n)}function f(t){if(typeof t!=="string")console.warn(t+" used as a key, but it is not a string."),t=String(t);return t}function d(){if(arguments.length&&typeof arguments[arguments.length-1]==="function")return arguments[arguments.length-1]}var C="local-forage-detect-blob-support",a=void 0,q={},Qt=Object.prototype.toString,ht="readonly",T="readwrite";function D(t){var L=t.length,n=new ArrayBuffer(L),p=new Uint8Array(n);for(var O=0;O<L;O++)p[O]=t.charCodeAt(O);return n}function m(t){return new X(function(L){var n=t.transaction(C,T),p=s([""]);n.objectStore(C).put(p,"key"),n.onabort=function(O){O.preventDefault(),O.stopPropagation(),L(!1)},n.oncomplete=function(){var O=navigator.userAgent.match(/Chrome\/(\d+)/),u=navigator.userAgent.match(/Edge\//);L(u||!O||parseInt(O[1],10)>=43)}}).catch(function(){return!1})}function g(t){if(typeof a==="boolean")return X.resolve(a);return m(t).then(function(L){return a=L,a})}function i(t){var L=q[t.name],n={};if(n.promise=new X(function(p,O){n.resolve=p,n.reject=O}),L.deferredOperations.push(n),!L.dbReady)L.dbReady=n.promise;else L.dbReady=L.dbReady.then(function(){return n.promise})}function j(t){var L=q[t.name],n=L.deferredOperations.pop();if(n)return n.resolve(),n.promise}function v(t,L){var n=q[t.name],p=n.deferredOperations.pop();if(p)return p.reject(L),p.promise}function I(t,L){return new X(function(n,p){if(q[t.name]=q[t.name]||at(),t.db)if(L)i(t),t.db.close();else return n(t.db);var O=[t.name];if(L)O.push(t.version);var u=S.open.apply(S,O);if(L)u.onupgradeneeded=function(E){var H=u.result;try{if(H.createObjectStore(t.storeName),E.oldVersion<=1)H.createObjectStore(C)}catch(K){if(K.name==="ConstraintError")console.warn('The database "'+t.name+'" has been upgraded from version '+E.oldVersion+" to version "+E.newVersion+', but the storage "'+t.storeName+'" already exists.');else throw K}};u.onerror=function(E){E.preventDefault(),p(u.error)},u.onsuccess=function(){var E=u.result;E.onversionchange=function(H){H.target.close()},n(E),j(t)}})}function o(t){return I(t,!1)}function Lt(t){return I(t,!0)}function Ht(t,L){if(!t.db)return!0;var n=!t.db.objectStoreNames.contains(t.storeName),p=t.version<t.db.version,O=t.version>t.db.version;if(p){if(t.version!==L)console.warn('The database "'+t.name+`" can't be downgraded from version `+t.db.version+" to version "+t.version+".");t.version=t.db.version}if(O||n){if(n){var u=t.db.version+1;if(u>t.version)t.version=u}return!0}return!1}function Ut(t){return new X(function(L,n){var p=new FileReader;p.onerror=n,p.onloadend=function(O){var u=btoa(O.target.result||"");L({__local_forage_encoded_blob:!0,data:u,type:t.type})},p.readAsBinaryString(t)})}function nt(t){var L=D(atob(t.data));return s([L],{type:t.type})}function kt(t){return t&&t.__local_forage_encoded_blob}function Hn(t){var L=this,n=L._initReady().then(function(){var p=q[L._dbInfo.name];if(p&&p.dbReady)return p.dbReady});return $(n,t,t),n}function Kn(t){i(t);var L=q[t.name],n=L.forages;for(var p=0;p<n.length;p++){var O=n[p];if(O._dbInfo.db)O._dbInfo.db.close(),O._dbInfo.db=null}return t.db=null,o(t).then(function(u){if(t.db=u,Ht(t))return Lt(t);return u}).then(function(u){t.db=L.db=u;for(var E=0;E<n.length;E++)n[E]._dbInfo.db=u}).catch(function(u){throw v(t,u),u})}function b(t,L,n,p){if(p===void 0)p=1;try{var O=t.db.transaction(t.storeName,L);n(null,O)}catch(u){if(p>0&&(!t.db||u.name==="InvalidStateError"||u.name==="NotFoundError"))return X.resolve().then(function(){if(!t.db||u.name==="NotFoundError"&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version){if(t.db)t.version=t.db.version+1;return Lt(t)}}).then(function(){return Kn(t).then(function(){b(t,L,n,p-1)})}).catch(n);n(u)}}function at(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Jn(t){var L=this,n={db:null};if(t)for(var p in t)n[p]=t[p];var O=q[n.name];if(!O)O=at(),q[n.name]=O;if(O.forages.push(L),!L._initReady)L._initReady=L.ready,L.ready=Hn;var u=[];function E(){return X.resolve()}for(var H=0;H<O.forages.length;H++){var K=O.forages[H];if(K!==L)u.push(K._initReady().catch(E))}var W=O.forages.slice(0);return X.all(u).then(function(){return n.db=O.db,o(n)}).then(function(G){if(n.db=G,Ht(n,L._defaultConfig.version))return Lt(n);return G}).then(function(G){n.db=O.db=G,L._dbInfo=n;for(var z=0;z<W.length;z++){var Z=W[z];if(Z!==L)Z._dbInfo.db=n.db,Z._dbInfo.version=n.version}})}function Wn(t,L){var n=this;t=f(t);var p=new X(function(O,u){n.ready().then(function(){b(n._dbInfo,ht,function(E,H){if(E)return u(E);try{var K=H.objectStore(n._dbInfo.storeName),W=K.get(t);W.onsuccess=function(){var G=W.result;if(G===void 0)G=null;if(kt(G))G=nt(G);O(G)},W.onerror=function(){u(W.error)}}catch(G){u(G)}})}).catch(u)});return U(p,L),p}function Gn(t,L){var n=this,p=new X(function(O,u){n.ready().then(function(){b(n._dbInfo,ht,function(E,H){if(E)return u(E);try{var K=H.objectStore(n._dbInfo.storeName),W=K.openCursor(),G=1;W.onsuccess=function(){var z=W.result;if(z){var Z=z.value;if(kt(Z))Z=nt(Z);var N=t(Z,z.key,G++);if(N!==void 0)O(N);else z.continue()}else O()},W.onerror=function(){u(W.error)}}catch(z){u(z)}})}).catch(u)});return U(p,L),p}function Vn(t,L,n){var p=this;t=f(t);var O=new X(function(u,E){var H;p.ready().then(function(){if(H=p._dbInfo,Qt.call(L)==="[object Blob]")return g(H.db).then(function(K){if(K)return L;return Ut(L)});return L}).then(function(K){b(p._dbInfo,T,function(W,G){if(W)return E(W);try{var z=G.objectStore(p._dbInfo.storeName);if(K===null)K=void 0;var Z=z.put(K,t);G.oncomplete=function(){if(K===void 0)K=null;u(K)},G.onabort=G.onerror=function(){var N=Z.error?Z.error:Z.transaction.error;E(N)}}catch(N){E(N)}})}).catch(E)});return U(O,n),O}function Tn(t,L){var n=this;t=f(t);var p=new X(function(O,u){n.ready().then(function(){b(n._dbInfo,T,function(E,H){if(E)return u(E);try{var K=H.objectStore(n._dbInfo.storeName),W=K.delete(t);H.oncomplete=function(){O()},H.onerror=function(){u(W.error)},H.onabort=function(){var G=W.error?W.error:W.transaction.error;u(G)}}catch(G){u(G)}})}).catch(u)});return U(p,L),p}function Mn(t){var L=this,n=new X(function(p,O){L.ready().then(function(){b(L._dbInfo,T,function(u,E){if(u)return O(u);try{var H=E.objectStore(L._dbInfo.storeName),K=H.clear();E.oncomplete=function(){p()},E.onabort=E.onerror=function(){var W=K.error?K.error:K.transaction.error;O(W)}}catch(W){O(W)}})}).catch(O)});return U(n,t),n}function Xn(t){var L=this,n=new X(function(p,O){L.ready().then(function(){b(L._dbInfo,ht,function(u,E){if(u)return O(u);try{var H=E.objectStore(L._dbInfo.storeName),K=H.count();K.onsuccess=function(){p(K.result)},K.onerror=function(){O(K.error)}}catch(W){O(W)}})}).catch(O)});return U(n,t),n}function zn(t,L){var n=this,p=new X(function(O,u){if(t<0){O(null);return}n.ready().then(function(){b(n._dbInfo,ht,function(E,H){if(E)return u(E);try{var K=H.objectStore(n._dbInfo.storeName),W=!1,G=K.openKeyCursor();G.onsuccess=function(){var z=G.result;if(!z){O(null);return}if(t===0)O(z.key);else if(!W)W=!0,z.advance(t);else O(z.key)},G.onerror=function(){u(G.error)}}catch(z){u(z)}})}).catch(u)});return U(p,L),p}function Qn(t){var L=this,n=new X(function(p,O){L.ready().then(function(){b(L._dbInfo,ht,function(u,E){if(u)return O(u);try{var H=E.objectStore(L._dbInfo.storeName),K=H.openKeyCursor(),W=[];K.onsuccess=function(){var G=K.result;if(!G){p(W);return}W.push(G.key),G.continue()},K.onerror=function(){O(K.error)}}catch(G){O(G)}})}).catch(O)});return U(n,t),n}function Un(t,L){L=d.apply(this,arguments);var n=this.config();if(t=typeof t!=="function"&&t||{},!t.name)t.name=t.name||n.name,t.storeName=t.storeName||n.storeName;var p=this,O;if(!t.name)O=X.reject("Invalid arguments");else{var u=t.name===n.name&&p._dbInfo.db,E=u?X.resolve(p._dbInfo.db):o(t).then(function(H){var K=q[t.name],W=K.forages;K.db=H;for(var G=0;G<W.length;G++)W[G]._dbInfo.db=H;return H});if(!t.storeName)O=E.then(function(H){i(t);var K=q[t.name],W=K.forages;H.close();for(var G=0;G<W.length;G++){var z=W[G];z._dbInfo.db=null}var Z=new X(function(N,Y){var _=S.deleteDatabase(t.name);_.onerror=function(){var P=_.result;if(P)P.close();Y(_.error)},_.onblocked=function(){console.warn('dropInstance blocked for database "'+t.name+'" until all open connections are closed')},_.onsuccess=function(){var P=_.result;if(P)P.close();N(P)}});return Z.then(function(N){K.db=N;for(var Y=0;Y<W.length;Y++){var _=W[Y];j(_._dbInfo)}}).catch(function(N){throw(v(t,N)||X.resolve()).catch(function(){}),N})});else O=E.then(function(H){if(!H.objectStoreNames.contains(t.storeName))return;var K=H.version+1;i(t);var W=q[t.name],G=W.forages;H.close();for(var z=0;z<G.length;z++){var Z=G[z];Z._dbInfo.db=null,Z._dbInfo.version=K}var N=new X(function(Y,_){var P=S.open(t.name,K);P.onerror=function(c){var pt=P.result;pt.close(),_(c)},P.onupgradeneeded=function(){var c=P.result;c.deleteObjectStore(t.storeName)},P.onsuccess=function(){var c=P.result;c.close(),Y(c)}});return N.then(function(Y){W.db=Y;for(var _=0;_<G.length;_++){var P=G[_];P._dbInfo.db=Y,j(P._dbInfo)}}).catch(function(Y){throw(v(t,Y)||X.resolve()).catch(function(){}),Y})})}return U(O,L),O}var Zn={_driver:"asyncStorage",_initStorage:Jn,_support:R(),iterate:Gn,getItem:Wn,setItem:Vn,removeItem:Tn,clear:Mn,length:Xn,key:zn,keys:Qn,dropInstance:Un};function An(){return typeof openDatabase==="function"}var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",mn="~~local_forage_type~",ot=/^~~local_forage_type~([^~]+)~/,Kt="__lfsc__:",Zt=Kt.length,At="arbf",mt="blob",bt="si08",lt="ui08",rt="uic8",et="si16",th="si32",hh="ur16",nh="ui32",wh="fl32",yh="fl64",Lh=Zt+At.length,uh=Object.prototype.toString;function ph(t){var L=t.length*0.75,n=t.length,p,O=0,u,E,H,K;if(t[t.length-1]==="="){if(L--,t[t.length-2]==="=")L--}var W=new ArrayBuffer(L),G=new Uint8Array(W);for(p=0;p<n;p+=4)u=r.indexOf(t[p]),E=r.indexOf(t[p+1]),H=r.indexOf(t[p+2]),K=r.indexOf(t[p+3]),G[O++]=u<<2|E>>4,G[O++]=(E&15)<<4|H>>2,G[O++]=(H&3)<<6|K&63;return W}function Dt(t){var L=new Uint8Array(t),n="",p;for(p=0;p<L.length;p+=3)n+=r[L[p]>>2],n+=r[(L[p]&3)<<4|L[p+1]>>4],n+=r[(L[p+1]&15)<<2|L[p+2]>>6],n+=r[L[p+2]&63];if(L.length%3===2)n=n.substring(0,n.length-1)+"=";else if(L.length%3===1)n=n.substring(0,n.length-2)+"==";return n}function Dn(t,L){var n="";if(t)n=uh.call(t);if(t&&(n==="[object ArrayBuffer]"||t.buffer&&uh.call(t.buffer)==="[object ArrayBuffer]")){var p,O=Kt;if(t instanceof ArrayBuffer)p=t,O+=At;else if(p=t.buffer,n==="[object Int8Array]")O+=bt;else if(n==="[object Uint8Array]")O+=lt;else if(n==="[object Uint8ClampedArray]")O+=rt;else if(n==="[object Int16Array]")O+=et;else if(n==="[object Uint16Array]")O+=hh;else if(n==="[object Int32Array]")O+=th;else if(n==="[object Uint32Array]")O+=nh;else if(n==="[object Float32Array]")O+=wh;else if(n==="[object Float64Array]")O+=yh;else L(new Error("Failed to get type for BinaryArray"));L(O+Dt(p))}else if(n==="[object Blob]"){var u=new FileReader;u.onload=function(){var E=mn+t.type+"~"+Dt(this.result);L(Kt+mt+E)},u.readAsArrayBuffer(t)}else try{L(JSON.stringify(t))}catch(E){console.error("Couldn't convert value into a JSON string: ",t),L(null,E)}}function Nn(t){if(t.substring(0,Zt)!==Kt)return JSON.parse(t);var L=t.substring(Lh),n=t.substring(Zt,Lh),p;if(n===mt&&ot.test(L)){var O=L.match(ot);p=O[1],L=L.substring(O[0].length)}var u=ph(L);switch(n){case At:return u;case mt:return s([u],{type:p});case bt:return new Int8Array(u);case lt:return new Uint8Array(u);case rt:return new Uint8ClampedArray(u);case et:return new Int16Array(u);case hh:return new Uint16Array(u);case th:return new Int32Array(u);case nh:return new Uint32Array(u);case wh:return new Float32Array(u);case yh:return new Float64Array(u);default:throw new Error("Unkown type: "+n)}}var Nt={serialize:Dn,deserialize:Nn,stringToBuffer:ph,bufferToString:Dt};function Oh(t,L,n,p){t.executeSql("CREATE TABLE IF NOT EXISTS "+L.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,p)}function Bn(t){var L=this,n={db:null};if(t)for(var p in t)n[p]=typeof t[p]!=="string"?t[p].toString():t[p];var O=new X(function(u,E){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(H){return E(H)}n.db.transaction(function(H){Oh(H,n,function(){L._dbInfo=n,u()},function(K,W){E(W)})},E)});return n.serializer=Nt,O}function e(t,L,n,p,O,u){t.executeSql(n,p,O,function(E,H){if(H.code===H.SYNTAX_ERR)E.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[L.storeName],function(K,W){if(!W.rows.length)Oh(K,L,function(){K.executeSql(n,p,O,u)},u);else u(K,H)},u);else u(E,H)},u)}function Yn(t,L){var n=this;t=f(t);var p=new X(function(O,u){n.ready().then(function(){var E=n._dbInfo;E.db.transaction(function(H){e(H,E,"SELECT * FROM "+E.storeName+" WHERE key = ? LIMIT 1",[t],function(K,W){var G=W.rows.length?W.rows.item(0).value:null;if(G)G=E.serializer.deserialize(G);O(G)},function(K,W){u(W)})})}).catch(u)});return U(p,L),p}function gn(t,L){var n=this,p=new X(function(O,u){n.ready().then(function(){var E=n._dbInfo;E.db.transaction(function(H){e(H,E,"SELECT * FROM "+E.storeName,[],function(K,W){var G=W.rows,z=G.length;for(var Z=0;Z<z;Z++){var N=G.item(Z),Y=N.value;if(Y)Y=E.serializer.deserialize(Y);if(Y=t(Y,N.key,Z+1),Y!==void 0){O(Y);return}}O()},function(K,W){u(W)})})}).catch(u)});return U(p,L),p}function Fh(t,L,n,p){var O=this;t=f(t);var u=new X(function(E,H){O.ready().then(function(){if(L===void 0)L=null;var K=L,W=O._dbInfo;W.serializer.serialize(L,function(G,z){if(z)H(z);else W.db.transaction(function(Z){e(Z,W,"INSERT OR REPLACE INTO "+W.storeName+" (key, value) VALUES (?, ?)",[t,G],function(){E(K)},function(N,Y){H(Y)})},function(Z){if(Z.code===Z.QUOTA_ERR){if(p>0){E(Fh.apply(O,[t,K,n,p-1]));return}H(Z)}})})}).catch(H)});return U(u,n),u}function Sn(t,L,n){return Fh.apply(this,[t,L,n,1])}function Pn(t,L){var n=this;t=f(t);var p=new X(function(O,u){n.ready().then(function(){var E=n._dbInfo;E.db.transaction(function(H){e(H,E,"DELETE FROM "+E.storeName+" WHERE key = ?",[t],function(){O()},function(K,W){u(W)})})}).catch(u)});return U(p,L),p}function $n(t){var L=this,n=new X(function(p,O){L.ready().then(function(){var u=L._dbInfo;u.db.transaction(function(E){e(E,u,"DELETE FROM "+u.storeName,[],function(){p()},function(H,K){O(K)})})}).catch(O)});return U(n,t),n}function _n(t){var L=this,n=new X(function(p,O){L.ready().then(function(){var u=L._dbInfo;u.db.transaction(function(E){e(E,u,"SELECT COUNT(key) as c FROM "+u.storeName,[],function(H,K){var W=K.rows.item(0).c;p(W)},function(H,K){O(K)})})}).catch(O)});return U(n,t),n}function fn(t,L){var n=this,p=new X(function(O,u){n.ready().then(function(){var E=n._dbInfo;E.db.transaction(function(H){e(H,E,"SELECT key FROM "+E.storeName+" WHERE id = ? LIMIT 1",[t+1],function(K,W){var G=W.rows.length?W.rows.item(0).key:null;O(G)},function(K,W){u(W)})})}).catch(u)});return U(p,L),p}function Cn(t){var L=this,n=new X(function(p,O){L.ready().then(function(){var u=L._dbInfo;u.db.transaction(function(E){e(E,u,"SELECT key FROM "+u.storeName,[],function(H,K){var W=[];for(var G=0;G<K.rows.length;G++)W.push(K.rows.item(G).key);p(W)},function(H,K){O(K)})})}).catch(O)});return U(n,t),n}function Rn(t){return new X(function(L,n){t.transaction(function(p){p.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(O,u){var E=[];for(var H=0;H<u.rows.length;H++)E.push(u.rows.item(H).name);L({db:t,storeNames:E})},function(O,u){n(u)})},function(p){n(p)})})}function qn(t,L){L=d.apply(this,arguments);var n=this.config();if(t=typeof t!=="function"&&t||{},!t.name)t.name=t.name||n.name,t.storeName=t.storeName||n.storeName;var p=this,O;if(!t.name)O=X.reject("Invalid arguments");else O=new X(function(u){var E;if(t.name===n.name)E=p._dbInfo.db;else E=openDatabase(t.name,"","",0);if(!t.storeName)u(Rn(E));else u({db:E,storeNames:[t.storeName]})}).then(function(u){return new X(function(E,H){u.db.transaction(function(K){function W(N){return new X(function(Y,_){K.executeSql("DROP TABLE IF EXISTS "+N,[],function(){Y()},function(P,c){_(c)})})}var G=[];for(var z=0,Z=u.storeNames.length;z<Z;z++)G.push(W(u.storeNames[z]));X.all(G).then(function(){E()}).catch(function(N){H(N)})},function(K){H(K)})})});return U(O,L),O}var jn={_driver:"webSQLStorage",_initStorage:Bn,_support:An(),iterate:gn,getItem:Yn,setItem:Sn,removeItem:Pn,clear:$n,length:_n,key:fn,keys:Cn,dropInstance:qn};function vn(){try{return typeof localStorage!=="undefined"&&"setItem"in localStorage&&!!localStorage.setItem}catch(t){return!1}}function xh(t,L){var n=t.name+"/";if(t.storeName!==L.storeName)n+=t.storeName+"/";return n}function In(){var t="_localforage_support_test";try{return localStorage.setItem(t,!0),localStorage.removeItem(t),!1}catch(L){return!0}}function cn(){return!In()||localStorage.length>0}function sn(t){var L=this,n={};if(t)for(var p in t)n[p]=t[p];if(n.keyPrefix=xh(t,L._defaultConfig),!cn())return X.reject();return L._dbInfo=n,n.serializer=Nt,X.resolve()}function dn(t){var L=this,n=L.ready().then(function(){var p=L._dbInfo.keyPrefix;for(var O=localStorage.length-1;O>=0;O--){var u=localStorage.key(O);if(u.indexOf(p)===0)localStorage.removeItem(u)}});return U(n,t),n}function kn(t,L){var n=this;t=f(t);var p=n.ready().then(function(){var O=n._dbInfo,u=localStorage.getItem(O.keyPrefix+t);if(u)u=O.serializer.deserialize(u);return u});return U(p,L),p}function an(t,L){var n=this,p=n.ready().then(function(){var O=n._dbInfo,u=O.keyPrefix,E=u.length,H=localStorage.length,K=1;for(var W=0;W<H;W++){var G=localStorage.key(W);if(G.indexOf(u)!==0)continue;var z=localStorage.getItem(G);if(z)z=O.serializer.deserialize(z);if(z=t(z,G.substring(E),K++),z!==void 0)return z}});return U(p,L),p}function on(t,L){var n=this,p=n.ready().then(function(){var O=n._dbInfo,u;try{u=localStorage.key(t)}catch(E){u=null}if(u)u=u.substring(O.keyPrefix.length);return u});return U(p,L),p}function bn(t){var L=this,n=L.ready().then(function(){var p=L._dbInfo,O=localStorage.length,u=[];for(var E=0;E<O;E++){var H=localStorage.key(E);if(H.indexOf(p.keyPrefix)===0)u.push(H.substring(p.keyPrefix.length))}return u});return U(n,t),n}function ln(t){var L=this,n=L.keys().then(function(p){return p.length});return U(n,t),n}function rn(t,L){var n=this;t=f(t);var p=n.ready().then(function(){var O=n._dbInfo;localStorage.removeItem(O.keyPrefix+t)});return U(p,L),p}function en(t,L,n){var p=this;t=f(t);var O=p.ready().then(function(){if(L===void 0)L=null;var u=L;return new X(function(E,H){var K=p._dbInfo;K.serializer.serialize(L,function(W,G){if(G)H(G);else try{localStorage.setItem(K.keyPrefix+t,W),E(u)}catch(z){if(z.name==="QuotaExceededError"||z.name==="NS_ERROR_DOM_QUOTA_REACHED")H(z);H(z)}})})});return U(O,n),O}function t0(t,L){if(L=d.apply(this,arguments),t=typeof t!=="function"&&t||{},!t.name){var n=this.config();t.name=t.name||n.name,t.storeName=t.storeName||n.storeName}var p=this,O;if(!t.name)O=X.reject("Invalid arguments");else O=new X(function(u){if(!t.storeName)u(t.name+"/");else u(xh(t,p._defaultConfig))}).then(function(u){for(var E=localStorage.length-1;E>=0;E--){var H=localStorage.key(E);if(H.indexOf(u)===0)localStorage.removeItem(H)}});return U(O,L),O}var h0={_driver:"localStorageWrapper",_initStorage:sn,_support:vn(),iterate:an,getItem:kn,setItem:en,removeItem:rn,clear:dn,length:ln,key:on,keys:bn,dropInstance:t0},n0=function t(L,n){return L===n||typeof L==="number"&&typeof n==="number"&&isNaN(L)&&isNaN(n)},w0=function t(L,n){var p=L.length,O=0;while(O<p){if(n0(L[O],n))return!0;O++}return!1},Eh=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"},ut={},Hh={},wt={INDEXEDDB:Zn,WEBSQL:jn,LOCALSTORAGE:h0},y0=[wt.INDEXEDDB._driver,wt.WEBSQL._driver,wt.LOCALSTORAGE._driver],Jt=["dropInstance"],Bt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Jt),L0={description:"",driver:y0.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function u0(t,L){t[L]=function(){var n=arguments;return t.ready().then(function(){return t[L].apply(t,n)})}}function Yt(){for(var t=1;t<arguments.length;t++){var L=arguments[t];if(L){for(var n in L)if(L.hasOwnProperty(n))if(Eh(L[n]))arguments[0][n]=L[n].slice();else arguments[0][n]=L[n]}}return arguments[0]}var p0=function(){function t(L){Q(this,t);for(var n in wt)if(wt.hasOwnProperty(n)){var p=wt[n],O=p._driver;if(this[n]=O,!ut[O])this.defineDriver(p)}this._defaultConfig=Yt({},L0),this._config=Yt({},this._defaultConfig,L),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return t.prototype.config=function L(n){if((typeof n==="undefined"?"undefined":V(n))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var p in n){if(p==="storeName")n[p]=n[p].replace(/\W/g,"_");if(p==="version"&&typeof n[p]!=="number")return new Error("Database version must be a number.");this._config[p]=n[p]}if("driver"in n&&n.driver)return this.setDriver(this._config.driver);return!0}else if(typeof n==="string")return this._config[n];else return this._config},t.prototype.defineDriver=function L(n,p,O){var u=new X(function(E,H){try{var K=n._driver,W=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!n._driver){H(W);return}var G=Bt.concat("_initStorage");for(var z=0,Z=G.length;z<Z;z++){var N=G[z],Y=!w0(Jt,N);if((Y||n[N])&&typeof n[N]!=="function"){H(W);return}}var _=function c(){var pt=function yw(x0){return function(){var E0=new Error("Method "+x0+" is not implemented by the current driver"),Kh=X.reject(E0);return U(Kh,arguments[arguments.length-1]),Kh}};for(var gt=0,F0=Jt.length;gt<F0;gt++){var St=Jt[gt];if(!n[St])n[St]=pt(St)}};_();var P=function c(pt){if(ut[K])console.info("Redefining LocalForage driver: "+K);ut[K]=n,Hh[K]=pt,E()};if("_support"in n)if(n._support&&typeof n._support==="function")n._support().then(P,H);else P(!!n._support);else P(!0)}catch(c){H(c)}});return $(u,p,O),u},t.prototype.driver=function L(){return this._driver||null},t.prototype.getDriver=function L(n,p,O){var u=ut[n]?X.resolve(ut[n]):X.reject(new Error("Driver not found."));return $(u,p,O),u},t.prototype.getSerializer=function L(n){var p=X.resolve(Nt);return $(p,n),p},t.prototype.ready=function L(n){var p=this,O=p._driverSet.then(function(){if(p._ready===null)p._ready=p._initDriver();return p._ready});return $(O,n,n),O},t.prototype.setDriver=function L(n,p,O){var u=this;if(!Eh(n))n=[n];var E=this._getSupportedDrivers(n);function H(){u._config.driver=u.driver()}function K(z){return u._extend(z),H(),u._ready=u._initStorage(u._config),u._ready}function W(z){return function(){var Z=0;function N(){while(Z<z.length){var Y=z[Z];return Z++,u._dbInfo=null,u._ready=null,u.getDriver(Y).then(K).catch(N)}H();var _=new Error("No available storage method found.");return u._driverSet=X.reject(_),u._driverSet}return N()}}var G=this._driverSet!==null?this._driverSet.catch(function(){return X.resolve()}):X.resolve();return this._driverSet=G.then(function(){var z=E[0];return u._dbInfo=null,u._ready=null,u.getDriver(z).then(function(Z){u._driver=Z._driver,H(),u._wrapLibraryMethodsWithReady(),u._initDriver=W(E)})}).catch(function(){H();var z=new Error("No available storage method found.");return u._driverSet=X.reject(z),u._driverSet}),$(this._driverSet,p,O),this._driverSet},t.prototype.supports=function L(n){return!!Hh[n]},t.prototype._extend=function L(n){Yt(this,n)},t.prototype._getSupportedDrivers=function L(n){var p=[];for(var O=0,u=n.length;O<u;O++){var E=n[O];if(this.supports(E))p.push(E)}return p},t.prototype._wrapLibraryMethodsWithReady=function L(){for(var n=0,p=Bt.length;n<p;n++)u0(this,Bt[n])},t.prototype.createInstance=function L(n){return new t(n)},t}(),O0=new p0;F.exports=O0},{"3":3}]},{},[4])(4)})});function Ft(h){const y=globalThis.document,w=y.createElement("style");w.appendChild(y.createTextNode(h)),y.head.append(w)}Ft(":root{--ui-primary:#e6f0ff;--ui-secondary:#e9f1fc;--ui-tertiary:#d9e3f2;--ui-modal-overlay:#4c97ffe6;--ui-white:#fff;--ui-white-dim:#ffffffbf;--ui-white-transparent:#ffffff40;--ui-transparent:#fff0;--ui-black-transparent:#00000026;--text-primary:#575e75;--text-primary-transparent:#575e75bf;--motion-primary:#4c97ff;--motion-tertiary:#3373cc;--motion-transparent:#4c97ff59;--motion-light-transparent:#4c97ff26;--red-primary:#ff661a;--red-tertiary:#e64d00;--sound-primary:#cf63cf;--sound-tertiary:#bd42bd;--control-primary:#ffab1a;--data-primary:#ff8c1a;--pen-primary:#0fbd8c;--pen-transparent:#0fbd8c40;--error-primary:#ff8c1a;--error-light:#ffb366;--error-transparent:#ff8c1a40;--extensions-primary:#0fbd8c;--extensions-tertiary:#0b8e69;--extensions-transparent:#0fbd8c59;--extensions-light:#c3efe2;--drop-highlight:#8abbff;--space:.5rem;--standard-font-size:.75rem;--small-font-size:.625rem;--icon-per-row:5;--menu-bar-height:3rem;--language-selector-width:3rem;--tool-bar-height:2.75rem;--library-header-height:3.125rem;--library-filter-bar-height:2.5rem;--form-radius:calc(var(--space)/2);--min-width:1024px;--min-height:640px;--menu-bar-standard-font-size:var(--standard-font-size);--menu-bar-large-font-size:.875rem;--menu-bar-button-size:2rem;--menu-bar-item-max-width:12rem;--z-index-extension-button:42;--z-index-stage-indicator:45;--z-index-add-button:46;--z-index-tooltip:47;--z-index-monitor:48;--z-index-stage-question:49;--z-index-card:480;--z-index-alerts:490;--z-index-menu-bar:491;--z-index-loader:500;--z-index-modal:510;--z-index-drag-layer:1000;--z-index-monitor-dragging:1010;--z-index-dragging-sprite:1020;--z-index-stage-color-picker-background:2000;--z-index-stage-with-color-picker:2010;--z-index-stage-header:5000;--z-index-stage-wrapper-overlay:5000;--z-index-context-menu:10000}html,body,#root{min-width:var(--min-width);min-height:var(--min-height);width:100%;height:100%;margin:0}*{box-sizing:border-box;user-select:none}");Ft("body{font-family:Helvetica Neue,Helvetica,Microsoft Yahei,Arial,sans-serif}h2{font-size:1.5rem;font-weight:700}p{font-size:1rem;line-height:1.5em}");var z0=function(h,y,w){for(var x=new X0(y),F=[],J=function(V){var{options:Q,type:A,value:S}=V;if(A!==tt.Variable)if(Q)if(A!==tt.Select)try{F.concat(Q[new Intl.PluralRules(h).select(w[S])].map(J))}catch(R){F.concat(Q.other.map(J))}else F.concat((Q[w[S]]||Q.other).map(J));else F.push(S);else F.push(w[S])};!x.input.done;)J(x.next());return F},tt,Pt=function(h,y){return Pt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,x){w.__proto__=x}||function(w,x){for(var F in x)Object.prototype.hasOwnProperty.call(x,F)&&(w[F]=x[F])},Pt(h,y)},Wh=function(h){function y(w,x){var F=h.call(this,"Translation failed")||this;return F.id=w,F.language=x,F}return function(w,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+x+" is not a constructor or null");function F(){this.constructor=w}Pt(w,x),w.prototype=x===null?Object.create(x):(F.prototype=x.prototype,new F)}(y,h),y.is=function(w){return w instanceof y},y}(Error),T0=function(){function h(y){this.input=y,this.index=0,this.done=!1,this.value="",this.value=this.input.charAt(0)}return h.prototype.next=function(){return++this.index>=this.input.length&&(this.done=!0),this.value=this.input.charAt(this.index)},h.prototype.croak=function(){throw Error("[".concat(this.input,']. Unexpected character "').concat(this.value,'" on position ').concat(this.index,"."))},h}();(function(h){h[h.Plural=0]="Plural",h[h.Select=1]="Select",h[h.Text=2]="Text",h[h.Variable=3]="Variable"})(tt||(tt={}));var M0=["{","}",","],X0=function(){function h(y){this.input=new T0(y)}return h.prototype.next=function(){return this.input.value==="{"?this.readVariable():this.readText()},h.prototype.skip=function(y){y!==this.input.value&&this.input.croak(),this.input.next()},h.prototype.readWhile=function(y){for(var w="";!this.input.done&&y(this.input.value);)w+=this.input.value,this.input.next();return w},h.prototype.readVariable=function(){this.skip("{");var y=this.readWhile(function(x){return!function(F){return M0.includes(F)}(x)}).trim();if(y.length===0&&this.input.croak(),this.input.value==="}")return this.skip("}"),{type:tt.Variable,value:y};this.skip(",");var w=this.readVariableType();return{options:this.readVariableOptions(),type:w,value:y}},h.prototype.readText=function(){return{type:tt.Text,value:this.readWhile(function(y){return y!=="{"&&y!=="}"})}},h.prototype.readVariableType=function(){var y=this.readWhile(function(w){return w!==","}).trim();return y==="plural"?tt.Plural:y==="select"?tt.Select:void this.input.croak()},h.prototype.readVariableOptions=function(){this.skip(",");for(var y={};this.input.value!=="}";)y[this.readText().value.trim()]=this.readExpression();return this.skip("}"),y},h.prototype.readExpression=function(){var y=[];for(this.skip("{");this.input.value!=="}";)y.push(this.next());return this.skip("}"),y},h}(),Wt=function(h,y){h===void 0&&(h="en"),y===void 0&&(y=[]);var w=this;this.memo={},this.onError=console.error,this.formatDate=function(F,J){return new Intl.DateTimeFormat(w.language,J).format(F)},this.formatNumber=function(F,J){return new Intl.NumberFormat(w.language,J).format(F)},this.translate=function(F,J){J===void 0&&(J={});var V=w.getMessageById(F,J.defaultMessage);if(typeof V=="string")try{return z0(w.language,V,J).join("")}catch(Q){w.onError(new Wh(F,w.language))}return V+""},this.getMessageById=function(F,J){if(!w.memo[F]){var V=w.messages[F];V===void 0&&(V=F.split(".").reduce(function(Q,A){return Q?Q[A]:void 0},w.messages)),typeof V!="string"&&(w.onError(new Wh(F,w.language)),V=J||F),w.memo[F]=V}return w.memo[F]};var x=y.find(function(F){return F.language===h});this.language=h,this.messages=x?x.messages:{}};import{createContext as Q0,h as xt,Fragment as $t} from"preact";import{useState as U0,useEffect as Z0,useContext as Gh} from"preact/hooks";var _t=function(h,y){var w={};for(var x in h)Object.prototype.hasOwnProperty.call(h,x)&&y.indexOf(x)<0&&(w[x]=h[x]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function"){var F=0;for(x=Object.getOwnPropertySymbols(h);F<x.length;F++)y.indexOf(x[F])<0&&Object.prototype.propertyIsEnumerable.call(h,x[F])&&(w[x[F]]=h[x[F]])}return w},Gt=function(h){var y=Gh(ft);return h&&h!==y.language?new Wt(h):y.translator},ft=Q0({language:"",locales:[],setLanguage:function(){},translator:new Wt}),Vh=function(h){var{children:y,language:w,locales:x,onError:F}=h,J=U0(w);Z0(function(){J[1](w)},[w]);var V=new Wt(J[0],x);return F&&(V.onError=F),xt(ft.Provider,{value:{language:J[0],locales:x,setLanguage:J[1],translator:V}},y)},Kw=function(h){var{language:y,value:w}=h,x=_t(h,["children","language","value"]);return xt($t,null,Gt(y).formatDate(w,x))},Jw=function(h){var{language:y,value:w}=h,x=_t(h,["children","language","value"]);return xt($t,null,Gt(y).formatNumber(w,x))},Ww=function(h){var{html:y,id:w,tagName:x}=h,F=x===void 0?"span":x,J=_t(h,["children","html","id","tagName"]),V=Gh(ft).translator.translate(w,J);return y?xt(F,{dangerouslySetInnerHTML:{__html:V}}):xt($t,null,V)};function A0(h,y){const w=document.createElement("a"),x=new Blob([h]),F=URL.createObjectURL(x);w.setAttribute("href",F),w.setAttribute("download",y),w.click()}import{Fragment as m0,toChildArray as D0} from"preact";function Ct(h){return[].concat(...D0(h).map((y)=>Array.isArray(y)?Ct(y):y.type===m0?Ct(y.props.children):y))}function N0(h,y){Rt.set(h.join("-"),y)}function B0(h){const y=[];if(typeof h==="string")h=h.split("-");return h.forEach((w)=>{if(Mh.hasOwnProperty(w))y[Mh[w]]=Th[w];else y.push(Th[w])}),y.filter((w)=>w).join(l?"":"+")}function Xh(){Rt.clear()}var M={ESC:"Escape",F1:"F1",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",F10:"F10",F11:"F11",F12:"F12",D1:"Digit1",D2:"Digit2",D3:"Digit3",D4:"Digit4",D5:"Digit5",D6:"Digit6",D7:"Digit7",D8:"Digit8",D9:"Digit9",D0:"Digit0",TAB:"Tab",BACKSPACE:"Backspace",DELETE:"Backspace",ENTER:"Enter",RETURN:"Enter",A:"KeyA",B:"KeyB",C:"KeyC",D:"KeyD",E:"KeyE",F:"KeyF",G:"KeyG",H:"KeyH",I:"KeyI",J:"KeyJ",K:"KeyK",L:"KeyL",M:"KeyM",N:"KeyN",O:"KeyO",P:"KeyP",Q:"KeyQ",R:"KeyR",S:"KeyS",T:"KeyT",U:"KeyU",V:"KeyV",W:"KeyW",X:"KeyX",Y:"KeyY",Z:"KeyZ",UP:"ArrowUp",DOWN:"ArrowDown",LEFT:"ArrowLeft",RIGHT:"ArrowRight",SHIFT:"Shift",CTRL:"Control",ALT:"Alt",WIN:"Meta",CONTROL:"Control",OPTION:"Alt",COMMAND:"Meta",META:"Meta"},l=/Mac/i.test(navigator.platform||navigator.userAgent),Th={[M.ESC]:l?"\u238B":"Esc",[M.F1]:"F1",[M.F2]:"F2",[M.F3]:"F3",[M.F4]:"F4",[M.F5]:"F5",[M.F6]:"F6",[M.F7]:"F7",[M.F8]:"F8",[M.F9]:"F9",[M.F10]:"F10",[M.F11]:"F11",[M.F12]:"F12",[M.D1]:"1",[M.D2]:"2",[M.D3]:"3",[M.D4]:"4",[M.D5]:"5",[M.D6]:"6",[M.D7]:"7",[M.D8]:"8",[M.D9]:"9",[M.D0]:"0",[M.TAB]:l?"\u21E5":"Tab",[M.DELETE]:l?"\u232B":"Backspace",[M.RETURN]:l?"\u21A9":"Enter",[M.A]:"A",[M.B]:"B",[M.C]:"C",[M.D]:"D",[M.E]:"E",[M.F]:"F",[M.G]:"G",[M.H]:"H",[M.I]:"I",[M.J]:"J",[M.K]:"K",[M.L]:"L",[M.M]:"M",[M.N]:"N",[M.O]:"O",[M.P]:"P",[M.Q]:"Q",[M.R]:"R",[M.S]:"S",[M.T]:"T",[M.U]:"U",[M.V]:"V",[M.W]:"W",[M.X]:"X",[M.Y]:"Y",[M.Z]:"Z",[M.UP]:"\u2191",[M.DOWN]:"\u2193",[M.LEFT]:"\u2190",[M.RIGHT]:"\u2192",[M.SHIFT]:l?"\u21E7":"Shift",[M.CONTROL]:l?"\u2303":"Ctrl",[M.OPTION]:l?"\u2325":"Alt",[M.COMMAND]:l?"\u2318":"\u229E"},Mh={[M.CONTROL]:0,[M.OPTION]:1,[M.SHIFT]:2,[M.COMMAND]:3},Rt=new Map;window.addEventListener("keydown",(h)=>{Rt.forEach((y,w)=>{const x=(F)=>{if(F===M.CONTROL&&h.ctrlKey)return!0;if(F===M.OPTION&&h.altKey)return!0;if(F===M.SHIFT&&h.shiftKey)return!0;if(F===M.COMMAND&&h.metaKey)return!0;if(F===h.code)return!0;return!1};if(typeof w==="string")w=w.split("-");if(w.every(x)&&typeof y==="function"){h.preventDefault();try{y()}catch(F){}}})});var Y0=function(h){console&&console.warn&&console.warn(h)},B=function(){B.init.call(this)},Tt=function(h){if(typeof h!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof h)},Zh=function(h){return h._maxListeners===void 0?B.defaultMaxListeners:h._maxListeners},Ah=function(h,y,w,x){var F,J,V;if(Tt(w),J=h._events,J===void 0?(J=h._events=Object.create(null),h._eventsCount=0):(J.newListener!==void 0&&(h.emit("newListener",y,w.listener?w.listener:w),J=h._events),V=J[y]),V===void 0)V=J[y]=w,++h._eventsCount;else if(typeof V=="function"?V=J[y]=x?[w,V]:[V,w]:x?V.unshift(w):V.push(w),F=Zh(h),F>0&&V.length>F&&!V.warned){V.warned=!0;var Q=new Error("Possible EventEmitter memory leak detected. "+V.length+" "+String(y)+" listeners added. Use emitter.setMaxListeners() to increase limit");Q.name="MaxListenersExceededWarning",Q.emitter=h,Q.type=y,Q.count=V.length,Y0(Q)}return h},g0=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)},mh=function(h,y,w){var x={fired:!1,wrapFn:void 0,target:h,type:y,listener:w},F=g0.bind(x);return F.listener=w,x.wrapFn=F,F},Dh=function(h,y,w){var x=h._events;if(x===void 0)return[];var F=x[y];return F===void 0?[]:typeof F=="function"?w?[F.listener||F]:[F]:w?P0(F):Bh(F,F.length)},Nh=function(h){var y=this._events;if(y!==void 0){var w=y[h];if(typeof w=="function")return 1;if(w!==void 0)return w.length}return 0},Bh=function(h,y){for(var w=new Array(y),x=0;x<y;++x)w[x]=h[x];return w},S0=function(h,y){for(;y+1<h.length;y++)h[y]=h[y+1];h.pop()},P0=function(h){for(var y=new Array(h.length),w=0;w<y.length;++w)y[w]=h[w].listener||h[w];return y};var yt=typeof Reflect=="object"?Reflect:null,zh=yt&&typeof yt.apply=="function"?yt.apply:function(h,y,w){return Function.prototype.apply.call(h,y,w)},Vt;yt&&typeof yt.ownKeys=="function"?Vt=yt.ownKeys:Object.getOwnPropertySymbols?Vt=function(h){return Object.getOwnPropertyNames(h).concat(Object.getOwnPropertySymbols(h))}:Vt=function(h){return Object.getOwnPropertyNames(h)};var Uh=Number.isNaN||function(h){return h!==h};B.EventEmitter=B;B.prototype._events=void 0;B.prototype._eventsCount=0;B.prototype._maxListeners=void 0;var Qh=10;Object.defineProperty(B,"defaultMaxListeners",{enumerable:!0,get:function(){return Qh},set:function(h){if(typeof h!="number"||h<0||Uh(h))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+h+".");Qh=h}});B.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};B.prototype.setMaxListeners=function(h){if(typeof h!="number"||h<0||Uh(h))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+h+".");return this._maxListeners=h,this};B.prototype.getMaxListeners=function(){return Zh(this)};B.prototype.emit=function(h){for(var y=[],w=1;w<arguments.length;w++)y.push(arguments[w]);var x=h==="error",F=this._events;if(F!==void 0)x=x&&F.error===void 0;else if(!x)return!1;if(x){var J;if(y.length>0&&(J=y[0]),J instanceof Error)throw J;var V=new Error("Unhandled error."+(J?" ("+J.message+")":""));throw V.context=J,V}var Q=F[h];if(Q===void 0)return!1;if(typeof Q=="function")zh(Q,this,y);else for(var A=Q.length,S=Bh(Q,A),w=0;w<A;++w)zh(S[w],this,y);return!0};B.prototype.addListener=function(h,y){return Ah(this,h,y,!1)};B.prototype.on=B.prototype.addListener;B.prototype.prependListener=function(h,y){return Ah(this,h,y,!0)};B.prototype.once=function(h,y){return Tt(y),this.on(h,mh(this,h,y)),this};B.prototype.prependOnceListener=function(h,y){return Tt(y),this.prependListener(h,mh(this,h,y)),this};B.prototype.removeListener=function(h,y){var w,x,F,J,V;if(Tt(y),x=this._events,x===void 0)return this;if(w=x[h],w===void 0)return this;if(w===y||w.listener===y)--this._eventsCount===0?this._events=Object.create(null):(delete x[h],x.removeListener&&this.emit("removeListener",h,w.listener||y));else if(typeof w!="function"){for(F=-1,J=w.length-1;J>=0;J--)if(w[J]===y||w[J].listener===y){V=w[J].listener,F=J;break}if(F<0)return this;F===0?w.shift():S0(w,F),w.length===1&&(x[h]=w[0]),x.removeListener!==void 0&&this.emit("removeListener",h,V||y)}return this};B.prototype.off=B.prototype.removeListener;B.prototype.removeAllListeners=function(h){var y,w,x;if(w=this._events,w===void 0)return this;if(w.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):w[h]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete w[h]),this;if(arguments.length===0){var F=Object.keys(w),J;for(x=0;x<F.length;++x)J=F[x],J!=="removeListener"&&this.removeAllListeners(J);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(y=w[h],typeof y=="function")this.removeListener(h,y);else if(y!==void 0)for(x=y.length-1;x>=0;x--)this.removeListener(h,y[x]);return this};B.prototype.listeners=function(h){return Dh(this,h,!0)};B.prototype.rawListeners=function(h){return Dh(this,h,!1)};B.listenerCount=function(h,y){return typeof h.listenerCount=="function"?h.listenerCount(y):Nh.call(h,y)};B.prototype.listenerCount=Nh;B.prototype.eventNames=function(){return this._eventsCount>0?Vt(this._events):[]};var zw=B.prototype;class Yh extends B{constructor(h){super();this.port=h,this.reader=null,h._serial=this}dispose(){this.close().then(()=>{this.port=null})}getInfo(){return this.port.getInfo()}open(h){return new Promise((y,w)=>{this.port.open(h).then(()=>{const x=()=>{this.reader=this.port.readable.getReader(),this.reader.read().then(({value:F,done:J})=>{if(this.reader.releaseLock(),F)this.emit("data",F);if(J);else x()}).catch(()=>{this.emit("disconnect")})};x(),this.emit("connect"),y()}).catch((x)=>{w(x)})})}close(){return new Promise((h,y)=>{if(this.reader)this.reader.cancel().then(()=>this.port.close()).then(()=>h()).catch((w)=>y(w));else this.reader=null,this.port.close().then(()=>h()).catch((w)=>y(w))})}write(h,y="text"){return new Promise((w,x)=>{const F=this.port.writable.getWriter();if(y==="binary")F.write(h).then(()=>w()).catch((J)=>x(J));else{const J=new TextEncoder;F.write(J.encode(h)).then(()=>w()).catch((V)=>x(V))}F.releaseLock()})}}function gh(h){return new Promise((y)=>{setTimeout(y,h)})}var $0=()=>gh(0);var Sh={"zh-CN":"zh-Hans","zh-TW":"zh-Hant","zh-HK":"zh-Hant","zh-MO":"zh-Hant"};function qt(h){if(Sh[h])return Sh[h];return h}var it="en",jt=navigator.language,{DisplayNames:vt,Locale:_0}=window.Intl,f0=new vt([it],{type:"language"}),C0=new vt([jt],{type:"language"}),Et=new Map,$h=(h)=>(h=qt(h))&&Et.has(h)&&h,It=(h)=>{const y=new _0(h),w=y.textInfo||y.getTextInfo();return w&&w.direction==="rtl"},Ph=(h,y={})=>{const w=new vt([h],{type:"language"});return Et.set(h,{language:w.of(h),languageInDefault:f0.of(h),languageInBrowser:C0.of(h)}),{language:h,messages:y}},_h=[Ph("en"),Ph("zh-Hans")];var k=G0(Ch(),1);import{createContext as R0} from"preact";import{useContext as q0,useReducer as i0} from"preact/hooks";function v0(){const{state:h,dispatch:y}=q0(bh);return{...h,closeProject(){y({type:Rh})},async openProject(w){if(typeof w==="stirng")w=await k.default.getItem(key);if(w)y({type:qh,payload:w});else throw new Error(`${key} does not exist.`)},setProjectName(w){y({type:ih,payload:w})},addFile(w){if(h.fileList.find((x)=>x.id===w.id))throw Error("File already exists");if(w.name)w.name=Mt(h.fileList,w.name);y({type:jh,payload:w})},openFile(w){if(h.fileList.findIndex((x)=>x.id===w)===-1)throw Error("File does not exist");y({type:vh,payload:w})},deleteFile(w){y({type:Ih,payload:w})},modifyFile(w){if(h.fileList.find((x)=>w.id?x.id===w.id:x.id===h.selectedFileId)){if(w.name)w.name=Mt(h.fileList,w.name);y({type:ch,payload:w})}else throw Error("File does not exists")},addAsset(w){if(h.assetList.find((x)=>x.id===w.id))throw Error("Asset already exists");else{if(w.name)w.name=Mt(h.assetList,w.name);y({type:sh,payload:w})}},deleteAsset(...w){if(Array.isArray(w[0]))w=w[0];y({type:dh,payload:w})},modifyAsset(w){if(h.assetList.find((x)=>x.id===w.id)){if(w.name)w.name=Mt(h.assetList,w.name);y({type:kh,payload:w})}else throw Error("Asset does not exists")},setDevice(w){y({type:ah,payload:w})},setEditor(w){y({type:oh,payload:w})},async saveNow(w){const x=Date.now(),F=h.key||x.toString(36),{name:J,editor:V,assetList:Q,fileList:A}=h,S=await k.default.setItem(F,w({key:F,name:J,assetList:Q,fileList:A,modifiedDate:x,editor:{package:V.package}}));return y({type:st,payload:{key:F,modified:!1}}),S},setModified(w){y({type:st,payload:{modified:w}})},async listProjects(){const w=[];return await k.default.iterate((x,F)=>{w.push({key:F,name:x.name,image:x.thumb,modifiedDate:x.modifiedDate})}),w},getProject(w){return k.default.getItem(w)},async renameProject(w,x){const F=await k.default.getItem(w);F.name=x,await k.default.setItem(F.key,F)},async duplicateProject(w){const x=await k.default.getItem(w);x.modifiedDate=Date.now(),x.key=x.modifiedDate.toString(36),await k.default.setItem(x.key,x)},async deleteProject(w){await k.default.removeItem(w)}}}function I0({children:h}){const[y,w]=i0(j0,Xt);return c0(bh.Provider,{value:{state:y,dispatch:w},children:h})}import{jsx as c0} from"preact/jsx-runtime";var Rh="CLOSE_PROJECT",qh="OPEN_PROJECT",ih="SET_PROJECT_NAME",jh="ADD_FILE",vh="OPEN_FILE",Ih="DELETE_FILE",ch="MODIFY_FILE",sh="ADD_ASSET",dh="DELETE_ASSET",kh="MODIFY_ASSET",ah="CONNECT_DEVICE",oh="CONFIG_EDITOR",st="SAVE_DATA";k.default.config({name:"blockcode-store"});var Xt={key:null,name:"",editor:null,assetList:[],fileList:[],selectedFileId:null,device:null,modified:!1},bh=R0({state:Object.assign({},Xt),dispatch:()=>{}}),j0=(h,y)=>{switch(y.type){case Rh:return Object.assign({},Xt);case qh:if(!y.payload.editor)y.payload.editor=h.editor;if(!y.payload.key)y.payload.key=Date.now().toString(36);return Object.assign({},Xt,y.payload);case ih:return{...h,name:y.payload,modified:!0};case jh:return{...h,fileList:h.fileList.concat(y.payload),selectedFileId:y.payload.id,modified:!0};case vh:return{...h,selectedFileId:y.payload};case Ih:let w=h.fileList.findIndex((F)=>F.id===y.payload);if(w===-1)return h;const x=h.fileList.filter((F)=>F.id!==y.payload);if(w>=x.length)w=x.length-1;return{...h,fileList:x,selectedFileId:x[w].id,modified:!0};case ch:return{...h,fileList:h.fileList.map((F)=>{if(y.payload.id?F.id===y.payload.id:F.id===h.selectedFileId)return{...F,...y.payload};return F}),modified:!0};case sh:return{...h,assetList:h.assetList.concat(y.payload),modified:!0};case dh:return{...h,assetList:h.assetList.filter((F)=>!y.payload.includes(F.id)),modified:!0};case kh:return{...h,assetList:h.assetList.map((F)=>{if(F.id===y.payload.id)return{...F,...y.payload};return F}),modified:!0};case ah:return{...h,device:y.payload};case oh:return{...h,editor:Object.assign(h.editor||{},y.payload),modified:!0};case st:return{...h,...y.payload};default:return h}},Mt=(h,y)=>{if(y=y.trim(),h.find((w)=>w.name===y)){const w=y.replace(/\d+$/,""),x=new RegExp(`${w}(\\d+)\$`);let F=0;for(let J of h){const V=x.exec(J.name);if(V){const Q=parseInt(V[1]);if(Q>F)F=Q}}y=`${w}${F+1}`}return y};import{createContext as s0} from"preact";import{useContext as d0,useReducer as k0} from"preact/hooks";function o0(){const{alerts:h,state:y,dispatch:w}=d0(Ln);return{...y,setSplash(x){w({type:lh,payload:x})},createAlert(...x){let F,J,V=0;for(let Q of x){if(typeof Q==="string")F=Q;if(typeof Q==="object")J=Q;if(typeof Q==="number")V=Q}if(F&&h[F])J=J?Object.assign(h[F],J):h[F];if(!J)return;if(!J.id)J.id=Date.now().toString(36);if(w({type:rh,payload:J}),V>0)setTimeout(()=>{w({type:dt,payload:J.id})},V)},removeAlert(x){w({type:dt,payload:x})},createPrompt(x){w({type:eh,payload:x})},createLayout(x){w({type:hn,payload:x})},clearLayout(){Xh(),w({type:tn})},selectTab(x){w({type:nn,payload:x})},addTabs(x){w({type:wn,payload:x})},setStoreLibrary(x){w({type:yn,payload:x})}}}function b0({alerts:h,children:y}){const[w,x]=k0(a0,zt);return l0(Ln.Provider,{value:{alerts:h,state:w,dispatch:x},children:y})}import{jsx as l0} from"preact/jsx-runtime";var lh="SET_SPLASH",rh="CREATE_ALERT",dt="REMOVE_ALERT",eh="CREATE_PROMPT",tn="CLEAR_LAYOUT",hn="CREATE_LAYOUT",nn="SELECT_TAB",wn="ADD_TABS",yn="SHOW_STORE_LIBRARY",zt={splash:!1,alerts:[],prompt:null,mainMenu:null,tabs:[],sidebars:[],pane:!1,tutorials:!1,selectedTabIndex:-1,canEditProjectName:!1,storeLibrary:!1},Ln=s0({state:Object.assign({},zt),dispatch:()=>{}}),a0=(h,y)=>{switch(y.type){case hn:return Object.assign({},zt,{splash:h.splash},y.payload);case tn:return Object.assign({},zt);case lh:return{...h,splash:y.payload};case rh:if(h.alerts.find((w)=>w.id===y.payload.id))return{...h,alerts:h.alerts.map((w)=>{if(w.id===y.payload.id)return{...w,...y.payload};return w})};return{...h,alerts:[...h.alerts,y.payload]};case dt:return{...h,alerts:h.alerts.filter((w)=>w.id!==y.payload)};case eh:return{...h,prompt:y.payload};case nn:return{...h,selectedTabIndex:y.payload};case wn:return{...h,tabs:[...h.tabs,...y.payload]};case yn:return{...h,storeLibrary:y.payload};default:return h}};import{createContext as r0} from"preact";import{useContext as e0,useReducer as tw} from"preact/hooks";function nw(){const{state:h,dispatch:y}=e0(En),{translate:w}=Gt(),x=(F)=>{if(!F?.props)return F;if(F.props.children)return F.props.children.map((J)=>x(J)).join("");return w(F.props.id,F.props)};return{...h,addLocaleData(F){y({type:On,payload:h.locales.map(({language:J,messages:V})=>({language:J,messages:Object.assign(V,F[J])}))})},setLanguage(F){if(h.language!==F)y({type:Fn,payload:F})},getText(F,J,V={}){if(typeof J==="object")V=J,J=V.defaultMessage;return w(F,{...V,defaultMessage:J})},maybeLocaleText(F){return x(F)}}}function ww({children:h}){const[y,w]=tw(hw,xn),x=(F)=>{};return pn(Vh,{language:y.language,locales:y.locales,onError:x,children:pn(En.Provider,{value:{state:y,dispatch:w},children:h})})}import{jsx as pn} from"preact/jsx-runtime";var On="SET_LOCALES",Fn="SET_LANGUAGE",un=$h(jt)||it,xn={locales:_h,language:un,supportLanguages:Et,isRtl:It(un)},En=r0({state:xn,dispatch:()=>{}}),hw=(h,y)=>{switch(y.type){case On:return{...h,locales:y.payload};case Fn:return{...h,language:y.payload,isRtl:It(y.payload)};default:return h}};export{nw as useLocale,o0 as useLayout,v0 as useEditor,Et as supportLanguages,gh as sleep,B0 as showHotkey,N0 as setHotkey,$0 as nextTick,Ct as flatChildren,A0 as exportFile,Ww as Text,Yh as Serial,Jw as Numeric,ww as LocalesProvider,b0 as LayoutProvider,M as Keys,I0 as EditorProvider,Kw as DateTime};
