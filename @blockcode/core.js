var e6=Object.create;var{defineProperty:w1,getPrototypeOf:X8,getOwnPropertyNames:J8}=Object;var Q8=Object.prototype.hasOwnProperty;var Z8=(Q,W,Z)=>{Z=Q!=null?e6(X8(Q)):{};const U=W||!Q||!Q.__esModule?w1(Z,"default",{value:Q,enumerable:!0}):Z;for(let z of J8(Q))if(!Q8.call(U,z))w1(U,z,{get:()=>Q[z],enumerable:!0});return U};var W8=(Q,W)=>()=>(W||Q((W={exports:{}}).exports,W),W.exports);var E1=W8((_1,u0)=>{/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(Q){if(typeof _1==="object"&&typeof u0!=="undefined")u0.exports=Q();else if(typeof define==="function"&&define.amd)define([],Q);else{var W;if(typeof window!=="undefined")W=window;else if(typeof global!=="undefined")W=global;else if(typeof self!=="undefined")W=self;else W=this;W.localforage=Q()}})(function(){var Q,W,Z;return function U(z,O,q){function h(y,n){if(!O[y]){if(!z[y]){var L=typeof require=="function"&&require;if(!n&&L)return L(y,!0);if(x)return x(y,!0);var D=new Error("Cannot find module '"+y+"'");throw D.code="MODULE_NOT_FOUND",D}var m=O[y]={exports:{}};z[y][0].call(m.exports,function(k){var i=z[y][1][k];return h(i?i:k)},m,m.exports,U,z,O,q)}return O[y].exports}var x=typeof require=="function"&&require;for(var j=0;j<q.length;j++)h(q[j]);return h}({1:[function(U,z,O){(function(q){var h=q.MutationObserver||q.WebKitMutationObserver,x;if(h){var j=0,y=new h(k),n=q.document.createTextNode("");y.observe(n,{characterData:!0}),x=function(){n.data=j=++j%2}}else if(!q.setImmediate&&typeof q.MessageChannel!=="undefined"){var L=new q.MessageChannel;L.port1.onmessage=k,x=function(){L.port2.postMessage(0)}}else if("document"in q&&"onreadystatechange"in q.document.createElement("script"))x=function(){var v=q.document.createElement("script");v.onreadystatechange=function(){k(),v.onreadystatechange=null,v.parentNode.removeChild(v),v=null},q.document.documentElement.appendChild(v)};else x=function(){setTimeout(k,0)};var D,m=[];function k(){D=!0;var v,l,p=m.length;while(p){l=m,m=[],v=-1;while(++v<p)l[v]();p=m.length}D=!1}z.exports=i;function i(v){if(m.push(v)===1&&!D)x()}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],2:[function(U,z,O){var q=U(1);function h(){}var x={},j=["REJECTED"],y=["FULFILLED"],n=["PENDING"];z.exports=L;function L(K){if(typeof K!=="function")throw new TypeError("resolver must be a function");if(this.state=n,this.queue=[],this.outcome=void 0,K!==h)i(this,K)}L.prototype.catch=function(K){return this.then(null,K)},L.prototype.then=function(K,R){if(typeof K!=="function"&&this.state===y||typeof R!=="function"&&this.state===j)return this;var S=new this.constructor(h);if(this.state!==n){var E=this.state===y?K:R;m(S,E,this.outcome)}else this.queue.push(new D(S,K,R));return S};function D(K,R,S){if(this.promise=K,typeof R==="function")this.onFulfilled=R,this.callFulfilled=this.otherCallFulfilled;if(typeof S==="function")this.onRejected=S,this.callRejected=this.otherCallRejected}D.prototype.callFulfilled=function(K){x.resolve(this.promise,K)},D.prototype.otherCallFulfilled=function(K){m(this.promise,this.onFulfilled,K)},D.prototype.callRejected=function(K){x.reject(this.promise,K)},D.prototype.otherCallRejected=function(K){m(this.promise,this.onRejected,K)};function m(K,R,S){q(function(){var E;try{E=R(S)}catch(u){return x.reject(K,u)}if(E===K)x.reject(K,new TypeError("Cannot resolve promise with itself"));else x.resolve(K,E)})}x.resolve=function(K,R){var S=v(k,R);if(S.status==="error")return x.reject(K,S.value);var E=S.value;if(E)i(K,E);else{K.state=y,K.outcome=R;var u=-1,f=K.queue.length;while(++u<f)K.queue[u].callFulfilled(R)}return K},x.reject=function(K,R){K.state=j,K.outcome=R;var S=-1,E=K.queue.length;while(++S<E)K.queue[S].callRejected(R);return K};function k(K){var R=K&&K.then;if(K&&(typeof K==="object"||typeof K==="function")&&typeof R==="function")return function S(){R.apply(K,arguments)}}function i(K,R){var S=!1;function E(d){if(S)return;S=!0,x.reject(K,d)}function u(d){if(S)return;S=!0,x.resolve(K,d)}function f(){R(u,E)}var b=v(f);if(b.status==="error")E(b.value)}function v(K,R){var S={};try{S.value=K(R),S.status="success"}catch(E){S.status="error",S.value=E}return S}L.resolve=l;function l(K){if(K instanceof this)return K;return x.resolve(new this(h),K)}L.reject=p;function p(K){var R=new this(h);return x.reject(R,K)}L.all=q0;function q0(K){var R=this;if(Object.prototype.toString.call(K)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=K.length,E=!1;if(!S)return this.resolve([]);var u=new Array(S),f=0,b=-1,d=new this(h);while(++b<S)a(K[b],b);return d;function a(G0,B0){R.resolve(G0).then(L0,function(Q0){if(!E)E=!0,x.reject(d,Q0)});function L0(Q0){if(u[B0]=Q0,++f===S&&!E)E=!0,x.resolve(d,u)}}}L.race=J0;function J0(K){var R=this;if(Object.prototype.toString.call(K)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=K.length,E=!1;if(!S)return this.resolve([]);var u=-1,f=new this(h);while(++u<S)b(K[u]);return f;function b(d){R.resolve(d).then(function(a){if(!E)E=!0,x.resolve(f,a)},function(a){if(!E)E=!0,x.reject(f,a)})}}},{"1":1}],3:[function(U,z,O){(function(q){if(typeof q.Promise!=="function")q.Promise=U(2)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"2":2}],4:[function(U,z,O){var q=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol==="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X};function h(X,G){if(!(X instanceof G))throw new TypeError("Cannot call a class as a function")}function x(){try{if(typeof indexedDB!=="undefined")return indexedDB;if(typeof webkitIndexedDB!=="undefined")return webkitIndexedDB;if(typeof mozIndexedDB!=="undefined")return mozIndexedDB;if(typeof OIndexedDB!=="undefined")return OIndexedDB;if(typeof msIndexedDB!=="undefined")return msIndexedDB}catch(X){return}}var j=x();function y(){try{if(!j||!j.open)return!1;var X=typeof openDatabase!=="undefined"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),G=typeof fetch==="function"&&fetch.toString().indexOf("[native code")!==-1;return(!X||G)&&typeof indexedDB!=="undefined"&&typeof IDBKeyRange!=="undefined"}catch(J){return!1}}function n(X,G){X=X||[],G=G||{};try{return new Blob(X,G)}catch(H){if(H.name!=="TypeError")throw H;var J=typeof BlobBuilder!=="undefined"?BlobBuilder:typeof MSBlobBuilder!=="undefined"?MSBlobBuilder:typeof MozBlobBuilder!=="undefined"?MozBlobBuilder:WebKitBlobBuilder,V=new J;for(var w=0;w<X.length;w+=1)V.append(X[w]);return V.getBlob(G.type)}}if(typeof Promise==="undefined")U(3);var L=Promise;function D(X,G){if(G)X.then(function(J){G(null,J)},function(J){G(J)})}function m(X,G,J){if(typeof G==="function")X.then(G);if(typeof J==="function")X.catch(J)}function k(X){if(typeof X!=="string")console.warn(X+" used as a key, but it is not a string."),X=String(X);return X}function i(){if(arguments.length&&typeof arguments[arguments.length-1]==="function")return arguments[arguments.length-1]}var v="local-forage-detect-blob-support",l=void 0,p={},q0=Object.prototype.toString,J0="readonly",K="readwrite";function R(X){var G=X.length,J=new ArrayBuffer(G),V=new Uint8Array(J);for(var w=0;w<G;w++)V[w]=X.charCodeAt(w);return J}function S(X){return new L(function(G){var J=X.transaction(v,K),V=n([""]);J.objectStore(v).put(V,"key"),J.onabort=function(w){w.preventDefault(),w.stopPropagation(),G(!1)},J.oncomplete=function(){var w=navigator.userAgent.match(/Chrome\/(\d+)/),H=navigator.userAgent.match(/Edge\//);G(H||!w||parseInt(w[1],10)>=43)}}).catch(function(){return!1})}function E(X){if(typeof l==="boolean")return L.resolve(l);return S(X).then(function(G){return l=G,l})}function u(X){var G=p[X.name],J={};if(J.promise=new L(function(V,w){J.resolve=V,J.reject=w}),G.deferredOperations.push(J),!G.dbReady)G.dbReady=J.promise;else G.dbReady=G.dbReady.then(function(){return J.promise})}function f(X){var G=p[X.name],J=G.deferredOperations.pop();if(J)return J.resolve(),J.promise}function b(X,G){var J=p[X.name],V=J.deferredOperations.pop();if(V)return V.reject(G),V.promise}function d(X,G){return new L(function(J,V){if(p[X.name]=p[X.name]||b0(),X.db)if(G)u(X),X.db.close();else return J(X.db);var w=[X.name];if(G)w.push(X.version);var H=j.open.apply(j,w);if(G)H.onupgradeneeded=function(B){var Y=H.result;try{if(Y.createObjectStore(X.storeName),B.oldVersion<=1)Y.createObjectStore(v)}catch(M){if(M.name==="ConstraintError")console.warn('The database "'+X.name+'" has been upgraded from version '+B.oldVersion+" to version "+B.newVersion+', but the storage "'+X.storeName+'" already exists.');else throw M}};H.onerror=function(B){B.preventDefault(),V(H.error)},H.onsuccess=function(){var B=H.result;B.onversionchange=function(Y){Y.target.close()},J(B),f(X)}})}function a(X){return d(X,!1)}function G0(X){return d(X,!0)}function B0(X,G){if(!X.db)return!0;var J=!X.db.objectStoreNames.contains(X.storeName),V=X.version<X.db.version,w=X.version>X.db.version;if(V){if(X.version!==G)console.warn('The database "'+X.name+`" can't be downgraded from version `+X.db.version+" to version "+X.version+".");X.version=X.db.version}if(w||J){if(J){var H=X.db.version+1;if(H>X.version)X.version=H}return!0}return!1}function L0(X){return new L(function(G,J){var V=new FileReader;V.onerror=J,V.onloadend=function(w){var H=btoa(w.target.result||"");G({__local_forage_encoded_blob:!0,data:H,type:X.type})},V.readAsBinaryString(X)})}function Q0(X){var G=R(atob(X.data));return n([G],{type:X.type})}function f0(X){return X&&X.__local_forage_encoded_blob}function X6(X){var G=this,J=G._initReady().then(function(){var V=p[G._dbInfo.name];if(V&&V.dbReady)return V.dbReady});return m(J,X,X),J}function J6(X){u(X);var G=p[X.name],J=G.forages;for(var V=0;V<J.length;V++){var w=J[V];if(w._dbInfo.db)w._dbInfo.db.close(),w._dbInfo.db=null}return X.db=null,a(X).then(function(H){if(X.db=H,B0(X))return G0(X);return H}).then(function(H){X.db=G.db=H;for(var B=0;B<J.length;B++)J[B]._dbInfo.db=H}).catch(function(H){throw b(X,H),H})}function t(X,G,J,V){if(V===void 0)V=1;try{var w=X.db.transaction(X.storeName,G);J(null,w)}catch(H){if(V>0&&(!X.db||H.name==="InvalidStateError"||H.name==="NotFoundError"))return L.resolve().then(function(){if(!X.db||H.name==="NotFoundError"&&!X.db.objectStoreNames.contains(X.storeName)&&X.version<=X.db.version){if(X.db)X.version=X.db.version+1;return G0(X)}}).then(function(){return J6(X).then(function(){t(X,G,J,V-1)})}).catch(J);J(H)}}function b0(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Q6(X){var G=this,J={db:null};if(X)for(var V in X)J[V]=X[V];var w=p[J.name];if(!w)w=b0(),p[J.name]=w;if(w.forages.push(G),!G._initReady)G._initReady=G.ready,G.ready=X6;var H=[];function B(){return L.resolve()}for(var Y=0;Y<w.forages.length;Y++){var M=w.forages[Y];if(M!==G)H.push(M._initReady().catch(B))}var $=w.forages.slice(0);return L.all(H).then(function(){return J.db=w.db,a(J)}).then(function(F){if(J.db=F,B0(J,G._defaultConfig.version))return G0(J);return F}).then(function(F){J.db=w.db=F,G._dbInfo=J;for(var A=0;A<$.length;A++){var P=$[A];if(P!==G)P._dbInfo.db=J.db,P._dbInfo.version=J.version}})}function Z6(X,G){var J=this;X=k(X);var V=new L(function(w,H){J.ready().then(function(){t(J._dbInfo,J0,function(B,Y){if(B)return H(B);try{var M=Y.objectStore(J._dbInfo.storeName),$=M.get(X);$.onsuccess=function(){var F=$.result;if(F===void 0)F=null;if(f0(F))F=Q0(F);w(F)},$.onerror=function(){H($.error)}}catch(F){H(F)}})}).catch(H)});return D(V,G),V}function W6(X,G){var J=this,V=new L(function(w,H){J.ready().then(function(){t(J._dbInfo,J0,function(B,Y){if(B)return H(B);try{var M=Y.objectStore(J._dbInfo.storeName),$=M.openCursor(),F=1;$.onsuccess=function(){var A=$.result;if(A){var P=A.value;if(f0(P))P=Q0(P);var T=X(P,A.key,F++);if(T!==void 0)w(T);else A.continue()}else w()},$.onerror=function(){H($.error)}}catch(A){H(A)}})}).catch(H)});return D(V,G),V}function G6(X,G,J){var V=this;X=k(X);var w=new L(function(H,B){var Y;V.ready().then(function(){if(Y=V._dbInfo,q0.call(G)==="[object Blob]")return E(Y.db).then(function(M){if(M)return G;return L0(G)});return G}).then(function(M){t(V._dbInfo,K,function($,F){if($)return B($);try{var A=F.objectStore(V._dbInfo.storeName);if(M===null)M=void 0;var P=A.put(M,X);F.oncomplete=function(){if(M===void 0)M=null;H(M)},F.onabort=F.onerror=function(){var T=P.error?P.error:P.transaction.error;B(T)}}catch(T){B(T)}})}).catch(B)});return D(w,J),w}function H6(X,G){var J=this;X=k(X);var V=new L(function(w,H){J.ready().then(function(){t(J._dbInfo,K,function(B,Y){if(B)return H(B);try{var M=Y.objectStore(J._dbInfo.storeName),$=M.delete(X);Y.oncomplete=function(){w()},Y.onerror=function(){H($.error)},Y.onabort=function(){var F=$.error?$.error:$.transaction.error;H(F)}}catch(F){H(F)}})}).catch(H)});return D(V,G),V}function V6(X){var G=this,J=new L(function(V,w){G.ready().then(function(){t(G._dbInfo,K,function(H,B){if(H)return w(H);try{var Y=B.objectStore(G._dbInfo.storeName),M=Y.clear();B.oncomplete=function(){V()},B.onabort=B.onerror=function(){var $=M.error?M.error:M.transaction.error;w($)}}catch($){w($)}})}).catch(w)});return D(J,X),J}function w6(X){var G=this,J=new L(function(V,w){G.ready().then(function(){t(G._dbInfo,J0,function(H,B){if(H)return w(H);try{var Y=B.objectStore(G._dbInfo.storeName),M=Y.count();M.onsuccess=function(){V(M.result)},M.onerror=function(){w(M.error)}}catch($){w($)}})}).catch(w)});return D(J,X),J}function U6(X,G){var J=this,V=new L(function(w,H){if(X<0){w(null);return}J.ready().then(function(){t(J._dbInfo,J0,function(B,Y){if(B)return H(B);try{var M=Y.objectStore(J._dbInfo.storeName),$=!1,F=M.openKeyCursor();F.onsuccess=function(){var A=F.result;if(!A){w(null);return}if(X===0)w(A.key);else if(!$)$=!0,A.advance(X);else w(A.key)},F.onerror=function(){H(F.error)}}catch(A){H(A)}})}).catch(H)});return D(V,G),V}function z6(X){var G=this,J=new L(function(V,w){G.ready().then(function(){t(G._dbInfo,J0,function(H,B){if(H)return w(H);try{var Y=B.objectStore(G._dbInfo.storeName),M=Y.openKeyCursor(),$=[];M.onsuccess=function(){var F=M.result;if(!F){V($);return}$.push(F.key),F.continue()},M.onerror=function(){w(M.error)}}catch(F){w(F)}})}).catch(w)});return D(J,X),J}function B6(X,G){G=i.apply(this,arguments);var J=this.config();if(X=typeof X!=="function"&&X||{},!X.name)X.name=X.name||J.name,X.storeName=X.storeName||J.storeName;var V=this,w;if(!X.name)w=L.reject("Invalid arguments");else{var H=X.name===J.name&&V._dbInfo.db,B=H?L.resolve(V._dbInfo.db):a(X).then(function(Y){var M=p[X.name],$=M.forages;M.db=Y;for(var F=0;F<$.length;F++)$[F]._dbInfo.db=Y;return Y});if(!X.storeName)w=B.then(function(Y){u(X);var M=p[X.name],$=M.forages;Y.close();for(var F=0;F<$.length;F++){var A=$[F];A._dbInfo.db=null}var P=new L(function(T,_){var g=j.deleteDatabase(X.name);g.onerror=function(){var I=g.result;if(I)I.close();_(g.error)},g.onblocked=function(){console.warn('dropInstance blocked for database "'+X.name+'" until all open connections are closed')},g.onsuccess=function(){var I=g.result;if(I)I.close();T(I)}});return P.then(function(T){M.db=T;for(var _=0;_<$.length;_++){var g=$[_];f(g._dbInfo)}}).catch(function(T){throw(b(X,T)||L.resolve()).catch(function(){}),T})});else w=B.then(function(Y){if(!Y.objectStoreNames.contains(X.storeName))return;var M=Y.version+1;u(X);var $=p[X.name],F=$.forages;Y.close();for(var A=0;A<F.length;A++){var P=F[A];P._dbInfo.db=null,P._dbInfo.version=M}var T=new L(function(_,g){var I=j.open(X.name,M);I.onerror=function(c){var V0=I.result;V0.close(),g(c)},I.onupgradeneeded=function(){var c=I.result;c.deleteObjectStore(X.storeName)},I.onsuccess=function(){var c=I.result;c.close(),_(c)}});return T.then(function(_){$.db=_;for(var g=0;g<F.length;g++){var I=F[g];I._dbInfo.db=_,f(I._dbInfo)}}).catch(function(_){throw(b(X,_)||L.resolve()).catch(function(){}),_})})}return D(w,G),w}var Y6={_driver:"asyncStorage",_initStorage:Q6,_support:y(),iterate:W6,getItem:Z6,setItem:G6,removeItem:H6,clear:V6,length:w6,key:U6,keys:z6,dropInstance:B6};function M6(){return typeof openDatabase==="function"}var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$6="~~local_forage_type~",d0=/^~~local_forage_type~([^~]+)~/,Y0="__lfsc__:",A0=Y0.length,D0="arbf",h0="blob",c0="si08",n0="ui08",i0="uic8",s0="si16",l0="si32",a0="ur16",t0="ui32",o0="fl32",r0="fl64",e0=A0+D0.length,X1=Object.prototype.toString;function J1(X){var G=X.length*0.75,J=X.length,V,w=0,H,B,Y,M;if(X[X.length-1]==="="){if(G--,X[X.length-2]==="=")G--}var $=new ArrayBuffer(G),F=new Uint8Array($);for(V=0;V<J;V+=4)H=r.indexOf(X[V]),B=r.indexOf(X[V+1]),Y=r.indexOf(X[V+2]),M=r.indexOf(X[V+3]),F[w++]=H<<2|B>>4,F[w++]=(B&15)<<4|Y>>2,F[w++]=(Y&3)<<6|M&63;return $}function P0(X){var G=new Uint8Array(X),J="",V;for(V=0;V<G.length;V+=3)J+=r[G[V]>>2],J+=r[(G[V]&3)<<4|G[V+1]>>4],J+=r[(G[V+1]&15)<<2|G[V+2]>>6],J+=r[G[V+2]&63];if(G.length%3===2)J=J.substring(0,J.length-1)+"=";else if(G.length%3===1)J=J.substring(0,J.length-2)+"==";return J}function F6(X,G){var J="";if(X)J=X1.call(X);if(X&&(J==="[object ArrayBuffer]"||X.buffer&&X1.call(X.buffer)==="[object ArrayBuffer]")){var V,w=Y0;if(X instanceof ArrayBuffer)V=X,w+=D0;else if(V=X.buffer,J==="[object Int8Array]")w+=c0;else if(J==="[object Uint8Array]")w+=n0;else if(J==="[object Uint8ClampedArray]")w+=i0;else if(J==="[object Int16Array]")w+=s0;else if(J==="[object Uint16Array]")w+=a0;else if(J==="[object Int32Array]")w+=l0;else if(J==="[object Uint32Array]")w+=t0;else if(J==="[object Float32Array]")w+=o0;else if(J==="[object Float64Array]")w+=r0;else G(new Error("Failed to get type for BinaryArray"));G(w+P0(V))}else if(J==="[object Blob]"){var H=new FileReader;H.onload=function(){var B=$6+X.type+"~"+P0(this.result);G(Y0+h0+B)},H.readAsArrayBuffer(X)}else try{G(JSON.stringify(X))}catch(B){console.error("Couldn't convert value into a JSON string: ",X),G(null,B)}}function O6(X){if(X.substring(0,A0)!==Y0)return JSON.parse(X);var G=X.substring(e0),J=X.substring(A0,e0),V;if(J===h0&&d0.test(G)){var w=G.match(d0);V=w[1],G=G.substring(w[0].length)}var H=J1(G);switch(J){case D0:return H;case h0:return n([H],{type:V});case c0:return new Int8Array(H);case n0:return new Uint8Array(H);case i0:return new Uint8ClampedArray(H);case s0:return new Int16Array(H);case a0:return new Uint16Array(H);case l0:return new Int32Array(H);case t0:return new Uint32Array(H);case o0:return new Float32Array(H);case r0:return new Float64Array(H);default:throw new Error("Unkown type: "+J)}}var x0={serialize:F6,deserialize:O6,stringToBuffer:J1,bufferToString:P0};function Q1(X,G,J,V){X.executeSql("CREATE TABLE IF NOT EXISTS "+G.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],J,V)}function K6(X){var G=this,J={db:null};if(X)for(var V in X)J[V]=typeof X[V]!=="string"?X[V].toString():X[V];var w=new L(function(H,B){try{J.db=openDatabase(J.name,String(J.version),J.description,J.size)}catch(Y){return B(Y)}J.db.transaction(function(Y){Q1(Y,J,function(){G._dbInfo=J,H()},function(M,$){B($)})},B)});return J.serializer=x0,w}function e(X,G,J,V,w,H){X.executeSql(J,V,w,function(B,Y){if(Y.code===Y.SYNTAX_ERR)B.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[G.storeName],function(M,$){if(!$.rows.length)Q1(M,G,function(){M.executeSql(J,V,w,H)},H);else H(M,Y)},H);else H(B,Y)},H)}function N6(X,G){var J=this;X=k(X);var V=new L(function(w,H){J.ready().then(function(){var B=J._dbInfo;B.db.transaction(function(Y){e(Y,B,"SELECT * FROM "+B.storeName+" WHERE key = ? LIMIT 1",[X],function(M,$){var F=$.rows.length?$.rows.item(0).value:null;if(F)F=B.serializer.deserialize(F);w(F)},function(M,$){H($)})})}).catch(H)});return D(V,G),V}function q6(X,G){var J=this,V=new L(function(w,H){J.ready().then(function(){var B=J._dbInfo;B.db.transaction(function(Y){e(Y,B,"SELECT * FROM "+B.storeName,[],function(M,$){var F=$.rows,A=F.length;for(var P=0;P<A;P++){var T=F.item(P),_=T.value;if(_)_=B.serializer.deserialize(_);if(_=X(_,T.key,P+1),_!==void 0){w(_);return}}w()},function(M,$){H($)})})}).catch(H)});return D(V,G),V}function Z1(X,G,J,V){var w=this;X=k(X);var H=new L(function(B,Y){w.ready().then(function(){if(G===void 0)G=null;var M=G,$=w._dbInfo;$.serializer.serialize(G,function(F,A){if(A)Y(A);else $.db.transaction(function(P){e(P,$,"INSERT OR REPLACE INTO "+$.storeName+" (key, value) VALUES (?, ?)",[X,F],function(){B(M)},function(T,_){Y(_)})},function(P){if(P.code===P.QUOTA_ERR){if(V>0){B(Z1.apply(w,[X,M,J,V-1]));return}Y(P)}})})}).catch(Y)});return D(H,J),H}function L6(X,G,J){return Z1.apply(this,[X,G,J,1])}function A6(X,G){var J=this;X=k(X);var V=new L(function(w,H){J.ready().then(function(){var B=J._dbInfo;B.db.transaction(function(Y){e(Y,B,"DELETE FROM "+B.storeName+" WHERE key = ?",[X],function(){w()},function(M,$){H($)})})}).catch(H)});return D(V,G),V}function D6(X){var G=this,J=new L(function(V,w){G.ready().then(function(){var H=G._dbInfo;H.db.transaction(function(B){e(B,H,"DELETE FROM "+H.storeName,[],function(){V()},function(Y,M){w(M)})})}).catch(w)});return D(J,X),J}function h6(X){var G=this,J=new L(function(V,w){G.ready().then(function(){var H=G._dbInfo;H.db.transaction(function(B){e(B,H,"SELECT COUNT(key) as c FROM "+H.storeName,[],function(Y,M){var $=M.rows.item(0).c;V($)},function(Y,M){w(M)})})}).catch(w)});return D(J,X),J}function P6(X,G){var J=this,V=new L(function(w,H){J.ready().then(function(){var B=J._dbInfo;B.db.transaction(function(Y){e(Y,B,"SELECT key FROM "+B.storeName+" WHERE id = ? LIMIT 1",[X+1],function(M,$){var F=$.rows.length?$.rows.item(0).key:null;w(F)},function(M,$){H($)})})}).catch(H)});return D(V,G),V}function x6(X){var G=this,J=new L(function(V,w){G.ready().then(function(){var H=G._dbInfo;H.db.transaction(function(B){e(B,H,"SELECT key FROM "+H.storeName,[],function(Y,M){var $=[];for(var F=0;F<M.rows.length;F++)$.push(M.rows.item(F).key);V($)},function(Y,M){w(M)})})}).catch(w)});return D(J,X),J}function S6(X){return new L(function(G,J){X.transaction(function(V){V.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(w,H){var B=[];for(var Y=0;Y<H.rows.length;Y++)B.push(H.rows.item(Y).name);G({db:X,storeNames:B})},function(w,H){J(H)})},function(V){J(V)})})}function R6(X,G){G=i.apply(this,arguments);var J=this.config();if(X=typeof X!=="function"&&X||{},!X.name)X.name=X.name||J.name,X.storeName=X.storeName||J.storeName;var V=this,w;if(!X.name)w=L.reject("Invalid arguments");else w=new L(function(H){var B;if(X.name===J.name)B=V._dbInfo.db;else B=openDatabase(X.name,"","",0);if(!X.storeName)H(S6(B));else H({db:B,storeNames:[X.storeName]})}).then(function(H){return new L(function(B,Y){H.db.transaction(function(M){function $(T){return new L(function(_,g){M.executeSql("DROP TABLE IF EXISTS "+T,[],function(){_()},function(I,c){g(c)})})}var F=[];for(var A=0,P=H.storeNames.length;A<P;A++)F.push($(H.storeNames[A]));L.all(F).then(function(){B()}).catch(function(T){Y(T)})},function(M){Y(M)})})});return D(w,G),w}var T6={_driver:"webSQLStorage",_initStorage:K6,_support:M6(),iterate:q6,getItem:N6,setItem:L6,removeItem:A6,clear:D6,length:h6,key:P6,keys:x6,dropInstance:R6};function C6(){try{return typeof localStorage!=="undefined"&&"setItem"in localStorage&&!!localStorage.setItem}catch(X){return!1}}function W1(X,G){var J=X.name+"/";if(X.storeName!==G.storeName)J+=X.storeName+"/";return J}function _6(){var X="_localforage_support_test";try{return localStorage.setItem(X,!0),localStorage.removeItem(X),!1}catch(G){return!0}}function E6(){return!_6()||localStorage.length>0}function j6(X){var G=this,J={};if(X)for(var V in X)J[V]=X[V];if(J.keyPrefix=W1(X,G._defaultConfig),!E6())return L.reject();return G._dbInfo=J,J.serializer=x0,L.resolve()}function I6(X){var G=this,J=G.ready().then(function(){var V=G._dbInfo.keyPrefix;for(var w=localStorage.length-1;w>=0;w--){var H=localStorage.key(w);if(H.indexOf(V)===0)localStorage.removeItem(H)}});return D(J,X),J}function y6(X,G){var J=this;X=k(X);var V=J.ready().then(function(){var w=J._dbInfo,H=localStorage.getItem(w.keyPrefix+X);if(H)H=w.serializer.deserialize(H);return H});return D(V,G),V}function m6(X,G){var J=this,V=J.ready().then(function(){var w=J._dbInfo,H=w.keyPrefix,B=H.length,Y=localStorage.length,M=1;for(var $=0;$<Y;$++){var F=localStorage.key($);if(F.indexOf(H)!==0)continue;var A=localStorage.getItem(F);if(A)A=w.serializer.deserialize(A);if(A=X(A,F.substring(B),M++),A!==void 0)return A}});return D(V,G),V}function g6(X,G){var J=this,V=J.ready().then(function(){var w=J._dbInfo,H;try{H=localStorage.key(X)}catch(B){H=null}if(H)H=H.substring(w.keyPrefix.length);return H});return D(V,G),V}function k6(X){var G=this,J=G.ready().then(function(){var V=G._dbInfo,w=localStorage.length,H=[];for(var B=0;B<w;B++){var Y=localStorage.key(B);if(Y.indexOf(V.keyPrefix)===0)H.push(Y.substring(V.keyPrefix.length))}return H});return D(J,X),J}function v6(X){var G=this,J=G.keys().then(function(V){return V.length});return D(J,X),J}function p6(X,G){var J=this;X=k(X);var V=J.ready().then(function(){var w=J._dbInfo;localStorage.removeItem(w.keyPrefix+X)});return D(V,G),V}function u6(X,G,J){var V=this;X=k(X);var w=V.ready().then(function(){if(G===void 0)G=null;var H=G;return new L(function(B,Y){var M=V._dbInfo;M.serializer.serialize(G,function($,F){if(F)Y(F);else try{localStorage.setItem(M.keyPrefix+X,$),B(H)}catch(A){if(A.name==="QuotaExceededError"||A.name==="NS_ERROR_DOM_QUOTA_REACHED")Y(A);Y(A)}})})});return D(w,J),w}function f6(X,G){if(G=i.apply(this,arguments),X=typeof X!=="function"&&X||{},!X.name){var J=this.config();X.name=X.name||J.name,X.storeName=X.storeName||J.storeName}var V=this,w;if(!X.name)w=L.reject("Invalid arguments");else w=new L(function(H){if(!X.storeName)H(X.name+"/");else H(W1(X,V._defaultConfig))}).then(function(H){for(var B=localStorage.length-1;B>=0;B--){var Y=localStorage.key(B);if(Y.indexOf(H)===0)localStorage.removeItem(Y)}});return D(w,G),w}var b6={_driver:"localStorageWrapper",_initStorage:j6,_support:C6(),iterate:m6,getItem:y6,setItem:u6,removeItem:p6,clear:I6,length:v6,key:g6,keys:k6,dropInstance:f6},d6=function X(G,J){return G===J||typeof G==="number"&&typeof J==="number"&&isNaN(G)&&isNaN(J)},c6=function X(G,J){var V=G.length,w=0;while(w<V){if(d6(G[w],J))return!0;w++}return!1},G1=Array.isArray||function(X){return Object.prototype.toString.call(X)==="[object Array]"},H0={},H1={},Z0={INDEXEDDB:Y6,WEBSQL:T6,LOCALSTORAGE:b6},n6=[Z0.INDEXEDDB._driver,Z0.WEBSQL._driver,Z0.LOCALSTORAGE._driver],M0=["dropInstance"],S0=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(M0),i6={description:"",driver:n6.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function s6(X,G){X[G]=function(){var J=arguments;return X.ready().then(function(){return X[G].apply(X,J)})}}function R0(){for(var X=1;X<arguments.length;X++){var G=arguments[X];if(G){for(var J in G)if(G.hasOwnProperty(J))if(G1(G[J]))arguments[0][J]=G[J].slice();else arguments[0][J]=G[J]}}return arguments[0]}var l6=function(){function X(G){h(this,X);for(var J in Z0)if(Z0.hasOwnProperty(J)){var V=Z0[J],w=V._driver;if(this[J]=w,!H0[w])this.defineDriver(V)}this._defaultConfig=R0({},i6),this._config=R0({},this._defaultConfig,G),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return X.prototype.config=function G(J){if((typeof J==="undefined"?"undefined":q(J))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var V in J){if(V==="storeName")J[V]=J[V].replace(/\W/g,"_");if(V==="version"&&typeof J[V]!=="number")return new Error("Database version must be a number.");this._config[V]=J[V]}if("driver"in J&&J.driver)return this.setDriver(this._config.driver);return!0}else if(typeof J==="string")return this._config[J];else return this._config},X.prototype.defineDriver=function G(J,V,w){var H=new L(function(B,Y){try{var M=J._driver,$=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!J._driver){Y($);return}var F=S0.concat("_initStorage");for(var A=0,P=F.length;A<P;A++){var T=F[A],_=!c6(M0,T);if((_||J[T])&&typeof J[T]!=="function"){Y($);return}}var g=function c(){var V0=function v8(o6){return function(){var r6=new Error("Method "+o6+" is not implemented by the current driver"),V1=L.reject(r6);return D(V1,arguments[arguments.length-1]),V1}};for(var T0=0,t6=M0.length;T0<t6;T0++){var C0=M0[T0];if(!J[C0])J[C0]=V0(C0)}};g();var I=function c(V0){if(H0[M])console.info("Redefining LocalForage driver: "+M);H0[M]=J,H1[M]=V0,B()};if("_support"in J)if(J._support&&typeof J._support==="function")J._support().then(I,Y);else I(!!J._support);else I(!0)}catch(c){Y(c)}});return m(H,V,w),H},X.prototype.driver=function G(){return this._driver||null},X.prototype.getDriver=function G(J,V,w){var H=H0[J]?L.resolve(H0[J]):L.reject(new Error("Driver not found."));return m(H,V,w),H},X.prototype.getSerializer=function G(J){var V=L.resolve(x0);return m(V,J),V},X.prototype.ready=function G(J){var V=this,w=V._driverSet.then(function(){if(V._ready===null)V._ready=V._initDriver();return V._ready});return m(w,J,J),w},X.prototype.setDriver=function G(J,V,w){var H=this;if(!G1(J))J=[J];var B=this._getSupportedDrivers(J);function Y(){H._config.driver=H.driver()}function M(A){return H._extend(A),Y(),H._ready=H._initStorage(H._config),H._ready}function $(A){return function(){var P=0;function T(){while(P<A.length){var _=A[P];return P++,H._dbInfo=null,H._ready=null,H.getDriver(_).then(M).catch(T)}Y();var g=new Error("No available storage method found.");return H._driverSet=L.reject(g),H._driverSet}return T()}}var F=this._driverSet!==null?this._driverSet.catch(function(){return L.resolve()}):L.resolve();return this._driverSet=F.then(function(){var A=B[0];return H._dbInfo=null,H._ready=null,H.getDriver(A).then(function(P){H._driver=P._driver,Y(),H._wrapLibraryMethodsWithReady(),H._initDriver=$(B)})}).catch(function(){Y();var A=new Error("No available storage method found.");return H._driverSet=L.reject(A),H._driverSet}),m(this._driverSet,V,w),this._driverSet},X.prototype.supports=function G(J){return!!H1[J]},X.prototype._extend=function G(J){R0(this,J)},X.prototype._getSupportedDrivers=function G(J){var V=[];for(var w=0,H=J.length;w<H;w++){var B=J[w];if(this.supports(B))V.push(B)}return V},X.prototype._wrapLibraryMethodsWithReady=function G(){for(var J=0,V=S0.length;J<V;J++)s6(this,S0[J])},X.prototype.createInstance=function G(J){return new X(J)},X}(),a6=new l6;z.exports=a6},{"3":3}]},{},[4])(4)})});function w0(Q){const W=globalThis.document,Z=W.createElement("style");Z.appendChild(W.createTextNode(Q)),W.head.append(Z)}w0(":root{--ui-primary:#e6f0ff;--ui-secondary:#e9f1fc;--ui-tertiary:#d9e3f2;--ui-modal-overlay:#4c97ffe6;--ui-white:#fff;--ui-white-dim:#ffffffbf;--ui-white-transparent:#ffffff40;--ui-transparent:#fff0;--ui-black-transparent:#00000026;--text-primary:#575e75;--text-primary-transparent:#575e75bf;--motion-primary:#4c97ff;--motion-tertiary:#3373cc;--motion-transparent:#4c97ff59;--motion-light-transparent:#4c97ff26;--red-primary:#ff661a;--red-tertiary:#e64d00;--sound-primary:#cf63cf;--sound-tertiary:#bd42bd;--control-primary:#ffab1a;--data-primary:#ff8c1a;--pen-primary:#0fbd8c;--pen-transparent:#0fbd8c40;--error-primary:#ff8c1a;--error-light:#ffb366;--error-transparent:#ff8c1a40;--extensions-primary:#0fbd8c;--extensions-tertiary:#0b8e69;--extensions-transparent:#0fbd8c59;--extensions-light:#c3efe2;--drop-highlight:#8abbff;--space:.5rem;--standard-font-size:.75rem;--small-font-size:.625rem;--icon-per-row:5;--menu-bar-height:3rem;--language-selector-width:3rem;--tool-bar-height:2.75rem;--library-header-height:3.125rem;--library-filter-bar-height:2.5rem;--form-radius:calc(var(--space)/2);--min-width:1024px;--min-height:640px;--menu-bar-standard-font-size:var(--standard-font-size);--menu-bar-large-font-size:.875rem;--menu-bar-button-size:2rem;--menu-bar-item-max-width:12rem;--z-index-extension-button:42;--z-index-stage-indicator:45;--z-index-add-button:46;--z-index-tooltip:47;--z-index-monitor:48;--z-index-stage-question:49;--z-index-card:480;--z-index-alerts:490;--z-index-menu-bar:491;--z-index-loader:500;--z-index-modal:510;--z-index-drag-layer:1000;--z-index-monitor-dragging:1010;--z-index-dragging-sprite:1020;--z-index-stage-color-picker-background:2000;--z-index-stage-with-color-picker:2010;--z-index-stage-header:5000;--z-index-stage-wrapper-overlay:5000;--z-index-context-menu:10000}html,body,#root{min-width:var(--min-width);min-height:var(--min-height);width:100%;height:100%;margin:0}*{box-sizing:border-box;user-select:none}");w0("body{font-family:Helvetica Neue,Helvetica,Arial,sans-serif}h2{font-size:1.5rem;font-weight:700}p{font-size:1rem;line-height:1.5em}");var w8=function(Q,W,Z){for(var U=new V8(W),z=[],O=function(q){var{options:h,type:x,value:j}=q;if(x!==X0.Variable)if(h)if(x!==X0.Select)try{z.concat(h[new Intl.PluralRules(Q).select(Z[j])].map(O))}catch(y){z.concat(h.other.map(O))}else z.concat((h[Z[j]]||h.other).map(O));else z.push(j);else z.push(Z[j])};!U.input.done;)O(U.next());return z},X0,_0=function(Q,W){return _0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Z,U){Z.__proto__=U}||function(Z,U){for(var z in U)Object.prototype.hasOwnProperty.call(U,z)&&(Z[z]=U[z])},_0(Q,W)},U1=function(Q){function W(Z,U){var z=Q.call(this,"Translation failed")||this;return z.id=Z,z.language=U,z}return function(Z,U){if(typeof U!="function"&&U!==null)throw new TypeError("Class extends value "+U+" is not a constructor or null");function z(){this.constructor=Z}_0(Z,U),Z.prototype=U===null?Object.create(U):(z.prototype=U.prototype,new z)}(W,Q),W.is=function(Z){return Z instanceof W},W}(Error),G8=function(){function Q(W){this.input=W,this.index=0,this.done=!1,this.value="",this.value=this.input.charAt(0)}return Q.prototype.next=function(){return++this.index>=this.input.length&&(this.done=!0),this.value=this.input.charAt(this.index)},Q.prototype.croak=function(){throw Error("[".concat(this.input,']. Unexpected character "').concat(this.value,'" on position ').concat(this.index,"."))},Q}();(function(Q){Q[Q.Plural=0]="Plural",Q[Q.Select=1]="Select",Q[Q.Text=2]="Text",Q[Q.Variable=3]="Variable"})(X0||(X0={}));var H8=["{","}",","],V8=function(){function Q(W){this.input=new G8(W)}return Q.prototype.next=function(){return this.input.value==="{"?this.readVariable():this.readText()},Q.prototype.skip=function(W){W!==this.input.value&&this.input.croak(),this.input.next()},Q.prototype.readWhile=function(W){for(var Z="";!this.input.done&&W(this.input.value);)Z+=this.input.value,this.input.next();return Z},Q.prototype.readVariable=function(){this.skip("{");var W=this.readWhile(function(U){return!function(z){return H8.includes(z)}(U)}).trim();if(W.length===0&&this.input.croak(),this.input.value==="}")return this.skip("}"),{type:X0.Variable,value:W};this.skip(",");var Z=this.readVariableType();return{options:this.readVariableOptions(),type:Z,value:W}},Q.prototype.readText=function(){return{type:X0.Text,value:this.readWhile(function(W){return W!=="{"&&W!=="}"})}},Q.prototype.readVariableType=function(){var W=this.readWhile(function(Z){return Z!==","}).trim();return W==="plural"?X0.Plural:W==="select"?X0.Select:void this.input.croak()},Q.prototype.readVariableOptions=function(){this.skip(",");for(var W={};this.input.value!=="}";)W[this.readText().value.trim()]=this.readExpression();return this.skip("}"),W},Q.prototype.readExpression=function(){var W=[];for(this.skip("{");this.input.value!=="}";)W.push(this.next());return this.skip("}"),W},Q}(),$0=function(Q,W){Q===void 0&&(Q="en"),W===void 0&&(W=[]);var Z=this;this.memo={},this.onError=console.error,this.formatDate=function(z,O){return new Intl.DateTimeFormat(Z.language,O).format(z)},this.formatNumber=function(z,O){return new Intl.NumberFormat(Z.language,O).format(z)},this.translate=function(z,O){O===void 0&&(O={});var q=Z.getMessageById(z,O.defaultMessage);if(typeof q=="string")try{return w8(Z.language,q,O).join("")}catch(h){Z.onError(new U1(z,Z.language))}return q+""},this.getMessageById=function(z,O){if(!Z.memo[z]){var q=Z.messages[z];q===void 0&&(q=z.split(".").reduce(function(h,x){return h?h[x]:void 0},Z.messages)),typeof q!="string"&&(Z.onError(new U1(z,Z.language)),q=O||z),Z.memo[z]=q}return Z.memo[z]};var U=W.find(function(z){return z.language===Q});this.language=Q,this.messages=U?U.messages:{}};import{createContext as U8,h as U0,Fragment as E0} from"preact";import{useState as z8,useEffect as B8,useContext as z1} from"preact/hooks";var j0=function(Q,W){var Z={};for(var U in Q)Object.prototype.hasOwnProperty.call(Q,U)&&W.indexOf(U)<0&&(Z[U]=Q[U]);if(Q!=null&&typeof Object.getOwnPropertySymbols=="function"){var z=0;for(U=Object.getOwnPropertySymbols(Q);z<U.length;z++)W.indexOf(U[z])<0&&Object.prototype.propertyIsEnumerable.call(Q,U[z])&&(Z[U[z]]=Q[U[z]])}return Z},F0=function(Q){var W=z1(I0);return Q&&Q!==W.language?new $0(Q):W.translator},I0=U8({language:"",locales:[],setLanguage:function(){},translator:new $0}),B1=function(Q){var{children:W,language:Z,locales:U,onError:z}=Q,O=z8(Z);B8(function(){O[1](Z)},[Z]);var q=new $0(O[0],U);return z&&(q.onError=z),U0(I0.Provider,{value:{language:O[0],locales:U,setLanguage:O[1],translator:q}},W)},s8=function(Q){var{language:W,value:Z}=Q,U=j0(Q,["children","language","value"]);return U0(E0,null,F0(W).formatDate(Z,U))},l8=function(Q){var{language:W,value:Z}=Q,U=j0(Q,["children","language","value"]);return U0(E0,null,F0(W).formatNumber(Z,U))},a8=function(Q){var{html:W,id:Z,tagName:U}=Q,z=U===void 0?"span":U,O=j0(Q,["children","html","id","tagName"]),q=z1(I0).translator.translate(Z,O);return W?U0(z,{dangerouslySetInnerHTML:{__html:q}}):U0(E0,null,q)};function Y8(Q,W){const Z=document.createElement("a"),U=new Blob([Q]),z=URL.createObjectURL(U);Z.setAttribute("href",z),Z.setAttribute("download",W),Z.click()}import{Fragment as M8,toChildArray as $8} from"preact";function y0(Q){return[].concat(...$8(Q).map((W)=>Array.isArray(W)?y0(W):W.type===M8?y0(W.props.children):W))}function F8(Q,W){$1.set(Q,W)}function O8(Q){const W=[];return Q.forEach((Z)=>{if(M1.hasOwnProperty(Z))W[M1[Z]]=Y1[Z];else W.push(Y1[Z])}),W.filter((Z)=>Z).join(o?"":"+")}var N={ESC:"Escape",F1:"F1",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",F10:"F10",F11:"F11",F12:"F12",D1:"Digit1",D2:"Digit2",D3:"Digit3",D4:"Digit4",D5:"Digit5",D6:"Digit6",D7:"Digit7",D8:"Digit8",D9:"Digit9",D0:"Digit0",TAB:"Tab",BACKSPACE:"Backspace",DELETE:"Backspace",ENTER:"Enter",RETURN:"Enter",A:"KeyA",B:"KeyB",C:"KeyC",D:"KeyD",E:"KeyE",F:"KeyF",G:"KeyG",H:"KeyH",I:"KeyI",J:"KeyJ",K:"KeyK",L:"KeyL",M:"KeyM",N:"KeyN",O:"KeyO",P:"KeyP",Q:"KeyQ",R:"KeyR",S:"KeyS",T:"KeyT",U:"KeyU",V:"KeyV",W:"KeyW",X:"KeyX",Y:"KeyY",Z:"KeyZ",UP:"ArrowUp",DOWN:"ArrowDown",LEFT:"ArrowLeft",RIGHT:"ArrowRight",SHIFT:"Shift",CTRL:"Control",ALT:"Alt",WIN:"Meta",CONTROL:"Control",OPTION:"Alt",COMMAND:"Meta",META:"Meta"},o=/Mac/i.test(navigator.platform||navigator.userAgent),Y1={[N.ESC]:o?"\u238B":"Esc",[N.F1]:"F1",[N.F2]:"F2",[N.F3]:"F3",[N.F4]:"F4",[N.F5]:"F5",[N.F6]:"F6",[N.F7]:"F7",[N.F8]:"F8",[N.F9]:"F9",[N.F10]:"F10",[N.F11]:"F11",[N.F12]:"F12",[N.D1]:"1",[N.D2]:"2",[N.D3]:"3",[N.D4]:"4",[N.D5]:"5",[N.D6]:"6",[N.D7]:"7",[N.D8]:"8",[N.D9]:"9",[N.D0]:"0",[N.TAB]:o?"\u21E5":"Tab",[N.DELETE]:o?"\u232B":"Backspace",[N.RETURN]:o?"\u21A9":"Enter",[N.A]:"A",[N.B]:"B",[N.C]:"C",[N.D]:"D",[N.E]:"E",[N.F]:"F",[N.G]:"G",[N.H]:"H",[N.I]:"I",[N.J]:"J",[N.K]:"K",[N.L]:"L",[N.M]:"M",[N.N]:"N",[N.O]:"O",[N.P]:"P",[N.Q]:"Q",[N.R]:"R",[N.S]:"S",[N.T]:"T",[N.U]:"U",[N.V]:"V",[N.W]:"W",[N.X]:"X",[N.Y]:"Y",[N.Z]:"Z",[N.UP]:"\u2191",[N.DOWN]:"\u2193",[N.LEFT]:"\u2190",[N.RIGHT]:"\u2192",[N.SHIFT]:o?"\u21E7":"Shift",[N.CONTROL]:o?"\u2303":"Ctrl",[N.OPTION]:o?"\u2325":"Alt",[N.COMMAND]:o?"\u2318":"\u229E"},M1={[N.CONTROL]:0,[N.OPTION]:1,[N.SHIFT]:2,[N.COMMAND]:3},$1=new Map;window.addEventListener("keydown",(Q)=>{$1.forEach((W,Z)=>{const U=(z)=>{if(z===N.CONTROL&&Q.ctrlKey)return!0;if(z===N.OPTION&&Q.altKey)return!0;if(z===N.SHIFT&&Q.shiftKey)return!0;if(z===N.COMMAND&&Q.metaKey)return!0;if(z===Q.code)return!0;return!1};if(Z.every(U)&&typeof W==="function")Q.preventDefault(),W()})});var K8=function(Q){console&&console.warn&&console.warn(Q)},C=function(){C.init.call(this)},K0=function(Q){if(typeof Q!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof Q)},N1=function(Q){return Q._maxListeners===void 0?C.defaultMaxListeners:Q._maxListeners},q1=function(Q,W,Z,U){var z,O,q;if(K0(Z),O=Q._events,O===void 0?(O=Q._events=Object.create(null),Q._eventsCount=0):(O.newListener!==void 0&&(Q.emit("newListener",W,Z.listener?Z.listener:Z),O=Q._events),q=O[W]),q===void 0)q=O[W]=Z,++Q._eventsCount;else if(typeof q=="function"?q=O[W]=U?[Z,q]:[q,Z]:U?q.unshift(Z):q.push(Z),z=N1(Q),z>0&&q.length>z&&!q.warned){q.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+q.length+" "+String(W)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=Q,h.type=W,h.count=q.length,K8(h)}return Q},N8=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)},L1=function(Q,W,Z){var U={fired:!1,wrapFn:void 0,target:Q,type:W,listener:Z},z=N8.bind(U);return z.listener=Z,U.wrapFn=z,z},A1=function(Q,W,Z){var U=Q._events;if(U===void 0)return[];var z=U[W];return z===void 0?[]:typeof z=="function"?Z?[z.listener||z]:[z]:Z?L8(z):h1(z,z.length)},D1=function(Q){var W=this._events;if(W!==void 0){var Z=W[Q];if(typeof Z=="function")return 1;if(Z!==void 0)return Z.length}return 0},h1=function(Q,W){for(var Z=new Array(W),U=0;U<W;++U)Z[U]=Q[U];return Z},q8=function(Q,W){for(;W+1<Q.length;W++)Q[W]=Q[W+1];Q.pop()},L8=function(Q){for(var W=new Array(Q.length),Z=0;Z<W.length;++Z)W[Z]=Q[Z].listener||Q[Z];return W};var W0=typeof Reflect=="object"?Reflect:null,F1=W0&&typeof W0.apply=="function"?W0.apply:function(Q,W,Z){return Function.prototype.apply.call(Q,W,Z)},O0;W0&&typeof W0.ownKeys=="function"?O0=W0.ownKeys:Object.getOwnPropertySymbols?O0=function(Q){return Object.getOwnPropertyNames(Q).concat(Object.getOwnPropertySymbols(Q))}:O0=function(Q){return Object.getOwnPropertyNames(Q)};var K1=Number.isNaN||function(Q){return Q!==Q};C.EventEmitter=C;C.prototype._events=void 0;C.prototype._eventsCount=0;C.prototype._maxListeners=void 0;var O1=10;Object.defineProperty(C,"defaultMaxListeners",{enumerable:!0,get:function(){return O1},set:function(Q){if(typeof Q!="number"||Q<0||K1(Q))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+Q+".");O1=Q}});C.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};C.prototype.setMaxListeners=function(Q){if(typeof Q!="number"||Q<0||K1(Q))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+Q+".");return this._maxListeners=Q,this};C.prototype.getMaxListeners=function(){return N1(this)};C.prototype.emit=function(Q){for(var W=[],Z=1;Z<arguments.length;Z++)W.push(arguments[Z]);var U=Q==="error",z=this._events;if(z!==void 0)U=U&&z.error===void 0;else if(!U)return!1;if(U){var O;if(W.length>0&&(O=W[0]),O instanceof Error)throw O;var q=new Error("Unhandled error."+(O?" ("+O.message+")":""));throw q.context=O,q}var h=z[Q];if(h===void 0)return!1;if(typeof h=="function")F1(h,this,W);else for(var x=h.length,j=h1(h,x),Z=0;Z<x;++Z)F1(j[Z],this,W);return!0};C.prototype.addListener=function(Q,W){return q1(this,Q,W,!1)};C.prototype.on=C.prototype.addListener;C.prototype.prependListener=function(Q,W){return q1(this,Q,W,!0)};C.prototype.once=function(Q,W){return K0(W),this.on(Q,L1(this,Q,W)),this};C.prototype.prependOnceListener=function(Q,W){return K0(W),this.prependListener(Q,L1(this,Q,W)),this};C.prototype.removeListener=function(Q,W){var Z,U,z,O,q;if(K0(W),U=this._events,U===void 0)return this;if(Z=U[Q],Z===void 0)return this;if(Z===W||Z.listener===W)--this._eventsCount===0?this._events=Object.create(null):(delete U[Q],U.removeListener&&this.emit("removeListener",Q,Z.listener||W));else if(typeof Z!="function"){for(z=-1,O=Z.length-1;O>=0;O--)if(Z[O]===W||Z[O].listener===W){q=Z[O].listener,z=O;break}if(z<0)return this;z===0?Z.shift():q8(Z,z),Z.length===1&&(U[Q]=Z[0]),U.removeListener!==void 0&&this.emit("removeListener",Q,q||W)}return this};C.prototype.off=C.prototype.removeListener;C.prototype.removeAllListeners=function(Q){var W,Z,U;if(Z=this._events,Z===void 0)return this;if(Z.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):Z[Q]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete Z[Q]),this;if(arguments.length===0){var z=Object.keys(Z),O;for(U=0;U<z.length;++U)O=z[U],O!=="removeListener"&&this.removeAllListeners(O);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(W=Z[Q],typeof W=="function")this.removeListener(Q,W);else if(W!==void 0)for(U=W.length-1;U>=0;U--)this.removeListener(Q,W[U]);return this};C.prototype.listeners=function(Q){return A1(this,Q,!0)};C.prototype.rawListeners=function(Q){return A1(this,Q,!1)};C.listenerCount=function(Q,W){return typeof Q.listenerCount=="function"?Q.listenerCount(W):D1.call(Q,W)};C.prototype.listenerCount=D1;C.prototype.eventNames=function(){return this._eventsCount>0?O0(this._events):[]};var JX=C.prototype;class P1 extends C{constructor(Q){super();this.port=Q,this.reader=null}dispose(){this.close().then(()=>{this.port=null})}getInfo(){return this.port.getInfo()}open(Q){return new Promise((W,Z)=>{this.port.open(Q).then(()=>{const U=()=>{this.reader=this.port.readable.getReader(),this.reader.read().then(({value:z,done:O})=>{if(this.reader.releaseLock(),z)this.emit("data",z);if(O);else U()}).catch(()=>{this.emit("disconnect")})};U(),this.emit("connect"),W()}).catch((U)=>{Z(U)})})}close(){return new Promise((Q,W)=>{if(this.reader)this.reader.cancel().then(()=>this.port.close()).then(()=>Q()).catch((Z)=>W(Z));else this.reader=null,this.port.close().then(()=>Q()).catch((Z)=>W(Z))})}write(Q,W="text"){return new Promise((Z,U)=>{const z=this.port.writable.getWriter();if(W==="binary")z.write(Q).then(()=>Z()).catch((O)=>U(O));else{const O=new TextEncoder;z.write(O.encode(Q)).then(()=>Z()).catch((q)=>U(q))}z.releaseLock()})}}function x1(Q){return new Promise((W)=>{setTimeout(W,Q)})}var A8=()=>x1(0);var S1={"zh-CN":"zh-Hans","zh-TW":"zh-Hant","zh-HK":"zh-Hant","zh-MO":"zh-Hant"};function m0(Q){if(S1[Q])return S1[Q];return Q}var g0="en",k0=navigator.language,{DisplayNames:v0,Locale:D8}=window.Intl,h8=new v0([g0],{type:"language"}),P8=new v0([k0],{type:"language"}),z0=new Map,T1=(Q)=>(Q=m0(Q))&&z0.has(Q)&&Q,p0=(Q)=>{const W=new D8(Q),Z=W.textInfo||W.getTextInfo();return Z&&Z.direction==="rtl"},R1=(Q,W={})=>{const Z=new v0([Q],{type:"language"});return z0.set(Q,{language:Z.of(Q),languageInDefault:h8.of(Q),languageInBrowser:P8.of(Q)}),{language:Q,messages:W}},C1=[R1("en"),R1("zh-Hans")];var s=Z8(E1(),1);import{createContext as x8} from"preact";import{useContext as S8,useReducer as R8} from"preact/hooks";function C8(){const{state:Q,dispatch:W}=S8(s1);return{...Q,closeProject(){W({type:j1})},async openProject(Z){if(typeof Z==="stirng")Z=await s.default.getItem(key);if(Z)W({type:I1,payload:Z});else throw new Error(`${key} does not exist.`)},setProjectName(Z){W({type:y1,payload:Z})},addFile(Z){if(Q.fileList.find((U)=>U.id===Z.id))throw Error("File already exists");W({type:g1,payload:Z})},openFile(Z){if(Z<0||Z>Q.fileList.length-1)throw Error("File does not exist");W({type:k1,payload:Z})},deleteFile(Z){if(Z<0||Z>Q.fileList.length-1)throw Error("File does not exist");W({type:v1,payload:Z})},renameFile(Z){if(Q.fileList.find((U)=>U.name===Z))throw Error("File already exists");W({type:p1,payload:Z})},modifyFile(Z){W({type:u1,payload:Z})},addAsset(Z){if(Q.assetList.find((U)=>U.id===Z.id))throw Error("Asset already exists");W({type:f1,payload:Z})},deleteAsset(...Z){if(Array.isArray(Z[0]))Z=Z[0];W({type:b1,payload:Z})},modifyAsset(Z){W({type:d1,payload:Z})},connectDevice(Z){W({type:c1,payload:Z})},setEditor(Z){W({type:n1,payload:Z})},setThumb(Z){W({type:m1,payload:Z})},async saveNow(){const Z=Date.now();let U=Q.key||Z.toString(36);const{name:z,thumb:O,editor:q,assetList:h,fileList:x,selectedIndex:j}=Q,y=await s.default.setItem(U,{key:U,name:z,thumb:O,editor:q,assetList:h,fileList:x,selectedIndex:j,modifiedDate:Z});return W({type:i1,payload:{key:U,modified:!1}}),y},async listProjects(){const Z=[];return await s.default.iterate((U,z)=>{Z.push({key:z,name:U.name,image:U.thumb,modifiedDate:U.modifiedDate})}),Z},getProject(Z){return s.default.getItem(Z)},async renameProject(Z,U){const z=await s.default.getItem(Z);z.name=U,await s.default.setItem(z.key,z)},async duplicateProject(Z){const U=await s.default.getItem(Z);U.modifiedDate=Date.now(),U.key=U.modifiedDate.toString(36),await s.default.setItem(U.key,U)},async deleteProject(Z){await s.default.removeItem(Z)}}}function _8({children:Q}){const[W,Z]=R8(T8,N0);return E8(s1.Provider,{value:{state:W,dispatch:Z},children:Q})}import{jsx as E8} from"preact/jsx-runtime";var j1="CLOSE_PROJECT",I1="OPEN_PROJECT",y1="SET_PROJECT_NAME",m1="SET_PROJECT_THUMB",g1="ADD_FILE",k1="OPEN_FILE",v1="DELETE_FILE",p1="RENAME_FILE",u1="MODIFY_FILE",f1="ADD_ASSET",b1="DELETE_ASSET",d1="MODIFY_ASSET",c1="CONNECT_DEVICE",n1="CONFIG_EDITOR",i1="SAVE_KEY";s.default.config({name:"blockcode-store"});var N0={key:null,thumb:"",name:"",editor:null,assetList:[],fileList:[],selectedIndex:-1,device:null,modified:!1},s1=x8({state:Object.assign({},N0),dispatch:()=>{}}),T8=(Q,W)=>{switch(W.type){case j1:return Object.assign({},N0);case I1:return Object.assign({},N0,W.payload);case y1:return{...Q,name:W.payload,modified:!0};case m1:return{...Q,thumb:W.payload,modified:!0};case g1:return{...Q,fileList:Q.fileList.concat(W.payload),selectedIndex:Q.fileList.length,modified:!0};case k1:return{...Q,selectedIndex:W.payload};case v1:return{...Q,fileList:Q.fileList.filter((Z,U)=>U!==W.payload),selectedIndex:W.payload===Q.fileList.length-1?W.payload-1:W.payload,modified:!0};case p1:return{...Q,fileList:Q.fileList.map((Z,U)=>{if(U===Q.selectedIndex)return{...Z,name:W.payload};return Z}),modified:!0};case u1:return{...Q,fileList:Q.fileList.map((Z,U)=>{if(W.payload.id?Z.id===W.payload.id:U===Q.selectedIndex)return{...Z,...W.payload};return Z}),modified:!0};case f1:return{...Q,assetList:Q.assetList.concat(W.payload),modified:!0};case b1:return{...Q,assetList:Q.assetList.filter((Z)=>!W.payload.includes(Z.id)),modified:!0};case d1:return{...Q,assetList:Q.assetList.map((Z,U)=>{if(Z.id===W.payload.id)return{...Z,...W.payload};return Z}),modified:!0};case c1:return{...Q,device:W.payload};case n1:return{...Q,editor:Object.assign(Q.editor||{},W.payload),modified:!0};case i1:return{...Q,...W.payload};default:return Q}};import{createContext as j8} from"preact";import{useContext as I8,useReducer as y8} from"preact/hooks";function g8(){const{state:Q,dispatch:W}=I8(e1),Z=F0();return{...Q,addLocaleData(U){W({type:t1,payload:Q.locales.map(({language:z,messages:O})=>({language:z,messages:Object.assign(O,U[z])}))})},setLanguage(U){if(Q.language!==U)W({type:o1,payload:U})},getText(U,z,O={}){if(typeof z==="object")O=z;return Z.translate(U,{...O,defaultMessage:z})}}}function k8({children:Q}){const[W,Z]=y8(m8,r1);return a1(B1,{language:W.language,locales:W.locales,children:a1(e1.Provider,{value:{state:W,dispatch:Z},children:Q})})}import{jsx as a1} from"preact/jsx-runtime";var t1="SET_LOCALES",o1="SET_LANGUAGE",l1=T1(k0)||g0,r1={locales:C1,language:l1,supportLanguages:z0,isRtl:p0(l1)},e1=j8({state:r1,dispatch:()=>{}}),m8=(Q,W)=>{switch(W.type){case t1:return{...Q,locales:W.payload};case o1:return{...Q,language:W.payload,isRtl:p0(W.payload)};default:return Q}};export{g8 as useLocale,C8 as useEditor,z0 as supportLanguages,x1 as sleep,O8 as showHotkey,F8 as setHotkey,A8 as nextTick,y0 as flatChildren,Y8 as exportFile,a8 as Text,P1 as Serial,l8 as Numeric,k8 as LocalesProvider,N as Keys,_8 as EditorProvider,s8 as DateTime};
