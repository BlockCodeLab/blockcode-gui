import{Text as t}from"@blockcode/ui";var i={en:{"extension.broadcast.name":"Broadcast","extension.broadcast.setGroup":"set broadcast group [ID]","extension.broadcast.send":"broadcast message [MESSAGE]","extension.broadcast.sendName":"broadcast named [NAME] message [MESSAGE]","extension.broadcast.whenReceived":"when I receive message","extension.broadcast.whenReceivedNamed":"when I receive named [NAME] message [MESSAGE]","extension.broadcast.message":"hello","extension.broadcast.messageName":"say","extension.broadcast.received":"received message","extension.broadcast.receivedNamed":"received named [NAME] message","extension.broadcast.receivedIndex":"received message [INDEX]","extension.broadcast.receivedNameIndex":"received named [NAME] message [INDEX]","extension.broadcast.receivedMac":"mac address","extension.broadcast.receivedTime":"timestamp","extension.broadcast.receivedSerial":"serial number"},"zh-Hans":{"extension.broadcast.name":"\u65E0\u7EBF\u5E7F\u64AD","extension.broadcast.setGroup":"\u5C06\u5E7F\u64AD\u7EC4\u8BBE\u4E3A [ID]","extension.broadcast.send":"\u5E7F\u64AD\u6D88\u606F [MESSAGE]","extension.broadcast.sendName":"\u5E7F\u64AD\u547D\u540D\u4E3A [NAME] \u7684\u6D88\u606F [MESSAGE]","extension.broadcast.whenReceived":"\u5F53\u63A5\u6536\u5230\u6D88\u606F","extension.broadcast.whenReceivedNamed":"\u5F53\u63A5\u6536\u5230\u547D\u540D\u4E3A [NAME] \u7684\u6D88\u606F","extension.broadcast.message":"\u4F60\u597D","extension.broadcast.messageName":"\u95EE\u5019","extension.broadcast.received":"\u6D88\u606F","extension.broadcast.receivedNamed":"\u547D\u540D\u4E3A [NAME] \u7684\u6D88\u606F","extension.broadcast.receivedIndex":"\u6D88\u606F\u7684 [INDEX]","extension.broadcast.receivedNameIndex":"\u547D\u540D\u4E3A [NAME] \u6D88\u606F\u7684 [INDEX]","extension.broadcast.receivedMac":"MAC \u5730\u5740","extension.broadcast.receivedTime":"\u65F6\u95F4\u6233","extension.broadcast.receivedSerial":"\u5E8F\u5217\u53F7"}};var o="./assets/icon-em6p3nz5.png";var d="./assets/broadcast-0qfnzpfy.py";import{jsx as a}from"preact/jsx-runtime";var b={iconURI:o,name:a(t,{id:"extension.broadcast.name",defaultMessage:"Broadcast"}),files:[{name:"broadcast",type:"text/x-python",uri:d}],blocks:[{id:"whenReceived",text:a(t,{id:"extension.broadcast.whenReceived",defaultMessage:"when I receive message"}),hat:!0,python(){return this.definitions_.import_extension_broadcast="from extensions.broadcast import broadcast",`@broadcast.when_received("default", target)\n${this.eventToCode("broadcast_received","target")}`}},{id:"send",text:a(t,{id:"extension.broadcast.send",defaultMessage:"broadcast message [MESSAGE]"}),inputs:{MESSAGE:{type:"text",default:a(t,{id:"extension.broadcast.message",defaultMessage:"hello"})}},python(e){this.definitions_.import_extension_broadcast="from extensions.broadcast import broadcast";let s="";if(this.STATEMENT_PREFIX)s+=this.injectId(this.STATEMENT_PREFIX,e);const n=this.valueToCode(e,"MESSAGE",this.ORDER_NONE)||'""';return s+=`broadcast.send(str(${n.replace(":","_")}))\n`,s}},{id:"received",text:a(t,{id:"extension.broadcast.received",defaultMessage:"received message"}),output:"string",python(){return this.definitions_.import_extension_broadcast="from extensions.broadcast import broadcast",["broadcast.get_message()\n",this.ORDER_FUNCTION_CALL]}},"---",{id:"whenReceivedNamed",text:a(t,{id:"extension.broadcast.whenReceivedNamed",defaultMessage:"when I receive named [NAME] message"}),hat:!0,inputs:{NAME:{type:"text",default:a(t,{id:"extension.broadcast.messageName",defaultMessage:"my"})}},python(e){this.definitions_.import_extension_broadcast="from extensions.broadcast import broadcast";const s=this.eventToCode("broadcast_received","target");return`@broadcast.when_received(str(${this.valueToCode(e,"NAME",this.ORDER_NONE)||'"default"'}), target)\n${s}`}},{id:"sendName",text:a(t,{id:"extension.broadcast.sendName",defaultMessage:"broadcast named [NAME] message [MESSAGE]"}),inputs:{NAME:{type:"text",default:a(t,{id:"extension.broadcast.messageName",defaultMessage:"say"})},MESSAGE:{type:"text",default:a(t,{id:"extension.broadcast.message",defaultMessage:"hello"})}},python(e){this.definitions_.import_extension_broadcast="from extensions.broadcast import broadcast";let s="";if(this.STATEMENT_PREFIX)s+=this.injectId(this.STATEMENT_PREFIX,e);const n=this.valueToCode(e,"NAME",this.ORDER_NONE)||'"default"',r=this.valueToCode(e,"MESSAGE",this.ORDER_NONE)||'""';return s+=`broadcast.send(str(${r}), name=str(${n}))\n`,s}},{id:"receivedNamed",text:a(t,{id:"extension.broadcast.receivedNamed",defaultMessage:"received named [NAME] message"}),output:"string",inputs:{NAME:{type:"text",default:a(t,{id:"extension.broadcast.messageName",defaultMessage:"say"})}},python(e){return this.definitions_.import_extension_broadcast="from extensions.broadcast import broadcast",[`broadcast.get_message(str(${this.valueToCode(e,"NAME",this.ORDER_NONE)||'"default"'}))\n`,this.ORDER_FUNCTION_CALL]}},"---",{id:"receivedIndex",text:a(t,{id:"extension.broadcast.receivedIndex",defaultMessage:"received message [INDEX]"}),inputs:{INDEX:{menu:"receivedParam"}},output:"string",python(e){return this.definitions_.import_extension_broadcast="from extensions.broadcast import broadcast",[`broadcast.get_message_info(str(${this.quote_(e.getFieldValue("INDEX")||"timestamp")}))\n`,this.ORDER_FUNCTION_CALL]}},{id:"receivedNamedIndex",text:a(t,{id:"extension.broadcast.receivedNameIndex",defaultMessage:"received named [NAME] message [INDEX]"}),inputs:{NAME:{type:"text",default:a(t,{id:"extension.broadcast.messageName",defaultMessage:"say"})},INDEX:{menu:"receivedParam"}},output:"string",python(e){this.definitions_.import_extension_broadcast="from extensions.broadcast import broadcast";const s=this.valueToCode(e,"NAME",this.ORDER_NONE)||'"default"';return[`broadcast.get_message_info(str(${this.quote_(e.getFieldValue("INDEX")||"timestamp")}), name=str(${s}))\n`,this.ORDER_FUNCTION_CALL]}},"---",{id:"setGroup",text:a(t,{id:"extension.broadcast.setGroup",defaultMessage:"set broadcast group [ID]"}),inputs:{ID:{type:"string",default:"1"}},python(e){this.definitions_.import_extension_broadcast="from extensions.broadcast import broadcast";let s="";if(this.STATEMENT_PREFIX)s+=this.injectId(this.STATEMENT_PREFIX,e);const n=this.valueToCode(e,"ID",this.ORDER_NONE)||"1";return s+=`broadcast.set_group(str(${n}))\n`,s}}],menus:{receivedParam:{type:"string",items:[[a(t,{id:"extension.broadcast.receivedTime",defaultMessage:"timestamp"}),"timestamp"],[a(t,{id:"extension.broadcast.receivedSerial",defaultMessage:"serial number"}),"serialnumber"],[a(t,{id:"extension.broadcast.receivedMac",defaultMessage:"mac"}),"mac"]]}},translations:i};export{b as default};
