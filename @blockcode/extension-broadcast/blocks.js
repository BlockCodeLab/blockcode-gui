import{Text as t} from"@blockcode/ui";var r={en:{"extension.broadcast.name":"Broadcast","extension.broadcast.setGroup":"set broadcast group [ID]","extension.broadcast.send":"broadcast message [MESSAGE]","extension.broadcast.sendName":"broadcast named [NAME] message [MESSAGE]","extension.broadcast.whenReceived":"when I receive message","extension.broadcast.whenReceivedNamed":"when I receive named [NAME] message [MESSAGE]","extension.broadcast.message":"hello","extension.broadcast.messageName":"say","extension.broadcast.received":"received message","extension.broadcast.receivedNamed":"received named [NAME] message","extension.broadcast.receivedIndex":"received message [INDEX]","extension.broadcast.receivedNameIndex":"received named [NAME] message [INDEX]","extension.broadcast.receivedTime":"timestamp","extension.broadcast.receivedSerial":"serial number"},"zh-Hans":{"extension.broadcast.name":"\u65E0\u7EBF\u5E7F\u64AD","extension.broadcast.setGroup":"\u5C06\u5E7F\u64AD\u7EC4\u53F7\u8BBE\u4E3A [ID]","extension.broadcast.send":"\u5E7F\u64AD\u6D88\u606F [MESSAGE]","extension.broadcast.sendName":"\u5E7F\u64AD\u547D\u540D\u4E3A [NAME] \u7684\u6D88\u606F [MESSAGE]","extension.broadcast.whenReceived":"\u5F53\u63A5\u6536\u5230\u6D88\u606F","extension.broadcast.whenReceivedNamed":"\u5F53\u63A5\u6536\u5230\u547D\u540D\u4E3A [NAME] \u7684\u6D88\u606F","extension.broadcast.message":"\u4F60\u597D","extension.broadcast.messageName":"\u95EE\u5019","extension.broadcast.received":"\u6D88\u606F","extension.broadcast.receivedNamed":"\u547D\u540D\u4E3A [NAME] \u7684\u6D88\u606F","extension.broadcast.receivedIndex":"\u6D88\u606F\u7684 [INDEX]","extension.broadcast.receivedNameIndex":"\u547D\u540D\u4E3A [NAME] \u6D88\u606F\u7684 [INDEX]","extension.broadcast.receivedTime":"\u65F6\u95F4\u6233","extension.broadcast.receivedSerial":"\u5E8F\u5217\u53F7"}};var o="./assets/icon-92590a8e45be2214.svg";var d="./assets/broadcast-95a2db30959d1538.py";import{jsx as s} from"preact/jsx-runtime";var b={iconURI:o,name:s(t,{id:"extension.broadcast.name",defaultMessage:"Broadcast"}),files:[{name:"broadcast",type:"text/x-python",uri:d}],blocks:[{id:"setGroup",text:s(t,{id:"extension.broadcast.setGroup",defaultMessage:"set broadcast group [ID]"}),inputs:{ID:{type:"number",default:1}},python(e){this.definitions_.import_extension_broadcast="from extensions.broadcast import broadcast";let a="";if(this.STATEMENT_PREFIX)a+=this.injectId(this.STATEMENT_PREFIX,e);const n=this.valueToCode(e,"ID",this.ORDER_NONE)||1;return a+=`broadcast.set_group(num(${n}))\n`,a}},"---",{id:"whenReceived",text:s(t,{id:"extension.broadcast.whenReceived",defaultMessage:"when I receive message"}),hat:!0,python(){return this.definitions_.import_extension_broadcast="from extensions.broadcast import broadcast",`${this.hatToCode("broadcast_received","target")}broadcast.when_received("default", ${this.HAT_FUNCTION_PLACEHOLDER}, target)\n`}},{id:"send",text:s(t,{id:"extension.broadcast.send",defaultMessage:"broadcast message [MESSAGE]"}),inputs:{MESSAGE:{type:"text",default:s(t,{id:"extension.broadcast.message",defaultMessage:"hello"})}},python(e){this.definitions_.import_extension_broadcast="from extensions.broadcast import broadcast";let a="";if(this.STATEMENT_PREFIX)a+=this.injectId(this.STATEMENT_PREFIX,e);const n=this.valueToCode(e,"MESSAGE",this.ORDER_NONE)||'""';return a+=`broadcast.send(str(${n}))\n`,a}},{id:"received",text:s(t,{id:"extension.broadcast.received",defaultMessage:"received message"}),output:"string",python(){return this.definitions_.import_extension_broadcast="from extensions.broadcast import broadcast",["broadcast.get_message()\n",this.ORDER_FUNCTION_CALL]}},"---",{id:"whenReceivedNamed",text:s(t,{id:"extension.broadcast.whenReceivedNamed",defaultMessage:"when I receive named [NAME] message"}),hat:!0,inputs:{NAME:{type:"text",default:s(t,{id:"extension.broadcast.messageName",defaultMessage:"my"})}},python(e){this.definitions_.import_extension_broadcast="from extensions.broadcast import broadcast";const a=this.hatToCode("broadcast_received","target"),n=this.valueToCode(e,"NAME",this.ORDER_NONE)||'"default"';return`${a}broadcast.when_received(str(${n}), ${this.HAT_FUNCTION_PLACEHOLDER}, target)\n`}},{id:"sendName",text:s(t,{id:"extension.broadcast.sendName",defaultMessage:"broadcast named [NAME] message [MESSAGE]"}),inputs:{NAME:{type:"text",default:s(t,{id:"extension.broadcast.messageName",defaultMessage:"say"})},MESSAGE:{type:"text",default:s(t,{id:"extension.broadcast.message",defaultMessage:"hello"})}},python(e){this.definitions_.import_extension_broadcast="from extensions.broadcast import broadcast";let a="";if(this.STATEMENT_PREFIX)a+=this.injectId(this.STATEMENT_PREFIX,e);const n=this.valueToCode(e,"NAME",this.ORDER_NONE)||'"default"',i=this.valueToCode(e,"MESSAGE",this.ORDER_NONE)||'""';return a+=`broadcast.send(str(${i}), name=str(${n}))\n`,a}},{id:"receivedNamed",text:s(t,{id:"extension.broadcast.receivedNamed",defaultMessage:"received named [NAME] message"}),output:"string",inputs:{NAME:{type:"text",default:s(t,{id:"extension.broadcast.messageName",defaultMessage:"say"})}},python(e){return this.definitions_.import_extension_broadcast="from extensions.broadcast import broadcast",[`broadcast.get_message(str(${this.valueToCode(e,"NAME",this.ORDER_NONE)||'"default"'}))\n`,this.ORDER_FUNCTION_CALL]}},"---",{id:"receivedIndex",text:s(t,{id:"extension.broadcast.receivedIndex",defaultMessage:"received message [INDEX]"}),output:"number",inputs:{INDEX:{type:"string",default:"timestamp",menu:[[s(t,{id:"extension.broadcast.receivedTime",defaultMessage:""}),"timestamp"],[s(t,{id:"extension.broadcast.receivedSerial",defaultMessage:""}),"serialnumber"]]}},python(e){return this.definitions_.import_extension_broadcast="from extensions.broadcast import broadcast",[`broadcast.get_message_info(str(${this.quote_(e.getFieldValue("INDEX")||"timestamp")}))\n`,this.ORDER_FUNCTION_CALL]}},{id:"receivedNamedIndex",text:s(t,{id:"extension.broadcast.receivedNameIndex",defaultMessage:"received named [NAME] message [INDEX]"}),output:"number",inputs:{NAME:{type:"text",default:s(t,{id:"extension.broadcast.messageName",defaultMessage:"say"})},INDEX:{type:"string",default:"timestamp",menu:[[s(t,{id:"extension.broadcast.receivedTime",defaultMessage:""}),"timestamp"],[s(t,{id:"extension.broadcast.receivedSerial",defaultMessage:""}),"serialnumber"]]}},python(e){this.definitions_.import_extension_broadcast="from extensions.broadcast import broadcast";const a=this.valueToCode(e,"NAME",this.ORDER_NONE)||'"default"';return[`broadcast.get_message_info(str(${this.quote_(e.getFieldValue("INDEX")||"timestamp")}), name=str(${a}))\n`,this.ORDER_FUNCTION_CALL]}}],translations:r};export{b as default};
